<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WXC8R75DEN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-WXC8R75DEN');
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Language" content="zh-CN">
    <title>Learn Julia in Y Minutes</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto+Slab:wght@100..900&family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/screen.css">
    <link rel="stylesheet" href="/css/light.css">
    <link rel="stylesheet" href="/css/dark.css">

    <link rel="canonical" href="https://learnxinyminutes.com/zh-cn/julia/">
    <script>
      localStorage.removeItem("lxiym_theme");
    </script>
  </head>
  <body>
    <div class="container">
      <div class="share">
        <span class="sharemsg">
          <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fzh-cn%2Fjulia%2F&amp;text=Y%E5%88%86%E9%92%9F%E9%80%9F%E6%88%90X%2C+%E5%85%B6%E4%B8%AD+X%3DJulia">
            分享此页
          </a>
        </span>
        <span class='st_facebook_large' displayText='Facebook'></span>
        <span class='st_twitter_large' displayText='Tweet'></span>
      </div>
      <h1><a href="/">Y分钟速成X</a></h1>
      <h2>其中 X=Julia</h2>
      <p class="filelink">
        源代码下载：
        <a href="/zh-cn/files/learn-julia.jl">learn-julia.jl</a>
      </p>
      <div id="doc">
<p>Julia 是一种新的同像函数式编程语言(homoiconic functional language)，它专注于科学计算领域。
虽然拥有同像宏(homoiconic macros)、一级函数(first-class functions)和底层控制等全部功能，但 Julia 依旧和 Python 一样易于学习和使用。</p>
<p>示例代码基于 Julia 1.0.0</p>
<div class="highlight"><pre lang="julia"><span class="c"># 单行注释只需要一个井号「#」</span>
<span class="cm">#= 多行注释</span>
<span class="cm">   只需要以「#=」开始「=#」结束</span>
<span class="cm">   还可以嵌套.</span>
<span class="cm">=#</span>

<span class="c">####################################################</span>
<span class="c">## 1. 原始类型与操作符</span>
<span class="c">####################################################</span>

<span class="c"># Julia 中一切皆为表达式</span>

<span class="c"># 这是一些基本数字类型</span>
<span class="n">typeof</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w">       </span><span class="c"># =&gt; Int64</span>
<span class="n">typeof</span><span class="p">(</span><span class="mf">3.2</span><span class="p">)</span><span class="w">     </span><span class="c"># =&gt; Float64</span>
<span class="n">typeof</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="nb">im</span><span class="p">)</span><span class="w"> </span><span class="c"># =&gt; Complex{Int64}</span>
<span class="n">typeof</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; Rational{Int64}</span>

<span class="c"># 支持所有的普通中缀操作符</span>
<span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">      </span><span class="c"># =&gt; 2</span>
<span class="mi">8</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">      </span><span class="c"># =&gt; 7</span>
<span class="mi">10</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">     </span><span class="c"># =&gt; 20</span>
<span class="mi">35</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">5</span><span class="w">     </span><span class="c"># =&gt; 7.0</span>
<span class="mi">10</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w">     </span><span class="c"># =&gt; 5.0  # 整数除法总是返回浮点数</span>
<span class="n">div</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; 2    # 使用 div 可以获得整除的结果</span>
<span class="mi">5</span><span class="w"> </span><span class="o">\</span><span class="w"> </span><span class="mi">35</span><span class="w">     </span><span class="c"># =&gt; 7.0</span>
<span class="mi">2</span><span class="o">^</span><span class="mi">2</span><span class="w">        </span><span class="c"># =&gt; 4    # 幂运算，不是异或 (xor)</span>
<span class="mi">12</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">10</span><span class="w">    </span><span class="c"># =&gt; 2</span>

<span class="c"># 用括号提高优先级</span>
<span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="c"># =&gt; 8</span>

<span class="c"># 位操作符</span>
<span class="o">~</span><span class="mi">2</span><span class="w">         </span><span class="c"># =&gt; -3 # 按位非 (not)</span>
<span class="mi">3</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mi">5</span><span class="w">      </span><span class="c"># =&gt; 1  # 按位与 (and)</span>
<span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">4</span><span class="w">      </span><span class="c"># =&gt; 6  # 按位或 (or)</span>
<span class="n">xor</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; 6  # 按位异或 (xor)</span>
<span class="mi">2</span><span class="w"> </span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w">    </span><span class="c"># =&gt; 1  # 逻辑右移</span>
<span class="mi">2</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w">     </span><span class="c"># =&gt; 1  # 算术右移</span>
<span class="mi">2</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">1</span><span class="w">     </span><span class="c"># =&gt; 4  # 逻辑/算术左移</span>

<span class="c"># 可以用函数 bitstring 查看二进制数。</span>
<span class="n">bitstring</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span>
<span class="c"># =&gt; &quot;0000000000000000000000000000000000000000000000000011000000111001&quot;</span>
<span class="n">bitstring</span><span class="p">(</span><span class="mf">12345.0</span><span class="p">)</span>
<span class="c"># =&gt; &quot;0100000011001000000111001000000000000000000000000000000000000000&quot;</span>

<span class="c"># 布尔值是原始类型</span>
<span class="nb">true</span>
<span class="nb">false</span>

<span class="c"># 布尔操作符</span>
<span class="o">!</span><span class="nb">true</span><span class="w">   </span><span class="c"># =&gt; false</span>
<span class="o">!</span><span class="nb">false</span><span class="w">  </span><span class="c"># =&gt; true</span>
<span class="mi">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="c"># =&gt; true</span>
<span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="c"># =&gt; false</span>
<span class="mi">1</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="c"># =&gt; false</span>
<span class="mi">2</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="c"># =&gt; true</span>
<span class="mi">1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="w">  </span><span class="c"># =&gt; true</span>
<span class="mi">1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w">  </span><span class="c"># =&gt; false</span>
<span class="mi">2</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="c"># =&gt; true</span>
<span class="mi">2</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="c"># =&gt; true</span>

<span class="c"># 链式比较</span>
<span class="mi">1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="c"># =&gt; true</span>
<span class="mi">2</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="c"># =&gt; false</span>

<span class="c"># 字符串可以由「&quot;」创建</span>
<span class="s">&quot;This is a string.&quot;</span>

<span class="c"># 字符字面量可用「&#39;」创建</span>
<span class="sc">&#39;a&#39;</span>

<span class="c"># 字符串使用 UTF-8 编码</span>
<span class="c"># 可以像取数组取值一样用 index 取出对应字符</span>
<span class="n">ascii</span><span class="p">(</span><span class="s">&quot;This is a string&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="c"># =&gt; &#39;T&#39;: ASCII/Unicode U+0054 (category Lu: Letter, uppercase)</span>
<span class="c"># Julia 的 index 从 1 开始 :(</span>
<span class="c"># 但只有在字符串仅由 ASCII 字符构成时，字符串才能够被安全的引索</span>
<span class="c"># 因此建议使用遍历器 (map, for loops, 等)</span>

<span class="c"># $ 可用于字符插值:</span>
<span class="s">&quot;2 + 2 = </span><span class="si">$</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="s">&quot;</span><span class="w"> </span><span class="c"># =&gt; &quot;2 + 2 = 4&quot;</span>
<span class="c"># 可以将任何 Julia 表达式放入括号。</span>

<span class="c"># 另一种输出格式化字符串的方法是使用标准库 Printf 中的 Printf 宏</span>
<span class="k">using</span><span class="w"> </span><span class="n">Printf</span>
<span class="nd">@printf</span><span class="w"> </span><span class="s">&quot;</span><span class="si">%d</span><span class="s"> is less than </span><span class="si">%f</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="mf">4.5</span><span class="w"> </span><span class="mf">5.3</span><span class="w">  </span><span class="c"># =&gt; 5 is less than 5.300000</span>

<span class="c"># 打印字符串很容易</span>
<span class="n">println</span><span class="p">(</span><span class="s">&quot;I&#39;m Julia. Nice to meet you!&quot;</span><span class="p">)</span><span class="w"> </span><span class="c"># =&gt; I&#39;m Julia. Nice to meet you!</span>

<span class="c"># 字符串可以按字典序进行比较</span>
<span class="s">&quot;good&quot;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="s">&quot;bye&quot;</span><span class="w"> </span><span class="c"># =&gt; true</span>
<span class="s">&quot;good&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;good&quot;</span><span class="w"> </span><span class="c"># =&gt; true</span>
<span class="s">&quot;1 + 2 = 3&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;1 + 2 = </span><span class="si">$</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="s">&quot;</span><span class="w"> </span><span class="c"># =&gt; true</span>

<span class="c">####################################################</span>
<span class="c">## 2. 变量与集合</span>
<span class="c">####################################################</span>

<span class="c"># 给变量赋值就是声明变量</span>
<span class="n">some_var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="c"># =&gt; 5</span>
<span class="n">some_var</span><span class="w"> </span><span class="c"># =&gt; 5</span>

<span class="c"># 访问未声明变量会抛出异常</span>
<span class="k">try</span>
<span class="w">    </span><span class="n">some_other_var</span><span class="w"> </span><span class="c"># =&gt; ERROR: UndefVarError: some_other_var not defined</span>
<span class="k">catch</span><span class="w"> </span><span class="n">e</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="k">end</span>

<span class="c"># 变量名必须以下划线或字母开头</span>
<span class="c"># 之后任何字母，数字，下划线，叹号都是合法的。</span>
<span class="n">SomeOtherVar123!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="c"># =&gt; 6</span>

<span class="c"># 甚至可以用 unicode 字符</span>
<span class="n">☃</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="c"># =&gt; 8</span>
<span class="c"># 用数学符号非常方便</span>
<span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">π</span><span class="w"> </span><span class="c"># =&gt; 6.283185307179586</span>

<span class="c"># 注意 Julia 的命名规约:</span>
<span class="c">#</span>
<span class="c"># * 名称可以用下划线「_」分割。</span>
<span class="c">#   不过一般不推荐使用下划线，除非不用变量名就会变得难于理解</span>
<span class="c">#</span>
<span class="c"># * 类型名以大写字母开头，单词以 CamelCase 方式连接，无下划线。</span>
<span class="c">#</span>
<span class="c"># * 函数与宏的名字小写，无下划线。</span>
<span class="c">#</span>
<span class="c"># * 会改变输入的函数名末位为「!」。</span>
<span class="c">#   这类函数有时被称为 mutating functions 或 in-place functions.</span>

<span class="c"># 数组存储一列值，index 从 1 开始</span>
<span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">Int64</span><span class="p">[]</span><span class="w">  </span><span class="c"># =&gt; 0-element Array{Int64,1}</span>

<span class="c"># 一维数组可以以逗号分隔值的方式声明</span>
<span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">]</span><span class="w">  </span><span class="c"># =&gt; 3-element Array{Int64,1}: [4, 5, 6]</span>
<span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">4</span><span class="p">;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="mi">6</span><span class="p">]</span><span class="w">  </span><span class="c"># =&gt; 3-element Array{Int64,1}: [4, 5, 6]</span>
<span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">    </span><span class="c"># =&gt; 4</span>
<span class="n">b</span><span class="p">[</span><span class="k">end</span><span class="p">]</span><span class="w">  </span><span class="c"># =&gt; 6</span>

<span class="c"># 二维数组以分号分隔维度</span>
<span class="n">matrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">]</span><span class="w">  </span><span class="c"># =&gt; 2×2 Array{Int64,2}: [1 2; 3 4]</span>

<span class="c"># 指定数组的类型</span>
<span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">Int8</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">]</span><span class="w">  </span><span class="c"># =&gt; 3-element Array{Int8,1}: [4, 5, 6]</span>

<span class="c"># 使用 push! 和 append! 往数组末尾添加元素</span>
<span class="n">push!</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">    </span><span class="c"># =&gt; [1]</span>
<span class="n">push!</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">    </span><span class="c"># =&gt; [1,2]</span>
<span class="n">push!</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w">    </span><span class="c"># =&gt; [1,2,4]</span>
<span class="n">push!</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">    </span><span class="c"># =&gt; [1,2,4,3]</span>
<span class="n">append!</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; [1,2,4,3,4,5,6]</span>

<span class="c"># 用 pop 弹出尾部的元素</span>
<span class="n">pop!</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; 6</span>
<span class="n">b</span><span class="w"> </span><span class="c"># =&gt; [4,5]</span>

<span class="c"># 再放回去</span>
<span class="n">push!</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; [4,5,6]</span>
<span class="n">b</span><span class="w"> </span><span class="c"># =&gt; [4,5,6]</span>

<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="c"># =&gt; 1 #  永远记住 Julia 的引索从 1 开始！而不是 0！</span>

<span class="c"># 用 end 可以直接取到最后索引。它可以用在任何索引表达式中</span>
<span class="n">a</span><span class="p">[</span><span class="k">end</span><span class="p">]</span><span class="w"> </span><span class="c"># =&gt; 6</span>

<span class="c"># 数组还支持 popfirst! 和 pushfirst!</span>
<span class="n">popfirst!</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; 1</span>
<span class="n">a</span><span class="w"> </span><span class="c"># =&gt; [2,4,3,4,5,6]</span>
<span class="n">pushfirst!</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; [7,2,4,3,4,5,6]</span>
<span class="n">a</span><span class="w"> </span><span class="c"># =&gt; [7,2,4,3,4,5,6]</span>

<span class="c"># 以叹号结尾的函数名表示它会改变参数的值</span>
<span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span><span class="w">  </span><span class="c"># =&gt; 3-element Array{Int64,1}: [5,4,6]</span>
<span class="n">sort</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="w">   </span><span class="c"># =&gt; [4,5,6]</span>
<span class="n">arr</span><span class="w">         </span><span class="c"># =&gt; [5,4,6]</span>
<span class="n">sort!</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; [4,5,6]</span>
<span class="n">arr</span><span class="w">         </span><span class="c"># =&gt; [4,5,6]</span>

<span class="c"># 数组越界会抛出 BoundsError</span>
<span class="k">try</span>
<span class="w">    </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="w">    </span><span class="c"># =&gt; ERROR: BoundsError: attempt to access 7-element Array{Int64,1} at</span>
<span class="w">    </span><span class="c"># index [0]</span>
<span class="w">    </span><span class="c"># =&gt; Stacktrace:</span>
<span class="w">    </span><span class="c"># =&gt;  [1] getindex(::Array{Int64,1}, ::Int64) at .\array.jl:731</span>
<span class="w">    </span><span class="c"># =&gt;  [2] top-level scope at none:0</span>
<span class="w">    </span><span class="c"># =&gt;  [3] ...</span>
<span class="w">    </span><span class="c"># =&gt; in expression starting at ...\LearnJulia.jl:203</span>
<span class="w">    </span><span class="n">a</span><span class="p">[</span><span class="k">end</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span>
<span class="w">    </span><span class="c"># =&gt; ERROR: BoundsError: attempt to access 7-element Array{Int64,1} at</span>
<span class="w">    </span><span class="c"># index [8]</span>
<span class="w">    </span><span class="c"># =&gt; Stacktrace:</span>
<span class="w">    </span><span class="c"># =&gt;  [1] getindex(::Array{Int64,1}, ::Int64) at .\array.jl:731</span>
<span class="w">    </span><span class="c"># =&gt;  [2] top-level scope at none:0</span>
<span class="w">    </span><span class="c"># =&gt;  [3] ...</span>
<span class="w">    </span><span class="c"># =&gt; in expression starting at ...\LearnJulia.jl:211</span>
<span class="k">catch</span><span class="w"> </span><span class="n">e</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="k">end</span>

<span class="c"># 报错时错误会指出出错的文件位置以及行号，标准库也一样</span>
<span class="c"># 你可以在 Julia 安装目录下的 share/julia 文件夹里找到这些标准库</span>

<span class="c"># 可以用 range 初始化数组</span>
<span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">;]</span><span class="w">  </span><span class="c"># =&gt; 5-element Array{Int64,1}: [1,2,3,4,5]</span>
<span class="c"># 注意！分号不可省略</span>
<span class="n">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">:</span><span class="mi">5</span><span class="p">]</span><span class="w">  </span><span class="c"># =&gt; 1-element Array{UnitRange{Int64},1}: [1:5]</span>

<span class="c"># 可以切割数组</span>
<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="o">:</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="c"># =&gt; [1, 2, 3]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="k">end</span><span class="p">]</span><span class="w"> </span><span class="c"># =&gt; [2, 3, 4, 5]</span>

<span class="c"># 用 splice! 切割原数组</span>
<span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">splice!</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="c"># =&gt; 4</span>
<span class="n">arr</span><span class="w"> </span><span class="c"># =&gt; [3,5]</span>

<span class="c"># 用 append! 连接数组</span>
<span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">append!</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="c"># =&gt; [1, 2, 3, 4, 5, 1, 2, 3]</span>
<span class="n">a</span><span class="w"> </span><span class="c"># =&gt; [1, 2, 3, 4, 5, 1, 2, 3]</span>

<span class="c"># 检查元素是否在数组中</span>
<span class="k">in</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="c"># =&gt; true</span>

<span class="c"># 用 length 获得数组长度</span>
<span class="n">length</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="c"># =&gt; 8</span>

<span class="c"># 元组(Tuples)是不可变的</span>
<span class="n">tup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; (1,2,3)</span>
<span class="n">typeof</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span><span class="w"> </span><span class="c"># =&gt; Tuple{Int64,Int64,Int64}</span>
<span class="n">tup</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="c"># =&gt; 1</span>
<span class="k">try</span>
<span class="w">    </span><span class="n">tup</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span>
<span class="w">    </span><span class="c"># =&gt; ERROR: MethodError: no method matching</span>
<span class="w">    </span><span class="c"># setindex!(::Tuple{Int64,Int64,Int64}, ::Int64, ::Int64)</span>
<span class="k">catch</span><span class="w"> </span><span class="n">e</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="k">end</span>

<span class="c"># 大多数组的函数同样支持元组</span>
<span class="n">length</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span><span class="w"> </span><span class="c"># =&gt; 3</span>
<span class="n">tup</span><span class="p">[</span><span class="mi">1</span><span class="o">:</span><span class="mi">2</span><span class="p">]</span><span class="w">    </span><span class="c"># =&gt; (1,2)</span>
<span class="k">in</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">tup</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; true</span>

<span class="c"># 可以将元组的元素解包赋给变量</span>
<span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; (1,2,3)</span>
<span class="n">a</span><span class="w"> </span><span class="c"># =&gt; 1</span>
<span class="n">b</span><span class="w"> </span><span class="c"># =&gt; 2</span>
<span class="n">c</span><span class="w"> </span><span class="c"># =&gt; 3</span>

<span class="c"># 不用括号也可以</span>
<span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="w">  </span><span class="c"># =&gt; (4,5,6)</span>
<span class="n">d</span><span class="w"> </span><span class="c"># =&gt; 4</span>
<span class="n">e</span><span class="w"> </span><span class="c"># =&gt; 5</span>
<span class="n">f</span><span class="w"> </span><span class="c"># =&gt; 6</span>

<span class="c"># 单元素 tuple 不等于其元素值</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c"># =&gt; false</span>
<span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="c"># =&gt; true</span>

<span class="c"># 交换值</span>
<span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="w">  </span><span class="c"># =&gt; (5,4)</span>
<span class="n">d</span><span class="w"> </span><span class="c"># =&gt; 5</span>
<span class="n">e</span><span class="w"> </span><span class="c"># =&gt; 4</span>


<span class="c"># 字典用于储存映射(mappings)（键值对）</span>
<span class="n">empty_dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">Dict</span><span class="p">()</span><span class="w">  </span><span class="c"># =&gt; Dict{Any,Any} with 0 entries</span>

<span class="c"># 也可以用字面量创建字典</span>
<span class="n">filled_dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">Dict</span><span class="p">(</span><span class="s">&quot;one&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;two&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;three&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="c"># =&gt; Dict{String,Int64} with 3 entries:</span>
<span class="c"># =&gt;  &quot;two&quot; =&gt; 2, &quot;one&quot; =&gt; 1, &quot;three&quot; =&gt; 3</span>

<span class="c"># 用 [] 获得键值</span>
<span class="n">filled_dict</span><span class="p">[</span><span class="s">&quot;one&quot;</span><span class="p">]</span><span class="w"> </span><span class="c"># =&gt; 1</span>

<span class="c"># 获得所有键</span>
<span class="n">keys</span><span class="p">(</span><span class="n">filled_dict</span><span class="p">)</span>
<span class="c"># =&gt; Base.KeySet for a Dict{String,Int64} with 3 entries. Keys:</span>
<span class="c"># =&gt;  &quot;two&quot;, &quot;one&quot;, &quot;three&quot;</span>
<span class="c"># 注意，键的顺序不是插入时的顺序</span>

<span class="c"># 获得所有值</span>
<span class="n">values</span><span class="p">(</span><span class="n">filled_dict</span><span class="p">)</span>
<span class="c"># =&gt; Base.ValueIterator for a Dict{String,Int64} with 3 entries. Values:</span>
<span class="c"># =&gt;  2, 1, 3</span>
<span class="c"># 注意，值的顺序也一样</span>

<span class="c"># 用 in 检查键值是否已存在，用 haskey 检查键是否存在</span>
<span class="k">in</span><span class="p">((</span><span class="s">&quot;one&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">filled_dict</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; true</span>
<span class="k">in</span><span class="p">((</span><span class="s">&quot;two&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="p">),</span><span class="w"> </span><span class="n">filled_dict</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; false</span>
<span class="n">haskey</span><span class="p">(</span><span class="n">filled_dict</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;one&quot;</span><span class="p">)</span><span class="w">     </span><span class="c"># =&gt; true</span>
<span class="n">haskey</span><span class="p">(</span><span class="n">filled_dict</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">         </span><span class="c"># =&gt; false</span>

<span class="c"># 获取不存在的键的值会抛出异常</span>
<span class="k">try</span>
<span class="w">    </span><span class="n">filled_dict</span><span class="p">[</span><span class="s">&quot;four&quot;</span><span class="p">]</span><span class="w">  </span><span class="c"># =&gt; ERROR: KeyError: key &quot;four&quot; not found</span>
<span class="k">catch</span><span class="w"> </span><span class="n">e</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="k">end</span>

<span class="c"># 使用 get 可以提供默认值来避免异常</span>
<span class="c"># get(dictionary,key,default_value)</span>
<span class="n">get</span><span class="p">(</span><span class="n">filled_dict</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;one&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w">   </span><span class="c"># =&gt; 1</span>
<span class="n">get</span><span class="p">(</span><span class="n">filled_dict</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;four&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; 4</span>

<span class="c"># Set 表示无序不可重复的值的集合</span>
<span class="n">empty_set</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">Set</span><span class="p">()</span><span class="w">  </span><span class="c"># =&gt; Set(Any[])</span>
<span class="c"># 初始化一个带初值的 Set</span>
<span class="n">filled_set</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">Set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">])</span><span class="w">  </span><span class="c"># =&gt; Set([4, 2, 3, 1])</span>

<span class="c"># 新增值</span>
<span class="n">push!</span><span class="p">(</span><span class="n">filled_set</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; Set([4, 2, 3, 5, 1])</span>

<span class="c"># 检查 Set 中是否存在某值</span>
<span class="k">in</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">filled_set</span><span class="p">)</span><span class="w">   </span><span class="c"># =&gt; true</span>
<span class="k">in</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">filled_set</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; false</span>

<span class="c"># 交集，并集，差集</span>
<span class="n">other_set</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">Set</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">])</span><span class="w">         </span><span class="c"># =&gt; Set([4, 3, 5, 6])</span>
<span class="n">intersect</span><span class="p">(</span><span class="n">filled_set</span><span class="p">,</span><span class="w"> </span><span class="n">other_set</span><span class="p">)</span><span class="w">      </span><span class="c"># =&gt; Set([4, 3, 5])</span>
<span class="n">union</span><span class="p">(</span><span class="n">filled_set</span><span class="p">,</span><span class="w"> </span><span class="n">other_set</span><span class="p">)</span><span class="w">          </span><span class="c"># =&gt; Set([4, 2, 3, 5, 6, 1])</span>
<span class="n">setdiff</span><span class="p">(</span><span class="kt">Set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]),</span><span class="w"> </span><span class="kt">Set</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">]))</span><span class="w"> </span><span class="c"># =&gt; Set([4, 1])</span>

<span class="c">####################################################</span>
<span class="c">## 3. 控制语句</span>
<span class="c">####################################################</span>

<span class="c"># 声明一个变量</span>
<span class="n">some_var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>

<span class="c"># 这是一个 if 语句块，其中的缩进不是必须的</span>
<span class="k">if</span><span class="w"> </span><span class="n">some_var</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;some_var is totally bigger than 10.&quot;</span><span class="p">)</span>
<span class="k">elseif</span><span class="w"> </span><span class="n">some_var</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="w">    </span><span class="c"># elseif 是可选的</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;some_var is smaller than 10.&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="w">                    </span><span class="c"># else 也是可选的</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;some_var is indeed 10.&quot;</span><span class="p">)</span>
<span class="k">end</span>
<span class="c"># =&gt; some_var is smaller than 10.</span>


<span class="c"># For 循环遍历</span>
<span class="c"># 可迭代的类型包括：Range, Array, Set, Dict 和 AbstractString</span>
<span class="k">for</span><span class="w"> </span><span class="n">animal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;dog&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cat&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mouse&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;</span><span class="si">$animal</span><span class="s"> is a mammal&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="c"># 你可以用 $ 将变量或表达式插入字符串中</span>
<span class="k">end</span>
<span class="c"># =&gt; dog is a mammal</span>
<span class="c"># =&gt; cat is a mammal</span>
<span class="c"># =&gt; mouse is a mammal</span>

<span class="c"># 你也可以不用「=」而使用「in」</span>
<span class="k">for</span><span class="w"> </span><span class="n">animal</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;dog&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cat&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mouse&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;</span><span class="si">$animal</span><span class="s"> is a mammal&quot;</span><span class="p">)</span>
<span class="k">end</span>
<span class="c"># =&gt; dog is a mammal</span>
<span class="c"># =&gt; cat is a mammal</span>
<span class="c"># =&gt; mouse is a mammal</span>

<span class="k">for</span><span class="w"> </span><span class="n">pair</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">Dict</span><span class="p">(</span><span class="s">&quot;dog&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;mammal&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cat&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;mammal&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mouse&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;mammal&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">from</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pair</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;</span><span class="si">$from</span><span class="s"> is a </span><span class="si">$to</span><span class="s">&quot;</span><span class="p">)</span>
<span class="k">end</span>
<span class="c"># =&gt; mouse is a mammal</span>
<span class="c"># =&gt; cat is a mammal</span>
<span class="c"># =&gt; dog is a mammal</span>
<span class="c"># 注意！这里的输出顺序和上面的不同</span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">Dict</span><span class="p">(</span><span class="s">&quot;dog&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;mammal&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cat&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;mammal&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mouse&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;mammal&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;</span><span class="si">$k</span><span class="s"> is a </span><span class="si">$v</span><span class="s">&quot;</span><span class="p">)</span>
<span class="k">end</span>
<span class="c"># =&gt; mouse is a mammal</span>
<span class="c"># =&gt; cat is a mammal</span>
<span class="c"># =&gt; dog is a mammal</span>

<span class="c"># While 循环</span>
<span class="k">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">4</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="w">        </span><span class="n">x</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="c"># x = x + 1 的缩写</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">end</span>
<span class="c"># =&gt; 0</span>
<span class="c"># =&gt; 1</span>
<span class="c"># =&gt; 2</span>
<span class="c"># =&gt; 3</span>

<span class="c"># 用 try/catch 处理异常</span>
<span class="k">try</span>
<span class="w">    </span><span class="n">error</span><span class="p">(</span><span class="s">&quot;help&quot;</span><span class="p">)</span>
<span class="k">catch</span><span class="w"> </span><span class="n">e</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;caught it </span><span class="si">$e</span><span class="s">&quot;</span><span class="p">)</span>
<span class="k">end</span>
<span class="c"># =&gt; caught it ErrorException(&quot;help&quot;)</span>

<span class="c">####################################################</span>
<span class="c">## 4. 函数</span>
<span class="c">####################################################</span>

<span class="c"># 关键字 function 用于定义函数</span>
<span class="c"># function name(arglist)</span>
<span class="c">#   body...</span>
<span class="c"># end</span>
<span class="k">function</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;x is </span><span class="si">$x</span><span class="s"> and y is </span><span class="si">$y</span><span class="s">&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="c"># 函数会返回最后一行的值</span>
<span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span>
<span class="k">end</span>

<span class="n">add</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>
<span class="c"># =&gt; x is 5 and y is 6</span>
<span class="c"># =&gt; 11</span>

<span class="c"># 更紧凑的定义函数</span>
<span class="n">f_add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="w">  </span><span class="c"># =&gt; f_add (generic function with 1 method)</span>
<span class="n">f_add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; 7</span>

<span class="c"># 函数可以将多个值作为元组返回</span>
<span class="n">fn</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="c"># =&gt; fn (generic function with 1 method)</span>
<span class="n">fn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; (7, -1)</span>

<span class="c"># 还可以定义接收可变长参数的函数</span>
<span class="k">function</span><span class="w"> </span><span class="n">varargs</span><span class="p">(</span><span class="n">args</span><span class="o">...</span><span class="p">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">args</span>
<span class="w">    </span><span class="c"># 使用 return 可以在函数内的任何地方返回</span>
<span class="k">end</span>
<span class="c"># =&gt; varargs (generic function with 1 method)</span>

<span class="n">varargs</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="c"># =&gt; (1,2,3)</span>

<span class="c"># 省略号「...」称为 splat</span>
<span class="c"># 刚刚用在了函数定义中</span>
<span class="c"># 在调用函数时也可以使用它，此时它会把数组或元组解包为参数列表</span>
<span class="n">add</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span><span class="o">...</span><span class="p">)</span><span class="w">  </span><span class="c"># 等价于 add(5,6)</span>

<span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; (5,6)</span>
<span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="o">...</span><span class="p">)</span><span class="w">  </span><span class="c"># 等价于 add(5,6)</span>

<span class="c"># 可定义带可选参数的函数</span>
<span class="k">function</span><span class="w"> </span><span class="n">defaults</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;</span><span class="si">$a</span><span class="s"> </span><span class="si">$b</span><span class="s"> and </span><span class="si">$x</span><span class="s"> </span><span class="si">$y</span><span class="s">&quot;</span>
<span class="k">end</span>
<span class="c"># =&gt; defaults (generic function with 3 methods)</span>

<span class="n">defaults</span><span class="p">(</span><span class="sc">&#39;h&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;g&#39;</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; &quot;h g and 5 6&quot;</span>
<span class="n">defaults</span><span class="p">(</span><span class="sc">&#39;h&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;g&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;j&#39;</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; &quot;h g and j 6&quot;</span>
<span class="n">defaults</span><span class="p">(</span><span class="sc">&#39;h&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;g&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;j&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;k&#39;</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; &quot;h g and j k&quot;</span>
<span class="k">try</span>
<span class="w">    </span><span class="n">defaults</span><span class="p">(</span><span class="sc">&#39;h&#39;</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; ERROR: MethodError: no method matching defaults(::Char)</span>
<span class="w">    </span><span class="n">defaults</span><span class="p">()</span><span class="w">  </span><span class="c"># =&gt; ERROR: MethodError: no method matching defaults()</span>
<span class="k">catch</span><span class="w"> </span><span class="n">e</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="k">end</span>

<span class="c"># 还可以定义带关键字参数的函数</span>
<span class="k">function</span><span class="w"> </span><span class="n">keyword_args</span><span class="p">(;</span><span class="n">k1</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">name2</span><span class="o">=</span><span class="s">&quot;hello&quot;</span><span class="p">)</span><span class="w">  </span><span class="c"># 注意分号 &#39;;&#39;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kt">Dict</span><span class="p">(</span><span class="s">&quot;k1&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">k1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;name2&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name2</span><span class="p">)</span>
<span class="k">end</span>
<span class="c"># =&gt; keyword_args (generic function with 1 method)</span>

<span class="n">keyword_args</span><span class="p">(</span><span class="n">name2</span><span class="o">=</span><span class="s">&quot;ness&quot;</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; [&quot;name2&quot;=&gt;&quot;ness&quot;, &quot;k1&quot;=&gt;4]</span>
<span class="n">keyword_args</span><span class="p">(</span><span class="n">k1</span><span class="o">=</span><span class="s">&quot;mine&quot;</span><span class="p">)</span><span class="w">     </span><span class="c"># =&gt; [&quot;name2&quot;=&gt;&quot;hello&quot;, &quot;k1&quot;=&gt;&quot;mine&quot;]</span>
<span class="n">keyword_args</span><span class="p">()</span><span class="w">              </span><span class="c"># =&gt; [&quot;name2&quot;=&gt;&quot;hello&quot;, &quot;k1&quot;=&gt;4]</span>

<span class="c"># 可以在一个函数中组合各种类型的参数</span>
<span class="k">function</span><span class="w"> </span><span class="n">all_the_args</span><span class="p">(</span><span class="n">normal_arg</span><span class="p">,</span><span class="w"> </span><span class="n">optional_positional_arg</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">keyword_arg</span><span class="o">=</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;normal arg: </span><span class="si">$normal_arg</span><span class="s">&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;optional arg: </span><span class="si">$optional_positional_arg</span><span class="s">&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;keyword arg: </span><span class="si">$keyword_arg</span><span class="s">&quot;</span><span class="p">)</span>
<span class="k">end</span>
<span class="c"># =&gt; all_the_args (generic function with 2 methods)</span>

<span class="n">all_the_args</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">keyword_arg</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="c"># =&gt; normal arg: 1</span>
<span class="c"># =&gt; optional arg: 3</span>
<span class="c"># =&gt; keyword arg: 4</span>

<span class="c"># Julia 有一等函数</span>
<span class="k">function</span><span class="w"> </span><span class="n">create_adder</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="w">    </span><span class="n">adder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span>
<span class="w">    </span><span class="k">end</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">adder</span>
<span class="k">end</span>
<span class="c"># =&gt; create_adder (generic function with 1 method)</span>

<span class="c"># 这是用 &quot;stabby lambda syntax&quot; 创建的匿名函数</span>
<span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="c"># =&gt; true</span>

<span class="c"># 这个函数和上面的 create_adder 是等价的</span>
<span class="k">function</span><span class="w"> </span><span class="n">create_adder</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="w">    </span><span class="n">y</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span>
<span class="k">end</span>
<span class="c"># =&gt; create_adder (generic function with 1 method)</span>

<span class="c"># 你也可以给内部函数起个名字</span>
<span class="k">function</span><span class="w"> </span><span class="n">create_adder</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="w">    </span><span class="k">function</span><span class="w"> </span><span class="n">adder</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="w">        </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span>
<span class="w">    </span><span class="k">end</span>
<span class="w">    </span><span class="n">adder</span>
<span class="k">end</span>
<span class="c"># =&gt; create_adder (generic function with 1 method)</span>

<span class="n">add_10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">create_adder</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="c"># =&gt; (::getfield(Main, Symbol(&quot;#adder#11&quot;)){Int64})</span>
<span class="w">                          </span><span class="c"># (generic function with 1 method)</span>
<span class="n">add_10</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; 13</span>

<span class="c"># 内置的高阶函数有</span>
<span class="n">map</span><span class="p">(</span><span class="n">add_10</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span><span class="w">  </span><span class="c"># =&gt; [11, 12, 13]</span>
<span class="n">filter</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">])</span><span class="w">  </span><span class="c"># =&gt; [6, 7]</span>

<span class="c"># 还可以使用 list comprehensions 让 map 更美观</span>
<span class="p">[</span><span class="n">add_10</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]]</span><span class="w">   </span><span class="c"># =&gt; [11, 12, 13]</span>
<span class="p">[</span><span class="n">add_10</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]]</span><span class="w">  </span><span class="c"># =&gt; [11, 12, 13]</span>

<span class="c">####################################################</span>
<span class="c">## 5.  类型</span>
<span class="c">####################################################</span>

<span class="c"># Julia 有类型系统</span>
<span class="c"># 所有的值都有类型；但变量本身没有类型</span>
<span class="c"># 你可以用 `typeof` 函数获得值的类型</span>
<span class="n">typeof</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="c"># =&gt; Int64</span>

<span class="c"># 类型是一等值</span>
<span class="n">typeof</span><span class="p">(</span><span class="kt">Int64</span><span class="p">)</span><span class="w">     </span><span class="c"># =&gt; DataType</span>
<span class="n">typeof</span><span class="p">(</span><span class="kt">DataType</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; DataType</span>
<span class="c"># DataType 是代表类型的类型，也代表他自己的类型</span>

<span class="c"># 类型可用于文档化代码、执行优化以及多重派分(dispatch)</span>
<span class="c"># Julia 并不只是静态的检查类型</span>

<span class="c"># 用户还可以自定义类型</span>
<span class="c"># 就跟其它语言的 record 或 struct 一样</span>
<span class="c"># 用 `struct` 关键字定义新的类型</span>

<span class="c"># struct Name</span>
<span class="c">#   field::OptionalType</span>
<span class="c">#   ...</span>
<span class="c"># end</span>
<span class="k">struct</span> <span class="kt">Tiger</span>
<span class="w">    </span><span class="n">taillength</span><span class="o">::</span><span class="kt">Float64</span>
<span class="w">    </span><span class="n">coatcolor</span><span class="w">  </span><span class="c"># 不带类型标注相当于 `::Any`</span>
<span class="k">end</span>

<span class="c"># 默认构造函数的参数是类型的属性，按类型定义中的顺序排列</span>
<span class="n">tigger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Tiger</span><span class="p">(</span><span class="mf">3.5</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;orange&quot;</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; Tiger(3.5, &quot;orange&quot;)</span>

<span class="c"># 用新类型作为构造函数还会创建一个类型</span>
<span class="n">sherekhan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">typeof</span><span class="p">(</span><span class="n">tigger</span><span class="p">)(</span><span class="mf">5.6</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fire&quot;</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; Tiger(5.6, &quot;fire&quot;)</span>

<span class="c"># 类似 struct 的类型被称为具体类型</span>
<span class="c"># 它们可被实例化，但不能有子类型</span>
<span class="c"># 另一种类型是抽象类型</span>

<span class="c"># 抽象类型名</span>
<span class="k">abstract</span><span class="w"> </span><span class="k">type</span> <span class="kt">Cat</span><span class="w"> </span><span class="k">end</span><span class="w">  </span><span class="c"># 仅仅是指向类型结构层次的一个名称</span>

<span class="c"># 抽象类型不能被实例化，但可以有子类型</span>
<span class="c"># 例如，Number 就是抽象类型</span>
<span class="n">subtypes</span><span class="p">(</span><span class="kt">Number</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; 2-element Array{Any,1}:</span>
<span class="w">                  </span><span class="c"># =&gt;  Complex</span>
<span class="w">                  </span><span class="c"># =&gt;  Real</span>
<span class="n">subtypes</span><span class="p">(</span><span class="n">Cat</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; 0-element Array{Any,1}</span>

<span class="c"># AbstractString，类如其名，也是一个抽象类型</span>
<span class="n">subtypes</span><span class="p">(</span><span class="kt">AbstractString</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; 4-element Array{Any,1}:</span>
<span class="w">                          </span><span class="c"># =&gt;  String</span>
<span class="w">                          </span><span class="c"># =&gt;  SubString</span>
<span class="w">                          </span><span class="c"># =&gt;  SubstitutionString</span>
<span class="w">                          </span><span class="c"># =&gt;  Test.GenericString</span>

<span class="c"># 所有的类型都有父类型。可以用函数 `supertype` 得到父类型</span>
<span class="n">typeof</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="c"># =&gt; Int64</span>
<span class="n">supertype</span><span class="p">(</span><span class="kt">Int64</span><span class="p">)</span><span class="w">    </span><span class="c"># =&gt; Signed</span>
<span class="n">supertype</span><span class="p">(</span><span class="kt">Signed</span><span class="p">)</span><span class="w">   </span><span class="c"># =&gt; Integer</span>
<span class="n">supertype</span><span class="p">(</span><span class="kt">Integer</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; Real</span>
<span class="n">supertype</span><span class="p">(</span><span class="kt">Real</span><span class="p">)</span><span class="w">     </span><span class="c"># =&gt; Number</span>
<span class="n">supertype</span><span class="p">(</span><span class="kt">Number</span><span class="p">)</span><span class="w">   </span><span class="c"># =&gt; Any</span>
<span class="n">supertype</span><span class="p">(</span><span class="n">supertype</span><span class="p">(</span><span class="kt">Signed</span><span class="p">))</span><span class="w">  </span><span class="c"># =&gt; Real</span>
<span class="n">supertype</span><span class="p">(</span><span class="kt">Any</span><span class="p">)</span><span class="w">      </span><span class="c"># =&gt; Any</span>
<span class="c"># 除了 Int64 外，其余的类型都是抽象类型</span>
<span class="n">typeof</span><span class="p">(</span><span class="s">&quot;fire&quot;</span><span class="p">)</span><span class="w">      </span><span class="c"># =&gt; String</span>
<span class="n">supertype</span><span class="p">(</span><span class="kt">String</span><span class="p">)</span><span class="w">   </span><span class="c"># =&gt; AbstractString</span>
<span class="n">supertype</span><span class="p">(</span><span class="kt">AbstractString</span><span class="p">)</span><span class="w"> </span><span class="c"># =&gt; Any</span>
<span class="n">supertype</span><span class="p">(</span><span class="kt">SubString</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; AbstractString</span>

<span class="c"># &lt;: 是子类型化操作符</span>
<span class="k">struct</span> <span class="kt">Lion</span><span class="w"> </span><span class="o">&lt;:</span><span class="w"> </span><span class="kt">Cat</span><span class="w">  </span><span class="c"># Lion 是 Cat 的子类型</span>
<span class="w">    </span><span class="n">mane_color</span>
<span class="w">    </span><span class="n">roar</span><span class="o">::</span><span class="kt">AbstractString</span>
<span class="k">end</span>

<span class="c"># 可以继续为你的类型定义构造函数</span>
<span class="c"># 只需要定义一个与类型同名的函数，并调用已有的构造函数得到正确的类型</span>
<span class="n">Lion</span><span class="p">(</span><span class="n">roar</span><span class="o">::</span><span class="kt">AbstractString</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Lion</span><span class="p">(</span><span class="s">&quot;green&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">roar</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; Lion</span>
<span class="c"># 这是一个外部构造函数，因为它在类型定义之外</span>

<span class="k">struct</span> <span class="kt">Panther</span><span class="w"> </span><span class="o">&lt;:</span><span class="w"> </span><span class="kt">Cat</span><span class="w"> </span><span class="c"># Panther 也是 Cat 的子类型</span>
<span class="w">    </span><span class="n">eye_color</span>
<span class="w">    </span><span class="n">Panther</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="p">(</span><span class="s">&quot;green&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="c"># Panthers 只有这个构造函数，没有默认构造函数</span>
<span class="k">end</span>
<span class="c"># 像 Panther 一样使用内置构造函数，让你可以控制如何构建类型的值</span>
<span class="c"># 应该尽量使用外部构造函数，而不是内部构造函数</span>

<span class="c">####################################################</span>
<span class="c">## 6. 多分派</span>
<span class="c">####################################################</span>

<span class="c"># Julia 中所有的函数都是通用函数，或者叫做泛型函数(generic functions)</span>
<span class="c"># 也就是说这些函数都是由许多小方法组合而成的</span>
<span class="c"># Lion 的每一种构造函数都是通用函数 Lion 的一个方法</span>

<span class="c"># 我们来看一个非构造函数的例子</span>
<span class="c"># 首先，让我们定义一个函数 meow</span>

<span class="c"># Lion, Panther, Tiger 的 meow 定义分别为</span>
<span class="k">function</span><span class="w"> </span><span class="n">meow</span><span class="p">(</span><span class="n">animal</span><span class="o">::</span><span class="kt">Lion</span><span class="p">)</span>
<span class="w">    </span><span class="n">animal</span><span class="o">.</span><span class="n">roar</span><span class="w"> </span><span class="c"># 使用点记号「.」访问属性</span>
<span class="k">end</span>
<span class="c"># =&gt; meow (generic function with 1 method)</span>

<span class="k">function</span><span class="w"> </span><span class="n">meow</span><span class="p">(</span><span class="n">animal</span><span class="o">::</span><span class="kt">Panther</span><span class="p">)</span>
<span class="w">    </span><span class="s">&quot;grrr&quot;</span>
<span class="k">end</span>
<span class="c"># =&gt; meow (generic function with 2 methods)</span>

<span class="k">function</span><span class="w"> </span><span class="n">meow</span><span class="p">(</span><span class="n">animal</span><span class="o">::</span><span class="kt">Tiger</span><span class="p">)</span>
<span class="w">    </span><span class="s">&quot;rawwwr&quot;</span>
<span class="k">end</span>
<span class="c"># =&gt; meow (generic function with 3 methods)</span>

<span class="c"># 试试 meow 函数</span>
<span class="n">meow</span><span class="p">(</span><span class="n">tigger</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; &quot;rawwwr&quot;</span>
<span class="n">meow</span><span class="p">(</span><span class="n">Lion</span><span class="p">(</span><span class="s">&quot;brown&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ROAAR&quot;</span><span class="p">))</span><span class="w">  </span><span class="c"># =&gt; &quot;ROAAR&quot;</span>
<span class="n">meow</span><span class="p">(</span><span class="n">Panther</span><span class="p">())</span><span class="w"> </span><span class="c"># =&gt; &quot;grrr&quot;</span>

<span class="c"># 回顾类型的层次结构</span>
<span class="kt">Tiger</span><span class="w">   </span><span class="o">&lt;:</span><span class="w"> </span><span class="kt">Cat</span><span class="w">  </span><span class="c"># =&gt; false</span>
<span class="kt">Lion</span><span class="w">    </span><span class="o">&lt;:</span><span class="w"> </span><span class="kt">Cat</span><span class="w">  </span><span class="c"># =&gt; true</span>
<span class="kt">Panther</span><span class="w"> </span><span class="o">&lt;:</span><span class="w"> </span><span class="kt">Cat</span><span class="w">  </span><span class="c"># =&gt; true</span>

<span class="c"># 定义一个接收 Cat 类型的函数</span>
<span class="k">function</span><span class="w"> </span><span class="n">pet_cat</span><span class="p">(</span><span class="n">cat</span><span class="o">::</span><span class="kt">Cat</span><span class="p">)</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;The cat says </span><span class="si">$</span><span class="p">(</span><span class="n">meow</span><span class="p">(</span><span class="n">cat</span><span class="p">))</span><span class="s">&quot;</span><span class="p">)</span>
<span class="k">end</span>
<span class="c"># =&gt; pet_cat (generic function with 1 method)</span>

<span class="n">pet_cat</span><span class="p">(</span><span class="n">Lion</span><span class="p">(</span><span class="s">&quot;42&quot;</span><span class="p">))</span><span class="w">  </span><span class="c"># =&gt; The cat says 42</span>
<span class="k">try</span>
<span class="w">    </span><span class="n">pet_cat</span><span class="p">(</span><span class="n">tigger</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; ERROR: MethodError: no method matching pet_cat(::Tiger)</span>
<span class="k">catch</span><span class="w"> </span><span class="n">e</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="k">end</span>

<span class="c"># 在面向对象语言中，通常都是单分派</span>
<span class="c"># 这意味着使用的方法取决于第一个参数的类型</span>
<span class="c"># 而 Julia 中选择方法时会考虑到所有参数的类型</span>

<span class="c"># 让我们定义一个有更多参数的函数，这样我们就能看出区别</span>
<span class="k">function</span><span class="w"> </span><span class="n">fight</span><span class="p">(</span><span class="n">t</span><span class="o">::</span><span class="kt">Tiger</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="o">::</span><span class="kt">Cat</span><span class="p">)</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;The </span><span class="si">$</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">coatcolor</span><span class="p">)</span><span class="s"> tiger wins!&quot;</span><span class="p">)</span>
<span class="k">end</span>
<span class="c"># =&gt; fight (generic function with 1 method)</span>

<span class="n">fight</span><span class="p">(</span><span class="n">tigger</span><span class="p">,</span><span class="w"> </span><span class="n">Panther</span><span class="p">())</span><span class="w">  </span><span class="c"># =&gt; The orange tiger wins!</span>
<span class="n">fight</span><span class="p">(</span><span class="n">tigger</span><span class="p">,</span><span class="w"> </span><span class="n">Lion</span><span class="p">(</span><span class="s">&quot;ROAR&quot;</span><span class="p">))</span><span class="w"> </span><span class="c"># =&gt; fight(tigger, Lion(&quot;ROAR&quot;))</span>

<span class="c"># 让我们修改一下传入 Lion 类型时的行为</span>
<span class="n">fight</span><span class="p">(</span><span class="n">t</span><span class="o">::</span><span class="kt">Tiger</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="o">::</span><span class="kt">Lion</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;The </span><span class="si">$</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">mane_color</span><span class="p">)</span><span class="s">-maned lion wins!&quot;</span><span class="p">)</span>
<span class="c"># =&gt; fight (generic function with 2 methods)</span>

<span class="n">fight</span><span class="p">(</span><span class="n">tigger</span><span class="p">,</span><span class="w"> </span><span class="n">Panther</span><span class="p">())</span><span class="w">  </span><span class="c"># =&gt; The orange tiger wins!</span>
<span class="n">fight</span><span class="p">(</span><span class="n">tigger</span><span class="p">,</span><span class="w"> </span><span class="n">Lion</span><span class="p">(</span><span class="s">&quot;ROAR&quot;</span><span class="p">))</span><span class="w">  </span><span class="c"># =&gt; The green-maned lion wins!</span>

<span class="c"># 我们不需要一只老虎参与战斗</span>
<span class="n">fight</span><span class="p">(</span><span class="n">l</span><span class="o">::</span><span class="kt">Lion</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="o">::</span><span class="kt">Cat</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;The victorious cat says </span><span class="si">$</span><span class="p">(</span><span class="n">meow</span><span class="p">(</span><span class="n">c</span><span class="p">))</span><span class="s">&quot;</span><span class="p">)</span>
<span class="c"># =&gt; fight (generic function with 3 methods)</span>

<span class="n">fight</span><span class="p">(</span><span class="n">Lion</span><span class="p">(</span><span class="s">&quot;balooga!&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">Panther</span><span class="p">())</span><span class="w">  </span><span class="c"># =&gt; The victorious cat says grrr</span>
<span class="k">try</span>
<span class="w">    </span><span class="n">fight</span><span class="p">(</span><span class="n">Panther</span><span class="p">(),</span><span class="w"> </span><span class="n">Lion</span><span class="p">(</span><span class="s">&quot;RAWR&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="c"># =&gt; ERROR: MethodError: no method matching fight(::Panther, ::Lion)</span>
<span class="w">    </span><span class="c"># =&gt; Closest candidates are:</span>
<span class="w">    </span><span class="c"># =&gt;   fight(::Tiger, ::Lion) at ...</span>
<span class="w">    </span><span class="c"># =&gt;   fight(::Tiger, ::Cat) at ...</span>
<span class="w">    </span><span class="c"># =&gt;   fight(::Lion, ::Cat) at ...</span>
<span class="w">    </span><span class="c"># =&gt; ...</span>
<span class="k">catch</span><span class="w"> </span><span class="n">e</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="k">end</span>

<span class="c"># 试试把 Cat 放在前面</span>
<span class="n">fight</span><span class="p">(</span><span class="n">c</span><span class="o">::</span><span class="kt">Cat</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="o">::</span><span class="kt">Lion</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;The cat beats the Lion&quot;</span><span class="p">)</span>
<span class="c"># =&gt; fight (generic function with 4 methods)</span>

<span class="c"># 由于无法判断该使用哪个 fight 方法，而产生了错误</span>
<span class="k">try</span>
<span class="w">    </span><span class="n">fight</span><span class="p">(</span><span class="n">Lion</span><span class="p">(</span><span class="s">&quot;RAR&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">Lion</span><span class="p">(</span><span class="s">&quot;brown&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;rarrr&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="c"># =&gt; ERROR: MethodError: fight(::Lion, ::Lion) is ambiguous. Candidates:</span>
<span class="w">    </span><span class="c"># =&gt;   fight(c::Cat, l::Lion) in Main at ...</span>
<span class="w">    </span><span class="c"># =&gt;   fight(l::Lion, c::Cat) in Main at ...</span>
<span class="w">    </span><span class="c"># =&gt; Possible fix, define</span>
<span class="w">    </span><span class="c"># =&gt;   fight(::Lion, ::Lion)</span>
<span class="w">    </span><span class="c"># =&gt; ...</span>
<span class="k">catch</span><span class="w"> </span><span class="n">e</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="k">end</span>
<span class="c"># 在不同版本的 Julia 中错误信息可能有所不同</span>

<span class="n">fight</span><span class="p">(</span><span class="n">l</span><span class="o">::</span><span class="kt">Lion</span><span class="p">,</span><span class="w"> </span><span class="n">l2</span><span class="o">::</span><span class="kt">Lion</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;The lions come to a tie&quot;</span><span class="p">)</span>
<span class="c"># =&gt; fight (generic function with 5 methods)</span>
<span class="n">fight</span><span class="p">(</span><span class="n">Lion</span><span class="p">(</span><span class="s">&quot;RAR&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">Lion</span><span class="p">(</span><span class="s">&quot;brown&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;rarrr&quot;</span><span class="p">))</span><span class="w">  </span><span class="c"># =&gt; The lions come to a tie</span>


<span class="c"># 深入编译器之后</span>
<span class="c"># 你还可以看看 llvm 以及它生成的汇编代码</span>

<span class="n">square_area</span><span class="p">(</span><span class="n">l</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">l</span><span class="w">  </span><span class="c"># =&gt; square_area (generic function with 1 method)</span>
<span class="n">square_area</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; 25</span>

<span class="c"># 当我们喂给 square_area 一个整数时会发生什么？</span>
<span class="n">code_native</span><span class="p">(</span><span class="n">square_area</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">Int32</span><span class="p">,),</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">:intel</span><span class="p">)</span>
<span class="w">    </span><span class="c">#         .text</span>
<span class="w">    </span><span class="c"># ; Function square_area {</span>
<span class="w">    </span><span class="c"># ; Location: REPL[116]:1       # 函数序言 (Prologue)</span>
<span class="w">    </span><span class="c">#         push    rbp</span>
<span class="w">    </span><span class="c">#         mov     rbp, rsp</span>
<span class="w">    </span><span class="c"># ; Function *; {</span>
<span class="w">    </span><span class="c"># ; Location: int.jl:54</span>
<span class="w">    </span><span class="c">#         imul    ecx, ecx      # 求 l 的平方，并把结果放在 ECX 中</span>
<span class="w">    </span><span class="c"># ;}</span>
<span class="w">    </span><span class="c">#         mov     eax, ecx</span>
<span class="w">    </span><span class="c">#         pop     rbp           # 还原旧的基址指针(base pointer)</span>
<span class="w">    </span><span class="c">#         ret                   # 返回值放在 EAX 中</span>
<span class="w">    </span><span class="c">#         nop     dword ptr [rax + rax]</span>
<span class="w">    </span><span class="c"># ;}</span>
<span class="c"># 使用 syntax 参数指定输出语法。默认为 AT&amp;T 格式，这里指定为 Intel 格式</span>

<span class="n">code_native</span><span class="p">(</span><span class="n">square_area</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">Float32</span><span class="p">,),</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">:intel</span><span class="p">)</span>
<span class="w">    </span><span class="c">#         .text</span>
<span class="w">    </span><span class="c"># ; Function square_area {</span>
<span class="w">    </span><span class="c"># ; Location: REPL[116]:1</span>
<span class="w">    </span><span class="c">#         push    rbp</span>
<span class="w">    </span><span class="c">#         mov     rbp, rsp</span>
<span class="w">    </span><span class="c"># ; Function *; {</span>
<span class="w">    </span><span class="c"># ; Location: float.jl:398</span>
<span class="w">    </span><span class="c">#         vmulss  xmm0, xmm0, xmm0  # 标量双精度乘法 (AVX)</span>
<span class="w">    </span><span class="c"># ;}</span>
<span class="w">    </span><span class="c">#         pop     rbp</span>
<span class="w">    </span><span class="c">#         ret</span>
<span class="w">    </span><span class="c">#         nop     word ptr [rax + rax]</span>
<span class="w">    </span><span class="c"># ;}</span>

<span class="n">code_native</span><span class="p">(</span><span class="n">square_area</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">Float64</span><span class="p">,),</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">:intel</span><span class="p">)</span>
<span class="w">    </span><span class="c">#         .text</span>
<span class="w">    </span><span class="c"># ; Function square_area {</span>
<span class="w">    </span><span class="c"># ; Location: REPL[116]:1</span>
<span class="w">    </span><span class="c">#         push    rbp</span>
<span class="w">    </span><span class="c">#         mov     rbp, rsp</span>
<span class="w">    </span><span class="c"># ; Function *; {</span>
<span class="w">    </span><span class="c"># ; Location: float.jl:399</span>
<span class="w">    </span><span class="c">#         vmulsd  xmm0, xmm0, xmm0  # 标量双精度乘法 (AVX)</span>
<span class="w">    </span><span class="c"># ;}</span>
<span class="w">    </span><span class="c">#         pop     rbp</span>
<span class="w">    </span><span class="c">#         ret</span>
<span class="w">    </span><span class="c">#         nop     word ptr [rax + rax]</span>
<span class="w">    </span><span class="c"># ;}</span>

<span class="c"># 注意！只要参数中有浮点数，Julia 就会使用浮点指令</span>
<span class="c"># 让我们计算一下圆的面积</span>
<span class="n">circle_area</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">pi</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="c"># =&gt; circle_area (generic function with 1 method)</span>
<span class="n">circle_area</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w">  </span><span class="c"># =&gt; 78.53981633974483</span>

<span class="n">code_native</span><span class="p">(</span><span class="n">circle_area</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">Int32</span><span class="p">,),</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">:intel</span><span class="p">)</span>
<span class="w">    </span><span class="c">#         .text</span>
<span class="w">    </span><span class="c"># ; Function circle_area {</span>
<span class="w">    </span><span class="c"># ; Location: REPL[121]:1</span>
<span class="w">    </span><span class="c">#         push    rbp</span>
<span class="w">    </span><span class="c">#         mov     rbp, rsp</span>
<span class="w">    </span><span class="c"># ; Function *; {</span>
<span class="w">    </span><span class="c"># ; Location: operators.jl:502</span>
<span class="w">    </span><span class="c"># ; Function *; {</span>
<span class="w">    </span><span class="c"># ; Location: promotion.jl:314</span>
<span class="w">    </span><span class="c"># ; Function promote; {</span>
<span class="w">    </span><span class="c"># ; Location: promotion.jl:284</span>
<span class="w">    </span><span class="c"># ; Function _promote; {</span>
<span class="w">    </span><span class="c"># ; Location: promotion.jl:261</span>
<span class="w">    </span><span class="c"># ; Function convert; {</span>
<span class="w">    </span><span class="c"># ; Location: number.jl:7</span>
<span class="w">    </span><span class="c"># ; Function Type; {</span>
<span class="w">    </span><span class="c"># ; Location: float.jl:60</span>
<span class="w">    </span><span class="c">#         vcvtsi2sd       xmm0, xmm0, ecx     # 从内存中读取整数 r</span>
<span class="w">    </span><span class="c">#         movabs  rax, 497710928              # 读取 pi</span>
<span class="w">    </span><span class="c"># ;}}}}}</span>
<span class="w">    </span><span class="c"># ; Function *; {</span>
<span class="w">    </span><span class="c"># ; Location: float.jl:399</span>
<span class="w">    </span><span class="c">#         vmulsd  xmm1, xmm0, qword ptr [rax] # pi * r</span>
<span class="w">    </span><span class="c">#         vmulsd  xmm0, xmm1, xmm0            # (pi * r) * r</span>
<span class="w">    </span><span class="c"># ;}}</span>
<span class="w">    </span><span class="c">#         pop     rbp</span>
<span class="w">    </span><span class="c">#         ret</span>
<span class="w">    </span><span class="c">#         nop     dword ptr [rax]</span>
<span class="w">    </span><span class="c"># ;}</span>

<span class="n">code_native</span><span class="p">(</span><span class="n">circle_area</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">Float64</span><span class="p">,),</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">:intel</span><span class="p">)</span>
<span class="w">    </span><span class="c">#         .text</span>
<span class="w">    </span><span class="c"># ; Function circle_area {</span>
<span class="w">    </span><span class="c"># ; Location: REPL[121]:1</span>
<span class="w">    </span><span class="c">#         push    rbp</span>
<span class="w">    </span><span class="c">#         mov     rbp, rsp</span>
<span class="w">    </span><span class="c">#         movabs  rax, 497711048</span>
<span class="w">    </span><span class="c"># ; Function *; {</span>
<span class="w">    </span><span class="c"># ; Location: operators.jl:502</span>
<span class="w">    </span><span class="c"># ; Function *; {</span>
<span class="w">    </span><span class="c"># ; Location: promotion.jl:314</span>
<span class="w">    </span><span class="c"># ; Function *; {</span>
<span class="w">    </span><span class="c"># ; Location: float.jl:399</span>
<span class="w">    </span><span class="c">#         vmulsd  xmm1, xmm0, qword ptr [rax]</span>
<span class="w">    </span><span class="c"># ;}}}</span>
<span class="w">    </span><span class="c"># ; Function *; {</span>
<span class="w">    </span><span class="c"># ; Location: float.jl:399</span>
<span class="w">    </span><span class="c">#         vmulsd  xmm0, xmm1, xmm0</span>
<span class="w">    </span><span class="c"># ;}</span>
<span class="w">    </span><span class="c">#         pop     rbp</span>
<span class="w">    </span><span class="c">#         ret</span>
<span class="w">    </span><span class="c">#         nop     dword ptr [rax + rax]</span>
<span class="w">    </span><span class="c"># ;}</span>
</pre></div>
<h2>拓展阅读材料</h2>
<p>你可以在 <a href="http://docs.juliacn.com/latest/">Julia 中文文档</a> / <a href="https://docs.julialang.org/">Julia 文档(en)</a>
中获得关于 Julia 的更多细节。</p>
<p>如果有任何问题可以去 <a href="http://discourse.juliacn.com/">Julia 中文社区</a> / <a href="https://discourse.julialang.org/">官方社区(en)</a> 提问，大家对待新手都非常的友好。</p>

        <hr>
        <p>
          有建议？或者发现什么错误？在GitHub上<a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">开一个issue</a>，或者发起<a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/zh-cn/julia.md">pull request</a>！
        </p>
        <p class="contributed">
          原著Leah Hanson，并由<a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/zh-cn/julia.md">4个好心人</a>修改。
        </p>

        <footer>
          <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width: 0; width: 88px; height: 31px;" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/svg/by-sa.svg" /></a>
          <p>
            &copy; 2025
            <a href="http://leahhanson.us">Leah Hanson</a>,
            <a href="https://github.com/pranitbauva1997">Pranit Bauva</a>,
            <a href="https://github.com/dlintw">Daniel YC Lin</a>
          </p>
        </footer>
      </div>
    </div>
  </body>
</html>