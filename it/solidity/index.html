<!DOCTYPE html>
<html lang="it">
  <head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WXC8R75DEN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-WXC8R75DEN');
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Language" content="it">
    <title>Learn Solidity in Y Minutes</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto+Slab:wght@100..900&family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/screen.css">
    <link rel="stylesheet" href="/css/light.css">
    <link rel="stylesheet" href="/css/dark.css">

    <link rel="canonical" href="https://learnxinyminutes.com/it/solidity/">
    <script>
      localStorage.removeItem("lxiym_theme");
    </script>
  </head>
  <body>
    <div class="container">
      <div class="share">
        <span class="sharemsg">
          <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fit%2Fsolidity%2F&amp;text=Impara+X+in+Y+minuti%2C+dove+X%3DSolidity">
            Condividi questa pagina
          </a>
        </span>
        <span class='st_facebook_large' displayText='Facebook'></span>
        <span class='st_twitter_large' displayText='Tweet'></span>
      </div>
      <h1><a href="/">Impara X in Y minuti</a></h1>
      <h2>Dove X=Solidity</h2>
      <p class="filelink">
        Scarica il codice sorgente:
        <a href="/it/files/learnSolidity.sol">learnSolidity.sol</a>
      </p>
      <div id="doc">
<p>Solidity permette di programmare su <a href="https://www.ethereum.org/">Ethereum</a>, una
macchina virtuale basata sulla blockchain che consente la creazione e
l'esecuzione degli smart contract senza che sia richiesta centralizzazione o
fiducia negli attori coinvolti.</p>
<p>Solidity è un linguaggio di programmazione di contratti tipizzato staticamente e
ha molte cose in comune con JavaScript e C. Come per gli oggetti nella
programmazione ad oggetti, ogni contratto contiene variabili di stato, funzioni
e tipi di dato semplici. Tra le funzionalità specifiche dei contratti troviamo
le clausole (guardie) dei modifier, gli event notifier per i listener, e le
variabili globali custom.</p>
<p>Come esempi di contratti su Ethereum troviamo sistemi di crowdfunding, voto,
<a href="https://defipulse.com/">finanza decentralizzata</a> e aste al buio.</p>
<p>Compiere errori nel codice Solidity può portare a rischi e costi alti, quindi
bisogna fare attenzione a testare e rilasciare le modifiche lentamente. A
CAUSA DEI CONTINUI CAMBIAMENTI DI ETHEREUM È IMPROBABILE CHE QUESTO DOCUMENTO
RESTI AGGIORNATO, QUINDI COSNIGLIAMO DI SEGUIRE LA CHAT ROOM DI SOLIDITY E IL
BLOG DI ETHEREUM PER TENERSI AGGIORNATI. TUTTO IL CODICE QUI PRESENTE E' FORNITO
COSÌ COM'È, CON ANNESSI RISCHI SOSTANZIALI DI ERRORI O PATTERN DI PROGRAMMAZIONE
DEPRECATI.</p>
<p>A differenza di altri linguaggi, potresti aver bisogno di usare pattern di
pausing, deprecation e throttling usage per ridurre il rischio. Questo documento
tratta principalmene la sintassi e quindi esclude molti design pattern in voga.</p>
<p>Visto che Solidity e Ethereum sono in continuo sviluppo, le funzionalità
sperimentali o beta sono evidenziate e soggette a cambiamenti. Ogni Pull Request
è ben accetta.</p>
<h1>Lavorare con Remix e Metamask</h1>
<p>Uno dei modi più semplici di scrivere, distribuire e testare il codice Solidity
è usare :</p>
<ol>
<li><a href="https://remix.ethereum.org/">L'ambiente di sviluppo online Remix</a></li>
<li><a href="https://metamask.io/">Il wallet Metamask</a>.</li>
</ol>
<p>Per cominciare, <a href="https://metamask.io/">scarichiamo l'estesione per browser di Metamask</a>.</p>
<p>Una volta installata, potremo iniziare ad usare Remix. Il codice seguente è
pre-inizializzato, ma prima di addentrarci, diamo un'occhiata a qualche
trucchetto per iniziare ad usare Remix. Carica tutto il necessario <a href="https://remix.ethereum.org/#version=soljson-v0.6.6+commit.6c089d02.js&amp;optimize=false&amp;evmVersion=null&amp;gist=f490c0d51141dd0515244db40bbd0c17&amp;runs=200">clickando su questo link</a>.</p>
<ol>
<li>Scegli il compilatore per Solidity</li>
</ol>
<p><img src="/images/solidity/remix-solidity.png" alt="Solidity-in-remix" /></p>
<ol start="2">
<li>Apri il file che si caricherà su quel link</li>
</ol>
<p><img src="/images/solidity/remix-choose-file.png" alt="Solidity-choose-file" /></p>
<ol start="3">
<li>Compila il file</li>
</ol>
<p><img src="/images/solidity/remix-compile.png" alt="Solidity-compile" /></p>
<ol start="4">
<li>Fai il deploy</li>
</ol>
<p><img src="/images/solidity/remix-deploy.png" alt="Solidity-deploy" /></p>
<ol start="5">
<li>Smanetta con i contratti</li>
</ol>
<p><img src="/images/solidity/remix-interact.png" alt="Solidity-deploy" /></p>
<p>Hai distribuito il tuo primo contratto! Congratulazioni!</p>
<p>Potrai testarlo e smanettare con le funzioni già definite. Dai un'occhiata ai
commenti per scoprire cosa fanno.</p>
<h2>Lavorare su una testnet</h2>
<p>Distribuire e testare su una testnet è il modo più accurato per mettere alla
prova i tuoi smart contract in Solidity. Per farlo procuriamoci prima degli ETH
di test dalla testnet Kovan.</p>
<p><a href="https://gitter.im/kovan-testnet/faucet">Entra in questo Gitter Channel</a> e
scrivici l'indirizzo del tuo wallet Metamask.</p>
<p>Sul tuo Metamask, dovrai cambiare la testnet in <code>Kovan</code>.</p>
<p><img src="/images/solidity/metamask-kovan.png" alt="Solidity-in-remix" /></p>
<p>Riceverai degli Ethereum di test gratuiti. Abbiamo bisogno di Ethereum per
distribuire degli smart contract su una testnet.</p>
<p>Nell'esempio precedente non avevamo usato una testnet, ma avevamo distribuito
su un ambiente virtuale fittizio. Quando si lavora su una testnet, possiamo
davvero monitorare e interagire con i nostri contratti in maniera persistente.</p>
<p>Per distribuire su una testnet, allo step <code>#4 Fai il deploy</code>, cambia
l'<code>environment</code> selezionato in <code>injected web3</code>. In questo modo verrà usato
come network su cui fare il deploy qualsiasi network selezionato sul tuo
Metamask.</p>
<p><img src="/images/solidity/remix-testnet.png" alt="Solidity-in-remix" /></p>
<p>Per ora continua a usare la <code>JavaScript VM</code> a meno che non ti sia detto di
cambiarla. Quando distribuisci su una testnet, Metamask aprirà un pop up che
ti chiederà di &quot;confermare&quot; la transazione. Premi <code>yes</code> e dopo un certo lasso
di tempo, ti apparirà la stessa interfaccia per il contratto nella parte
inferiore dello schermo.</p>
<div class="highlight"><pre lang="solidity"><span class="c1">// Iniziamo con un semplice contratto su una Banca</span>
<span class="c1">// Permette di depositare, prelevare e fare l&#39;estratto conto</span>

<span class="c1">// simple_bank.sol (nota l&#39;estensione .sol)</span>
<span class="cm">/* **** INIZIO DELL&#39;ESEMPIO **** */</span>

<span class="c1">// Dichiara la versione del compilatore per il file sorgente</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.6.6</span><span class="p">;</span>

<span class="c1">// Inizia con il commento Natspec (i tre slash)</span>
<span class="c1">// viene usato per la documentazione - e per i dati descrittivi per gli elementi</span>
<span class="c1">// dell&#39;interfaccia utente / azioni</span>

<span class="c1">/// @title SimpleBank</span>
<span class="c1">/// @author nemild</span>

<span class="cm">/* &#39;contract&#39; somiglia a &#39;class&#39; in altri linguaggi (ha variabili di classe,</span>
<span class="cm">ereditarietà, etc.) */</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">SimpleBank</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// CapWords</span>
<span class="w">    </span><span class="c1">// Dichiariamo le variabili di stato fuori dalle funzioni, persisteranno</span>
<span class="w">    </span><span class="c1">// durante tutta la vita del contratto</span>

<span class="w">    </span><span class="c1">// i dizionari mappano gli indirizzi con i saldi</span>
<span class="w">    </span><span class="c1">// fai sempre attenzione agli overflow attack che sfruttano i numeri</span>
<span class="w">    </span><span class="kt">mapping</span><span class="w"> </span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="kt">private</span><span class="w"> </span>balances<span class="p">;</span>

<span class="w">    </span><span class="c1">// &quot;private&quot; significa che che altri contratti non possono leggere i</span>
<span class="w">    </span><span class="c1">// saldi ma le informazioni restano visibili ad altri attori sulla blockchain</span>

<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="k">public </span><span class="nv">owner</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// &#39;public&#39; lo rende leggibile dall&#39;esterno (ma non modificabile) dagli</span>
<span class="w">    </span><span class="c1">// utenti e dai contratti</span>

<span class="w">    </span><span class="c1">// Gli &#39;event&#39; pubblicano le azioni in modo che siano ascoltabili da</span>
<span class="w">    </span><span class="c1">// listener esterni</span>
<span class="w">    </span><span class="kt">event</span><span class="w"> </span><span class="nv">LogDepositMade</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">accountAddress</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">amount</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// I &#39;constructor&#39; possono ricevere uno o più parametri; Si può</span>
<span class="w">    </span><span class="c1">// dichiarare un solo costruttore</span>
<span class="w">    </span><span class="kt">constructor</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// &#39;msg&#39; fornisce i dettagli sul messaggio che è stato mandato al contratto</span>
<span class="w">        </span><span class="c1">// &#39;msg.sender&#39; è chi invoca il contratto (l&#39;indirizzo di chi lo crea)</span>
<span class="w">        </span>owner<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">msg.sender</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">/// @notice Deposita ether nella banca</span>
<span class="w">    </span><span class="c1">/// @return Il saldo dell&#39;utente dopo che è stato effettualto il deposito</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">deposit</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">payable</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Usiamo &#39;require&#39; per testare gli input dell&#39;utente, &#39;assert&#39; per gli</span>
<span class="w">        </span><span class="c1">// invarianti interni. Qui ci assicuriamo di non avere a che fare con</span>
<span class="w">        </span><span class="c1">// un overflow</span>
<span class="w">        </span><span class="kt">require</span><span class="p">((</span>balances<span class="p">[</span><span class="k">msg.sender</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">msg.value</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span>balances<span class="p">[</span><span class="k">msg.sender</span><span class="p">]);</span>

<span class="w">        </span>balances<span class="p">[</span><span class="k">msg.sender</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">msg.value</span><span class="p">;</span>
<span class="w">        </span><span class="c1">// Non servono &quot;this.&quot; o &quot;self.&quot; con le variabili di stato</span>
<span class="w">        </span><span class="c1">// Tutti i valori iniziali delle variabili sono impostati automaticamente</span>
<span class="w">        </span><span class="c1">// al valore di default per quel tipo di dato</span>

<span class="w">        </span>emit<span class="w"> </span>LogDepositMade<span class="p">(</span><span class="k">msg.sender</span><span class="p">,</span><span class="w"> </span><span class="k">msg.value</span><span class="p">);</span><span class="w"> </span><span class="c1">// Fa scattare l&#39;evento</span>

<span class="w">        </span><span class="kt">return</span><span class="w"> </span>balances<span class="p">[</span><span class="k">msg.sender</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">/// @notice Preleva ether dalla banca</span>
<span class="w">    </span><span class="c1">/// @dev Non restituisce gli ether inviati in eccesso</span>
<span class="w">    </span><span class="c1">/// @param withdrawAmount L&#39;importo che si vuole ritirare</span>
<span class="w">    </span><span class="c1">/// @return remainingBal</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">withdraw</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">withdrawAmount</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">remainingBal</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>withdrawAmount<span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span>balances<span class="p">[</span><span class="k">msg.sender</span><span class="p">]);</span>

<span class="w">        </span><span class="c1">// Notiamo come per prima cosa scaliamo i soldi dal saldo, prima di</span>
<span class="w">        </span><span class="c1">// invarli. Ogni .transfer/.send in questo contratto può chiamare una </span>
<span class="w">        </span><span class="c1">// funzione esterna. Questa cosa potrebbe permettere a chi invoca la</span>
<span class="w">        </span><span class="c1">// funzione di richiedere un importo maggiore del suo saldo usando</span>
<span class="w">        </span><span class="c1">// una chiamata ricorsiva. Miriamo ad aggiornare lo stato prima che sia</span>
<span class="w">        </span><span class="c1">// chiamata una funzione esterna, incluse .transfer/.send</span>
<span class="w">        </span>balances<span class="p">[</span><span class="k">msg.sender</span><span class="p">]</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span>withdrawAmount<span class="p">;</span>

<span class="w">        </span><span class="c1">// Qui lancia automaticamente un errore se fallisce, il che implica</span>
<span class="w">        </span><span class="c1">// che il saldo (non più aggiornato) viene ripristinato a prima della</span>
<span class="w">        </span><span class="c1">// transazione</span>
<span class="w">        </span><span class="k">msg.sender</span><span class="p">.</span>transfer<span class="p">(</span>withdrawAmount<span class="p">);</span>

<span class="w">        </span><span class="kt">return</span><span class="w"> </span>balances<span class="p">[</span><span class="k">msg.sender</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">/// @notice Recupera il saldo</span>
<span class="w">    </span><span class="c1">/// @return Il saldo dell&#39;utente</span>
<span class="w">    </span><span class="c1">// &#39;view&#39; (ex: constant) impedisce alle funzioni di modificare lo stato</span>
<span class="w">    </span><span class="c1">// delle variabili; consente alle le funzioni di essere disponibili in</span>
<span class="w">    </span><span class="c1">// locale/fuori dalla blockchain</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">balance</span><span class="p">()</span><span class="w"> </span>view<span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>balances<span class="p">[</span><span class="k">msg.sender</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// ** FINE DELL&#39;ESEMPIO **</span>


<span class="c1">// Passiamo alle basi di Solidity</span>

<span class="c1">// 1. TIPI DI DATO E I LORO METODI</span>
<span class="c1">// uint viene usato per gli importi in valuta (non ci sono double o float)</span>
<span class="c1">// e per le date (in unix time)</span>
<span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="p">;</span>

<span class="c1">// int di 256 bit, non possono essere modificati dopo l&#39;istanziazione</span>
<span class="kt">int</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">8</span><span class="p">;</span>
<span class="kt">int256</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">8</span><span class="p">;</span><span class="w"> </span><span class="c1">// stesso effetto della riga prima, qui viene</span>
<span class="c1">// dichiarato esplicitamente che è di 256 bit</span>
<span class="kt">uint</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>VERSION_ID<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x123A1</span><span class="p">;</span><span class="w"> </span><span class="c1">// Una costante esadecimale</span>
<span class="c1">// con &#39;constant&#39;, il compilatore rimpiazza ogni occorrenza con il valore</span>

<span class="c1">// Tutte le variabili di stato (quelle fuori da una funzione)</span>
<span class="c1">// sono &#39;interne&#39; di default e accessibili SOLO dall&#39;interno del contratto </span>
<span class="c1">// e da tutti contratti che le ereditano</span>
<span class="c1">// Bisogna usare esplicitamente &#39;public&#39; per consentire l&#39;accesso dai contratti </span>
<span class="c1">// esterni</span>
<span class="kt">int256</span><span class="w"> </span><span class="k">public </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">8</span><span class="p">;</span>

<span class="c1">// Per int e uint possiamo esplicitamente assegnare una dimensione tra 8 e 256</span>
<span class="c1">// es. int8, int16, int24</span>
<span class="kt">uint8</span><span class="w"> </span><span class="nv">b</span><span class="p">;</span>
<span class="kt">int64</span><span class="w"> </span><span class="nv">c</span><span class="p">;</span>
<span class="kt">uint248</span><span class="w"> </span><span class="nv">e</span><span class="p">;</span>

<span class="c1">// Attenzione a non andare in overflow e a proteggersi dagli attacchi che lo fanno</span>
<span class="c1">// Ad esempio per quanto rigrada l&#39;addizione, conviene fare:</span>
<span class="kt">uint256</span><span class="w"> </span><span class="nv">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>a<span class="w"> </span><span class="o">+</span><span class="w"> </span>b<span class="p">;</span>
assert<span class="p">(</span>c<span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span>a<span class="p">);</span><span class="w"> </span><span class="c1">// &#39;assert&#39; testa gli invarianti interni; require viene usato </span>
<span class="c1">// per gli input</span>
<span class="c1">// Per altri esempi di problemi comuni con le operazioni aritmentiche, dai una</span>
<span class="c1">// occhiata alla Zeppelin&#39;s SafeMath library</span>
<span class="c1">// https://github.com/OpenZeppelin/zeppelin-solidity/blob/master/contracts/math/SafeMath.sol</span>


<span class="c1">// Non ci sono funzioni random built-in, puoi ottenere un numero pseudo-casuale</span>
<span class="c1">// hashando l&#39;ultimo blockhash, o ottenere un numero realmente casuale usando</span>
<span class="c1">// qualcosa come Chainlink VRF. </span>
<span class="c1">// https://docs.chain.link/docs/get-a-random-number</span>

<span class="c1">// Conversione di tipo</span>
<span class="kt">int</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span>b<span class="p">);</span>

<span class="kt">bool</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">true</span><span class="p">;</span><span class="w"> </span><span class="c1">// oppure &#39;var b = true;&#39; per l&#39;inferenza di tipo</span>

<span class="c1">// Indirizzi - contengono indirizzi Ethereum di 20 byte/160 bit</span>
<span class="c1">// Non sono consentite operazioni aritmetiche</span>
<span class="kt">address</span><span class="w"> </span><span class="k">public </span><span class="nv">owner</span><span class="p">;</span>

<span class="c1">// Tipi di account:</span>
<span class="c1">// Contract account: l&#39;indirizzo viene impostato quando lo si crea (funzione con</span>
<span class="c1">// l&#39;indirzzo di chi lo crea, il numero della transazione inviata)</span>
<span class="c1">// External Account: (persona/enitità esterna): l&#39;indirizzo viene creato dalla</span>
<span class="c1">// chiave pubblica</span>

<span class="c1">// Aggiungi il campo &#39;public&#39; per indicare che è pubblico/accessibile dall&#39;esterno</span>
<span class="c1">// un getter viene creato automaticamente, ma NON un setter</span>

<span class="c1">// Si possono mandare ether a tutti gli indirizzi</span>
owner<span class="p">.</span>transfer<span class="p">(</span>SOME_BALANCE<span class="p">);</span><span class="w"> </span><span class="c1">// fallisce e, in tal caso, ripristina</span>
<span class="c1">// lo stato precedente</span>

<span class="c1">// Possiamo anche usare la funzione di livello più basso .send, che restituisce</span>
<span class="c1">// false se fallisce</span>
<span class="kt">if</span><span class="w"> </span><span class="p">(</span>owner<span class="p">.</span>send<span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="c1">// RICORDA: metti la send in un &#39;if&#39; dato che gli indirizzi</span>
<span class="c1">// usati nei contratti hanno delle funzioni, che vengono eseguite quando viene</span>
<span class="c1">// fatta una send, che possono fallire.</span>
<span class="c1">// Inoltre fai attenzione a scalare i saldi PRIMA di provare a fare una send,</span>
<span class="c1">// dato il rischio di chiamate riscorsive che potrebbero prosciugare il contratto</span>

<span class="c1">// Possiamo controllare il saldo</span>
owner<span class="p">.</span>balance<span class="p">;</span><span class="w"> </span><span class="c1">// il saldo del propietario (utente o contratto)</span>


<span class="c1">// I Byte sono disposibili in dimensioni da 1 a 32</span>
byte<span class="w"> </span>a<span class="p">;</span><span class="w"> </span><span class="c1">// &#39;byte&#39; è la stessa cosa di &#39;bytes1&#39;</span>
bytes2<span class="w"> </span>b<span class="p">;</span>
<span class="kt">bytes32</span><span class="w"> </span><span class="nv">c</span><span class="p">;</span>

<span class="c1">// Byte con dimensione dinamica</span>
<span class="kt">bytes</span><span class="w"> </span><span class="nv">m</span><span class="p">;</span><span class="w"> </span><span class="c1">// Un array particolare, la stessa cosa dell&#39;array &#39;byte[]&#39; (ma scritto stringato)</span>
<span class="c1">// È più dispendioso di byte1-byte32, che di solito sono preferibili</span>

<span class="c1">// come bytes, ma non permette di accedere alla lunghezza o all&#39;indice (per ora)</span>
<span class="kt">string</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// salvato in UTF8, nota i doppi apici, non singoli</span>
<span class="c1">// le utility function per le stringhe saranno aggiunte in futuro</span>
<span class="c1">// sono preferibili bytes32/bytes, dato che UTF8 occupa più memoria</span>

<span class="c1">// Inferenza di tipo</span>
<span class="c1">// &#39;var&#39; fa inferenza di tipo a seconda del primo assegnamento,</span>
<span class="c1">// non può essere usata tra i parametri di una funzione</span>
<span class="kt">var</span><span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">true</span><span class="p">;</span>
<span class="c1">// da usare con cautela, può inferire un tipo errato</span>
<span class="c1">// es. un int8 quando un contatore dev&#39;essere un int16</span>

<span class="c1">// var può essere usata per assegnare una funzione ad una variabile</span>
<span class="kt">function</span><span class="w"> </span><span class="nv">a</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">return</span><span class="w"> </span>x<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">var</span><span class="w"> </span>f<span class="w"> </span><span class="o">=</span><span class="w"> </span>a<span class="p">;</span>
f<span class="p">(</span><span class="m m-Decimal">22</span><span class="p">);</span><span class="w"> </span><span class="c1">// chiamata</span>

<span class="c1">// di default, tutte le variabili sono impostate a 0 durante l&#39;istanziazione</span>


<span class="c1">// Delete può essere chiamato sulla maggior parte dei valori</span>
<span class="c1">// (NON distrugge il valore, ma lo setta a 0, il valore did default)</span>
<span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">5</span><span class="p">;</span>


<span class="c1">// Destructuring/Tuple</span>
<span class="p">(</span>x<span class="p">,</span><span class="w"> </span>y<span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="m m-Decimal">2</span><span class="p">,</span><span class="w"> </span><span class="m m-Decimal">7</span><span class="p">);</span><span class="w"> </span><span class="c1">// assegna/scambia più valori</span>


<span class="c1">// 2. STRUTTURE DATI</span>
<span class="c1">// Array</span>
<span class="kt">bytes32</span><span class="p">[</span><span class="m m-Decimal">5</span><span class="p">]</span><span class="w"> </span>nicknames<span class="p">;</span><span class="w"> </span><span class="c1">// array statico</span>
<span class="kt">bytes32</span><span class="p">[]</span><span class="w"> </span>names<span class="p">;</span><span class="w"> </span><span class="c1">// array dinamico</span>
<span class="kt">uint</span><span class="w"> </span><span class="nv">newLength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>names<span class="p">.</span>push<span class="p">(</span><span class="s2">&quot;John&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// aggiungere un elemento restituisce</span>
<span class="c1">// la nuova dimensione dell&#39;array</span>
<span class="c1">// Dimesione</span>
names<span class="p">.</span>length<span class="p">;</span><span class="w"> </span><span class="c1">// ottenere la dimensione</span>
names<span class="p">.</span>length<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// la dimensione può essere assegnata (solo per gli array nello storage)</span>

<span class="c1">// array multidimensionali</span>
<span class="kt">uint</span><span class="p">[][</span><span class="m m-Decimal">5</span><span class="p">]</span><span class="w"> </span>x<span class="p">;</span><span class="w"> </span><span class="c1">// array con 5 array dinamici (ordine opposto rispetto ad</span>
<span class="c1">// altri linguaggi)</span>

<span class="c1">// Dizionari (da un tipo qualsiasi a un tipo qualsiasi)</span>
<span class="kt">mapping</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>balances<span class="p">;</span>
balances<span class="p">[</span><span class="s2">&quot;charles&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>
<span class="c1">// il risultato balances[&quot;ada&quot;] è 0, tutte le chiavi non settate </span>
<span class="c1">// restituiscono zero</span>
<span class="c1">// &#39;public&#39; permette che si possa fare questo da un altro contratto:</span>
contractName<span class="p">.</span>balances<span class="p">(</span><span class="s2">&quot;charles&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// restituisce 1</span>
<span class="c1">// &#39;public&#39; ha creato getter (ma non un setter), come il seguente:</span>
<span class="kt">function</span><span class="w"> </span><span class="nv">balances</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="nv">_account</span><span class="p">)</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">balance</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">return</span><span class="w"> </span>balances<span class="p">[</span>_account<span class="p">];</span>
<span class="p">}</span>

<span class="c1">//  Mapping annidati</span>
<span class="kt">mapping</span><span class="w"> </span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">mapping</span><span class="w"> </span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">uint</span><span class="p">))</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>custodians<span class="p">;</span>

<span class="c1">// Fare una delete</span>
delete<span class="w"> </span>balances<span class="p">[</span><span class="s2">&quot;John&quot;</span><span class="p">];</span>
delete<span class="w"> </span>balances<span class="p">;</span><span class="w"> </span><span class="c1">// assegna 0 a tutti gli elementi</span>

<span class="c1">// Diversamente da altri linguaggi NON si può iterare tra gli elementi di un</span>
<span class="c1">// mapping senza conoscere le chiavi - ma si può costruire una struttura dati a monte</span>
<span class="c1">// che lo faccia</span>

<span class="c1">// Strutture dati</span>
<span class="kt">struct</span><span class="w"> </span><span class="nv">Bank</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">owner</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="nv">balance</span><span class="p">;</span>
<span class="p">}</span>
Bank<span class="w"> </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span>Bank<span class="p">({</span>
<span class="w">    </span>owner<span class="o">:</span><span class="w"> </span><span class="k">msg.sender</span><span class="p">,</span>
<span class="w">    </span>balance<span class="o">:</span><span class="w"> </span><span class="m m-Decimal">5</span>
<span class="p">});</span>
<span class="c1">// oppure</span>
Bank<span class="w"> </span>c<span class="w"> </span><span class="o">=</span><span class="w"> </span>Bank<span class="p">(</span><span class="k">msg.sender</span><span class="p">,</span><span class="w"> </span><span class="m m-Decimal">5</span><span class="p">);</span>

c<span class="p">.</span>balance<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">5</span><span class="p">;</span><span class="w"> </span><span class="c1">// imposta ad un nuovo valore</span>
delete<span class="w"> </span>b<span class="p">;</span>
<span class="c1">// reimposta, imposta tutte le variabili della struttura a 0, tranne i mapping</span>

<span class="c1">// Enumerazioni</span>
<span class="kt">enum</span><span class="w"> </span><span class="nv">State</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>Created<span class="p">,</span><span class="w"> </span>Locked<span class="p">,</span><span class="w"> </span>Inactive<span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// di solito si usano per gli automi a stati finiti</span>
State<span class="w"> </span><span class="kt">public</span><span class="w"> </span>state<span class="p">;</span><span class="w"> </span><span class="c1">// Dichiara una variabile da un enum</span>
state<span class="w"> </span><span class="o">=</span><span class="w"> </span>State<span class="p">.</span>Created<span class="p">;</span>
<span class="c1">// Le enum possono essere convertite esplicitamente in int</span>
<span class="kt">uint</span><span class="w"> </span><span class="nv">createdState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint</span><span class="p">(</span>State<span class="p">.</span>Created<span class="p">);</span><span class="w"> </span><span class="c1">//  0</span>

<span class="c1">// Data location: Memory vs. storage vs. calldata - tutti i tipi complessi</span>
<span class="c1">// (array, struct) hanno una data location</span>
<span class="c1">// &#39;memory&#39; non è persistente, &#39;storage&#39; sì</span>
<span class="c1">// Il default è &#39;storage&#39; per varibili locali e di stato; </span>
<span class="c1">// &#39;memory&#39; per i parametri delle funzioni</span>
<span class="c1">// Lo stack può contenere poche varaibili locali</span>

<span class="c1">// Per la maggior parte dei tipi, si può impostare esplicitamente</span>
<span class="c1">// quale data location usare</span>


<span class="c1">// 3. Operatori semplici</span>
<span class="c1">// Ci sono operatori logici, a bit e aritmetici</span>
<span class="c1">// Potenza: **</span>
<span class="c1">// Or esclusivo: ^</span>
<span class="c1">// Negazione bitwise: ~</span>


<span class="c1">// 4. Variabili globali degne di nota</span>
<span class="c1">// ** this **</span>
<span class="kt">this</span><span class="p">;</span><span class="w"> </span><span class="c1">// indirizzo del contratto</span>
<span class="c1">// di solito si usa per trasferire altrove il saldo rimanente </span>
<span class="c1">// al termine della vita del contratto </span>
<span class="kt">this</span><span class="p">.</span>balance<span class="p">;</span>
<span class="kt">this</span><span class="p">.</span>someFunction<span class="p">();</span><span class="w"> </span><span class="c1">// invoca una funzione esterna tramite chiamata,</span>
<span class="c1">// non attraverso un salto interno</span>

<span class="c1">// ** msg - Il messaggio corrente ricevuto dal contratto **</span>
<span class="k">msg.sender</span><span class="p">;</span><span class="w"> </span><span class="c1">// indirizzo di chi ha inviato msg</span>
<span class="k">msg.value</span><span class="p">;</span><span class="w"> </span><span class="c1">// l&#39;importo di ether forniti a questo contratto espresso in &quot;wei&quot;,</span>
<span class="c1">// la funzione dovrebbe essere marcata come &quot;payable&quot;</span>
<span class="k">msg.data</span><span class="p">;</span><span class="w"> </span><span class="c1">// in bytes, tutti gli argomenti del messaggio</span>
<span class="k">msg.gas</span><span class="p">;</span><span class="w"> </span><span class="c1">// &#39;gas&#39; restante</span>

<span class="c1">// ** tx - Questa transazione **</span>
<span class="k">tx.origin</span><span class="p">;</span><span class="w"> </span><span class="c1">// l&#39;indirizzo di chi ha avviato questa transazione</span>
<span class="k">tx.gasprice</span><span class="p">;</span><span class="w"> </span><span class="c1">// il prezzo del &quot;gas&quot; per la transazione</span>

<span class="c1">// ** block - Informazioni sul blocco attuale **</span>
now<span class="p">;</span><span class="w"> </span><span class="c1">// ora corrente (approssimatamente), alias di block.timestamp (in Unix time)</span>
<span class="c1">// Da notare come può essere manipolata dai miner, quindi da usare con cautela</span>

<span class="k">block.number</span><span class="p">;</span><span class="w"> </span><span class="c1">// numero del blocco attuale</span>
<span class="k">block.difficulty</span><span class="p">;</span><span class="w"> </span><span class="c1">// difficulty del blocco attuale</span>
<span class="k">block.blockhash</span><span class="p">(</span><span class="m m-Decimal">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// restituisce un bytes32, funziona solo per i 256 blocchi</span>
<span class="c1">// più recenti</span>
<span class="k">block.gasLimit</span><span class="p">();</span>

<span class="c1">// ** storage - Memoria persistente (in hash) **</span>
storage<span class="p">[</span><span class="s1">&#39;abc&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;def&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// mappa da parole di 256 bit a parole di 256 bit</span>


<span class="c1">// 4. FUNZIONI E ALTRO</span>
<span class="c1">// A. Funzioni</span>
<span class="c1">// Una semplice funzione</span>
<span class="kt">function</span><span class="w"> </span><span class="nv">increment</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>x<span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">return</span><span class="w"> </span>x<span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Le funzioni possono restituire molti valori,</span>
<span class="c1">// e visto che i valori di ritorno vengono dichiarati prima</span>
<span class="c1">// non è richiesta un&#39;instruzione return esplicita</span>
<span class="kt">function</span><span class="w"> </span><span class="nv">increment</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">y</span><span class="p">)</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>x<span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>
<span class="w">    </span>y<span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// Chiama la funzione di cui sopra</span>
<span class="kt">uint</span><span class="w"> </span><span class="p">(</span>a<span class="p">,</span>b<span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>increment<span class="p">(</span><span class="m m-Decimal">1</span><span class="p">,</span><span class="m m-Decimal">1</span><span class="p">);</span>

<span class="c1">// &#39;view&#39; (un alias di &#39;constant&#39;)</span>
<span class="c1">// indica che la funzione non cambia / non può cambiare le variabili persistenti</span>
<span class="c1">// Le funzioni definite con view vengono eseguite localmente, non sulla blockchain</span>
<span class="c1">// N.B. la keyword constant sarà presto deprecata</span>
<span class="kt">uint</span><span class="w"> </span><span class="nv">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>

<span class="kt">function</span><span class="w"> </span><span class="nv">increment</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="p">)</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>x<span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>
<span class="w">    </span>y<span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// questa riga fallirebbe</span>
<span class="w">    </span><span class="c1">// y è una variabile di stato, e non può essere cambiata in una funzione di view</span>
<span class="p">}</span>

<span class="c1">// &#39;pure&#39; è più restrittivo di &#39;view&#39; o &#39;constant&#39;, e non</span>
<span class="c1">// permette nemmeno di leggere le varaibili di stato</span>
<span class="c1">// In realtà è più complicato, per approfondire su</span>
<span class="c1">// view/pure:</span>
<span class="c1">// http://solidity.readthedocs.io/en/develop/contracts.html#view-functions</span>

<span class="c1">// Modificatori di visibilità per le funzioni</span>
<span class="c1">// Possono essere messi vicino a &#39;view&#39; e includono:</span>
<span class="c1">// public - visibile esternamente e internamente (di default per function)</span>
<span class="c1">// external - visible solo esternamente (comprese le chiamate fatte con this.)</span>
<span class="c1">// private - visibile solo dal contratto attuale</span>
<span class="c1">// internal - visibile solo dal contratto attuale, e da quelli che ne derivano</span>

<span class="c1">// Di solito è una buona idea marcare esplicitamente ogni funzione</span>

<span class="c1">// Le funzioni sono hoisted e si può assegnare una funzione ad una variabile</span>
<span class="kt">function</span><span class="w"> </span><span class="nv">a</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">var</span><span class="w"> </span>z<span class="w"> </span><span class="o">=</span><span class="w"> </span>b<span class="p">;</span>
<span class="w">    </span>b<span class="p">();</span>
<span class="p">}</span>

<span class="kt">function</span><span class="w"> </span><span class="nv">b</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="p">}</span>

<span class="c1">// Tutte le funzioni che ricevono ether devono essere dichiarate come &#39;payable&#39;</span>
<span class="kt">function</span><span class="w"> </span><span class="nv">depositEther</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">payable</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>balances<span class="p">[</span><span class="k">msg.sender</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">msg.value</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// I cicli sono da preferire alla ricorsione</span>
<span class="c1">// (la profondità massima dello stack è 1024)</span>
<span class="c1">// Inoltre, non impostare dei loop senza limiti,</span>
<span class="c1">// perchè potresti raggiungere il limite per il gas</span>

<span class="c1">// B. Eventi</span>
<span class="c1">// Gli eventi notificano a terze parti; è facile ispezionare e</span>
<span class="c1">// accedere agli eventi al di fuori della blockchain (con client leggeri);</span>
<span class="c1">// Tipicamente si dichiarano dopo i parametri del contratto</span>

<span class="c1">// Tipicamente, sono capitalized - si usa Log come prefisso per esplicitarli</span>
<span class="c1">// meglio ed evitare che si confondano con una chiamata a funzione</span>

<span class="c1">// Dichiarazione</span>
<span class="kt">event</span><span class="w"> </span><span class="nv">LogSent</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>from<span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>to<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">amount</span><span class="p">);</span><span class="w"> </span>
<span class="c1">// Da notare le prime lettere maiuscole</span>

<span class="c1">// Chiamata</span>
LogSent<span class="p">(</span>from<span class="p">,</span><span class="w"> </span>to<span class="p">,</span><span class="w"> </span>amount<span class="p">);</span>

<span class="cm">/**</span>

<span class="cm">Una terza parte esterna (entità o contratto), può osservare usando</span>
<span class="cm">la libreria JavaScript Web3:</span>

<span class="cm">// Quel che se segue è codice JavaScript, non Solidity</span>
<span class="cm">Coin.LogSent().watch({}, &#39;&#39;, function(error, result) {</span>
<span class="cm">    if (!error) {</span>
<span class="cm">        console.log(&quot;Trasferimento valuta: &quot; + result.args.amount +</span>
<span class="cm">            &quot; la valuta è stata mandata da &quot; + result.args.from +</span>
<span class="cm">            &quot; a &quot; + result.args.to + &quot;.&quot;);</span>
<span class="cm">        console.log(&quot;I saldi ora sono:\n&quot; +</span>
<span class="cm">            &quot;Mittente: &quot; + Coin.balances.call(result.args.from) +</span>
<span class="cm">            &quot;Destinatario: &quot; + Coin.balances.call(result.args.to));</span>
<span class="cm">    }</span>
<span class="cm">}</span>
<span class="cm">**/</span>

<span class="c1">// È prassi che un contratto dipenda da un altro (es. che dipenda</span>
<span class="c1">// dai tassi di cambio forniti da un altro contratto)</span>

<span class="c1">// C. Modifier</span>
<span class="c1">// I modifier validano gli input per conto dele funzioni verificando ad esempio</span>
<span class="c1">// il saldo minimo o l&#39;autenticazione dell&#39;utente;</span>
<span class="c1">// sono simili alle calusole di guardia di altri linguaggi</span>

<span class="c1">// &#39;_&#39; (underscore) viene spesso posizionato nell&#39;ultima riga del body, e indica</span>
<span class="c1">// che la funzione chiamata dev&#39;essere posizionata lì</span>
<span class="kt">modifier</span><span class="w"> </span>onlyAfter<span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">_time</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">require</span><span class="w"> </span><span class="p">(</span>now<span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span>_time<span class="p">);</span><span class="w"> </span>_<span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="kt">modifier</span><span class="w"> </span>onlyOwner<span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">require</span><span class="p">(</span><span class="k">msg.sender</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>owner<span class="p">)</span><span class="w"> </span>_<span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="c1">// usate comunemente negli automi a stati finiti</span>
<span class="kt">modifier</span><span class="w"> </span>onlyIfStateA<span class="w"> </span><span class="p">(</span>State<span class="w"> </span>currState<span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">require</span><span class="p">(</span>currState<span class="w"> </span><span class="o">==</span><span class="w"> </span>State<span class="p">.</span>A<span class="p">)</span><span class="w"> </span>_<span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="c1">// Si dichiarano appena dopo la definizione di una funzione</span>
<span class="kt">function</span><span class="w"> </span><span class="nv">changeOwner</span><span class="p">(</span>newOwner<span class="p">)</span>
onlyAfter<span class="p">(</span>someTime<span class="p">)</span>
onlyOwner<span class="p">()</span>
onlyIfState<span class="p">(</span>State<span class="p">.</span>A<span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span>owner<span class="w"> </span><span class="o">=</span><span class="w"> </span>newOwner<span class="p">;</span>
<span class="p">}</span>

<span class="c1">// L&#39;underscore può essere messo prima della fine del body,</span>
<span class="c1">// ma un&#39;istruzione di ritorno esplicita lo salterebbe,</span>
<span class="c1">// quindi è da usare con cautela</span>
<span class="kt">modifier</span><span class="w"> </span>checkValue<span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">amount</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>_<span class="p">;</span>
<span class="w">    </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span><span class="k">msg.value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span>amount<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">amountToRefund</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>amount<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">msg.value</span><span class="p">;</span>
<span class="w">        </span><span class="k">msg.sender</span><span class="p">.</span>transfer<span class="p">(</span>amountToRefund<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>


<span class="c1">// 6. ISTRUZIONI CONDIZIONALI E CICLI</span>

<span class="c1">// Troviamo tutte le istruzioni condizionali di base - incluse if/else, for,</span>
<span class="c1">// while, break, continue e return - ma non c&#39;è lo switch</span>

<span class="c1">// La sintassi è la stessa di JavaScript, ma non esiste la conversione di tipo</span>
<span class="c1">// in booleano dai non booleani (bisogna usare gli operatori logici per</span>
<span class="c1">// ottenere il valore boolean)</span>

<span class="c1">// Bisogna stare attenti i loop che iterano in base al comportamento</span>
<span class="c1">// dell&#39;utente, dato che i contratti hanno un tetto massimo di gas</span>
<span class="c1">// per blocco di codice e falliranno se lo superano</span>
<span class="c1">// Ad esempio:</span>
<span class="kt">for</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>x<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>refundAddressList<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>x<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>refundAddressList<span class="p">[</span>x<span class="p">].</span>transfer<span class="p">(</span>SOME_AMOUNT<span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Ci sono due errori nel codice precedente:</span>
<span class="c1">// 1. Un fallimento su una transfer impedisce al loop di completare tutti</span>
<span class="c1">// i cicli, bloccando dei soldi;</span>
<span class="c1">// 2. Questo loop potrebbe essere arbitrariamente lungo (si basa sul numero</span>
<span class="c1">// degli utenti che hanno diritto al rimborso), quindi potrebbe fallire sempre</span>
<span class="c1">// se supera il tetto massimo di gas per blocco;</span>
<span class="c1">// Come soluzione, si permette agli utenti di prelevare</span>
<span class="c1">// individualmente dal loro subaccount e segnare il rimborso come riscosso</span>
<span class="c1">// Ad es. preferire pull payments ai push payment</span>


<span class="c1">// 7. OGGETTI/CONTRATTI</span>

<span class="c1">// A. Invocare un contratto esterno</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">InfoFeed</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">info</span><span class="p">()</span><span class="w"> </span><span class="kt">payable</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">ret</span><span class="p">)</span><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="kt">return</span><span class="w"> </span><span class="m m-Decimal">42</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">Consumer</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>InfoFeed<span class="w"> </span>feed<span class="p">;</span><span class="w"> </span><span class="c1">// punta ad un contratto sulla blockchain</span>

<span class="w">    </span><span class="c1">// Imposta il feed sull&#39;istanza del contratto esistente</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">setFeed</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">addr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// fare attenzione alla conversione di tipo automatica;</span>
<span class="w">        </span><span class="c1">// il costruttore non viene invocato</span>
<span class="w">        </span>feed<span class="w"> </span><span class="o">=</span><span class="w"> </span>InfoFeed<span class="p">(</span>addr<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Imposta il feed ad una nuova istanza del contratto</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">createNewFeed</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>feed<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span>InfoFeed<span class="p">();</span><span class="w"> </span><span class="c1">// viene creata una nuova istanza;</span>
<span class="w">        </span><span class="c1">// viene invocato il costruttore</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">callFeed</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// le parentesi finali invocano il contratto, opzionalmente si può</span>
<span class="w">        </span><span class="c1">// specificare un importo custom di ether o di gas</span>
<span class="w">        </span>feed<span class="p">.</span>info<span class="p">.</span>value<span class="p">(</span><span class="m m-Decimal">10</span><span class="p">).</span>gas<span class="p">(</span><span class="m m-Decimal">800</span><span class="p">)();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// B. ereditarietà</span>

<span class="c1">// Conta l&#39;ordine, l&#39;ultimo contratto ereditato (es. &#39;def&#39;) può andare</span>
<span class="c1">// in overriding su parti dei contratti precedentemente ereditati</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">MyContract</span><span class="w"> </span><span class="kt">is</span><span class="w"> </span>abc<span class="p">,</span><span class="w"> </span>def<span class="p">(</span><span class="s2">&quot;a custom argument to def&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="c1">// Funzione in overriding</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">z</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span><span class="k">msg.sender</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>owner<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span>def<span class="p">.</span>z<span class="p">();</span><span class="w"> </span><span class="c1">// invoca la funzione overridden da def</span>
<span class="w">            </span>super<span class="p">.</span>z<span class="p">();</span><span class="w"> </span><span class="c1">// chiama la funzione overridden del padre</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Funzioni astratte</span>
<span class="kt">function</span><span class="w"> </span><span class="nv">someAbstractFunction</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="p">);</span>
<span class="c1">// non possono essere compilate, vengono usate nei contratti base/astratti</span>
<span class="c1">// e poi verranno implementate</span>

<span class="c1">// C. Import</span>

<span class="kt">import</span><span class="w"> </span><span class="s2">&quot;filename&quot;</span><span class="p">;</span>
<span class="kt">import</span><span class="w"> </span><span class="s2">&quot;github.com/ethereum/dapp-bin/library/iterable_mapping.sol&quot;</span><span class="p">;</span>


<span class="c1">// 8. ALTRE KEYWORD</span>

<span class="c1">// A. Selfdestruct</span>
<span class="c1">// autodistrugge il contratto corrente, inviando i fondi ad un indirizzo</span>
<span class="c1">// (di solito il creatore)</span>
selfdestruct<span class="p">(</span>SOME_ADDRESS<span class="p">);</span>

<span class="c1">// rimuove il codice e quanto in memoria dal blocco corrente e da tutti i blocchi futuri</span>
<span class="c1">// aiuta ad alleggerire i client, ma le informazioni precedenti continueranno</span>
<span class="c1">// a persistere sulla blockchain</span>

<span class="c1">// È un pattern comune, permette al proprietario di terminare il contratto</span>
<span class="c1">// e ricevere i fondi rimasti</span>
<span class="kt">function</span><span class="w"> </span><span class="nv">remove</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">if</span><span class="p">(</span><span class="k">msg.sender</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>creator<span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Solo il creatore del contratto può farlo</span>
<span class="w">        </span>selfdestruct<span class="p">(</span>creator<span class="p">);</span><span class="w"> </span><span class="c1">// Cessa l&#39;attività del contratto, trasferisce i fondi</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Si potrebbe voler disattivare il contratto manualmente, anzichè usare una</span>
<span class="c1">// selfdestruct (gli ether inviati ad un contratto dopo una selfdestruct</span>
<span class="c1">// vengono persi)</span>


<span class="c1">// 9. NOTE SUL DESIGN DEI CONTRATTI</span>

<span class="c1">// A. Offruscamento</span>
<span class="c1">// Tutte le variabili sono pubblicamente visibili sulla blockchain, quindi </span>
<span class="c1">// qualsiasi informazione privata ha bisogno di essere offruscata (es. hash con una</span>
<span class="c1">// chiave segreta)</span>

<span class="c1">// Passi: 1. Impegnarsi pagare una certa cifra, 2. Rivelare l&#39;impegno preso</span>
<span class="nb">keccak256</span><span class="p">(</span><span class="s2">&quot;una_puntata_d_asta&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;un segreto&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// impegno</span>

<span class="c1">// in futuro, l&#39;invocazione della funzione rivelatrice del contratto</span>
<span class="c1">// mostrerà la puntata con il segreto che produce lo SHA3</span>
reveal<span class="p">(</span><span class="m m-Decimal">100</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ilMioSegreto&quot;</span><span class="p">);</span>

<span class="c1">// B. Ottimizzazione della memoria (storage)</span>
<span class="c1">// Scrivere dati sulla blockchain può essere costoso visto che vengono </span>
<span class="c1">// conservati per sempre; siamo incoraggati ad usare la memoria in maniera</span>
<span class="c1">// scaltra (un giorno la compilazione migliorerà, ma per ora è vantaggioso</span>
<span class="c1">// pianificare le strutture dati da usare - e conservarne il minimo possibile</span>
<span class="c1">// sulla blockchain)</span>

<span class="c1">// I costi per conservare cose come array multidimensionali sono spesso alti</span>
<span class="c1">// (costa conservare dati - non dichiarare variabili parzialmente vuote)</span>

<span class="c1">// C. Accesso ai dati sulla blockchain</span>
<span class="c1">// Non si può impedire alle persone o ai computer di leggere il contenuto</span>
<span class="c1">// o lo stato delle transazioni</span>

<span class="c1">// Anche se &#39;private&#39; non permette agli altri *contratti* di leggere alcune</span>
<span class="c1">// informazioni direttamente, qualsiasi altro attore può leggerle</span>
<span class="c1">// sulla blockchain</span>

<span class="c1">// Tutti i dati, dall&#39;inizio, vegono conservati sulla blockchain e</span>
<span class="c1">// tutti possono accedere alle informazioni passate e ai cambiamenti futuri</span>

<span class="c1">// D. Oracle e dati esterni</span>
<span class="c1">// Gli oracle consentono di interagire con i tuoi smart contract</span>
<span class="c1">// al di fuori della blockchain. </span>
<span class="c1">// Vengono usati per ricevere informazioni dal mondo reale, mandare</span>
<span class="c1">// richieste post al mondo reale o vice versa.</span>

<span class="c1">// Anche le implementazioni che sfruttano l&#39;ora vengono fatte attraverso</span>
<span class="c1">// gli oracle, visto che i contratti devono essere chiamati direttamente e</span>
<span class="c1">// non possono fare una &quot;subscribe&quot; a un certo orario. </span>
<span class="c1">// Data la decentralizzazione degli smart contract, vorrai ricevere informazioni</span>
<span class="c1">// in maniera decentralizzata, altrimenti rischi di ricreare l&#39;accentramento</span>
<span class="c1">// che la progettazione degli smart contract si prefigge di prevenire.</span>

<span class="c1">// Il modo migliore di ottenere e usare dati decentralizzati già pronti</span>
<span class="c1">// è attraverso i Chainlink Data Feeds</span>
<span class="c1">// https://docs.chain.link/docs/get-the-latest-price</span>
<span class="c1">// Possiamo fare riferimento a certe informazioni della blockchain</span>
<span class="c1">// che sono già state aggregate da più fonti e ridistribuite on-chain,</span>
<span class="c1">// usandole come &quot;banche dati&quot; di fonti di informazione. </span>

<span class="c1">// Puoi vedere altri esempi che effettuano chiamate alle API qui:</span>
<span class="c1">// https://docs.chain.link/docs/make-a-http-get-request</span>

<span class="c1">// E ovviamente puoi costruire la tua rete di orace, ma assicurati di sapere</span>
<span class="c1">// quant&#39;è accentrata o decentralizzata la tua applicazione. </span>

<span class="c1">// Mettere su una rete di oracle per conto tuo</span>

<span class="c1">// E. Cron Job</span>
<span class="c1">// I contratti devono essere chiamati manualmente per gestire lo scheduling</span>
<span class="c1">// in base all&#39;orario; si può creare un codice esterno che li pinghi reglarmente</span>
<span class="c1">//  oppure fornire degli incentivi (ether) a qualcun&#39;altro che lo faccia</span>

<span class="c1">// F. Pattern Observer</span>
<span class="c1">// Un pattern observer permette di iscriversi come osservatore e</span>
<span class="c1">// registrare una funzione che verrà chiamata dall&#39;oracle</span>
<span class="c1">// (N.B. l&#39;oracolo paga perchè sia eseguita quest&#39;azione)</span>
<span class="c1">// Ci sono alcune somoglianze nella registrazione con Pub/sub</span>

<span class="c1">// Questo è un contratto astratto che importano sia il client che il server</span>
<span class="c1">// Il client dovrebbe implementarlo</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">SomeOracleCallback</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">oracleCallback</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="nv">_value</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">_time</span><span class="p">,</span><span class="w"> </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">info</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">SomeOracle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>SomeOracleCallback<span class="p">[]</span><span class="w"> </span>callbacks<span class="p">;</span><span class="w"> </span><span class="c1">// array di tutti gli osservatori iscritti</span>

<span class="w">    </span><span class="c1">// Osservatori iscritti</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">addSubscriber</span><span class="p">(</span>SomeOracleCallback<span class="w"> </span>a<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>callbacks<span class="p">.</span>push<span class="p">(</span>a<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">notify</span><span class="p">(</span>value<span class="p">,</span><span class="w"> </span>time<span class="p">,</span><span class="w"> </span>info<span class="p">)</span><span class="w"> </span><span class="kt">private</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">for</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>callbacks<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// tutti gli osservatori iscritti dovranno implementare la oracleCallback</span>
<span class="w">            </span>callbacks<span class="p">[</span>i<span class="p">].</span>oracleCallback<span class="p">(</span>value<span class="p">,</span><span class="w"> </span>time<span class="p">,</span><span class="w"> </span>info<span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">doSomething</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Codice che fa qualcosa</span>

<span class="w">        </span><span class="c1">// Notifica a tutti gli iscritti</span>
<span class="w">        </span>notify<span class="p">(</span>_value<span class="p">,</span><span class="w"> </span>_time<span class="p">,</span><span class="w"> </span>_info<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Il contratto client può aggiungersi agli iscritti (con addSubscriber) </span>
<span class="c1">// del contratto SomeOracle, importando SomeOracleCallback</span>

<span class="c1">// G. Automi a stati finiti</span>
<span class="c1">// vedi l&#39;esempio sotto che usa enum per lo stato e il modifier inState</span>
</pre></div>
<p>Prova l'esempio completo qui sotto <a href="https://remix.ethereum.org/#version=soljson-v0.6.6+commit.6c089d02.js&amp;optimize=false&amp;evmVersion=null&amp;gist=3d12cd503dcedfcdd715ef61f786be0b&amp;runs=200">usando remix e la <code>JavaScript VM</code></a></p>
<div class="highlight"><pre lang="solidity"><span class="c1">// *** ESEMPIO: Un esempio di crowdfunding (molto simile a Kickstarter) ***</span>
<span class="c1">// ** START EXAMPLE **</span>

<span class="c1">// CrowdFunder.sol</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.6.6</span><span class="p">;</span>

<span class="c1">/// @title CrowdFunder</span>
<span class="c1">/// @author nemild</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">CrowdFunder</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Variabili impostate alla creazione dal creatore</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="k">public </span><span class="nv">creator</span><span class="p">;</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">payable</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>fundRecipient<span class="p">;</span><span class="w"> </span><span class="c1">// il creatore può essere diverso</span>
<span class="w">    </span><span class="c1">// da chi riceve i fondi, che dev&#39;essere payable</span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="k">public </span><span class="nv">minimumToRaise</span><span class="p">;</span><span class="w"> </span><span class="c1">// è richiesto per chiedere il finanziamento,</span>
<span class="w">    </span><span class="c1">// altrimenti tutti ricevono un rimborso</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="nv">campaignUrl</span><span class="p">;</span>
<span class="w">    </span>byte<span class="w"> </span>version<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Strutture dati</span>
<span class="w">    </span><span class="kt">enum</span><span class="w"> </span><span class="nv">State</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>Fundraising<span class="p">,</span>
<span class="w">        </span>ExpiredRefund<span class="p">,</span>
<span class="w">        </span>Successful
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">struct</span><span class="w"> </span><span class="nv">Contribution</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">amount</span><span class="p">;</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">payable</span><span class="w"> </span>contributor<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Variabili di stato</span>
<span class="w">    </span>State<span class="w"> </span><span class="kt">public</span><span class="w"> </span>state<span class="w"> </span><span class="o">=</span><span class="w"> </span>State<span class="p">.</span>Fundraising<span class="p">;</span><span class="w"> </span><span class="c1">// inizializzato alla creazione</span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="k">public </span><span class="nv">totalRaised</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="k">public </span><span class="nv">raiseBy</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="k">public </span><span class="nv">completeAt</span><span class="p">;</span>
<span class="w">    </span>Contribution<span class="p">[]</span><span class="w"> </span>contributions<span class="p">;</span>

<span class="w">    </span><span class="kt">event</span><span class="w"> </span><span class="nv">LogFundingReceived</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">addr</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">amount</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">currentTotal</span><span class="p">);</span>
<span class="w">    </span><span class="kt">event</span><span class="w"> </span><span class="nv">LogWinnerPaid</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">winnerAddress</span><span class="p">);</span>

<span class="w">    </span><span class="kt">modifier</span><span class="w"> </span>inState<span class="p">(</span>State<span class="w"> </span>_state<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>state<span class="w"> </span><span class="o">==</span><span class="w"> </span>_state<span class="p">);</span>
<span class="w">        </span>_<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">modifier</span><span class="w"> </span>isCreator<span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span><span class="k">msg.sender</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>creator<span class="p">);</span>
<span class="w">        </span>_<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Aspetta 24 settimane dopo l&#39;ultimo cambio di stato prima di consentire</span>
<span class="w">    </span><span class="c1">// che in contratto venga distrutto</span>
<span class="w">    </span><span class="kt">modifier</span><span class="w"> </span>atEndOfLifecycle<span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">require</span><span class="p">(((</span>state<span class="w"> </span><span class="o">==</span><span class="w"> </span>State<span class="p">.</span>ExpiredRefund<span class="w"> </span><span class="o">||</span><span class="w"> </span>state<span class="w"> </span><span class="o">==</span><span class="w"> </span>State<span class="p">.</span>Successful<span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">        </span>completeAt<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Decimal">24</span><span class="w"> </span>weeks<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>now<span class="p">));</span>
<span class="w">        </span>_<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">crowdFund</span><span class="p">(</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">timeInHoursForFundraising</span><span class="p">,</span>
<span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>_campaignUrl<span class="p">,</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">payable</span><span class="w"> </span>_fundRecipient<span class="p">,</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">_minimumToRaise</span><span class="p">)</span>
<span class="w">        </span><span class="kt">public</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span>creator<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">msg.sender</span><span class="p">;</span>
<span class="w">        </span>fundRecipient<span class="w"> </span><span class="o">=</span><span class="w"> </span>_fundRecipient<span class="p">;</span>
<span class="w">        </span>campaignUrl<span class="w"> </span><span class="o">=</span><span class="w"> </span>_campaignUrl<span class="p">;</span>
<span class="w">        </span>minimumToRaise<span class="w"> </span><span class="o">=</span><span class="w"> </span>_minimumToRaise<span class="p">;</span>
<span class="w">        </span>raiseBy<span class="w"> </span><span class="o">=</span><span class="w"> </span>now<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span>timeInHoursForFundraising<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="w"> </span>hours<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">contribute</span><span class="p">()</span>
<span class="w">    </span><span class="kt">public</span>
<span class="w">    </span><span class="kt">payable</span>
<span class="w">    </span>inState<span class="p">(</span>State<span class="p">.</span>Fundraising<span class="p">)</span>
<span class="w">    </span><span class="kt">returns</span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">id</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span>contributions<span class="p">.</span>push<span class="p">(</span>
<span class="w">            </span>Contribution<span class="p">({</span>
<span class="w">                </span>amount<span class="o">:</span><span class="w"> </span><span class="k">msg.value</span><span class="p">,</span>
<span class="w">                </span>contributor<span class="o">:</span><span class="w"> </span><span class="k">msg.sender</span>
<span class="w">            </span><span class="p">})</span><span class="w"> </span><span class="c1">// usiamo un array per iterare</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span>totalRaised<span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">msg.value</span><span class="p">;</span>

<span class="w">        </span>emit<span class="w"> </span>LogFundingReceived<span class="p">(</span><span class="k">msg.sender</span><span class="p">,</span><span class="w"> </span><span class="k">msg.value</span><span class="p">,</span><span class="w"> </span>totalRaised<span class="p">);</span>

<span class="w">        </span>checkIfFundingCompleteOrExpired<span class="p">();</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>contributions<span class="p">.</span>length<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// restituisce l&#39;id</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">checkIfFundingCompleteOrExpired</span><span class="p">()</span>
<span class="w">    </span><span class="kt">public</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>totalRaised<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span>minimumToRaise<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span>state<span class="w"> </span><span class="o">=</span><span class="w"> </span>State<span class="p">.</span>Successful<span class="p">;</span>
<span class="w">            </span>payOut<span class="p">();</span>

<span class="w">            </span><span class="c1">// qui si può incentivare chi ha provocato il cambiamento di stato</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="kt">else</span><span class="w"> </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span>now<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span>raiseBy<span class="w"> </span><span class="p">)</span><span class="w">  </span><span class="p">{</span>
<span class="w">            </span>state<span class="w"> </span><span class="o">=</span><span class="w"> </span>State<span class="p">.</span>ExpiredRefund<span class="p">;</span><span class="w"> </span><span class="c1">// ora i finanziatori possono avere</span>
<span class="w">            </span><span class="c1">// il rimborso chiamando getRefund(id)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span>completeAt<span class="w"> </span><span class="o">=</span><span class="w"> </span>now<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">payOut</span><span class="p">()</span>
<span class="w">    </span><span class="kt">public</span>
<span class="w">    </span>inState<span class="p">(</span>State<span class="p">.</span>Successful<span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span>fundRecipient<span class="p">.</span>transfer<span class="p">(</span><span class="kt">address</span><span class="p">(</span><span class="kt">this</span><span class="p">).</span>balance<span class="p">);</span>
<span class="w">        </span>LogWinnerPaid<span class="p">(</span>fundRecipient<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">getRefund</span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">id</span><span class="p">)</span>
<span class="w">    </span>inState<span class="p">(</span>State<span class="p">.</span>ExpiredRefund<span class="p">)</span>
<span class="w">    </span><span class="kt">public</span>
<span class="w">    </span><span class="kt">returns</span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>contributions<span class="p">.</span>length<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span>id<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>id<span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>contributions<span class="p">[</span>id<span class="p">].</span>amount<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="w"> </span><span class="p">);</span>

<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">amountToRefund</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>contributions<span class="p">[</span>id<span class="p">].</span>amount<span class="p">;</span>
<span class="w">        </span>contributions<span class="p">[</span>id<span class="p">].</span>amount<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span>

<span class="w">        </span>contributions<span class="p">[</span>id<span class="p">].</span>contributor<span class="p">.</span>transfer<span class="p">(</span>amountToRefund<span class="p">);</span>

<span class="w">        </span><span class="kt">return</span><span class="w"> </span><span class="kt">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">removeContract</span><span class="p">()</span>
<span class="w">    </span><span class="kt">public</span>
<span class="w">    </span>isCreator<span class="p">()</span>
<span class="w">    </span>atEndOfLifecycle<span class="p">()</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span>selfdestruct<span class="p">(</span><span class="k">msg.sender</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// il creatore riceve tutti i fondi che non sono stati riscossi</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// ** END EXAMPLE **</span>
</pre></div>
<p>Qualche altra funzionalità.</p>
<div class="highlight"><pre lang="solidity"><span class="c1">// 10. ATRE FUNZIONALITA&#39; NATIVE</span>

<span class="c1">// Unità di valuta</span>
<span class="c1">// La valuta viene definita partendo dai wei, l&#39;unità più piccola di Ether</span>
<span class="kt">uint</span><span class="w"> </span><span class="nv">minAmount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="w"> </span>wei<span class="p">;</span>
<span class="kt">uint</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="w"> </span>finney<span class="p">;</span><span class="w"> </span><span class="c1">// 1 ether == 1000 finney</span>
<span class="c1">// Per altre unità, vedi: http://ether.fund/tool/converter</span>

<span class="c1">// Unità temporali</span>
<span class="m m-Decimal">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="w"> </span>second
<span class="m m-Decimal">1</span><span class="w"> </span>minutes<span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m m-Decimal">60</span><span class="w"> </span>seconds

<span class="c1">// Le unità temporali si possono moltiplicare, visto che non vegono salvate</span>
<span class="c1">// nelle variabili</span>
<span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">5</span><span class="p">;</span>
<span class="p">(</span>x<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="w"> </span>days<span class="p">);</span><span class="w"> </span><span class="c1">// 5 giorni</span>

<span class="c1">// Attenzione ad usare l&#39;operatore di uguaglianza con i secondi/anni bisestili</span>
<span class="c1">// (sono da preferire maggiore/minore di)</span>

<span class="c1">// Crittografia</span>
<span class="c1">// Tutte le stringhe che vengono passate vengono concatenate prima di</span>
<span class="c1">// calcolare l&#39;hash</span>
sha3<span class="p">(</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;cd&quot;</span><span class="p">);</span>
ripemd160<span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">);</span>
sha256<span class="p">(</span><span class="s2">&quot;def&quot;</span><span class="p">);</span>


<span class="c1">// 11.SICUREZZA</span>

<span class="c1">// I bug possono essere disastrosi per i contratti Ethereum e anche </span>
<span class="c1">// i pattern comuni di Solidity potrebbero riverlarsi degli antipattern</span>

<span class="c1">// Dai un&#39;occhiata ai link sulla sicurezza alla fine di questo documento</span>


<span class="c1">// 12. FUNZIONI DI BASSO LIVELLO</span>
<span class="c1">// call - è di basso livello, non viene usata spesso, perchè non è type safe</span>
successBoolean<span class="w"> </span><span class="o">=</span><span class="w"> </span>someContractAddress<span class="p">.</span>call<span class="p">(</span><span class="s1">&#39;function_name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;arg1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;arg2&#39;</span><span class="p">);</span>

<span class="c1">// callcode - Il codice all&#39;indirizzo target viene eseguito *contestualmente*</span>
<span class="c1">// alla chiamata del contratto</span>
<span class="c1">// fornisce le stesse funzionalità di una libreria</span>
someContractAddress<span class="p">.</span>callcode<span class="p">(</span><span class="s1">&#39;function_name&#39;</span><span class="p">);</span>


<span class="c1">// 13. NOTE SULLO STILE</span>
<span class="c1">// Basate sulla guida allo stile PEP8 di Python</span>
<span class="c1">// Guida completa allo stile: http://solidity.readthedocs.io/en/develop/style-guide.html</span>

<span class="c1">// Riassunto veloce:</span>
<span class="c1">// 4 spazi per l&#39;indentazione</span>
<span class="c1">// Due righe per separare la dichiarazione dei contratti</span>
<span class="c1">// (e altre dichirazioni top level)</span>
<span class="c1">// Evitare spazi ai lati interni delle parentesi tonde</span>
<span class="c1">// Si possono omettere le parentesi graffe per statement monolinea (if, for, etc)</span>
<span class="c1">// L&#39;else dovrebbe essere posizionato su una riga a se</span>

<span class="c1">// 14. COMMENTI NATSPEC</span>
<span class="c1">// usati per la documentazione, commenti e UI esterne</span>

<span class="c1">// Natspec dei contratti - sempre sopra la definizione del contratto</span>
<span class="c1">/// @title Titolo del contratto</span>
<span class="c1">/// @author Nome dell&#39;autore</span>

<span class="c1">// Natspec delle funzioni</span>
<span class="c1">/// @notice informazioni su quel che fa la funzione; mostrate quando la funzione viene eseguita</span>
<span class="c1">/// @dev Documentazione della funzione per sviluppatori</span>

<span class="c1">// Natspec dei parametri/valori di ritorno delle funzioni</span>
<span class="c1">/// @param someParam Una descrizione di quel che fa il parametro</span>
<span class="c1">/// @return Descrizione del valore di ritorno</span>
</pre></div>
<h2>Risorse Aggiuntive</h2>
<ul>
<li><a href="https://solidity.readthedocs.org/en/latest/">Documentazione di Solidity</a></li>
<li><a href="https://docs.chain.link/docs/beginners-tutorial">Tutorial Chainlink per Principianti</a></li>
<li><a href="https://github.com/ConsenSys/smart-contract-best-practices">Best Practice  per Smart Contract</a></li>
<li><a href="https://lab.superblocks.com/">Superblocks Lab - Ambiente di sviluppo su browser per Solidity</a></li>
<li><a href="https://ethfiddle.com/">EthFiddle - Il JsFiddle di Solidity</a></li>
<li><a href="https://remix.ethereum.org/">Solidity Editor su Browser</a></li>
<li><a href="https://gitter.im/ethereum/solidity">Chat Room Gitter su Solidity</a></li>
<li><a href="https://docs.erisindustries.com/tutorials/solidity/">Stategie di Progettazione Modulare per Contratti Ethereum</a></li>
<li><a href="https://docs.chain.link/docs/getting-started">Documentazione Chainlink</a></li>
</ul>
<h2>Framework di Sviluppo per Smart Contract</h2>
<ul>
<li><a href="https://hardhat.org/">Hardhat</a></li>
<li><a href="https://github.com/eth-brownie/brownie">Brownie</a></li>
<li><a href="https://www.trufflesuite.com/">Truffle</a></li>
</ul>
<h2>Librerie importanti</h2>
<ul>
<li><a href="https://github.com/OpenZeppelin/openzeppelin-contracts">Zeppelin</a>: Librerie che offrono pattern comuni (crowdfuding, safemath, ecc)</li>
<li><a href="https://github.com/smartcontractkit/chainlink">Chainlink</a>: Codice che permette di interagire con dati esterni</li>
</ul>
<h2>Contratti di esempio</h2>
<ul>
<li><a href="https://github.com/ethereum/dapp-bin">Dapp Bin</a></li>
<li><a href="https://github.com/PatrickAlphaC/chainlink_defi">Esempi Defi</a></li>
<li><a href="https://github.com/fivedogit/solidity-baby-steps/tree/master/contracts">Solidity per Contratti a Piccoli Passi</a></li>
<li><a href="https://github.com/ConsenSys/dapp-store-contracts">Contratti ConsenSys</a></li>
<li><a href="http://dapps.ethercasts.com/">Lo stato delle Dapp</a></li>
</ul>
<h2>Sicurezza</h2>
<ul>
<li><a href="https://blog.ethereum.org/2016/06/19/thinking-smart-contract-security/">Pensando Alla Sicurezza Degli Smart Contract</a></li>
<li><a href="https://blog.ethereum.org/2016/06/10/smart-contract-security/">Sicurezza Degli Smart Contract</a></li>
<li><a href="http://hackingdistributed.com/">Blog Distribuito di Hacking</a></li>
</ul>
<h2>Stile</h2>
<ul>
<li><a href="http://solidity.readthedocs.io/en/latest/style-guide.html">Guida allo Stile di Solidity</a>: La guida allo stile di Ethereum deriva in gran parte dalla guida allo stile <a href="https://www.python.org/dev/peps/pep-0008/">PEP 8</a> di Python.</li>
</ul>
<h2>Editor</h2>
<ul>
<li><a href="https://remix.ethereum.org/">Remix</a></li>
<li><a href="https://github.com/ethereum/emacs-solidity">Emacs Modalità Solidity</a></li>
<li><a href="https://github.com/tomlion/vim-solidity">Vim Solidity</a></li>
<li>Snippet per gli Editor (<a href="https://gist.github.com/nemild/98343ce6b16b747788bc">Ultisnips format</a>)</li>
</ul>
<h2>Cose da fare in futuro</h2>
<ul>
<li>Nuove keyword: protected, inheritable</li>
<li>Lista dei design pattern comuni (throttling, RNG, upgrade di versione)
-Anti patterns comuni sulla sicurezza</li>
</ul>
<p>Sentiti libero di mandare una pull request con qualsiasi modifica - o scrivi una mail a nemild -/at-/ gmail</p>

        <hr>
        <p>
          Hai un suggerimento? Oppure una correzione? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Apri un issue</a> sul GitHub, o fa un <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/it/solidity.md">pull request</a> da solo!
        </p>
        <p class="contributed">
          In origine contribuita da Nemil Dalal, e modificata da <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/it/solidity.md">2 contributore(i)</a>.
        </p>

        <footer>
          <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width: 0; width: 80px; height: 28px; padding-bottom: 5px;" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/svg/by-sa.svg" /></a>
          <p>
            &copy; 2025
            <a href="https://www.nemil.com">Nemil Dalal</a>,
            Joseph Chow,
            <a href="https://github.com/varshard">Bhoomtawath Plinsut</a>,
            <a href="https://github.com/liushooter">Shooter</a>,
            <a href="https://gist.github.com/PatrickAlphaC">Patrick Collins</a>
          </p>
        </footer>
      </div>
    </div>
  </body>
</html>