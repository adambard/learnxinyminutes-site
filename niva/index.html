<!DOCTYPE html>
<html lang="en">
  <head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WXC8R75DEN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-WXC8R75DEN');
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Language" content="en">
    <title>Learn niva in Y Minutes</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto+Slab:wght@100..900&family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/screen.css">
    <link rel="stylesheet" href="/css/light.css">
    <link rel="stylesheet" href="/css/dark.css">

    <link rel="canonical" href="https://learnxinyminutes.com/niva/">
    <script>
      localStorage.removeItem("lxiym_theme");
    </script>
  </head>
  <body>
    <div class="container">
      <h1><a href="/">Learn X in Y minutes</a></h1>
      <h2>Where X=niva</h2>

      <p class="filelink">
        Get the code:
        <a href="/files/main.niva">main.niva</a>
      </p>
      <div id="doc">
<h2>Intro</h2>
<p>Niva is a simple language that takes a lot of inspiration from Smalltalk.<br />
But leaning towards the functional side and static typed.
Everything is still an object, but instead of classes, interfaces, inheritance, and abstract classes,<br />
we have tagged unions, which is the only way to achieve polymorphism.</p>
<p>For example, everything except the declaration is sending messages to objects.<br />
<code>1 + 2</code> is not a + operator, but a <code>... + Int</code> message for <code>Int</code> object.
(there are no extra costs for that)</p>
<p>C-like: <code>1.inc()</code><br />
Niva: <code>1 inc</code></p>
<p>In essence, niva is highly minimalistic, like its ancestor Smalltalk.<br />
It introduces types, unions, and associated methods.
There are no functions.</p>
<p>Install:</p>
<div class="highlight"><pre lang="bash">git<span class="w"> </span>clone<span class="w"> </span>https://github.com/gavr123456789/Niva.git
<span class="nb">cd</span><span class="w"> </span>Niva
./gradlew<span class="w"> </span>buildJvmNiva
<span class="c1"># LSP here https://github.com/gavr123456789/niva-vscode-bundle</span>
</pre></div>
<h2>The Basics</h2>
<h4>Variable</h4>
<p>Variables are immutable by default.
There is no special keyword for declaring a variable.</p>
<div class="highlight"><pre lang="Scala"><span class="c1">// this is a comment</span>
<span class="n">int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span>
<span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;qwf&quot;</span>
<span class="n">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span>
<span class="n">char</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;a&#39;</span>
<span class="n">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.14f</span>
<span class="n">double</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.14</span>
<span class="n">mutltiLineStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">qwf ars zxc \n \t &quot;qwf&quot;</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="n">explicit_type::</span><span class="nc">Int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>


<span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span><span class="w">  </span>
<span class="n">set</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">#</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span>
<span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">#</span><span class="p">{</span><span class="mi">1</span><span class="w"> </span><span class="sc">&#39;a&#39;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="sc">&#39;b&#39;</span><span class="p">}</span><span class="w"> </span>

<span class="c1">// declare a mutable variable</span>
<span class="n">mut</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>
<span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="c1">// mutate</span>
</pre></div>
<h4>Messages</h4>
<div class="highlight"><pre lang="Scala"><span class="c1">// hello world is a one liner</span>
<span class="s">&quot;Hello world&quot;</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="c1">// echo is a message for String obj</span>


<span class="c1">// There are 3 types of messages</span>
<span class="mi">1</span><span class="w"> </span><span class="n">inc</span><span class="w"> </span><span class="c1">// 2         unary </span>
<span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="c1">// 3         binary</span>
<span class="s">&quot;abc&quot;</span><span class="w"> </span><span class="n">at</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="c1">// &#39;a&#39; keyword</span>


<span class="c1">// they can be chained</span>
<span class="mi">1</span><span class="w"> </span><span class="n">inc</span><span class="w"> </span><span class="n">inc</span><span class="w"> </span><span class="n">inc</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="c1">// 3</span>
<span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="c1">// 1</span>
<span class="mi">1</span><span class="w"> </span><span class="n">to</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">do</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">it</span><span class="w"> </span><span class="n">echo</span><span class="p">]</span><span class="w"> </span><span class="c1">// 1 2 3</span>
<span class="c1">// the last one here to:do: is a single message</span>
<span class="c1">// to chain 2 keyword messages you need to wrap it in parentheses</span>
<span class="p">(</span><span class="s">&quot;123456&quot;</span><span class="w"> </span><span class="n">drop</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">dropLast</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="c1">// &quot;234&quot; </span>
<span class="n">the</span><span class="w"> </span><span class="n">comma</span><span class="w"> </span><span class="n">`,`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">syntactic</span><span class="w"> </span><span class="n">sugar</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">effect</span>
<span class="s">&quot;123456&quot;</span><span class="w"> </span><span class="n">drop</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">dropLast</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="c1">// &quot;234&quot; </span>

<span class="c1">// you can mix them</span>
<span class="mi">1</span><span class="w"> </span><span class="n">inc</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;abc&quot;</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="c1">// 2 + 2 - 3 -&gt; 1</span>
<span class="s">&quot;123&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;456&quot;</span><span class="w"> </span><span class="n">drop</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">   </span><span class="c1">// &quot;123456&quot; drop: 2 -&gt; &quot;3456&quot;</span>

<span class="c1">// everything except type and message declarations are message sends in niva</span>
<span class="c1">// for example `if` is a message for Boolean object that takes a lambda</span>
<span class="mi">1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">ifTrue</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;wow&quot;</span><span class="w"> </span><span class="n">echo</span><span class="p">]</span>
<span class="c1">// expression</span>
<span class="n">base</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">ifTrue</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;heh&quot;</span><span class="p">]</span><span class="w"> </span><span class="n">ifFalse</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;qwf&quot;</span><span class="p">]</span>
<span class="c1">// same for while</span>
<span class="n">mut</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="p">[</span><span class="n">q</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="p">]</span><span class="w"> </span><span class="n">whileTrue</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">q</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">inc</span><span class="p">]</span>
<span class="c1">// all of this is zero cost because of inlining at compile time</span>
</pre></div>
<h4>Type</h4>
<p>New lines are not significant in niva<br />
Type declarations look like keyword messages consisting of fields and types</p>
<div class="highlight"><pre lang="Scala"><span class="k">type</span><span class="w"> </span><span class="nc">Square</span><span class="w"> </span><span class="n">side</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span>

<span class="k">type</span><span class="w"> </span><span class="nc">Person</span>
<span class="w">  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nc">String</span>
<span class="w">  </span><span class="n">age</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span>
</pre></div>
<h4>Create instance</h4>
<p>Creating an object is the same keyword message as when declaring it, but with values in place of types.</p>
<div class="highlight"><pre lang="Scala"><span class="n">square</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Square</span><span class="w"> </span><span class="n">side</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span>
<span class="n">alice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Person</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="w"> </span><span class="n">age</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span>

<span class="c1">// destruct fields by names</span>
<span class="p">{</span><span class="n">age</span><span class="w"> </span><span class="n">name</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">alice</span>
</pre></div>
<h4>Access fields</h4>
<p>Getting fields is the same as sending a unary message with its name to the object</p>
<div class="highlight"><pre lang="Scala"><span class="c1">// get age, add 1 and print it</span>
<span class="n">alice</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="n">inc</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="c1">// 25</span>
</pre></div>
<h4>Method for type:</h4>
<p>Everything is an object, just like in Smalltalk, so everything can have a method declared.<br />
Here, we add a <code>double</code> method to <code>Int</code> and then use it inside the <code>perimeter</code> method of <code>Square</code>.</p>
<div class="highlight"><pre lang="Scala"><span class="nc">Int</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">this</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="bp">this</span>
<span class="nc">Square</span><span class="w"> </span><span class="n">perimeter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="n">double</span>

<span class="n">square</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Square</span><span class="w"> </span><span class="n">side</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span>
<span class="n">square</span><span class="w"> </span><span class="n">perimeter</span><span class="w"> </span><span class="c1">// call</span>


<span class="c1">// explicit return type</span>
<span class="nc">Int</span><span class="w"> </span><span class="n">double2</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">this</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span>

<span class="c1">// with body</span>
<span class="nc">Int</span><span class="w"> </span><span class="n">double3</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">this</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="n">^</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="c1">// ^ is return</span>
<span class="p">]</span>
</pre></div>
<h4>Keyword message declaration</h4>
<div class="highlight"><pre lang="Scala"><span class="k">type</span><span class="w"> </span><span class="nc">Range</span><span class="w"> </span><span class="n">from</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="w"> </span><span class="n">to</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span>
<span class="c1">// keyword message with one arg `to`</span>
<span class="nc">Int</span><span class="w"> </span><span class="n">to::</span><span class="nc">Int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Range</span><span class="w"> </span><span class="n">from</span><span class="p">:</span><span class="w"> </span><span class="bp">this</span><span class="w"> </span><span class="n">to</span><span class="p">:</span><span class="w"> </span><span class="n">to</span>

<span class="mi">1</span><span class="w"> </span><span class="n">to</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="c1">// Range</span>
</pre></div>
<h4>Type constructor</h4>
<p>A type constructor functions as a message for the type itself rather than to a specific instance.</p>
<div class="highlight"><pre lang="Scala"><span class="n">constructor</span><span class="w"> </span><span class="nc">Float</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.14</span>
<span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Float</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="c1">// 3.14</span>
</pre></div>
<p>It can be useful for initializing fields with default values.</p>
<div class="highlight"><pre lang="Scala"><span class="k">type</span><span class="w"> </span><span class="nc">Point</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="w"> </span><span class="n">y</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span>
<span class="n">constructor</span><span class="w"> </span><span class="nc">Point</span><span class="w"> </span><span class="n">atStart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Point</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">y</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>

<span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Point</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">y</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="n">p2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Point</span><span class="w"> </span><span class="n">atStart</span>
<span class="c1">// constructor is just a usual message, so it can have params</span>
<span class="n">constructor</span><span class="w"> </span><span class="nc">Point</span><span class="w"> </span><span class="n">y::</span><span class="nc">Int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Point</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">y</span><span class="p">:</span><span class="w"> </span><span class="n">y</span>
<span class="n">p3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Point</span><span class="w"> </span><span class="n">y</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="c1">// x: 0 y: 20</span>
</pre></div>
<h4>Conditions</h4>
<p>If, like everything else, is the usual sending of a message to a Boolean object.<br />
It takes one or two lambda arguments.</p>
<div class="highlight"><pre lang="Scala"><span class="kc">false</span><span class="w"> </span><span class="n">ifTrue</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;yay&quot;</span><span class="w"> </span><span class="n">echo</span><span class="p">]</span>
<span class="mi">1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">ifTrue</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;yay&quot;</span><span class="w"> </span><span class="n">echo</span><span class="p">]</span>
<span class="mi">1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">ifTrue</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;yay&quot;</span><span class="w"> </span><span class="n">echo</span><span class="p">]</span><span class="w"> </span><span class="n">ifFalse</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;oh no&quot;</span><span class="w"> </span><span class="n">echo</span><span class="p">]</span>

<span class="c1">// `ifTrue:ifFalse:` message can be used as expression</span>
<span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>
<span class="w">    </span><span class="n">ifTrue</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;even&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">ifFalse</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;odd&quot;</span><span class="p">]</span>
<span class="c1">// str == &quot;even&quot;</span>
</pre></div>
<h4>Cycles</h4>
<p>There is no special syntax for cycles.<br />
It's just keyword messages that take codeblocks as parameters.<br />
(it's zero cost thanks for inlining)</p>
<div class="highlight"><pre lang="Scala"><span class="p">{</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span><span class="w"> </span><span class="n">forEach</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="c1">// 1 2 3</span>
<span class="mi">1</span><span class="p">.</span><span class="mf">.10</span><span class="w"> </span><span class="n">forEach</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="p">]</span>

<span class="n">mut</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>
<span class="p">[</span><span class="n">c</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">whileTrue</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="p">]</span>

<span class="n">c</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="c1">// reset c</span>
<span class="p">[</span><span class="n">c</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">whileTrue</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span>
<span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span>
<span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="c1">// 3 2 1</span>
<span class="p">]</span>
</pre></div>
<p><code>whileTrue:</code> is a message for lambda object of the type:
<code>[ -&gt; Boolean] whileTrue::[ -&gt; Unit]</code></p>
<h4>Matching</h4>
<p>there is special syntax for matching, since niva heavily utilize tagged unions</p>
<div class="highlight"><pre lang="Scala"><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span>
<span class="c1">// matching on x</span>
<span class="o">|</span><span class="w"> </span><span class="n">x</span>
<span class="o">|</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;Hi Bob!&quot;</span>
<span class="o">|</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">&quot;Hi Alice!&quot;</span>
<span class="o">|=&gt;</span><span class="w"> </span><span class="s">&quot;Hi guest&quot;</span>


<span class="c1">// It can be used as expression as well</span>
<span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s">&quot;b&quot;</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="s">&quot;a&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="o">|=&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="n">y</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="c1">// 2</span>
</pre></div>
<h4>Tagged unions</h4>
<div class="highlight"><pre lang="Scala"><span class="n">union</span><span class="w"> </span><span class="nc">Color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Red</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nc">Blue</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nc">Green</span>

<span class="c1">// branches can have fields</span>
<span class="n">union</span><span class="w"> </span><span class="nc">Shape</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nc">Rectangle</span><span class="w"> </span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="w"> </span><span class="n">height</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nc">Circle</span><span class="w">    </span><span class="n">radius</span><span class="p">:</span><span class="w"> </span><span class="nc">Double</span>
<span class="w">    </span>
<span class="n">constructor</span><span class="w"> </span><span class="nc">Double</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.14</span>
<span class="nc">Double</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">this</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="bp">this</span>

<span class="c1">// match on this(Shape)</span>
<span class="nc">Shape</span><span class="w"> </span><span class="n">getArea</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Double</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="bp">this</span><span class="w"> </span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nc">Rectangle</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">toDouble</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nc">Circle</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Double</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="n">square</span>
<span class="w">    </span>
<span class="c1">// There is exhaustiveness checking, so when you add a new branch </span>
<span class="c1">// all the matches will become errors until all cases processed</span>

<span class="nc">Shape</span><span class="w"> </span><span class="n">getArea</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Double</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="bp">this</span><span class="w"> </span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nc">Rectangle</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">toDouble</span><span class="w"> </span>
<span class="c1">// ERROR: Not all possible variants have been checked (Circle)</span>
</pre></div>
<h4>Collections</h4>
<div class="highlight"><pre lang="Scala"><span class="c1">// commas are optional</span>
<span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span><span class="w"> </span>
<span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">#</span><span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="sc">&#39;b&#39;</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span>
<span class="n">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">#</span><span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;b&#39;</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;c&#39;</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span>
<span class="n">set</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">#</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>

<span class="c1">// common collection operations</span>
<span class="p">{</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="p">}</span><span class="w"> </span>
<span class="w">  </span><span class="n">map</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">it</span><span class="w"> </span><span class="n">inc</span><span class="p">],</span><span class="w"> </span>
<span class="w">  </span><span class="n">filter</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">it</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span>
<span class="w">  </span><span class="n">forEach</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">it</span><span class="w"> </span><span class="n">echo</span><span class="p">]</span><span class="w"> </span><span class="c1">// 2 4 6</span>

<span class="c1">// iteration on map</span>
<span class="n">map</span><span class="w"> </span><span class="n">forEach</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span>
<span class="w">  </span><span class="n">key</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span>
<span class="w">  </span><span class="n">value</span><span class="w"> </span><span class="n">echo</span>
<span class="p">]</span>
</pre></div>
<h4>Nullability</h4>
<p>By default, variables cannot be assigned a null value.<br />
To allow this, nullable types are used, indicated by a question mark at the end of the type.<br />
You may already be familiar with this concept from TypeScript, Kotlin, or Swift.</p>
<div class="highlight"><pre lang="Scala"><span class="n">x::</span><span class="nc">Int</span><span class="o">?</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span>
<span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">unpackOrPANIC</span>

<span class="c1">// do something if it&#39;s not null</span>
<span class="n">x</span><span class="w"> </span><span class="n">unpack</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">it</span><span class="w"> </span><span class="n">echo</span><span class="p">]</span>

<span class="c1">// same but provide a backup value</span>
<span class="n">w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">unpack</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">it</span><span class="w"> </span><span class="n">inc</span><span class="p">]</span><span class="w"> </span><span class="n">or</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>

<span class="c1">// just unpack or backup value</span>
<span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">unpackOrValue</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>
</pre></div>
<h4>Handling the error</h4>
<div class="highlight"><pre lang="Scala"><span class="c1">// exit the program with stack trace</span>
<span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="n">orPANIC</span>
<span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="n">orValue</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;no file&quot;</span>
</pre></div>
<p>Errors work like effects, look for more in <a href="https://gavr123456789.github.io/niva-site/error-handling.html">Error handling</a></p>
<h2>Misc</h2>
<h4>Local arg names</h4>
<div class="highlight"><pre lang="Scala"><span class="nc">Int</span><span class="w"> </span><span class="n">from</span><span class="p">:</span><span class="w"> </span><span class="n">x::</span><span class="nc">Int</span><span class="w"> </span><span class="n">to</span><span class="p">:</span><span class="w"> </span><span class="n">y::</span><span class="nc">Int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">this</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span>
</pre></div>
<h4>Syntax sugar for this</h4>
<div class="highlight"><pre lang="Scala"><span class="nc">Person</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">.</span><span class="n">bar</span>
<span class="w">    </span><span class="bp">this</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="c1">// same thing</span>
<span class="p">]</span>
</pre></div>
<h4>Compile time reflection</h4>
<p>You can get string representation of any argument from a call site.</p>
<div class="highlight"><pre lang="Scala"><span class="nc">Int</span><span class="w"> </span><span class="n">bar::</span><span class="nc">Int</span><span class="w"> </span><span class="n">baz::</span><span class="nc">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="c1">// getting string representation from call side</span>
<span class="w">    </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Compiler</span><span class="w"> </span><span class="n">getName</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Compiler</span><span class="w"> </span><span class="n">getName</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Compiler</span><span class="w"> </span><span class="n">getName</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="n">a</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="c1">// 1 + 1</span>
<span class="w">    </span><span class="n">b</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="c1">// variable</span>
<span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="c1">// &quot;str&quot;</span>
<span class="p">]</span>

<span class="n">variable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span>
<span class="c1">// call side</span>
<span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span>
<span class="w">    </span><span class="n">bar</span><span class="p">:</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span>
<span class="w">    </span><span class="n">baz</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;str&quot;</span>
</pre></div>
<p>Links:</p>
<ul>
<li><a href="https://gavr123456789.github.io/niva-site/reference.html">Site</a></li>
<li><a href="https://github.com/gavr123456789/Niva">GitHub</a></li>
<li><a href="https://github.com/gavr123456789/vaLSe">LSP</a></li>
<li><a href="https://github.com/gavr123456789/niva-vscode-bundle">VSC plugin</a></li>
</ul>

        <hr>
        <p>
          Got a suggestion? A correction, perhaps? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Open an Issue</a> on the GitHub Repo, or make a <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/niva.md">pull request</a> yourself!
        </p>
        <p class="contributed">
          Originally contributed by gavr, and updated by <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/niva.md">2 contributors</a>.
        </p>

        <footer>
          <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width: 0; width: 80px; height: 28px; padding-bottom: 5px;" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/svg/by-sa.svg" /></a>
          <p>
            &copy; 2025
            <a href="https://github.com/gavr123456789">gavr</a>
          </p>
        </footer>
      </div>

      <script>
        document.addEventListener('DOMContentLoaded', () => {
          const langSelect = document.getElementById('lang-select');
          langSelect?.addEventListener('change', () => {
            const selectedOption = langSelect.options[langSelect.selectedIndex];
            const url = selectedOption?.getAttribute('data-url');
            if (url) {
              window.location.href = url;
            }
          });
        });
      </script>
    </div>
  </body>
</html>