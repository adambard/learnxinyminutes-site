<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="es-es" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="es-es" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="es-es" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="es-es" class="no-js"> <!--<![endif]-->
    <head>
      <!-- Google tag (gtag.js) -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WXC8R75DEN"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-WXC8R75DEN');
      </script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="es-es">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn Lua in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/es-es/lua/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }
                el.className = theme === "dark" ? "dark" : "light";
                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (!theme) {
                theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light"
              }
              set_theme(theme)
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.onload = function(){
              load_theme();
            };

            // Listen for system preference change
            window
              .matchMedia("(prefers-color-scheme: dark)")
              .addEventListener("change", ({matches:isDark}) => {
                set_theme(isDark ? "dark" : "light")
              })
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Fes-es%2Flua%2F&text=Aprende+X+en+Y+minutos%2C+donde+X%3DLua">
        Comparte esta página
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">Seleccione el tema:</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">ligero</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">oscuro</button>
  </div>
  <h1><a href="/">Aprende X en Y minutos</a></h1>
  <h2>Donde X=Lua</h2>
    <p class="filelink">
    Descarga el código:
    <a href="/docs/files/learnlua-es.lua">learnlua-es.lua</a>
    </p>
  <div id="doc">
    <div class="highlight"><pre><span></span><span class="c1">-- Dos guiones inician un comentario de una única línea.</span>

<span class="cm">--[[</span>
<span class="cm">     Añadir dos corchetes [ y ] lo convierten</span>
<span class="cm">     en un comentario multi-línea</span>
<span class="cm">--]]</span>

<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 1. Variables y control de flujo.</span>
<span class="c1">----------------------------------------------------</span>

<span class="n">num</span> <span class="o">=</span> <span class="mi">42</span>  <span class="c1">-- Todos los números son flotantes</span>
          <span class="c1">-- de precisión doble (64 bits).</span>
          <span class="c1">-- Los dobles de 64 bits pueden tienen</span>
          <span class="c1">-- 52 bits para representación de valores</span>
          <span class="c1">-- enteros, así que no representa un</span>
          <span class="c1">-- problema para valores menores a 52 bits.</span>

<span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;alternados&#39;</span>  <span class="c1">-- Los string son imnutables, como en Python</span>
<span class="n">t</span> <span class="o">=</span> <span class="s2">&quot;Las comillas dobles también son válidas&quot;</span>
<span class="n">u</span> <span class="o">=</span> <span class="s">[[  Los corchetes dobles inician</span>
<span class="s">        y terminan strings de</span>
<span class="s">        múltiples líneas. ]]</span>
<span class="n">t</span> <span class="o">=</span> <span class="kc">nil</span>  <span class="c1">-- Vuelve a t indefinido. Lua hace uso de Garbage Collector.</span>

<span class="c1">-- Los bloques se denotan con palabras claves como &quot;do&quot; o &quot;end&quot;</span>

<span class="c1">-- Ciclo while (do/end)</span>
<span class="kr">while</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="mi">50</span> <span class="kr">do</span>
  <span class="n">num</span> <span class="o">=</span> <span class="n">num</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1">-- No existen operadores como ++ o +=</span>
<span class="kr">end</span>

<span class="c1">-- Sentencia if (then/end)</span>
<span class="kr">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">40</span> <span class="kr">then</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mayor a 40&#39;</span><span class="p">)</span>
<span class="kr">elseif</span> <span class="n">s</span> <span class="o">~=</span> <span class="s1">&#39;alternados&#39;</span> <span class="kr">then</span>  <span class="c1">-- ~= significa &quot;diferente de&quot;</span>
  <span class="c1">-- == significa &quot;igual a&quot;. Puede usarse en strings, igual que en Python</span>

  <span class="nb">io.write</span><span class="p">(</span><span class="s1">&#39;no mayor a 40</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1">-- Por defecto, escribe</span>
                               <span class="c1">-- a la salida estándar stdout</span>
<span class="kr">else</span>
  <span class="c1">-- Las variables son globales por defecto</span>
  <span class="n">estoEsGlobal</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1">-- Es común utilizar Camel Case.</span>

  <span class="c1">-- Se usa la palabra clave &#39;local&#39; para declarar variables locales</span>
  <span class="kd">local</span> <span class="n">line</span> <span class="o">=</span> <span class="nb">io.read</span><span class="p">()</span>  <span class="c1">-- Lee la próxima línea de la entrada</span>
                          <span class="c1">-- estándar stdin</span>

  <span class="c1">-- Para concatenar strings se usa el operador &quot;..&quot;</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Viene el invierno, &#39;</span> <span class="o">..</span> <span class="n">line</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">-- Las variables indefinidas retornan nil</span>
<span class="c1">-- Esto no es un error</span>
<span class="n">foo</span> <span class="o">=</span> <span class="n">unaVariableDesconocida</span>  <span class="c1">-- Ahora foo = nil.</span>

<span class="n">unValorBooleano</span> <span class="o">=</span> <span class="kc">false</span>

<span class="c1">-- Sólo &#39;nil&#39; y &#39;false&#39; son valores falsos. ¡0 y &quot;&quot; son verdaderos!</span>
<span class="kr">if</span> <span class="ow">not</span> <span class="n">unValorBooleano</span> <span class="kr">then</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;era falso&#39;</span><span class="p">)</span> <span class="kr">end</span>

<span class="c1">-- &#39;or&#39; y &#39;and&#39; son operadores corto-circuito</span>
<span class="c1">-- Esto es similar al operador ternario en C/JavaScript</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">unValorBooleano</span> <span class="ow">and</span> <span class="s1">&#39;sí&#39;</span> <span class="ow">or</span> <span class="s1">&#39;no&#39;</span>  <span class="c1">--&gt; &#39;no&#39;</span>

<span class="n">karlSum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1">-- El rango es inclusivo, esto empieza en 1 y termina en 100</span>
<span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span> <span class="kr">do</span>  <span class="n">karlSum</span> <span class="o">=</span> <span class="n">karlSum</span> <span class="o">+</span> <span class="n">i</span>
<span class="kr">end</span>

<span class="c1">-- Se puede usar &quot;100, 1, -1&quot; con paso negativo como rango decremental</span>
<span class="n">fredSum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="kr">for</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="kr">do</span> <span class="n">fredSum</span> <span class="o">=</span> <span class="n">fredSum</span> <span class="o">+</span> <span class="n">j</span> <span class="kr">end</span>

<span class="c1">-- En general, los rangos son: inicio, fin[, paso].</span>

<span class="c1">-- Otra manera de hacer bucle, similar a una sentencia do/while en C/Java</span>
<span class="kr">repeat</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;el camino del futuro&#39;</span><span class="p">)</span>
  <span class="n">num</span> <span class="o">=</span> <span class="n">num</span> <span class="o">-</span> <span class="mi">1</span>
<span class="kr">until</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span>


<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 2. Funciones.</span>
<span class="c1">----------------------------------------------------</span>

<span class="c1">-- Las funciones se declaran con &quot;function&quot;</span>
<span class="kr">function</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="kr">then</span> <span class="kr">return</span> <span class="mi">1</span> <span class="kr">end</span>
  <span class="kr">return</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">-- ¡Pueden ser recursivas!</span>
<span class="kr">end</span>

<span class="c1">-- Las clausuras y funciones anónimas están permitidas:</span>
<span class="kr">function</span> <span class="nf">adder</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
  <span class="c1">-- La función retornada es creada al invocar &quot;caller&quot;</span>
  <span class="c1">-- y recuerda el valor de x.</span>
  <span class="kr">return</span> <span class="kr">function</span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="kr">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="kr">end</span>
<span class="kr">end</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">adder</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">adder</span><span class="p">(</span><span class="mi">36</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a1</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span>  <span class="c1">--&gt; 25</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a2</span><span class="p">(</span><span class="mi">64</span><span class="p">))</span>  <span class="c1">--&gt; 100</span>

<span class="c1">-- Los retornos, llamados de función y asignaciones</span>
<span class="c1">-- admiten listas que pueden ser diferentes en</span>
<span class="c1">-- tamaño.</span>
<span class="c1">-- Los receptores sin valor asociado son nil.</span>
<span class="c1">-- Los valores sin receptores son descartados.</span>

<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span>
<span class="c1">-- Ahora, x = 1, y = 2, z = 3. El 4 es descartado.</span>

<span class="kr">function</span> <span class="nf">bar</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
  <span class="kr">return</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">42</span>
<span class="kr">end</span>

<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">bar</span><span class="p">(</span><span class="s1">&#39;zaphod&#39;</span><span class="p">)</span>  <span class="c1">--&gt; Esto imprime &quot;zaphod  nil nil&quot;</span>
<span class="c1">-- Ahora x = 4, y = 8, y los valores 15, 16, 23 y 42 son descartados.</span>

<span class="c1">-- Las funciones son de primera clase, pueden ser globales o locales:</span>
<span class="c1">-- Estas 2 líneas hacen lo mismo:</span>
<span class="kr">function</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="kr">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="kr">end</span>
<span class="n">f</span> <span class="o">=</span> <span class="kr">function</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="kr">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="kr">end</span>

<span class="c1">-- Al igual que estas 2 líneas:</span>
<span class="kd">local</span> <span class="kr">function</span> <span class="nf">g</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="kr">return</span> <span class="nb">math.sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="kr">end</span>
<span class="kd">local</span> <span class="n">g</span><span class="p">;</span> <span class="n">g</span>  <span class="o">=</span> <span class="kr">function</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="kr">return</span> <span class="nb">math.sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="kr">end</span>
<span class="c1">-- La declaración &#39;local g&#39; hace que las autorreferencias de g sean válidas</span>

<span class="c1">-- Por cierto, las funciones trigonométricas trabajan en radianes.</span>

<span class="c1">-- Los llamados de funciones con un único string no requieren paréntesis.</span>
<span class="c1">-- Estas 2 líneas de código hacen lo mismo:</span>
<span class="nb">print</span> <span class="s1">&#39;hello&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>


<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 3. Tablas.</span>
<span class="c1">----------------------------------------------------</span>

<span class="c1">-- Las tablas son la única estructura de datos compuesta:</span>
<span class="c1">--   Son arreglos asociativos.</span>
<span class="c1">-- De manera similar a los arreglos de PHP u objetos de JS,</span>
<span class="c1">-- son diccionarios de búsqueda de hash que también pueden</span>
<span class="c1">-- ser usados como listas.</span>

<span class="c1">-- Usando tablas como diccionarios / mapas:</span>

<span class="c1">-- Los literales de diccionarios usan strings como llaves por defecto:</span>
<span class="n">t</span> <span class="o">=</span> <span class="p">{</span><span class="n">key1</span> <span class="o">=</span> <span class="s1">&#39;value1&#39;</span><span class="p">,</span> <span class="n">key2</span> <span class="o">=</span> <span class="kc">false</span><span class="p">}</span>

<span class="c1">-- Se puede acceder a &#39;key1&#39; usando corchetes &#39;[&#39; y &#39;]&#39;:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;key1&#39;</span><span class="p">])</span> <span class="c1">-- =&gt; &#39;value1&#39;</span>

<span class="c1">-- Las llaves tipo string pueden usar notación de punto como JS:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">key1</span><span class="p">)</span>  <span class="c1">-- Imprime &#39;value1&#39;.</span>
<span class="n">t</span><span class="p">.</span><span class="n">newKey</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1">-- Añade un nuevo par llave/valor</span>
<span class="n">t</span><span class="p">.</span><span class="n">key2</span> <span class="o">=</span> <span class="kc">nil</span>   <span class="c1">-- Elimina key2 de la tabla</span>

<span class="c1">-- Cualquier literal no nulo puede ser una llave:</span>
<span class="n">u</span> <span class="o">=</span> <span class="p">{[</span><span class="s1">&#39;@!#&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;qbert&#39;</span><span class="p">,</span> <span class="p">[{}]</span> <span class="o">=</span> <span class="mi">1729</span><span class="p">,</span> <span class="p">[</span><span class="mf">6.28</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;tau&#39;</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="mf">6.28</span><span class="p">])</span>  <span class="c1">-- imprime &quot;tau&quot;</span>

<span class="c1">-- La correspondencia de llave es por valor para números</span>
<span class="c1">-- y strings, pero es por identidad para tablas.</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">u</span><span class="p">[</span><span class="s1">&#39;@!#&#39;</span><span class="p">]</span>  <span class="c1">-- &#39;a&#39; tiene el valor &#39;qbert&#39;</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">u</span><span class="p">[{}]</span>     <span class="c1">-- &#39;b&#39; tiene valor nil</span>
<span class="c1">-- &#39;b&#39; es nil debido a que la búsqueda falló. Esta</span>
<span class="c1">-- búsqueda falla porque la llave que usamos es un</span>
<span class="c1">-- objeto diferente al que usamos para crear la llave</span>
<span class="c1">-- original. Los números y strings son llaves más portables</span>
<span class="c1">-- para este propósito.</span>

<span class="c1">-- Una llamada de función con un único parámetro tipo tabla no</span>
<span class="c1">-- requiere paréntesis.</span>
<span class="kr">function</span> <span class="nf">h</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">key1</span><span class="p">)</span> <span class="kr">end</span>
<span class="n">h</span><span class="p">{</span><span class="n">key1</span> <span class="o">=</span> <span class="s1">&#39;Sonmi~451&#39;</span><span class="p">}</span>  <span class="c1">-- Imprime &#39;Sonmi~451&#39;.</span>

<span class="kr">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="kr">do</span>  <span class="c1">-- Iteración llave/valor sobre una tabla</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">-- _G es una tabla especial para todos los globales</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">_G</span><span class="p">[</span><span class="s1">&#39;_G&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">_G</span><span class="p">)</span>  <span class="c1">-- Imprime &#39;true&#39;.</span>

<span class="c1">-- En este caso, la variable global t se puede consultar de esta manera</span>
<span class="n">t</span> <span class="o">=</span> <span class="mi">6</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">_G</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">])</span> <span class="c1">-- Imprime &#39;6&#39;</span>

<span class="c1">-- Usando tablas como listas / arreglos:</span>

<span class="c1">-- Las listas de literales usan implícitamente enteros como llaves</span>
<span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;value1&#39;</span><span class="p">,</span> <span class="s1">&#39;value2&#39;</span><span class="p">,</span> <span class="mf">1.21</span><span class="p">,</span> <span class="s1">&#39;gigawatts&#39;</span><span class="p">}</span>
<span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">#</span><span class="n">v</span> <span class="kr">do</span>  <span class="c1">-- #v es el tamaño de la lista v</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>  <span class="c1">-- Los índices inician en 1. ¡Qué locura!</span>
<span class="kr">end</span>
<span class="c1">-- No existe un tipo de dato &quot;Lista&quot;. v es sólo una</span>
<span class="c1">-- tabla con llaves enteras consecutivas.</span>

<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 3.1 Metatablas y Metamétodos.</span>
<span class="c1">----------------------------------------------------</span>

<span class="c1">-- Una tabla puede tener una metatabla que otorga a la tabla</span>
<span class="c1">-- comportamientos similares a sobrecarga de operadores. Más</span>
<span class="c1">-- tarde veremos cómo las metatablas soportan el comportamiento</span>
<span class="c1">-- de prototipos de JavaScript.</span>

<span class="n">f1</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">}</span>  <span class="c1">-- Representa la fracción a / b</span>
<span class="n">f2</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">}</span>

<span class="c1">-- Esto puede fallar:</span>
<span class="c1">-- s = f1 + f2</span>

<span class="n">metafraction</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kr">function</span> <span class="nc">metafraction</span><span class="p">.</span><span class="nf">__add</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">)</span>
  <span class="n">sum</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="n">sum</span><span class="p">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">f1</span><span class="p">.</span><span class="n">b</span> <span class="o">*</span> <span class="n">f2</span><span class="p">.</span><span class="n">b</span>
  <span class="n">sum</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">f1</span><span class="p">.</span><span class="n">a</span> <span class="o">*</span> <span class="n">f2</span><span class="p">.</span><span class="n">b</span> <span class="o">+</span> <span class="n">f2</span><span class="p">.</span><span class="n">a</span> <span class="o">*</span> <span class="n">f1</span><span class="p">.</span><span class="n">b</span>
  <span class="kr">return</span> <span class="n">sum</span>
<span class="kr">end</span>

<span class="nb">setmetatable</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">metafraction</span><span class="p">)</span>
<span class="nb">setmetatable</span><span class="p">(</span><span class="n">f2</span><span class="p">,</span> <span class="n">metafraction</span><span class="p">)</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">f1</span> <span class="o">+</span> <span class="n">f2</span>  <span class="c1">-- Esto llama la función __add(f1, f2) de la metatabla</span>

<span class="c1">-- f1 y f2 no tienen llave para su metatabla, a diferencia</span>
<span class="c1">-- de los prototipos de JS, así que se debe recuperar usando</span>
<span class="c1">-- getmetatable(f1). La metatabla es sólo una tabla normal con</span>
<span class="c1">-- llave que Lua reconoce, como &quot;__add&quot;.</span>

<span class="c1">-- Pero la siguiente línea falla ya que s no tiene metatabla.</span>
<span class="c1">-- t = s + s</span>
<span class="c1">-- Los patrones tipo clase a continuación solucionan ese problema.</span>

<span class="c1">-- Una llave __index en una metatabla sobrecarga las consultas de punto:</span>
<span class="n">defaultFavs</span> <span class="o">=</span> <span class="p">{</span><span class="n">animal</span> <span class="o">=</span> <span class="s1">&#39;gru&#39;</span><span class="p">,</span> <span class="n">food</span> <span class="o">=</span> <span class="s1">&#39;donuts&#39;</span><span class="p">}</span>
<span class="n">myFavs</span> <span class="o">=</span> <span class="p">{</span><span class="n">food</span> <span class="o">=</span> <span class="s1">&#39;pizza&#39;</span><span class="p">}</span>
<span class="nb">setmetatable</span><span class="p">(</span><span class="n">myFavs</span><span class="p">,</span> <span class="p">{</span><span class="n">__index</span> <span class="o">=</span> <span class="n">defaultFavs</span><span class="p">})</span>
<span class="n">eatenBy</span> <span class="o">=</span> <span class="n">myFavs</span><span class="p">.</span><span class="n">animal</span>  <span class="c1">-- ¡Funciona! Gracias, metatabla.</span>

<span class="c1">-- Las consultas a la tabla que fallen serán reintentadas</span>
<span class="c1">-- en el valor __index de la metatabla, de manera recursiva.</span>

<span class="c1">-- Un valor __index también puede ser una function(tbl, key)</span>
<span class="c1">-- para consultas más avanzadas.</span>

<span class="c1">-- Los valores de __index, __add... son llamados metamétodos.</span>
<span class="c1">-- Acá hay una lista completa con los metamétodos:</span>

<span class="c1">-- __add(a, b)                     para a + b</span>
<span class="c1">-- __sub(a, b)                     para a - b</span>
<span class="c1">-- __mul(a, b)                     para a * b</span>
<span class="c1">-- __div(a, b)                     para a / b</span>
<span class="c1">-- __mod(a, b)                     para a % b</span>
<span class="c1">-- __pow(a, b)                     para a ^ b</span>
<span class="c1">-- __unm(a)                        para -a</span>
<span class="c1">-- __concat(a, b)                  para a .. b</span>
<span class="c1">-- __len(a)                        para #a</span>
<span class="c1">-- __eq(a, b)                      para a == b</span>
<span class="c1">-- __lt(a, b)                      para a &lt; b</span>
<span class="c1">-- __le(a, b)                      para a &lt;= b</span>
<span class="c1">-- __index(a, b)  &lt;fn or a table&gt;  para a.b</span>
<span class="c1">-- __newindex(a, b, c)             para a.b = c</span>
<span class="c1">-- __call(a, ...)                  para a(...)</span>

<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 3.2 Tablas como clases y herencia.</span>
<span class="c1">----------------------------------------------------</span>

<span class="c1">-- Aunque las clases no están incorporadas, existen maneras</span>
<span class="c1">-- diferentes de hacerlas usando tablas y metatablas.</span>

<span class="c1">-- La explicación de este ejemplo está justo debajo:</span>

<span class="n">Dog</span> <span class="o">=</span> <span class="p">{}</span>                                   <span class="c1">-- 1.</span>

<span class="kr">function</span> <span class="nc">Dog</span><span class="p">:</span><span class="nf">new</span><span class="p">()</span>                         <span class="c1">-- 2.</span>
  <span class="n">newObj</span> <span class="o">=</span> <span class="p">{</span><span class="n">sound</span> <span class="o">=</span> <span class="s1">&#39;woof&#39;</span><span class="p">}</span>                <span class="c1">-- 3.</span>
  <span class="n">self</span><span class="p">.</span><span class="n">__index</span> <span class="o">=</span> <span class="n">self</span>                      <span class="c1">-- 4.</span>
  <span class="kr">return</span> <span class="nb">setmetatable</span><span class="p">(</span><span class="n">newObj</span><span class="p">,</span> <span class="n">self</span><span class="p">)</span>        <span class="c1">-- 5.</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Dog</span><span class="p">:</span><span class="nf">makeSound</span><span class="p">()</span>                   <span class="c1">-- 6.</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;I say &#39;</span> <span class="o">..</span> <span class="n">self</span><span class="p">.</span><span class="n">sound</span><span class="p">)</span>
<span class="kr">end</span>

<span class="n">mrDog</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">:</span><span class="n">new</span><span class="p">()</span>                          <span class="c1">-- 7.</span>
<span class="n">mrDog</span><span class="p">:</span><span class="n">makeSound</span><span class="p">()</span>  <span class="c1">-- &#39;I say woof&#39;         -- 8.</span>

<span class="c1">-- 1. Dog actúa como una clase, aunque es sólo una tabla</span>
<span class="c1">-- 2. function table:fn(...) es lo mismo que</span>
<span class="c1">--    function table.fn(self, ...)</span>
<span class="c1">--    El operador &#39;:&#39; añade un primer argumento llamado self.</span>
<span class="c1">--    Lea 7 y 8 para entender cómo self obtiene su valor.</span>
<span class="c1">-- 3. newObj será una instancia de clase Dog</span>
<span class="c1">-- 4. self = la clase siendo instanciada. Usualmente,</span>
<span class="c1">--    self sería Dog, pero la herencia puede cambiar eso.</span>
<span class="c1">--    newObj obtiene las funciones de self cuando establecemos</span>
<span class="c1">--    la metatabla e __index de newObj a self.</span>
<span class="c1">-- 5. Recordatorio: setmetatable retorna su primer argumento.</span>
<span class="c1">-- 6. El operador &#39;:&#39; funciona igual que en 2, pero esta vez</span>
<span class="c1">--    esperamos que self sea una instancia de la clase.</span>
<span class="c1">-- 7. Lo mismo que Dog.new(Dog), por lo tanto self = Dog en new().</span>
<span class="c1">-- 8. Lo mismo que mrDog.makeSound(mrDog), self = mrDog.</span>

<span class="c1">----------------------------------------------------</span>

<span class="c1">-- Ejemplo de herencia:</span>

<span class="n">LoudDog</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">:</span><span class="n">new</span><span class="p">()</span>                           <span class="c1">-- 1.</span>

<span class="kr">function</span> <span class="nc">LoudDog</span><span class="p">:</span><span class="nf">makeSound</span><span class="p">()</span>
  <span class="n">s</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">sound</span> <span class="o">..</span> <span class="s1">&#39; &#39;</span>                       <span class="c1">-- 2.</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">s</span> <span class="o">..</span> <span class="n">s</span> <span class="o">..</span> <span class="n">s</span><span class="p">)</span>
<span class="kr">end</span>

<span class="n">seymour</span> <span class="o">=</span> <span class="n">LoudDog</span><span class="p">:</span><span class="n">new</span><span class="p">()</span>                       <span class="c1">-- 3.</span>
<span class="n">seymour</span><span class="p">:</span><span class="n">makeSound</span><span class="p">()</span>  <span class="c1">-- &#39;woof woof woof&#39;      -- 4.</span>

<span class="c1">-- 1. Loud dog obtiene los métodos y variables de Dog</span>
<span class="c1">-- 2. self tiene una llave &#39;sound&#39; obtenido de new(), ver 3.</span>
<span class="c1">-- 3. Lo mismo que LoudDog.new(LoudDog), y convertido a</span>
<span class="c1">--    Dog.new(LoudDog) ya que LoudDog no tiene llave &#39;new&#39;,</span>
<span class="c1">--    pero tiene __index = Dog en su metatabla.</span>
<span class="c1">--    Resultado: La metatabla de seymour es LoudDog, y</span>
<span class="c1">--    LoudDog.__index = LoudDog. Así que seymour.key</span>
<span class="c1">--    = seymour.key, LoudDog.key o Dog.key, dependiendo de</span>
<span class="c1">--    cuál tabla sea la primera con la llave dada.</span>
<span class="c1">-- 4. La llave &#39;makeSound&#39; se encuentra en LoudDog:</span>
<span class="c1">--    Es lo mismo que LoudDog.makeSound(seymour).</span>

<span class="c1">-- Si es requerido, el &#39;new()&#39; de una subclase es igual</span>
<span class="c1">-- al de la clase base.</span>
<span class="kr">function</span> <span class="nc">LoudDog</span><span class="p">:</span><span class="nf">new</span><span class="p">()</span>
  <span class="n">newObj</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="c1">-- set up newObj</span>
  <span class="n">self</span><span class="p">.</span><span class="n">__index</span> <span class="o">=</span> <span class="n">self</span>
  <span class="kr">return</span> <span class="nb">setmetatable</span><span class="p">(</span><span class="n">newObj</span><span class="p">,</span> <span class="n">self</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 4. Módulos.</span>
<span class="c1">----------------------------------------------------</span>


<span class="c1">--[[ Comento esta sección del código para que el resto</span>
     <span class="n">del</span> <span class="n">script</span> <span class="n">siga</span> <span class="n">siendo</span> <span class="n">ejecutable</span>
</pre></div><div class="highlight"><pre><span></span><span class="c1">-- Supongamos que el archivo mod.lua se ve así:</span>
<span class="kd">local</span> <span class="n">M</span> <span class="o">=</span> <span class="p">{}</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">sayMyName</span><span class="p">()</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hrunkner&#39;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">M</span><span class="p">.</span><span class="nf">sayHello</span><span class="p">()</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Why hello there&#39;</span><span class="p">)</span>
  <span class="n">sayMyName</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">return</span> <span class="n">M</span>

<span class="c1">-- Otro archivo puede usar las funcionalidades de mod.lua</span>
<span class="kd">local</span> <span class="n">mod</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;mod&#39;</span><span class="p">)</span>  <span class="c1">-- Corre el archivo mod.lua</span>

<span class="c1">-- &#39;require&#39; es la función estándar para incluir módulos</span>
<span class="c1">-- &#39;require&#39; funciona así (si no ha sido almacenado en caché, ver abajo)</span>
<span class="kd">local</span> <span class="n">mod</span> <span class="o">=</span> <span class="p">(</span><span class="kr">function</span> <span class="p">()</span>
  <span class="o">&lt;</span><span class="n">contenidos</span> <span class="n">de</span> <span class="n">mod</span><span class="p">.</span><span class="n">lua</span><span class="o">&gt;</span>
<span class="kr">end</span><span class="p">)()</span>
<span class="c1">-- Es como si mod.lua fuese el cuerpo de una función, de tal manera</span>
<span class="c1">-- que los locales de mod.lua son invisibles fuera de él.</span>

<span class="c1">-- Esto funciona porque mod es igual a M dentro de mod.lua</span>
<span class="n">mod</span><span class="p">.</span><span class="n">sayHello</span><span class="p">()</span> <span class="c1">-- Imprime: Why hello there Hrunkner</span>

<span class="c1">-- Esto es erróneo. sayMyName sólo existe dentro de mod.lua:</span>
<span class="n">mod</span><span class="p">.</span><span class="n">sayMyName</span><span class="p">()</span>  <span class="c1">-- error</span>
<span class="c1">-- El valor de &#39;require&#39; es guardado en caché, así que cada archivo</span>
<span class="c1">-- se ejecuta máximo una vez, incluso si se usa &#39;require&#39; varias veces.</span>

<span class="c1">-- Suponga que mod2.lua contiene &quot;print(&#39;Hi!&#39;)&quot;</span>
<span class="kd">local</span> <span class="n">a</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;mod2&#39;</span><span class="p">)</span>  <span class="c1">-- Imprime &#39;Hi!&#39;</span>
<span class="kd">local</span> <span class="n">b</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;mod2&#39;</span><span class="p">)</span>  <span class="c1">-- No imprime. También, a = b</span>

<span class="c1">-- &#39;dofile&#39; es similar a require pero no usa caché.</span>
<span class="nb">dofile</span><span class="p">(</span><span class="s1">&#39;mod2.lua&#39;</span><span class="p">)</span>  <span class="c1">--&gt; Hi!</span>
<span class="nb">dofile</span><span class="p">(</span><span class="s1">&#39;mod2.lua&#39;</span><span class="p">)</span>  <span class="c1">--&gt; Hi! (lo ejecuta nuevamente)</span>

<span class="c1">-- &#39;loadfile&#39; carga un archivo lua, pero no lo ejecuta</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">loadfile</span><span class="p">(</span><span class="s1">&#39;mod2.lua&#39;</span><span class="p">)</span>  <span class="c1">-- Se puede llamar f() para ejecutarlo.</span>

<span class="c1">-- &#39;load&#39; es como &#39;loadfile&#39; para strings que contengan código lua</span>
<span class="c1">-- (&#39;loadstring&#39; es obsoleto, se prefiere el uso de &#39;load&#39;)</span>
<span class="n">g</span> <span class="o">=</span> <span class="nb">load</span><span class="p">(</span><span class="s1">&#39;print(343)&#39;</span><span class="p">)</span>  <span class="c1">-- Retorna una función</span>
<span class="n">g</span><span class="p">()</span>  <span class="c1">-- Imprime &#39;343&#39;, nada es impreso antes de esto.</span>

<span class="c1">--]]</span>
</pre></div>
<h2>Referencias</h2>

<p>Estaba emocionado por aprender lua para poder crear juegos
con el motor de juegos <a href="http://love2d.org/">Love 2D</a>. Ese es el por qué.</p>

<p>Empecé con <a href="https://ebens.me/posts/lua-for-programmers-part-1/">BlackBulletIV para programadores Lua</a>.
Luego, leí el libro oficial de <a href="http://www.lua.org/pil/contents.html">Programación en Lua</a>.
Ese es el cómo.</p>

<p>Podría serle útil darle un vistazo a
<a href="http://lua-users.org/wiki/LuaShortReference">Lua Short Reference</a> en lua-users.org.</p>

<p>Los principales temas no cubiertos son las librerías estándar:</p>

<ul>
<li><a href="http://lua-users.org/wiki/StringLibraryTutorial">Librería de strings</a></li>
<li><a href="http://lua-users.org/wiki/TableLibraryTutorial">Librería de tablas</a></li>
<li><a href="http://lua-users.org/wiki/MathLibraryTutorial">Librería de matemáticas</a></li>
<li><a href="http://lua-users.org/wiki/IoLibraryTutorial">Librería de Entrada/Salida (io)</a></li>
<li><a href="http://lua-users.org/wiki/OsLibraryTutorial">Libreria de Sistema Operativo (os)</a></li>
</ul>

<p>Por cierto, el archivo entero es código Lua válido. ¡Guárdelo como
aprendiendo.lua y ejecútelo con el comando &ldquo;lua aprendiendo.lua&rdquo; !</p>

<p>¡Que se divierta con lua!</p>

    <hr>
    <p>¿Tienes una sugerencia o rectificación? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Abre un issue</a> en el repositorio de GitHub, o haz un <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/es-es/lua.html.markdown">pull request</a> tu mismo
    </p>
    <p class="contributed">
    Originalmente contribuido por Tyler Neylon, y actualizado por <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/es-es/lua.html.markdown">0 colaborador(es)</a>.
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="http://tylerneylon.com/">Tyler Neylon</a>
    </p>

    <p>
      Translated by:
        <a href="https://github.com/jorgeldb">Jorge Diaz</a>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>
    </body>
</html>
