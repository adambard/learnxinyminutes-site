<!DOCTYPE html lang="en-us" xml:lang="en-us" xmlns="http://www.w3.org/1999/xhtml">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
      <!-- Google tag (gtag.js) -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WXC8R75DEN"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-WXC8R75DEN');
      </script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="en-us">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn Ballerina in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/ballerina/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }

                if (theme === "dark" ) {
                    el.className = "dark";
                } else {
                    el.className = "light";
                }

                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (theme) {
                set_theme(theme);
              }
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.addEventListener("load", function(){
              load_theme();
            });
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Fballerina%2F&text=Learn+X+in+Y+minutes%2C+where+X%3DBallerina">
        Share this page
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">Select theme:</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">light</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">dark</button>
  </div>
  <h1><a href="/">Learn X in Y minutes</a></h1>
  <h2>Where X=Ballerina</h2>
    <p class="filelink">
    Get the code:
    <a href="/docs/files/learn_ballerina.bal">learn_ballerina.bal</a>
    </p>
  <div id="doc">
    <p><a href="https://ballerina.io/">Ballerina</a> is a statically-typed programming language for making development for the cloud an enjoyable experience. </p>
<div class="highlight"><pre class="highlight java"><code><span class="c1">// Single-line comment</span>

<span class="c1">// Import modules into the current source file </span>
<span class="kn">import</span> <span class="nn">ballerina</span><span class="o">/</span><span class="n">io</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">ballerina</span><span class="o">/</span><span class="n">time</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">ballerina</span><span class="o">/</span><span class="n">http</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">ballerinax</span><span class="o">/</span><span class="n">java</span><span class="o">.</span><span class="na">jdbc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">ballerina</span><span class="o">/</span><span class="n">lang</span><span class="o">.</span><span class="err">'</span><span class="kt">int</span> <span class="n">as</span> <span class="n">ints</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">ballerinax</span><span class="o">/</span><span class="n">awslambda</span><span class="o">;</span>
<span class="c1">// Module alias "af" used in code in place of the full module name</span>
<span class="kn">import</span> <span class="nn">ballerinax</span><span class="o">/</span><span class="n">azure</span><span class="o">.</span><span class="na">functions</span> <span class="n">as</span> <span class="n">af</span><span class="o">;</span>

<span class="nl">http:</span><span class="nc">Client</span> <span class="n">clientEP</span> <span class="o">=</span> <span class="k">new</span> <span class="o">(</span><span class="s">"https://freegeoip.app/"</span><span class="o">);</span>
<span class="nl">jdbc:</span><span class="nc">Client</span> <span class="n">accountsDB</span> <span class="o">=</span> <span class="k">new</span> <span class="o">({</span><span class="nl">url:</span> <span class="s">"jdbc:mysql://localhost:3306/AccountsDB"</span><span class="o">,</span> 
                               <span class="nl">username:</span> <span class="s">"test"</span><span class="o">,</span> <span class="nl">password:</span> <span class="s">"test"</span><span class="o">});</span>

<span class="c1">// A service is a first-class concept in Ballerina, and is one of the </span>
<span class="c1">// entrypoints to a Ballerina program. </span>
<span class="c1">// The Ballerina platform also provides support for easy deployment to </span>
<span class="c1">// environments such as Kubernetes (https://ballerina.io/learn/deployment/kubernetes/).</span>
<span class="n">service</span> <span class="n">geoservice</span> <span class="n">on</span> <span class="k">new</span> <span class="nl">http:</span><span class="nc">Listener</span><span class="o">(</span><span class="mi">8080</span><span class="o">)</span> <span class="o">{</span>

    <span class="nd">@http</span><span class="o">:</span><span class="nc">ResourceConfig</span> <span class="o">{</span>
        <span class="nl">path:</span> <span class="s">"/geoip/{ip}"</span>
    <span class="o">}</span>
    <span class="n">resource</span> <span class="n">function</span> <span class="nf">geoip</span><span class="o">(</span><span class="nl">http:</span><span class="nc">Caller</span> <span class="n">caller</span><span class="o">,</span> <span class="nl">http:</span><span class="nc">Request</span> <span class="n">request</span><span class="o">,</span>
                            <span class="n">string</span> <span class="n">ip</span><span class="o">)</span> <span class="n">returns</span> <span class="nd">@tainted</span> <span class="n">error</span><span class="o">?</span> <span class="o">{</span>
        <span class="nl">http:</span><span class="nc">Response</span> <span class="n">resp</span> <span class="o">=</span> <span class="n">check</span> <span class="n">clientEP</span><span class="o">-&gt;</span><span class="n">get</span><span class="o">(</span><span class="s">"/json/"</span> <span class="o">+</span> <span class="o">&lt;</span><span class="nd">@untainted</span><span class="o">&gt;</span><span class="n">ip</span><span class="o">);</span>
        <span class="n">check</span> <span class="n">caller</span><span class="o">-&gt;</span><span class="n">respond</span><span class="o">(&lt;</span><span class="nd">@untainted</span><span class="o">&gt;</span> <span class="n">check</span> <span class="n">resp</span><span class="o">.</span><span class="na">getTextPayload</span><span class="o">());</span>
    <span class="o">}</span>

<span class="o">}</span>

<span class="c1">// Serverless Function-as-a-Service support with AWS Lambda.</span>
<span class="c1">// The Ballerina compiler automatically generates the final deployment </span>
<span class="c1">// artifact to be deployed.</span>
<span class="nd">@awslambda</span><span class="o">:</span><span class="nc">Function</span>
<span class="kd">public</span> <span class="n">function</span> <span class="nf">echo</span><span class="o">(</span><span class="nl">awslambda:</span><span class="nc">Context</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">json</span> <span class="n">input</span><span class="o">)</span> <span class="n">returns</span> <span class="n">json</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">input</span><span class="o">;</span>
<span class="o">}</span>

<span class="nd">@awslambda</span><span class="o">:</span><span class="nc">Function</span>
<span class="kd">public</span> <span class="n">function</span> <span class="nf">notifyS3</span><span class="o">(</span><span class="nl">awslambda:</span><span class="nc">Context</span> <span class="n">ctx</span><span class="o">,</span> 
                         <span class="nl">awslambda:</span><span class="nc">S3Event</span> <span class="n">event</span><span class="o">)</span> <span class="n">returns</span> <span class="n">json</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">event</span><span class="o">.</span><span class="na">Records</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">s3</span><span class="o">.</span><span class="err">'</span><span class="n">object</span><span class="o">.</span><span class="na">key</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// Serverless Function-as-a-Service support with Azure Functions.</span>
<span class="c1">// Similar to AWS Lambda, the compiler generates the deployment artifacts.</span>
<span class="nd">@af</span><span class="o">:</span><span class="nc">Function</span>
<span class="kd">public</span> <span class="n">function</span> <span class="nf">fromQueueToQueue</span><span class="o">(</span><span class="nl">af:</span><span class="nc">Context</span> <span class="n">ctx</span><span class="o">,</span> 
        <span class="nd">@af</span><span class="o">:</span><span class="nc">QueueTrigger</span> <span class="o">{</span> <span class="nl">queueName:</span> <span class="s">"queue1"</span> <span class="o">}</span> <span class="n">string</span> <span class="n">inMsg</span><span class="o">,</span>
        <span class="nd">@af</span><span class="o">:</span><span class="nc">QueueOutput</span> <span class="o">{</span> <span class="nl">queueName:</span> <span class="s">"queue2"</span> <span class="o">}</span> <span class="nl">af:</span><span class="nc">StringOutputBinding</span> <span class="n">outMsg</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">outMsg</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">inMsg</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// A custom record type</span>
<span class="kd">public</span> <span class="n">type</span> <span class="nc">Person</span> <span class="n">record</span> <span class="o">{</span>
    <span class="n">string</span> <span class="n">id</span><span class="o">;</span>              <span class="c1">// required field</span>
    <span class="n">string</span> <span class="n">name</span><span class="o">;</span>            
    <span class="kt">int</span> <span class="n">age</span><span class="o">?;</span>               <span class="c1">// optional field</span>
    <span class="n">string</span> <span class="n">country</span> <span class="o">=</span> <span class="s">"N/A"</span><span class="o">;</span> <span class="c1">// default value</span>
<span class="o">};</span>

<span class="nd">@af</span><span class="o">:</span><span class="nc">Function</span>
<span class="kd">public</span> <span class="n">function</span> <span class="nf">fromHttpTriggerCosmosDBInput</span><span class="o">(</span>
        <span class="nd">@af</span><span class="o">:</span><span class="nc">HTTPTrigger</span> <span class="o">{</span> <span class="nl">route:</span> <span class="s">"c1/{country}"</span> <span class="o">}</span> <span class="nl">af:</span><span class="nc">HTTPRequest</span> <span class="n">httpReq</span><span class="o">,</span> 
        <span class="nd">@af</span><span class="o">:</span><span class="nc">CosmosDBInput</span> <span class="o">{</span> <span class="nl">connectionStringSetting:</span> <span class="s">"CosmosDBConnection"</span><span class="o">,</span> 
        <span class="nl">databaseName:</span> <span class="s">"db1"</span><span class="o">,</span> <span class="nl">collectionName:</span> <span class="s">"c1"</span><span class="o">,</span> 
        <span class="nl">sqlQuery:</span> <span class="s">"select * from c1 where c1.country = {country}"</span> <span class="o">}</span> 
        <span class="nc">Person</span><span class="o">[]</span> <span class="n">dbReq</span><span class="o">)</span>
        <span class="n">returns</span> <span class="nd">@af</span><span class="o">:</span><span class="nc">HTTPOutput</span> <span class="n">string</span><span class="o">|</span><span class="n">error</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">dbReq</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="n">function</span> <span class="nf">main</span><span class="o">()</span> <span class="n">returns</span> <span class="nd">@tainted</span> <span class="n">error</span><span class="o">?</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>               <span class="c1">// 64-bit signed integer</span>
    <span class="kt">float</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">1.56</span><span class="o">;</span>           <span class="c1">// 64-bit IEEE 754-2008 binary floating point number</span>
    <span class="n">string</span> <span class="n">c</span> <span class="o">=</span> <span class="s">"hello"</span><span class="o">;</span>       <span class="c1">// a unicode string</span>
    <span class="kt">boolean</span> <span class="n">d</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>         <span class="c1">// true, false</span>
    <span class="n">decimal</span> <span class="n">e</span> <span class="o">=</span> <span class="mf">15.335</span><span class="o">;</span>       <span class="c1">// decimal floating point number</span>

    <span class="kt">var</span> <span class="n">f</span> <span class="o">=</span> <span class="mi">20</span><span class="o">;</span>               <span class="c1">// type inference with 'var' - 'f' is an int</span>

    <span class="kt">int</span><span class="o">[]</span> <span class="n">intArray</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">];</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">intArray</span><span class="o">.</span><span class="na">shift</span><span class="o">();</span> <span class="c1">// similar to a dequeue operation</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">intArray</span><span class="o">.</span><span class="na">pop</span><span class="o">();</span>       <span class="c1">// removes the last element</span>
    <span class="n">intArray</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>        <span class="c1">// add to the end</span>

    <span class="c1">// Tuples - similar to a fixed length array with a distinct type for each slot</span>
    <span class="o">[</span><span class="n">string</span><span class="o">,</span> <span class="kt">int</span><span class="o">]</span> <span class="n">p1</span> <span class="o">=</span> <span class="o">[</span><span class="s">"Jack"</span><span class="o">,</span> <span class="mi">1990</span><span class="o">];</span> 
    <span class="o">[</span><span class="n">string</span><span class="o">,</span> <span class="kt">int</span><span class="o">]</span> <span class="n">p2</span> <span class="o">=</span> <span class="o">[</span><span class="s">"Tom"</span><span class="o">,</span> <span class="mi">1986</span><span class="o">];</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="s">"Name: "</span><span class="o">,</span> <span class="n">p1</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="s">" Birth Year: "</span><span class="o">,</span> <span class="n">p1</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>

    <span class="n">string</span> <span class="n">name1</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">birthYear1</span><span class="o">;</span>
    <span class="o">[</span><span class="n">name1</span><span class="o">,</span> <span class="n">birthYear1</span><span class="o">]</span> <span class="o">=</span> <span class="n">p1</span><span class="o">;</span>     <span class="c1">// tuple destructuring</span>

    <span class="kt">var</span> <span class="o">[</span><span class="n">name2</span><span class="o">,</span> <span class="n">birthYear2</span><span class="o">]</span> <span class="o">=</span> <span class="n">p2</span><span class="o">;</span> <span class="c1">// declare and assign values in the same statement</span>

    <span class="c1">// If statements</span>
    <span class="kt">int</span> <span class="n">ix</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
    <span class="k">if</span> <span class="n">ix</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="o">{</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="s">"value is less than 10"</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">ix</span> <span class="o">==</span> <span class="mi">10</span> <span class="o">{</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="s">"value equals to 10"</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="s">"value is greater than 10"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// Loops</span>
    <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="o">{</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">// Loop from 0 to count (inclusive)</span>
    <span class="n">foreach</span> <span class="kt">var</span> <span class="n">j</span> <span class="n">in</span> <span class="mi">0</span><span class="o">...</span><span class="na">count</span> <span class="o">{</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">j</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">// Loop from 0 to count (non-inclusive)</span>
    <span class="n">foreach</span> <span class="kt">var</span> <span class="n">j</span> <span class="n">in</span> <span class="mi">0</span><span class="o">..&lt;</span><span class="n">count</span> <span class="o">{</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">j</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">// Loop a list</span>
    <span class="n">foreach</span> <span class="kt">var</span> <span class="n">j</span> <span class="n">in</span> <span class="n">intArray</span> <span class="o">{</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">j</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="n">json</span> <span class="n">j1</span> <span class="o">=</span> <span class="o">{</span> <span class="s">"name"</span> <span class="o">:</span> <span class="n">name1</span><span class="o">,</span> <span class="s">"birthYear"</span> <span class="o">:</span> <span class="n">birthYear1</span><span class="o">,</span> <span class="s">"zipcode"</span> <span class="o">:</span> <span class="mi">90210</span> <span class="o">};</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">j1</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="s">" - "</span><span class="o">,</span> <span class="n">j1</span><span class="o">.</span><span class="na">zipcode</span><span class="o">);</span>
    <span class="c1">// New fields are added to a JSON value through "mergeJson"</span>
    <span class="kt">var</span> <span class="n">j2</span> <span class="o">=</span> <span class="n">j1</span><span class="o">.</span><span class="na">mergeJson</span><span class="o">({</span> <span class="s">"id"</span> <span class="o">:</span> <span class="s">"90400593053"</span><span class="o">});</span>

    <span class="c1">// XML namespace declaration</span>
    <span class="n">xmlns</span> <span class="s">"http://example.com/ns1"</span> <span class="n">as</span> <span class="n">ns1</span><span class="o">;</span>
    <span class="n">xmlns</span> <span class="s">"http://example.com/default"</span><span class="o">;</span>

    <span class="c1">// XML variable from a literal value</span>
    <span class="n">xml</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">xml</span> <span class="err">`</span><span class="o">&lt;</span><span class="nl">ns1:</span><span class="n">entry</span><span class="o">&gt;&lt;</span><span class="n">name</span><span class="o">&gt;{{</span><span class="n">name1</span><span class="o">}}&lt;/</span><span class="n">name</span><span class="o">&gt;&lt;</span><span class="n">birthYear</span><span class="o">&gt;{{</span><span class="n">birthYear1</span><span class="o">}}&lt;/</span><span class="n">birthYear</span><span class="o">&gt;&lt;/</span><span class="nl">ns1:</span><span class="n">entry</span><span class="o">&gt;</span><span class="err">`</span><span class="o">;</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">x1</span><span class="o">);</span>
    <span class="c1">// Access specific elements in the XML value</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">x1</span><span class="o">/&lt;</span><span class="n">name</span><span class="o">&gt;);</span>
    <span class="c1">// List all child items in the XML value</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">x1</span><span class="o">/*);</span>

    <span class="c1">// Function invocations</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">add</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">multiply</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">4</span><span class="o">));</span>
    <span class="c1">// Invocation providing value for the defaultable parameter</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">multiply</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="kc">true</span><span class="o">));</span>
    <span class="c1">// Invocation with values to a rest parameter (multi-valued)</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">addAll</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">));</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">addAll</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">));</span>

    <span class="c1">// Function pointers</span>
    <span class="o">(</span><span class="n">function</span> <span class="o">(</span><span class="kt">int</span><span class="o">,</span> <span class="kt">int</span><span class="o">)</span> <span class="n">returns</span> <span class="kt">int</span><span class="o">)</span> <span class="n">op1</span> <span class="o">=</span> <span class="n">getOperation</span><span class="o">(</span><span class="s">"add"</span><span class="o">);</span>
    <span class="o">(</span><span class="n">function</span> <span class="o">(</span><span class="kt">int</span><span class="o">,</span> <span class="kt">int</span><span class="o">)</span> <span class="n">returns</span> <span class="kt">int</span><span class="o">)</span> <span class="n">op2</span> <span class="o">=</span> <span class="n">getOperation</span><span class="o">(</span><span class="s">"mod"</span><span class="o">);</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">op1</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">10</span><span class="o">));</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">op2</span><span class="o">(</span><span class="mi">13</span><span class="o">,</span> <span class="mi">10</span><span class="o">));</span>

    <span class="c1">// Closures</span>
    <span class="o">(</span><span class="n">function</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">)</span> <span class="n">returns</span> <span class="kt">int</span><span class="o">)</span> <span class="n">add5</span> <span class="o">=</span> <span class="n">getAdder</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
    <span class="o">(</span><span class="n">function</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">)</span> <span class="n">returns</span> <span class="kt">int</span><span class="o">)</span> <span class="n">add10</span> <span class="o">=</span> <span class="n">getAdder</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">add5</span><span class="o">(</span><span class="mi">10</span><span class="o">));</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">add10</span><span class="o">(</span><span class="mi">10</span><span class="o">));</span>

    <span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">];</span>
    <span class="c1">// Functional iteration</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">evenNumbers</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">function</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">)</span> <span class="n">returns</span> <span class="kt">boolean</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">;</span> <span class="o">});</span>

    <span class="c1">// Union types - "input" is of type either string or byte[]</span>
    <span class="n">string</span><span class="o">|</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">uval</span> <span class="o">=</span> <span class="s">"XXX"</span><span class="o">;</span>

    <span class="c1">// A type test expression ("uval is string") can be used to check the </span>
    <span class="c1">// runtime type of a variable.</span>
    <span class="k">if</span> <span class="n">uval</span> <span class="n">is</span> <span class="n">string</span> <span class="o">{</span>
        <span class="c1">// In the current scope, "uval" is a string value</span>
        <span class="n">string</span> <span class="n">data</span> <span class="o">=</span> <span class="s">"data:"</span> <span class="o">+</span> <span class="n">uval</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="c1">// Since the expression in the "if" statement ruled out that it's not a string,</span>
        <span class="c1">// the only type left is "byte[]"; so in the current scope, "uval" will always</span>
        <span class="c1">// be a "byte[]".</span>
        <span class="kt">int</span> <span class="n">inputLength</span> <span class="o">=</span> <span class="n">uval</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// Error handling</span>
    <span class="n">string</span> <span class="n">input</span> <span class="o">=</span> <span class="nl">io:</span><span class="n">readln</span><span class="o">(</span><span class="s">"Enter number: "</span><span class="o">);</span>
    <span class="kt">int</span><span class="o">|</span><span class="n">error</span> <span class="n">result</span> <span class="o">=</span> <span class="nl">ints:</span><span class="n">fromString</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>
    <span class="k">if</span> <span class="n">result</span> <span class="n">is</span> <span class="kt">int</span> <span class="o">{</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="s">"Number: "</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="s">"Invalid number: "</span><span class="o">,</span> <span class="n">input</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// A check expression can be used to directly return the error from</span>
    <span class="c1">// the current function if its subexpression evaluated to an error</span>
    <span class="c1">// value in the runtime. </span>
    <span class="kt">int</span> <span class="n">number</span> <span class="o">=</span> <span class="n">check</span> <span class="nl">ints:</span><span class="n">fromString</span><span class="o">(</span><span class="n">input</span><span class="o">);</span> 

    <span class="c1">// Concurrent execution using workers in a function</span>
    <span class="n">doWorkers</span><span class="o">();</span>

    <span class="c1">// Asynchronous execution with futures</span>
    <span class="n">future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f10</span> <span class="o">=</span> <span class="n">start</span> <span class="nf">fib</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>
    <span class="kt">var</span> <span class="n">webresult</span> <span class="o">=</span> <span class="n">clientEP</span><span class="o">-&gt;</span><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">fresult</span> <span class="o">=</span> <span class="n">wait</span> <span class="n">f10</span><span class="o">;</span>
    <span class="k">if</span> <span class="n">webresult</span> <span class="n">is</span> <span class="nl">http:</span><span class="nc">Response</span> <span class="o">{</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">webresult</span><span class="o">.</span><span class="na">getTextPayload</span><span class="o">());</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">fresult</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// Mapping types</span>
    <span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ageMap</span> <span class="o">=</span> <span class="o">{};</span>
    <span class="n">ageMap</span><span class="o">[</span><span class="s">"Peter"</span><span class="o">]</span> <span class="o">=</span> <span class="mi">25</span><span class="o">;</span>
    <span class="n">ageMap</span><span class="o">[</span><span class="s">"John"</span><span class="o">]</span> <span class="o">=</span> <span class="mi">30</span><span class="o">;</span>

    <span class="kt">int</span><span class="o">?</span> <span class="n">agePeter</span> <span class="o">=</span> <span class="n">ageMap</span><span class="o">[</span><span class="s">"Peter"</span><span class="o">];</span> <span class="c1">// int? is the union type int|() - int or nill</span>
    <span class="k">if</span> <span class="n">agePeter</span> <span class="n">is</span> <span class="kt">int</span> <span class="o">{</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="s">"Peter's age is "</span><span class="o">,</span> <span class="n">agePeter</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="s">"Peter's age is not found"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nc">Person</span> <span class="n">person1</span> <span class="o">=</span> <span class="o">{</span> <span class="nl">id:</span> <span class="s">"p1"</span><span class="o">,</span> <span class="n">name</span> <span class="o">:</span> <span class="s">"Anne"</span><span class="o">,</span> <span class="nl">age:</span> <span class="mi">28</span><span class="o">,</span> <span class="nl">country:</span> <span class="s">"Sri Lanka"</span> <span class="o">};</span>
    <span class="nc">Scores</span> <span class="n">score1</span> <span class="o">=</span> <span class="o">{</span> <span class="n">physics</span> <span class="o">:</span> <span class="mi">80</span><span class="o">,</span> <span class="nl">mathematics:</span> <span class="mi">95</span> <span class="o">};</span>
    <span class="n">score1</span><span class="o">[</span><span class="s">"chemistry"</span><span class="o">]</span> <span class="o">=</span> <span class="mi">75</span><span class="o">;</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">score1</span><span class="o">[</span><span class="s">"chemistry"</span><span class="o">]);</span>

    <span class="nc">Student</span> <span class="n">student1</span> <span class="o">=</span> <span class="o">{</span> <span class="nl">id:</span> <span class="s">"s1"</span><span class="o">,</span> <span class="nl">name:</span> <span class="s">"Jack"</span><span class="o">,</span> <span class="nl">age:</span> <span class="mi">25</span><span class="o">,</span> <span class="nl">country:</span> <span class="s">"Japan"</span> <span class="o">};</span>
    <span class="n">student1</span><span class="o">.</span><span class="na">college</span> <span class="o">=</span> <span class="s">"Stanford"</span><span class="o">;</span>
    <span class="n">string</span><span class="o">?</span> <span class="n">jacksCollege</span> <span class="o">=</span> <span class="n">student1</span><span class="o">?.</span><span class="na">college</span><span class="o">;</span> <span class="c1">// optional field access</span>
    <span class="k">if</span> <span class="n">jacksCollege</span> <span class="n">is</span> <span class="n">string</span> <span class="o">{</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="s">"Jack's college is "</span><span class="o">,</span> <span class="n">jacksCollege</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// Due to the structural type system, "student1" can be assigned to "person2",</span>
    <span class="c1">// since the student1's structure is compatible with person2's,</span>
    <span class="c1">// where we can say, a "Student" is a "Person" as well. </span>
    <span class="nc">Person</span> <span class="n">person2</span> <span class="o">=</span> <span class="n">student1</span><span class="o">;</span>

    <span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">grades</span> <span class="o">=</span> <span class="o">{</span><span class="s">"Jack"</span><span class="o">:</span> <span class="mi">95</span><span class="o">,</span> <span class="s">"Anne"</span><span class="o">:</span> <span class="mi">90</span><span class="o">,</span> <span class="s">"John"</span><span class="o">:</span> <span class="mi">80</span><span class="o">,</span> <span class="s">"Bill"</span><span class="o">:</span> <span class="mi">55</span><span class="o">};</span>
    <span class="nc">Person</span> <span class="n">px1</span> <span class="o">=</span> <span class="o">{</span><span class="nl">id:</span> <span class="s">"px1"</span><span class="o">,</span> <span class="nl">name:</span> <span class="s">"Jack"</span><span class="o">,</span> <span class="nl">age:</span> <span class="mi">30</span><span class="o">,</span> <span class="nl">country:</span> <span class="s">"Canada"</span><span class="o">};</span>
    <span class="nc">Person</span> <span class="n">px2</span> <span class="o">=</span> <span class="o">{</span><span class="nl">id:</span> <span class="s">"px2"</span><span class="o">,</span> <span class="nl">name:</span> <span class="s">"John"</span><span class="o">,</span> <span class="nl">age:</span> <span class="mi">25</span><span class="o">};</span>
    <span class="nc">Person</span> <span class="n">px3</span> <span class="o">=</span> <span class="o">{</span><span class="nl">id:</span> <span class="s">"px3"</span><span class="o">,</span> <span class="nl">name:</span> <span class="s">"Anne"</span><span class="o">,</span> <span class="nl">age:</span> <span class="mi">17</span><span class="o">,</span> <span class="nl">country:</span> <span class="s">"UK"</span><span class="o">};</span>
    <span class="nc">Person</span> <span class="n">px4</span> <span class="o">=</span> <span class="o">{</span><span class="nl">id:</span> <span class="s">"px4"</span><span class="o">,</span> <span class="nl">name:</span> <span class="s">"Bill"</span><span class="o">,</span> <span class="nl">age:</span> <span class="mi">15</span><span class="o">,</span> <span class="nl">country:</span> <span class="s">"USA"</span><span class="o">};</span>
    <span class="nc">Person</span><span class="o">[]</span> <span class="n">persons</span> <span class="o">=</span> <span class="o">[];</span>
    <span class="n">persons</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">px1</span><span class="o">);</span>
    <span class="n">persons</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">px2</span><span class="o">);</span>
    <span class="n">persons</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">px3</span><span class="o">);</span>
    <span class="n">persons</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">px4</span><span class="o">);</span>

    <span class="c1">// Query expressions used to execute complex queries for list data</span>
    <span class="nc">Result</span><span class="o">[]</span> <span class="n">results</span> <span class="o">=</span> <span class="n">from</span> <span class="kt">var</span> <span class="n">person</span> <span class="n">in</span> <span class="n">persons</span>
                       <span class="n">let</span> <span class="kt">int</span> <span class="n">lgrade</span> <span class="o">=</span> <span class="o">(</span><span class="n">grades</span><span class="o">[</span><span class="n">person</span><span class="o">.</span><span class="na">name</span><span class="o">]</span> <span class="o">?:</span> <span class="mi">0</span><span class="o">)</span>
                       <span class="n">where</span> <span class="n">lgrade</span> <span class="o">&gt;</span> <span class="mi">75</span> 
                           <span class="n">let</span> <span class="n">string</span> <span class="n">targetCollege</span> <span class="o">=</span> <span class="s">"Stanford"</span>
                           <span class="n">select</span> <span class="o">{</span> 
                               <span class="nl">name:</span> <span class="n">person</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> 
                               <span class="nl">college:</span> <span class="n">targetCollege</span><span class="o">,</span> 
                               <span class="nl">grade:</span> <span class="n">lgrade</span> 
                           <span class="o">};</span>

    <span class="c1">// Compile-time taint checking for handling untrusted data</span>
    <span class="n">string</span> <span class="n">s1</span> <span class="o">=</span> <span class="s">"abc"</span><span class="o">;</span>
    <span class="n">mySecureFunction</span><span class="o">(</span><span class="n">s1</span><span class="o">);</span>
    <span class="c1">// Explicitely make "s2" a tainted value. External input to a Ballerina</span>
    <span class="c1">// program such as command-line arguments and network input are by-default</span>
    <span class="c1">// marked as tainted data.</span>
    <span class="n">string</span> <span class="n">s2</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nd">@tainted</span><span class="o">&gt;</span> <span class="n">s1</span><span class="o">;</span>
    <span class="c1">// "s2x" is now a tainted value, since its value is derived using a </span>
    <span class="c1">// tainted value (s1).</span>
    <span class="n">string</span> <span class="n">s2x</span> <span class="o">=</span> <span class="n">s2</span> <span class="o">+</span> <span class="s">"abc"</span><span class="o">;</span>
    <span class="c1">// The following line uncommented will result in a compilation error,</span>
    <span class="c1">// since we are passing a tainted value (s2x) to a function which </span>
    <span class="c1">// exepects an untainted value.</span>
    <span class="c1">// mySecureFunction(s2x);</span>

    <span class="c1">// Instantiating objects</span>
    <span class="nc">Employee</span> <span class="n">emp1</span> <span class="o">=</span> <span class="k">new</span><span class="o">(</span><span class="s">"E0001"</span><span class="o">,</span> <span class="s">"Jack Smith"</span><span class="o">,</span> <span class="s">"Sales"</span><span class="o">,</span> <span class="mi">2009</span><span class="o">);</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="s">"The company service duration of "</span><span class="o">,</span> <span class="n">emp1</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> 
               <span class="s">" is "</span><span class="o">,</span> <span class="n">emp1</span><span class="o">.</span><span class="na">serviceDuration</span><span class="o">());</span>

    <span class="c1">// Supported operations can be executed in a transaction by enclosing the actions</span>
    <span class="c1">// in a "transaction" block. </span>
    <span class="n">transaction</span> <span class="o">{</span>
        <span class="c1">// Executes the below database operations in a single local transactions</span>
        <span class="kt">var</span> <span class="n">r1</span> <span class="o">=</span> <span class="n">accountsDB</span><span class="o">-&gt;</span><span class="n">update</span><span class="o">(</span><span class="s">"UPDATE Employee SET balance = balance + ? WHERE id = ?"</span><span class="o">,</span> <span class="mf">5500.0</span><span class="o">,</span> <span class="s">"ID001"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">accountsDB</span><span class="o">-&gt;</span><span class="n">update</span><span class="o">(</span><span class="s">"UPDATE Employee SET balance = balance + ? WHERE id = ?"</span><span class="o">,</span> <span class="mf">5500.0</span><span class="o">,</span> <span class="s">"ID001"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// An object is a behavioural type, which encapsulates both data and functionality.</span>
<span class="n">type</span> <span class="nc">Employee</span> <span class="n">object</span> <span class="o">{</span>

    <span class="c1">// Private fields are only visible within the object and its methods</span>
    <span class="kd">private</span> <span class="n">string</span> <span class="n">empId</span><span class="o">;</span>
    <span class="c1">// Public fields can be accessed by anyone</span>
    <span class="kd">public</span> <span class="n">string</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">string</span> <span class="n">department</span><span class="o">;</span>
    <span class="c1">// The default qualifier is a "protected" field, </span>
    <span class="c1">// which are accessible only within the module.</span>
    <span class="kt">int</span> <span class="n">yearJoined</span><span class="o">;</span>           

    <span class="c1">// The object initialization function; automatically called when an object is instantiated.</span>
    <span class="kd">public</span> <span class="n">function</span> <span class="nf">__init</span><span class="o">(</span><span class="n">string</span> <span class="n">empId</span><span class="o">,</span> <span class="n">string</span> <span class="n">name</span><span class="o">,</span> <span class="n">string</span> <span class="n">department</span><span class="o">,</span> <span class="kt">int</span> <span class="n">yearJoined</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">self</span><span class="o">.</span><span class="na">empId</span> <span class="o">=</span> <span class="n">empId</span><span class="o">;</span>
        <span class="n">self</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="n">self</span><span class="o">.</span><span class="na">department</span> <span class="o">=</span> <span class="n">department</span><span class="o">;</span>
        <span class="n">self</span><span class="o">.</span><span class="na">yearJoined</span> <span class="o">=</span> <span class="n">yearJoined</span><span class="o">;</span>        
    <span class="o">}</span>

    <span class="c1">// An object method</span>
    <span class="kd">public</span> <span class="n">function</span> <span class="nf">serviceDuration</span><span class="o">()</span> <span class="n">returns</span> <span class="kt">int</span> <span class="o">{</span>
        <span class="nl">time:</span><span class="nc">Time</span> <span class="n">ct</span> <span class="o">=</span> <span class="nl">time:</span><span class="n">currentTime</span><span class="o">();</span>
        <span class="k">return</span> <span class="nl">time:</span><span class="n">getYear</span><span class="o">(</span><span class="n">ct</span><span class="o">)</span> <span class="o">-</span> <span class="n">self</span><span class="o">.</span><span class="na">yearJoined</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">};</span>

<span class="c1">// Student is a subtype of Person</span>
<span class="n">type</span> <span class="nc">Student</span> <span class="n">record</span> <span class="o">{</span>
    <span class="n">string</span> <span class="n">id</span><span class="o">;</span>
    <span class="n">string</span> <span class="n">name</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
    <span class="n">string</span> <span class="n">college</span><span class="o">?;</span>
    <span class="n">string</span> <span class="n">country</span><span class="o">;</span>
<span class="o">};</span>

<span class="n">type</span> <span class="nc">Scores</span> <span class="n">record</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">physics</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">mathematics</span><span class="o">;</span>
<span class="o">};</span>

<span class="n">type</span> <span class="nc">Result</span> <span class="n">record</span> <span class="o">{</span>
    <span class="n">string</span> <span class="n">name</span><span class="o">;</span>
    <span class="n">string</span> <span class="n">college</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">grade</span><span class="o">;</span>
<span class="o">};</span>

<span class="kd">public</span> <span class="n">function</span> <span class="nf">getOperation</span><span class="o">(</span><span class="n">string</span> <span class="n">op</span><span class="o">)</span> <span class="n">returns</span> <span class="o">(</span><span class="n">function</span> <span class="o">(</span><span class="kt">int</span><span class="o">,</span> <span class="kt">int</span><span class="o">)</span> <span class="n">returns</span> <span class="kt">int</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="n">op</span> <span class="o">==</span> <span class="s">"add"</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">add</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">op</span> <span class="o">==</span> <span class="s">"mod"</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">function</span> <span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="n">returns</span> <span class="kt">int</span> <span class="o">{</span> <span class="c1">// anonymous function</span>
            <span class="k">return</span> <span class="n">a</span> <span class="o">%</span> <span class="n">b</span><span class="o">;</span>
        <span class="o">};</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="o">;</span> <span class="c1">// single expression anonymous no-op function </span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Two required parameters</span>
<span class="kd">public</span> <span class="n">function</span> <span class="nf">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="n">returns</span> <span class="kt">int</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// 'log' is a defaultable parameter</span>
<span class="kd">public</span> <span class="n">function</span> <span class="nf">multiply</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">log</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span> <span class="n">returns</span> <span class="kt">int</span> <span class="o">{</span>
    <span class="k">if</span> <span class="n">log</span> <span class="o">{</span>
        <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="s">"Multiplying "</span><span class="o">,</span> <span class="n">a</span><span class="o">,</span> <span class="s">" with "</span><span class="o">,</span> <span class="n">b</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// 'numbers' is a rest parameter - it can have multiple values, </span>
<span class="c1">// similar to an array.</span>
<span class="kd">public</span> <span class="n">function</span> <span class="nf">addAll</span><span class="o">(</span><span class="kt">int</span><span class="o">...</span> <span class="n">numbers</span><span class="o">)</span> <span class="n">returns</span> <span class="kt">int</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="n">foreach</span> <span class="kt">int</span> <span class="n">number</span> <span class="n">in</span> <span class="n">numbers</span> <span class="o">{</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">number</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="n">function</span> <span class="nf">getAdder</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">)</span> <span class="n">returns</span> <span class="o">(</span><span class="n">function</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">)</span> <span class="n">returns</span> <span class="kt">int</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">function</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">)</span> <span class="n">returns</span> <span class="kt">int</span> <span class="o">{</span> <span class="c1">// returns closure</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">n</span><span class="o">;</span>
    <span class="o">};</span>
<span class="o">}</span>

<span class="n">function</span> <span class="nf">fib</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">)</span> <span class="n">returns</span> <span class="kt">int</span> <span class="o">{</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">2</span> <span class="o">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">fib</span><span class="o">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">fib</span><span class="o">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// The code in worker blocks "w1" and "w2" are executed concurrency </span>
<span class="c1">// when this function is invoked. The "wait" expressions waits for</span>
<span class="c1">// the given workers to finish to retrieve their results.</span>
<span class="kd">public</span> <span class="n">function</span> <span class="nf">doWorkers</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">worker</span> <span class="n">w1</span> <span class="n">returns</span> <span class="kt">int</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
        <span class="n">j</span> <span class="o">-&gt;</span> <span class="n">w2</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">b</span><span class="o">;</span>
        <span class="n">b</span> <span class="o">=</span> <span class="o">&lt;-</span> <span class="n">w2</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">b</span> <span class="o">*</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">worker</span> <span class="n">w2</span> <span class="n">returns</span> <span class="kt">int</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">a</span><span class="o">;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="o">&lt;-</span> <span class="n">w1</span><span class="o">;</span>
        <span class="n">a</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="n">w1</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">2</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">record</span> <span class="o">{</span><span class="kt">int</span> <span class="n">w1</span><span class="o">;</span> <span class="kt">int</span> <span class="n">w2</span><span class="o">;}</span> <span class="n">x</span> <span class="o">=</span> <span class="n">wait</span> <span class="o">{</span><span class="n">w1</span><span class="o">,</span> <span class="n">w2</span><span class="o">};</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// A function which takes in only an untainted string value.</span>
<span class="kd">public</span> <span class="n">function</span> <span class="nf">mySecureFunction</span><span class="o">(</span><span class="nd">@untainted</span> <span class="n">string</span> <span class="n">input</span><span class="o">)</span> <span class="o">{</span>
    <span class="nl">io:</span><span class="n">println</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>
<h3>Further Reading</h3>

<ul>
<li><a href="https://ballerina.io/learn/by-example/">Ballerina by Example</a></li>
<li><a href="https://ballerina.io/learn/installing-ballerina/">User Guide</a></li>
<li><a href="https://ballerina.io/learn/api-docs/ballerina/">API Documentation</a></li>
<li><a href="https://ballerina.io/spec/">Language Specification</a></li>
</ul>

    <hr>
    <p>Got a suggestion? A correction, perhaps? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Open an Issue</a> on the Github Repo, or make a <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/ballerina.html.markdown">pull request</a> yourself!
    </p>
    <p class="contributed">
    Originally contributed by Anjana Fernando, and updated by <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/ballerina.html.markdown">1 contributor(s)</a>.
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="https://github.com/lafernando">Anjana Fernando</a>
    </p>

    <p>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>
    </body>
</html>
