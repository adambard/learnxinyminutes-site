<!DOCTYPE html lang="ja-jp" xml:lang="ja-jp" xmlns="http://www.w3.org/1999/xhtml">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
      <!-- Google tag (gtag.js) -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WXC8R75DEN"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-WXC8R75DEN');
      </script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="ja-jp">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn Python in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/ja-jp/python-jp/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }

                if (theme === "dark" ) {
                    el.className = "dark";
                } else {
                    el.className = "light";
                }

                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (theme) {
                set_theme(theme);
              }
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.addEventListener("load", function(){
              load_theme();
            });
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Fja-jp%2Fpython-jp%2F&text=X%E3%82%92Y%E5%88%86%E3%81%A7%E5%AD%A6%E3%81%B6%2C+%E3%81%9F%E3%81%A0%E3%81%97+X%3DPython">
        このページをシェアする
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">外観の選択：</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">ライト</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">ダーク</button>
  </div>
  <h1><a href="/">XをY分で学ぶ</a></h1>
  <h2>ただし X=Python</h2>
    <p class="filelink">
    ソースコードの取得：
    <a href="/docs/files/learnpython-jp.py">learnpython-jp.py</a>
    </p>
  <div id="doc">
    <p>90年代の初め、Guido van RossumによってPythonは作成されました。現在となっては、最も有名な言語の1つです。
私は構文の明快さによって、Pythonと恋に落ちました。
以下は基本的に実行可能な疑似コードです。</p>

<p>Note: この記事はPython 3に内容を絞っています。もし古いPython 2.7を学習したいなら、 <a href="http://learnxinyminutes.com/docs/pythonlegacy/">こちら</a> をご確認下さい。</p>
<div class="highlight"><pre><span></span><span class="c1"># 1行のコメントは番号記号(#)から始まります。</span>

<span class="sd">&quot;&quot;&quot; 複数行の文字は、&quot;を3つ繋げることで</span>
<span class="sd">    書くことができます。</span>
<span class="sd">    また、これはドキュメントとしてもよく使われます。</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1">####################################################</span>
<span class="c1"># 1. プリミティブ型と演算子</span>
<span class="c1">####################################################</span>

<span class="c1"># 数字です</span>
<span class="mi">3</span>                               <span class="c1"># =&gt; 3</span>

<span class="c1"># 四則演算はあなたの期待通りに動きます。</span>
<span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span>                           <span class="c1"># =&gt; 2</span>
<span class="mi">8</span> <span class="o">-</span> <span class="mi">1</span>                           <span class="c1"># =&gt; 7</span>
<span class="mi">10</span> <span class="o">*</span> <span class="mi">2</span>                          <span class="c1"># =&gt; 20</span>
<span class="mi">35</span> <span class="o">/</span> <span class="mi">5</span>                          <span class="c1"># =&gt; 7.0</span>

<span class="c1"># 整数除算の結果は、正負に関わらず小数の切り捨てが行われます。</span>
<span class="mi">5</span> <span class="o">//</span> <span class="mi">3</span>                          <span class="c1"># =&gt; 1</span>
<span class="o">-</span><span class="mi">5</span> <span class="o">//</span> <span class="mi">3</span>                         <span class="c1"># =&gt; -2</span>
<span class="mf">5.0</span> <span class="o">//</span> <span class="mf">3.0</span>                      <span class="c1"># =&gt; 1.0 # 浮動小数点でも同様に動作します。</span>
<span class="o">-</span><span class="mf">5.0</span> <span class="o">//</span> <span class="mf">3.0</span>                     <span class="c1"># =&gt; -2.0</span>

<span class="c1"># 除算の結果は常に浮動小数点になります。</span>
<span class="mf">10.0</span> <span class="o">/</span> <span class="mi">3</span>                        <span class="c1"># =&gt; 3.3333333333333335</span>

<span class="c1"># 剰余の計算</span>
<span class="mi">7</span> <span class="o">%</span> <span class="mi">3</span>                           <span class="c1"># =&gt; 1</span>

<span class="c1"># 冪乗 (x**y, x の y 乗)</span>
<span class="mi">2</span><span class="o">**</span><span class="mi">3</span>                            <span class="c1"># =&gt; 8</span>

<span class="c1"># 括弧により、計算の順番を優先させられます。</span>
<span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>                     <span class="c1"># =&gt; 8</span>

<span class="c1"># 真偽値はプリミティブ型です(大文字から始まっていることに注意!)</span>
<span class="kc">True</span>
<span class="kc">False</span>

<span class="c1"># not で真偽を反転させられます。</span>
<span class="ow">not</span> <span class="kc">True</span>                        <span class="c1"># =&gt; False</span>
<span class="ow">not</span> <span class="kc">False</span>                       <span class="c1"># =&gt; True</span>

<span class="c1"># ブール演算</span>
<span class="c1"># 注意: &quot;and&quot; と &quot;or&quot; は小文字です。</span>
<span class="kc">True</span> <span class="ow">and</span> <span class="kc">False</span>                  <span class="c1"># =&gt; False</span>
<span class="kc">False</span> <span class="ow">or</span> <span class="kc">True</span>                   <span class="c1"># =&gt; True</span>

<span class="c1"># TrueとFalseは実際には1と0になるキーワードです。</span>
<span class="kc">True</span> <span class="o">+</span> <span class="kc">True</span>                     <span class="c1"># =&gt; 2</span>
<span class="kc">True</span> <span class="o">*</span> <span class="mi">8</span>                        <span class="c1"># =&gt; 8</span>
<span class="kc">False</span> <span class="o">-</span> <span class="mi">5</span>                       <span class="c1"># =&gt; -5</span>

<span class="c1"># 比較演算子はTrueとFalseを数値として扱います。</span>
<span class="mi">0</span> <span class="o">==</span> <span class="kc">False</span>                      <span class="c1"># =&gt; True</span>
<span class="mi">1</span> <span class="o">==</span> <span class="kc">True</span>                       <span class="c1"># =&gt; True</span>
<span class="mi">2</span> <span class="o">==</span> <span class="kc">True</span>                       <span class="c1"># =&gt; False</span>
<span class="o">-</span><span class="mi">5</span> <span class="o">!=</span> <span class="kc">True</span>                      <span class="c1"># =&gt; True</span>

<span class="c1"># bool論理演算子を整数に対して使うことで整数を真偽値に変換して評価できますが、キャストされていない値が</span>
<span class="c1"># bool(int)とビット演算子(&amp; や |)を混同しないようにうにしましょう。</span>
<span class="nb">bool</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                         <span class="c1"># =&gt; False</span>
<span class="nb">bool</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>                         <span class="c1"># =&gt; True</span>
<span class="nb">bool</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">)</span>                        <span class="c1"># =&gt; True</span>
<span class="mi">0</span> <span class="ow">and</span> <span class="mi">2</span>                         <span class="c1"># =&gt; 0</span>
<span class="o">-</span><span class="mi">5</span> <span class="ow">or</span> <span class="mi">0</span>                         <span class="c1"># =&gt; -5</span>

<span class="c1"># 値が等しいか確認するには ==</span>
<span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span>                          <span class="c1"># =&gt; True</span>
<span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span>                          <span class="c1"># =&gt; False</span>

<span class="c1"># 値が等しくないか確認するには !=</span>
<span class="mi">1</span> <span class="o">!=</span> <span class="mi">1</span>                          <span class="c1"># =&gt; False</span>
<span class="mi">2</span> <span class="o">!=</span> <span class="mi">1</span>                          <span class="c1"># =&gt; True</span>

<span class="c1"># 他の比較方法</span>
<span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">10</span>                          <span class="c1"># =&gt; True</span>
<span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">10</span>                          <span class="c1"># =&gt; False</span>
<span class="mi">2</span> <span class="o">&lt;=</span> <span class="mi">2</span>                          <span class="c1"># =&gt; True</span>
<span class="mi">2</span> <span class="o">&gt;=</span> <span class="mi">2</span>                          <span class="c1"># =&gt; True</span>

<span class="c1"># 値がある範囲の中にあるか調べる方法</span>
<span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="ow">and</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">3</span>                <span class="c1"># =&gt; True</span>
<span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="mi">3</span> <span class="o">&lt;</span> <span class="mi">2</span>                <span class="c1"># =&gt; False</span>

<span class="c1"># 連結させるともっと見やすくなります。</span>
<span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">3</span>                       <span class="c1"># =&gt; True</span>
<span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="o">&lt;</span> <span class="mi">2</span>                       <span class="c1"># =&gt; False</span>

<span class="c1"># (is vs. ==)</span>
<span class="c1"># &quot;is&quot; は、2つの変数が同一のオブジェクトを参照しているか確認します。</span>
<span class="c1"># 一方 &quot;==&quot; は、それぞれが参照する2つのオブジェクトが同じ値を持つか確認します。</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>     <span class="c1"># a は新しいリストの [1, 2, 3, 4] を指します。</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>                <span class="c1"># b は a が指すリストを指します。</span>
<span class="n">b</span> <span class="ow">is</span> <span class="n">a</span>               <span class="c1"># =&gt; True, a と b は同一のオブジェクトを参照しています。</span>
<span class="n">b</span> <span class="o">==</span> <span class="n">a</span>               <span class="c1"># =&gt; True, a と b が参照するオブジェクトの値は等しいです。</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>     <span class="c1"># b は新しいリストの [1, 2, 3, 4] を指します。</span>
<span class="n">b</span> <span class="ow">is</span> <span class="n">a</span>               <span class="c1"># =&gt; False, a と b は別々のオブジェクトを参照しています。</span>
<span class="n">b</span> <span class="o">==</span> <span class="n">a</span>               <span class="c1"># =&gt; True, a と b が参照するオブジェクトの値は等しいです。</span>

<span class="c1"># &quot; または &#39; を使って文字列を作成します。</span>
<span class="s2">&quot;This is a string.&quot;</span>
<span class="s1">&#39;This is also a string.&#39;</span>

<span class="c1"># 文字列も加算をすることができます!でも、あまり行わないように。</span>
<span class="s2">&quot;Hello &quot;</span> <span class="o">+</span> <span class="s2">&quot;world!&quot;</span>             <span class="c1"># =&gt; &quot;Hello world!&quot;</span>
<span class="c1"># &#39;+&#39; を使わなくても文字列リテラル(変数ではないもの)の連結ができます。</span>
<span class="s2">&quot;Hello &quot;</span> <span class="s2">&quot;world!&quot;</span>               <span class="c1"># =&gt; &quot;Hello world!&quot;</span>

<span class="c1"># 文字列は文字のリストであるかのように扱うことができます。</span>
<span class="s2">&quot;This is a string&quot;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>           <span class="c1"># =&gt; &#39;T&#39;</span>

<span class="c1"># 文字列の長さを得るにはこのようにします。</span>
<span class="nb">len</span><span class="p">(</span><span class="s2">&quot;This is a string&quot;</span><span class="p">)</span>         <span class="c1"># =&gt; 16</span>

<span class="c1"># .format で文字列のフォーマットを行えます</span>
<span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> can be </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;Strings&quot;</span><span class="p">,</span> <span class="s2">&quot;interpolated&quot;</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;Strings can be interpolated&quot;</span>

<span class="c1"># 入力を減らすために、フォーマットするときに引数を繰り返し使うことができます。</span>
<span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> be nimble, </span><span class="si">{0}</span><span class="s2"> be quick, </span><span class="si">{0}</span><span class="s2"> jump over the </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;Jack&quot;</span><span class="p">,</span> <span class="s2">&quot;candle stick&quot;</span><span class="p">)</span>
<span class="c1"># =&gt; &quot;Jack be nimble, Jack be quick, Jack jump over the candle stick&quot;</span>

<span class="c1"># 引数の順番を数えるのがお嫌い？キーワード引数をどうぞ。</span>
<span class="s2">&quot;</span><span class="si">{name}</span><span class="s2"> wants to eat </span><span class="si">{food}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="n">food</span><span class="o">=</span><span class="s2">&quot;lasagna&quot;</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;Bob wants to eat lasagna&quot;</span>

<span class="c1"># もし Python 3 のコードを Python 2.5以下でも使う必要があるなら、</span>
<span class="c1"># 旧式のフォーマット方法を使うこともできます。</span>
<span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> can be </span><span class="si">%s</span><span class="s2"> the </span><span class="si">%s</span><span class="s2"> way&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;Strings&quot;</span><span class="p">,</span> <span class="s2">&quot;interpolated&quot;</span><span class="p">,</span> <span class="s2">&quot;old&quot;</span><span class="p">)</span>  <span class="c1"># =&gt; &quot;Strings can be interpolated the old way&quot;</span>

<span class="c1"># Python3.6以上では、f-stringsやフォーマット文字列を使ってフォーマットすることもできます。</span>
<span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Reiko&quot;</span>
<span class="sa">f</span><span class="s2">&quot;She said her name is </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span>  <span class="c1"># =&gt; &quot;She said her name is Reiko&quot;</span>

<span class="c1"># 基本的に、任意のPythonの文を中括弧に書くことができ、それは文字列で出力されます。</span>
<span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> is </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="si">}</span><span class="s2"> characters long.&quot;</span>  <span class="c1"># =&gt; &quot;Reiko is 5 characters long.&quot;</span>

<span class="c1"># None はオブジェクトです(大文字からです!)</span>
<span class="kc">None</span>                            <span class="c1"># =&gt; None</span>

<span class="c1"># オブジェクトがNoneであるか確認するのに &quot;==&quot; 演算子を使わないように。</span>
<span class="c1"># 代わりに &quot;is&quot; を使いましょう。オブジェクトの素性を確認できます。</span>
<span class="s2">&quot;etc&quot;</span> <span class="ow">is</span> <span class="kc">None</span>                   <span class="c1"># =&gt; False</span>
<span class="kc">None</span> <span class="ow">is</span> <span class="kc">None</span>                    <span class="c1"># =&gt; True</span>

<span class="c1"># None や 0 、空の 文字列/リスト/辞書/タプル は全て False として評価されます。</span>
<span class="c1"># 他の全ての値は True になります。</span>
<span class="nb">bool</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                         <span class="c1"># =&gt; False</span>
<span class="nb">bool</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>                        <span class="c1"># =&gt; False</span>
<span class="nb">bool</span><span class="p">([])</span>                        <span class="c1"># =&gt; False</span>
<span class="nb">bool</span><span class="p">({})</span>                        <span class="c1"># =&gt; False</span>
<span class="nb">bool</span><span class="p">(())</span>                        <span class="c1"># =&gt; False</span>

<span class="c1">####################################################</span>
<span class="c1"># 2. 変数と集合</span>
<span class="c1">####################################################</span>

<span class="c1"># Python にはprint関数があります。</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I&#39;m Python. Nice to meet you!&quot;</span><span class="p">)</span>  <span class="c1"># =&gt; I&#39;m Python. Nice to meet you!</span>

<span class="c1"># 標準では、print関数は最後に改行を出力します。</span>
<span class="c1"># この動作を変更するためには、オプション引数を利用します。</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello, World&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;!&quot;</span><span class="p">)</span>  <span class="c1"># =&gt; Hello, World!</span>

<span class="c1"># コンソールから入力を得るための簡単な例</span>
<span class="n">input_string_var</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter some data: &quot;</span><span class="p">)</span>  <span class="c1"># 入力を文字列として返します。</span>
<span class="c1"># Note: Python の初期のバージョンでは、 input() は raw_input() という名前で存在します。</span>

<span class="c1"># Pythonでは変数の宣言は存在せず、代入のみです。</span>
<span class="c1"># 慣例的に、小文字でアンダースコア区切り ( lower_case_with_underscores ) の変数が使われます。</span>
<span class="n">some_var</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">some_var</span>                        <span class="c1"># =&gt; 5</span>

<span class="c1"># 代入されていない変数へのアクセスは例外を引き起こします。</span>
<span class="c1"># 例外の取り扱いについては、3章の制御の流れをご確認ください。</span>
<span class="n">some_unknown_var</span>                <span class="c1"># NameError を送出します。</span>

<span class="c1"># ifは式として使用できます。</span>
<span class="c1"># C言語の「?:(三項演算子)」に対応する例:</span>
<span class="s2">&quot;yahoo!&quot;</span> <span class="k">if</span> <span class="mi">3</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="mi">2</span>        <span class="c1"># =&gt; &quot;yahoo!&quot;</span>

<span class="c1"># リストは順序を保存します。</span>
<span class="n">li</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1"># 値の入っているリストも作成できます。</span>
<span class="n">other_li</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>

<span class="c1"># append により、リストの末尾にものを入れられます。</span>
<span class="n">li</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                    <span class="c1"># li is now [1]</span>
<span class="n">li</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>                    <span class="c1"># li is now [1, 2]</span>
<span class="n">li</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>                    <span class="c1"># li is now [1, 2, 4]</span>
<span class="n">li</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>                    <span class="c1"># li is now [1, 2, 4, 3]</span>
<span class="c1"># pop でリストの末尾から取り除けます。</span>
<span class="n">li</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>                        <span class="c1"># =&gt; 3 and li is now [1, 2, 4]</span>
<span class="c1"># 元に戻しましょう!</span>
<span class="n">li</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>                    <span class="c1"># li is now [1, 2, 4, 3] again.</span>

<span class="c1"># 配列のように、リストにアクセスできます。</span>
<span class="n">li</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>                           <span class="c1"># =&gt; 1</span>
<span class="c1"># 最後の要素を参照できます。</span>
<span class="n">li</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>                          <span class="c1"># =&gt; 3</span>

<span class="c1"># 範囲外の要素を参照すると IndexError になります。</span>
<span class="n">li</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>                           <span class="c1"># IndexError が発生します。</span>

<span class="c1"># スライス構文により範囲を参照できます。</span>
<span class="c1"># 開始部分のインデックスに対応する部分は含まれますが、終了部分のインデックスに対応する部分は含まれません。</span>
<span class="n">li</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>                         <span class="c1"># =&gt; [2, 4]</span>
<span class="c1"># 先端を取り除いたリスト</span>
<span class="n">li</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>                          <span class="c1"># =&gt; [4, 3]</span>
<span class="c1"># 末尾を取り除いたリスト</span>
<span class="n">li</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>                          <span class="c1"># =&gt; [1, 2, 4]</span>
<span class="c1"># 1つ飛ばしで選択する</span>
<span class="n">li</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span>                         <span class="c1"># =&gt; [1, 4]</span>
<span class="c1"># 反転したリストを得る</span>
<span class="n">li</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>                        <span class="c1"># =&gt; [3, 4, 2, 1]</span>
<span class="c1"># これらの任意の組み合わせにより、より複雑なスライスを作ることができます。</span>
<span class="c1"># li[start:end:step]</span>

<span class="c1"># スライスにより、深いコピーを1階層分行うことができます。</span>
<span class="n">li2</span> <span class="o">=</span> <span class="n">li</span><span class="p">[:]</span>          <span class="c1"># =&gt; li2 = [1, 2, 4, 3] だが、 (li2 is li) は False になる。</span>

<span class="c1"># &quot;del&quot;によりリストから任意の要素を削除できます。</span>
<span class="k">del</span> <span class="n">li</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>                       <span class="c1"># li は [1, 2, 3] になりました。</span>

<span class="c1"># &quot;remove&quot;で最初に出現する要素を削除できます。</span>
<span class="n">li</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>                    <span class="c1"># li は [1, 3] になりました。</span>
<span class="n">li</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>                    <span class="c1"># 2 はリストの中に存在しないので、 ValueError が発生します。</span>

<span class="c1"># 要素を好きなところに挿入できます。</span>
<span class="n">li</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>                 <span class="c1"># li は [1, 2, 3] に戻りました。</span>

<span class="c1"># &quot;index&quot;で引数の要素が最初に出現する場所のインデックスを得られます。</span>
<span class="n">li</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>                     <span class="c1"># =&gt; 1</span>
<span class="n">li</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>                     <span class="c1"># 4 はリストの中に存在しないので、 ValueError が発生します。</span>

<span class="c1"># リスト同士を足すこともできます。</span>
<span class="c1"># Note: li と other_li の値は変更されません。</span>
<span class="n">li</span> <span class="o">+</span> <span class="n">other_li</span>                   <span class="c1"># =&gt; [1, 2, 3, 4, 5, 6]</span>

<span class="c1"># &quot;extend()&quot;で他のリストを連結することができます。</span>
<span class="n">li</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">other_li</span><span class="p">)</span>             <span class="c1"># li は [1, 2, 3, 4, 5, 6] になります。</span>

<span class="c1"># リストの中に値が存在するか、 &quot;in&quot; で確認できます。</span>
<span class="mi">1</span> <span class="ow">in</span> <span class="n">li</span>                         <span class="c1"># =&gt; True</span>

<span class="c1"># 長さは &quot;len()&quot; で確認できます。</span>
<span class="nb">len</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>                         <span class="c1"># =&gt; 6</span>


<span class="c1"># タプルはリストのようなものですが、不変であるという違いがあります。</span>
<span class="n">tup</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">tup</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>                      <span class="c1"># =&gt; 1</span>
<span class="n">tup</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>                  <span class="c1"># 内容を変更しようとすると TypeError が発生します。</span>

<span class="c1"># 長さが1のタプルを作成するには、要素の後にカンマを付ける必要があります。</span>
<span class="c1"># しかし、それ以外の長さなら、例え長さが0でもそのようにする必要はありません。</span>
<span class="nb">type</span><span class="p">((</span><span class="mi">1</span><span class="p">))</span>                       <span class="c1"># =&gt; &lt;class &#39;int&#39;&gt;</span>
<span class="nb">type</span><span class="p">((</span><span class="mi">1</span><span class="p">,))</span>                      <span class="c1"># =&gt; &lt;class &#39;tuple&#39;&gt;</span>
<span class="nb">type</span><span class="p">(())</span>                        <span class="c1"># =&gt; &lt;class &#39;tuple&#39;&gt;</span>

<span class="c1"># 大抵のリスト操作はタプルでも行うことができます。</span>
<span class="nb">len</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span>                        <span class="c1"># =&gt; 3</span>
<span class="n">tup</span> <span class="o">+</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>                 <span class="c1"># =&gt; (1, 2, 3, 4, 5, 6)</span>
<span class="n">tup</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>                         <span class="c1"># =&gt; (1, 2)</span>
<span class="mi">2</span> <span class="ow">in</span> <span class="n">tup</span>                        <span class="c1"># =&gt; True</span>

<span class="c1"># タプルやリストから複数の変数に代入することができます。</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>             <span class="c1"># a, b, c にはそれぞれ 1, 2, 3 が代入されました。</span>
<span class="c1"># 拡張記法もあります。</span>
<span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>         <span class="c1"># a は 1、 b は [2, 3]、c は 4 になります。</span>
<span class="c1"># 括弧を作成しなくてもデフォルトでタプルが作成されます。</span>
<span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span>               <span class="c1"># 4、5、6がそれぞれd、 e、 fに代入されます。</span>
<span class="c1"># 2つの変数を交換するのがどれほど簡単か見てみましょう。</span>
<span class="n">e</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span>                     <span class="c1"># d は 5、 e は 4 になります。</span>


<span class="c1"># 辞書はマップ(キーと値の組み合わせ)を保存できます。</span>
<span class="n">empty_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1"># 値が入っている辞書を直接作成することもできます。</span>
<span class="n">filled_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;one&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>

<span class="c1"># キーは不変の型である必要があります。</span>
<span class="c1"># これは、高速化のため、キーを定数のハッシュ値に変換できるようにするためです。</span>
<span class="c1"># 不変の型の例として、int、float、string、tupleなどが上げられます。</span>
<span class="n">invalid_dict</span> <span class="o">=</span> <span class="p">{[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span> <span class="s2">&quot;123&quot;</span><span class="p">}</span>  <span class="c1"># =&gt; list はハッシュ化できないので、 TypeError が発生します。</span>
<span class="n">valid_dict</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>  <span class="c1"># 一方、キーに対応する値はどのような型でも利用できます。</span>

<span class="c1"># [] で 値を取り出せます。</span>
<span class="n">filled_dict</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">]</span>              <span class="c1"># =&gt; 1</span>

<span class="c1"># &quot;keys()&quot;により、全てのキーを反復可能な形式で取り出せます。</span>
<span class="c1"># これをリストにするために、&quot;list()&quot;で囲んでいます。これについては後程解説します。</span>
<span class="c1"># Note: Python3.7未満では、辞書のキーの順番は考慮されていません。実行した結果がこれと異なる場合があります。</span>
<span class="c1">#       しかし、Python3.7以降ではキーの挿入順を保つようになりました。</span>
<span class="nb">list</span><span class="p">(</span><span class="n">filled_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>        <span class="c1"># =&gt; [&quot;three&quot;, &quot;two&quot;, &quot;one&quot;] in Python &lt;3.7</span>
<span class="nb">list</span><span class="p">(</span><span class="n">filled_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>        <span class="c1"># =&gt; [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;] in Python 3.7+</span>


<span class="c1"># &quot;values()&quot;により、全ての値を反復可能な形式で取り出せます。</span>
<span class="c1"># 前と同じように、これをリストにするために、&quot;list()&quot;で囲んでいます。</span>
<span class="c1"># Note: 辞書の値の順番は考慮されていません。実行した結果がこれと異なる場合があります。</span>
<span class="nb">list</span><span class="p">(</span><span class="n">filled_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>      <span class="c1"># =&gt; [3, 2, 1]  in Python &lt;3.7</span>
<span class="nb">list</span><span class="p">(</span><span class="n">filled_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>      <span class="c1"># =&gt; [1, 2, 3] in Python 3.7+</span>

<span class="c1"># &quot;in&quot; により、辞書のキーが存在するか確認できます。</span>
<span class="s2">&quot;one&quot;</span> <span class="ow">in</span> <span class="n">filled_dict</span>            <span class="c1"># =&gt; True</span>
<span class="mi">1</span> <span class="ow">in</span> <span class="n">filled_dict</span>                <span class="c1"># =&gt; False</span>

<span class="c1"># 存在しないキーで辞書を参照すると KeyError になります。</span>
<span class="n">filled_dict</span><span class="p">[</span><span class="s2">&quot;four&quot;</span><span class="p">]</span>             <span class="c1"># KeyError</span>

<span class="c1"># &quot;get()&quot; メソッドを使うことで KeyError を回避できます。</span>
<span class="n">filled_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;one&quot;</span><span class="p">)</span>          <span class="c1"># =&gt; 1</span>
<span class="n">filled_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;four&quot;</span><span class="p">)</span>         <span class="c1"># =&gt; None</span>
<span class="c1"># get ではキーが存在しなかったときのデフォルト値を指定できます。</span>
<span class="n">filled_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>       <span class="c1"># =&gt; 1</span>
<span class="n">filled_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;four&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>      <span class="c1"># =&gt; 4</span>

<span class="c1"># &quot;setdefault()&quot; で、キーが存在しなかった場合のみ、値を設定できます。</span>
<span class="n">filled_dict</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;five&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># filled_dict[&quot;five&quot;] は 5 になりました。</span>
<span class="n">filled_dict</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;five&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>  <span class="c1"># filled_dict[&quot;five&quot;] は 5 のままです。</span>

<span class="c1"># 辞書にマップを追加する</span>
<span class="n">filled_dict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;four&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>  <span class="c1"># =&gt; {&quot;one&quot;: 1, &quot;two&quot;: 2, &quot;three&quot;: 3, &quot;four&quot;: 4}</span>
<span class="n">filled_dict</span><span class="p">[</span><span class="s2">&quot;four&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>        <span class="c1"># 辞書に追加する別の方法</span>

<span class="c1"># del により辞書からキーを削除できます。</span>
<span class="k">del</span> <span class="n">filled_dict</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">]</span>          <span class="c1"># &quot;one&quot; キーを辞書から削除します。</span>

<span class="c1"># Python 3.5 以降では、追加の値を取り出す方法があります。</span>
<span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}}</span>            <span class="c1"># =&gt; {&#39;a&#39;: 1, &#39;b&#39;: 2}</span>
<span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}}</span>            <span class="c1"># =&gt; {&#39;a&#39;: 2}</span>


<span class="c1"># set では集合を表現できます。</span>
<span class="n">empty_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="c1"># 集合を一連の値で初期化する例です。辞書に似ていますね？ごめんなさい。</span>
<span class="n">some_set</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>   <span class="c1"># some_set is now {1, 2, 3, 4}</span>

<span class="c1"># 辞書のキーのように、集合の値は不変である必要があります。</span>
<span class="n">invalid_set</span> <span class="o">=</span> <span class="p">{[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">}</span>         <span class="c1"># =&gt; list はハッシュ化できないので、 TypeError が送出されます。</span>
<span class="n">valid_set</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">1</span><span class="p">,),</span> <span class="mi">1</span><span class="p">}</span>

<span class="c1"># 集合に新しい要素を追加できます。</span>
<span class="n">filled_set</span> <span class="o">=</span> <span class="n">some_set</span>
<span class="n">filled_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>               <span class="c1"># filled_set は {1, 2, 3, 4, 5} になりました。</span>
<span class="c1"># 集合は重複した要素を持ちません。</span>
<span class="n">filled_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>               <span class="c1"># 以前の {1, 2, 3, 4, 5} のままです。</span>

<span class="c1"># &amp; により、集合同士の共通部分が得られます。</span>
<span class="n">other_set</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">}</span>
<span class="n">filled_set</span> <span class="o">&amp;</span> <span class="n">other_set</span>          <span class="c1"># =&gt; {3, 4, 5}</span>

<span class="c1"># | により、集合同士の合併が得られます。</span>
<span class="n">filled_set</span> <span class="o">|</span> <span class="n">other_set</span>          <span class="c1"># =&gt; {1, 2, 3, 4, 5, 6}</span>

<span class="c1"># - により、集合同士の差集合が得られます。</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span> <span class="o">-</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>        <span class="c1"># =&gt; {1, 4}</span>

<span class="c1"># ^ により、集合同士の対象差が得られます。</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span> <span class="o">^</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>        <span class="c1"># =&gt; {1, 4, 5}</span>

<span class="c1"># 左の集合が右の集合の上位集合であるか確認。</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span> <span class="o">&gt;=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>             <span class="c1"># =&gt; False</span>

<span class="c1"># 左の集合が右の集合の部分集合であるか確認。</span>
<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span> <span class="o">&lt;=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>             <span class="c1"># =&gt; True</span>

<span class="c1"># in により値が集合の中に存在するか確認できます。</span>
<span class="mi">2</span> <span class="ow">in</span> <span class="n">filled_set</span>                 <span class="c1"># =&gt; True</span>
<span class="mi">10</span> <span class="ow">in</span> <span class="n">filled_set</span>                <span class="c1"># =&gt; False</span>


<span class="c1">####################################################</span>
<span class="c1"># 3. 制御の流れと反復可能オブジェクト</span>
<span class="c1">####################################################</span>

<span class="c1"># まずは変数を作りましょう。</span>
<span class="n">some_var</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c1"># これはif文です。Pythonではインデントが特徴的ですね!</span>
<span class="c1"># 規約ではタブではなく4つのスペースでインデントすることが推奨されています。</span>
<span class="c1"># 以下の例では&quot;some_var is smaller than 10&quot;と出力されます。</span>
<span class="k">if</span> <span class="n">some_var</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;some_var is totally bigger than 10.&quot;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">some_var</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>             <span class="c1"># この elif 節はオプションです。</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;some_var is smaller than 10.&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>                           <span class="c1"># この else 節もオプションです。</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;some_var is indeed 10.&quot;</span><span class="p">)</span>


<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">for ループはリストの要素を反復することができます。</span>
<span class="sd">出力:</span>
<span class="sd">    dog is a mammal</span>
<span class="sd">    cat is a mammal</span>
<span class="sd">    mouse is a mammal</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="k">for</span> <span class="n">animal</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;mouse&quot;</span><span class="p">]:</span>
    <span class="c1"># format() を使って文字列に変数を挿入して出力できます。</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> is a mammal&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">animal</span><span class="p">))</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">&quot;range(数値)&quot; は、ゼロから与えられた数値までのiterable(反復可能オブジェクト)を返します。</span>
<span class="sd">出力:</span>
<span class="sd">    0</span>
<span class="sd">    1</span>
<span class="sd">    2</span>
<span class="sd">    3</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">&quot;range(lower, upper)&quot; は、 lower の数値から upper の数値までのiterableを返します。</span>
<span class="sd">upper の数値は含まれません。</span>
<span class="sd">出力:</span>
<span class="sd">    4</span>
<span class="sd">    5</span>
<span class="sd">    6</span>
<span class="sd">    7</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">&quot;range(lower, upper, step)&quot; は、lower の数値から upper の数値までが、</span>
<span class="sd">step 刻みで表現されるiterableを返します。</span>
<span class="sd">step が与えられない場合、デフォルトは1になります。</span>
<span class="sd">出力:</span>
<span class="sd">    4</span>
<span class="sd">    6</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="sd">while によるループは条件が成立しなくなるまで実行されます。</span>
<span class="sd">出力:</span>
<span class="sd">    0</span>
<span class="sd">    1</span>
<span class="sd">    2</span>
<span class="sd">    3</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>                      <span class="c1"># x = x + 1 の省略記法</span>

<span class="c1"># try/except ブロックにより、例外を扱う</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1"># &quot;raise&quot; により例外を発生させます。</span>
    <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;This is an index error&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">IndexError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">pass</span>  <span class="c1"># pass は、何もしないという命令(no-op)に相当します。普通、ここで例外に対処します。</span>
<span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">NameError</span><span class="p">):</span>
    <span class="k">pass</span>                 <span class="c1"># もし必要なら、複数の種類の例外を一緒に処理できます。</span>
<span class="k">else</span><span class="p">:</span>  <span class="c1"># try/except ブロックへのオプションの節。他の全てのexceptブロックより後に置かなければなりません。</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;All good!&quot;</span><span class="p">)</span>        <span class="c1"># tryで例外が発生しなかった場合のみ実行されます。</span>
<span class="k">finally</span><span class="p">:</span>  <span class="c1"># 例外が発生したか、しなかったか、どのような例外だったかに関らず実行されます。</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;We can clean up resources here&quot;</span><span class="p">)</span>

<span class="c1"># try/finallyでリソースの始末をする代わりに、 with 文を使うこともできます。</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;myfile.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="c1"># Pythonは、iterableと呼ばれる基本的な抽象化が提供しています。</span>
<span class="c1"># iterableは、シーケンスとして取り扱えるオブジェクトです。</span>
<span class="c1"># range関数で返されるオブジェクトもiterableの一種です。</span>
<span class="n">filled_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;one&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">our_iterable</span> <span class="o">=</span> <span class="n">filled_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">our_iterable</span><span class="p">)</span>  <span class="c1"># =&gt; dict_keys([&#39;one&#39;, &#39;two&#39;, &#39;three&#39;]). これはiterableインタフェースを実装するオブジェクトです。</span>

<span class="c1"># iterableでループを行うことができます。</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">our_iterable</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>                    <span class="c1"># Prints one, two, three</span>

<span class="c1"># しかし、インデックスで要素を参照することはできません。</span>
<span class="n">our_iterable</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>                 <span class="c1"># TypeError が発生します。</span>

<span class="c1"># iterableは、iteratorの作り方がわかるオブジェクトです。</span>
<span class="n">our_iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">our_iterable</span><span class="p">)</span>

<span class="c1"># iterator は、要素を取り出したときの状態を覚えるオブジェクトです。</span>
<span class="c1"># &quot;next()&quot;により次の要素を取り出せます。</span>
<span class="nb">next</span><span class="p">(</span><span class="n">our_iterator</span><span class="p">)</span>              <span class="c1"># =&gt; &quot;one&quot;</span>

<span class="c1"># 反復(iterate)する度に、状態を更新します。</span>
<span class="nb">next</span><span class="p">(</span><span class="n">our_iterator</span><span class="p">)</span>              <span class="c1"># =&gt; &quot;two&quot;</span>
<span class="nb">next</span><span class="p">(</span><span class="n">our_iterator</span><span class="p">)</span>              <span class="c1"># =&gt; &quot;three&quot;</span>

<span class="c1"># iteratorが自身の持つ全てのデータを返したあとは、 StopIteration 例外を発生させます。</span>
<span class="nb">next</span><span class="p">(</span><span class="n">our_iterator</span><span class="p">)</span>              <span class="c1"># StopIteration が発生します。</span>

<span class="c1"># &quot;list()&quot;を呼ぶことにより、iteratorの全ての要素を得られます。</span>
<span class="nb">list</span><span class="p">(</span><span class="n">filled_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>        <span class="c1"># =&gt; [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;]</span>


<span class="c1">####################################################</span>
<span class="c1"># 4. 関数</span>
<span class="c1">####################################################</span>

<span class="c1"># 新しい関数を作成するには &quot;def&quot; を使います。</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;x is </span><span class="si">{}</span><span class="s2"> and y is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>                <span class="c1"># return 文で値を返します。</span>

<span class="c1"># 引数付きで関数を呼んでみましょう。</span>
<span class="n">add</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>                    <span class="c1"># =&gt; &quot;x is 5 and y is 6&quot; と出力し、 11 を返します。</span>

<span class="c1"># キーワード引数で関数を呼ぶこともできます。</span>
<span class="n">add</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>                   <span class="c1"># キーワード引数を使うと任意の順番で引数を指定できます。</span>


<span class="c1"># 可変数の位置引数を持つ関数を定義できます。</span>
<span class="k">def</span> <span class="nf">varargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">args</span>

<span class="n">varargs</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># =&gt; (1, 2, 3)</span>


<span class="c1"># 可変数のキーワード引数を持つ関数を定義できます。</span>
<span class="k">def</span> <span class="nf">keyword_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">kwargs</span>

<span class="c1"># 何が起こるか、試してみましょう。</span>
<span class="n">keyword_args</span><span class="p">(</span><span class="n">big</span><span class="o">=</span><span class="s2">&quot;foot&quot;</span><span class="p">,</span> <span class="n">loch</span><span class="o">=</span><span class="s2">&quot;ness&quot;</span><span class="p">)</span>  <span class="c1"># =&gt; {&quot;big&quot;: &quot;foot&quot;, &quot;loch&quot;: &quot;ness&quot;}</span>


<span class="c1"># お望みなら、両方一気にやることもできます。</span>
<span class="k">def</span> <span class="nf">all_the_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">all_the_args(1, 2, a=3, b=4) prints:</span>
<span class="sd">    (1, 2)</span>
<span class="sd">    {&quot;a&quot;: 3, &quot;b&quot;: 4}</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># 関数を呼ぶとき、 args/kwargs の逆のことをすることができます!</span>
<span class="c1"># * を使ってタプルを展開したり、 ** を使って辞書を展開できます。</span>
<span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">all_the_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>             <span class="c1"># all_the_args(1, 2, 3, 4) と等しいです。</span>
<span class="n">all_the_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>          <span class="c1"># all_the_args(a=3, b=4) と等しいです。</span>
<span class="n">all_the_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>   <span class="c1"># all_the_args(1, 2, 3, 4, a=3, b=4) と等しいです。</span>


<span class="c1"># タプルで複数の値を返す</span>
<span class="k">def</span> <span class="nf">swap</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>    <span class="c1"># 括弧を使わずに、複数の値をタプルとして返すことができます。</span>
    <span class="k">return</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span>    <span class="c1"># (Note: 括弧は使わなくてもいいですが、使うこともできます。)</span>


<span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">swap</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>               <span class="c1"># =&gt; x = 2, y = 1</span>
<span class="c1"># (x, y) = swap(x,y)  # このように、括弧は使っても使わなくてもいいです。</span>


<span class="c1"># 関数のスコープ</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>


<span class="k">def</span> <span class="nf">set_x</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="c1"># ローカル変数の x はグローバル変数の x とは異なります。</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">num</span>                     <span class="c1"># =&gt; 43</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>                    <span class="c1"># =&gt; 43</span>


<span class="k">def</span> <span class="nf">set_global_x</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">x</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>                    <span class="c1"># =&gt; 5</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">num</span>                     <span class="c1"># グローバル変数の x に 6 が代入されました。</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>                    <span class="c1"># =&gt; 6</span>

<span class="n">set_x</span><span class="p">(</span><span class="mi">43</span><span class="p">)</span>
<span class="n">set_global_x</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>


<span class="c1"># Pythonは第一級関数をサポートします。</span>
<span class="k">def</span> <span class="nf">create_adder</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">adder</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
    <span class="k">return</span> <span class="n">adder</span>

<span class="n">add_10</span> <span class="o">=</span> <span class="n">create_adder</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">add_10</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>                       <span class="c1"># =&gt; 13</span>

<span class="c1"># 無名関数もサポートしています。</span>
<span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span>                 <span class="c1"># =&gt; True</span>
<span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># =&gt; 5</span>

<span class="c1"># 高階関数も組込まれています。</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">add_10</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>         <span class="c1"># =&gt; [11, 12, 13]</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">max</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>  <span class="c1"># =&gt; [4, 2, 3]</span>

<span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]))</span>  <span class="c1"># =&gt; [6, 7]</span>

<span class="c1"># map や filter の代わりに、リスト内包表記を使うことができます。</span>
<span class="c1"># リスト内包表記は、出力を別のリスト内包表記にネストさせることができます。</span>
<span class="p">[</span><span class="n">add_10</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>        <span class="c1"># =&gt; [11, 12, 13]</span>
<span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">]</span>  <span class="c1"># =&gt; [6, 7]</span>

<span class="c1"># 集合(set)や辞書も内包表記ができます。</span>
<span class="p">{</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="s1">&#39;abcddeef&#39;</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;abc&#39;</span><span class="p">}</span>  <span class="c1"># =&gt; {&#39;d&#39;, &#39;e&#39;, &#39;f&#39;}</span>
<span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)}</span>                <span class="c1"># =&gt; {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}</span>


<span class="c1">####################################################</span>
<span class="c1"># 5. モジュール</span>
<span class="c1">####################################################</span>

<span class="c1"># Pythonではモジュールをインポートできます。</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span>            <span class="c1"># =&gt; 4.0</span>

<span class="c1"># モジュールの中から特定の関数をインポートすることもできます。</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">ceil</span><span class="p">,</span> <span class="n">floor</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="mf">3.7</span><span class="p">))</span>                <span class="c1"># =&gt; 4.0</span>
<span class="nb">print</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="mf">3.7</span><span class="p">))</span>               <span class="c1"># =&gt; 3.0</span>

<span class="c1"># 全部の関数をモジュールからインポートすることができます。</span>
<span class="c1"># 注意: この方法は推奨されません。</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># 短い名前でモジュールをインポートすることができます。</span>
<span class="kn">import</span> <span class="nn">math</span> <span class="k">as</span> <span class="nn">m</span>
<span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="o">==</span> <span class="n">m</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>     <span class="c1"># =&gt; True</span>

<span class="c1"># Pythonのモジュールは実際には単なるPythonのファイルです。</span>
<span class="c1"># 自分で書くことも、インポートすることもできます。</span>
<span class="c1"># ファイル名がそのままモジュール名になります。</span>

<span class="c1"># モジュールで定義されている関数と属性を調べることができます。</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="nb">dir</span><span class="p">(</span><span class="n">math</span><span class="p">)</span>

<span class="c1"># もし、現在書いているスクリプトと同じフォルダに「math.py」という</span>
<span class="c1"># Pythonのスクリプトが存在する場合、そのmath.pyが</span>
<span class="c1"># 組み込みのPythonモジュールの代わりに読み込まれるでしょう。</span>
<span class="c1"># これは、ローカルのフォルダはPythonの組み込みライブラリよりも</span>
<span class="c1"># 優先度が高いため発生するのです。</span>


<span class="c1">####################################################</span>
<span class="c1"># 6. クラス</span>
<span class="c1">####################################################</span>

<span class="c1"># クラスを作成するために、class文を使います。</span>
<span class="k">class</span> <span class="nc">Human</span><span class="p">:</span>

    <span class="c1"># クラスの属性です。このクラスの全てのインスタンスで共有されます。</span>
    <span class="n">species</span> <span class="o">=</span> <span class="s2">&quot;H. sapiens&quot;</span>

    <span class="c1"># 標準的なイニシャライザで、このクラスがインスタンスを作成するときは毎回呼ばれます。</span>
    <span class="c1"># 2つのアンダースコアがオブジェクトや属性の前後についているとき、これらはPythonによって利用され、</span>
    <span class="c1"># ユーザーの名前空間には存在しないということに注意してください。</span>
    <span class="c1"># __init__ や __str__ 、 __repr__ のようなメソッド(やオブジェクト、属性)は、</span>
    <span class="c1"># special methods (または dunder methods)と呼ばれます。</span>
    <span class="c1"># 同じような名前を自分で発明しないほうがよいでしょう。</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="c1"># 引数をインスタンスのname属性に設定します。</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="c1"># プロパティの初期化</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_age</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># インスタンスメソッド。全てのメソッドは&quot;self&quot;を最初の引数に取ります。</span>
    <span class="k">def</span> <span class="nf">say</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{name}</span><span class="s2">: </span><span class="si">{message}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">))</span>

    <span class="c1"># 別のインスタンスメソッドの例。</span>
    <span class="k">def</span> <span class="nf">sing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;yo... yo... microphone check... one two... one two...&#39;</span>

    <span class="c1"># クラスメソッドは全てのインスタンスで共有されます。</span>
    <span class="c1"># クラスメソッドではクラスを最初の引数として呼ばれます。</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_species</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">species</span>

    <span class="c1"># スタティックメソッドはクラスやインスタンスを参照せずに呼ばれます。</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">grunt</span><span class="p">():</span>
        <span class="k">return</span> <span class="s2">&quot;*grunt*&quot;</span>

    <span class="c1"># プロパティはgetterのようなものです。</span>
    <span class="c1"># age() メソッドを同名の読取専用属性に変換します。</span>
    <span class="c1"># Pythonではわざわざgetterやsetterを書く必要はありません。</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">age</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_age</span>

    <span class="c1"># プロパティを設定できるようにします。</span>
    <span class="nd">@age</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">age</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_age</span> <span class="o">=</span> <span class="n">age</span>

    <span class="c1"># プロパティを削除できるようにします。</span>
    <span class="nd">@age</span><span class="o">.</span><span class="n">deleter</span>
    <span class="k">def</span> <span class="nf">age</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_age</span>


<span class="c1"># Pythonインタプリタがソースファイルを読み込んだとき、全てのコードを実行します。</span>
<span class="c1"># この __name__ による確認により、このモジュールがメインのプログラムである場合にのみ、</span>
<span class="c1"># このコードブロックが実行されるようにします。</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># クラスのインスタンスを作成します。</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">Human</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Ian&quot;</span><span class="p">)</span>
    <span class="n">i</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>                 <span class="c1"># &quot;Ian: hi&quot;</span>
    <span class="n">j</span> <span class="o">=</span> <span class="n">Human</span><span class="p">(</span><span class="s2">&quot;Joel&quot;</span><span class="p">)</span>
    <span class="n">j</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>              <span class="c1"># &quot;Joel: hello&quot;</span>
    <span class="c1"># i と j はHumanのインスタンスです。別の言葉で言うなら、これらはHumanのオブジェクトです。</span>

    <span class="c1"># クラスメソッドを呼んでみましょう。</span>
    <span class="n">i</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">get_species</span><span class="p">())</span>      <span class="c1"># &quot;Ian: H. sapiens&quot;</span>
    <span class="c1"># 共有属性を変更してみましょう。</span>
    <span class="n">Human</span><span class="o">.</span><span class="n">species</span> <span class="o">=</span> <span class="s2">&quot;H. neanderthalensis&quot;</span>
    <span class="n">i</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">get_species</span><span class="p">())</span>      <span class="c1"># =&gt; &quot;Ian: H. neanderthalensis&quot;</span>
    <span class="n">j</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="n">get_species</span><span class="p">())</span>      <span class="c1"># =&gt; &quot;Joel: H. neanderthalensis&quot;</span>

    <span class="c1"># スタティックメソッドを呼んでみましょう。</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">Human</span><span class="o">.</span><span class="n">grunt</span><span class="p">())</span>        <span class="c1"># =&gt; &quot;*grunt*&quot;</span>

    <span class="c1"># スタティックメソッドはインスタンスから呼ぶことはできません。</span>
    <span class="c1"># なぜならば、 i.grunt() は自動的に&quot;self&quot; ( i オブジェクト ) を引数として渡してしまうからです。</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">grunt</span><span class="p">())</span>  <span class="c1"># =&gt; TypeError: grunt() takes 0 positional arguments but 1 was given</span>

    <span class="c1"># インスタンスのプロパティを更新してみましょう。</span>
    <span class="n">i</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">42</span>
    <span class="c1"># プロパティを取得してみましょう。</span>
    <span class="n">i</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>                <span class="c1"># =&gt; &quot;Ian: 42&quot;</span>
    <span class="n">j</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>                <span class="c1"># =&gt; &quot;Joel: 0&quot;</span>
    <span class="c1"># プロパティを削除してみましょう。</span>
    <span class="k">del</span> <span class="n">i</span><span class="o">.</span><span class="n">age</span>
    <span class="c1"># i.age                         # =&gt; AttributeError が発生します。</span>


<span class="c1">####################################################</span>
<span class="c1"># 6.1 継承</span>
<span class="c1">####################################################</span>
<span class="c1"># 継承を行うことで、親クラスからメソッドと変数を継承する新しい子クラスを定義できます。</span>

<span class="c1"># 上記で定義されたHumanクラスを親クラス(基底クラス)として使い、Superheroという子クラスを定義します。</span>
<span class="c1"># これは&quot;species&quot;、&quot;name&quot;や&quot;age&quot;といった変数や、&quot;sing&quot;や&quot;grunt&quot;のようなメソッドをHumanから継承しますが、</span>
<span class="c1"># Superhero独自のプロパティを持つこともできます。</span>

<span class="c1"># ファイルを分割してモジュール化の利点を活用するために、上記のHumanクラスを独自のファイル、ここでは human.py に記述ましょう。</span>

<span class="c1"># 別のファイルから関数をインポートするには次の形式を利用してください:</span>
<span class="c1"># from &quot;拡張子なしのファイル名&quot; import &quot;関数やクラス&quot;</span>

<span class="kn">from</span> <span class="nn">human</span> <span class="kn">import</span> <span class="n">Human</span>


<span class="c1"># 親クラスを子クラスのパラメータとして指定します。</span>
<span class="k">class</span> <span class="nc">Superhero</span><span class="p">(</span><span class="n">Human</span><span class="p">):</span>

    <span class="c1"># もし子クラスが親クラスの全ての定義を変更なしで継承する場合、&quot;pass&quot;キーワードのみを書くだけで良いです。</span>
    <span class="c1"># しかし、今回は親クラスとは異なる子クラスを作成するので、今回は以下の通りコメントアウトしています。</span>
    <span class="c1"># pass</span>

    <span class="c1"># 子クラスは親クラスの属性を上書きできます。</span>
    <span class="n">species</span> <span class="o">=</span> <span class="s1">&#39;Superhuman&#39;</span>

    <span class="c1"># 子クラスは親クラスのコンストラクタを引数含めて自動的に継承しますが、</span>
    <span class="c1"># 追加の引数や定義を行ってコンストラクタのようなメソッドを上書きすることもできます。</span>
    <span class="c1"># このコンストラクタは&quot;name&quot;引数を&quot;Human&quot;クラスから継承し、&quot;superpower&quot;と&quot;movie&quot;という引数を追加します。</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">movie</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">superpowers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;super strength&quot;</span><span class="p">,</span> <span class="s2">&quot;bulletproofing&quot;</span><span class="p">]):</span>

        <span class="c1"># 追加のクラス属性を作成する</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fictional</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">movie</span> <span class="o">=</span> <span class="n">movie</span>
        <span class="c1"># デフォルト値は共有されるので、可変のデフォルト値には注意してください。</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">superpowers</span> <span class="o">=</span> <span class="n">superpowers</span>

        <span class="c1"># &quot;super&quot;関数を使うと子クラスに上書きされた親クラスのメソッド(今回は &quot;__init__&quot;)にアクセスできます。</span>
        <span class="c1"># これで、親クラスのコンストラクタを呼んでいます。</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># singメソッドを上書きし、</span>
    <span class="k">def</span> <span class="nf">sing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;Dun, dun, DUN!&#39;</span>

    <span class="c1"># 追加のインスタンスメソッドを作成します。</span>
    <span class="k">def</span> <span class="nf">boast</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">power</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">superpowers</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I wield the power of </span><span class="si">{pow}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">pow</span><span class="o">=</span><span class="n">power</span><span class="p">))</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">sup</span> <span class="o">=</span> <span class="n">Superhero</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Tick&quot;</span><span class="p">)</span>

    <span class="c1"># インスタンスの型を調べる</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sup</span><span class="p">,</span> <span class="n">Human</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;I am human&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">sup</span><span class="p">)</span> <span class="ow">is</span> <span class="n">Superhero</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;I am a superhero&#39;</span><span class="p">)</span>

    <span class="c1"># getattr()とsuper()で使われるメソッドの解決順序を調べてみます。</span>
    <span class="c1"># この属性は動的であり、変更可能です。</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">Superhero</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">)</span>    <span class="c1"># =&gt; (&lt;class &#39;__main__.Superhero&#39;&gt;,</span>
                                <span class="c1"># =&gt; &lt;class &#39;human.Human&#39;&gt;, &lt;class &#39;object&#39;&gt;)</span>

    <span class="c1"># 親のメソッドを呼びだすものの、独自のクラス属性を参照します。</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sup</span><span class="o">.</span><span class="n">get_species</span><span class="p">())</span>    <span class="c1"># =&gt; Superhuman</span>

    <span class="c1"># 上書きされたメソッドを呼ぶ</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sup</span><span class="o">.</span><span class="n">sing</span><span class="p">())</span>           <span class="c1"># =&gt; Dun, dun, DUN!</span>

    <span class="c1"># Humanのメソッドを呼ぶ</span>
    <span class="n">sup</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s1">&#39;Spoon&#39;</span><span class="p">)</span>            <span class="c1"># =&gt; Tick: Spoon</span>

    <span class="c1"># Superhero限定のメソッドを呼ぶ</span>
    <span class="n">sup</span><span class="o">.</span><span class="n">boast</span><span class="p">()</span>                 <span class="c1"># =&gt; I wield the power of super strength!</span>
                                <span class="c1"># =&gt; I wield the power of bulletproofing!</span>

    <span class="c1"># 継承されたクラス属性</span>
    <span class="n">sup</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">31</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sup</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>              <span class="c1"># =&gt; 31</span>

    <span class="c1"># Superhero限定の属性</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Am I Oscar eligible? &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sup</span><span class="o">.</span><span class="n">movie</span><span class="p">))</span>



<span class="c1">####################################################</span>
<span class="c1"># 6.2 多重継承</span>
<span class="c1">####################################################</span>

<span class="c1"># 別のクラスを定義します。</span>
<span class="c1"># bat.py</span>
<span class="k">class</span> <span class="nc">Bat</span><span class="p">:</span>

    <span class="n">species</span> <span class="o">=</span> <span class="s1">&#39;Baty&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">can_fly</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fly</span> <span class="o">=</span> <span class="n">can_fly</span>

    <span class="c1"># このクラスも say メソッドを持ちます。</span>
    <span class="k">def</span> <span class="nf">say</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;... ... ...&#39;</span>
        <span class="k">return</span> <span class="n">msg</span>

    <span class="c1"># 同様に、独自のメソッドも与えましょう。</span>
    <span class="k">def</span> <span class="nf">sonar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;))) ... (((&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">Bat</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">fly</span><span class="p">)</span>

<span class="c1"># superhero.py</span>
<span class="kn">from</span> <span class="nn">superhero</span> <span class="kn">import</span> <span class="n">Superhero</span>
<span class="kn">from</span> <span class="nn">bat</span> <span class="kn">import</span> <span class="n">Bat</span>

<span class="c1"># BatmanをSuperheroとBatの両方を継承した子クラスとして定義します。</span>
<span class="k">class</span> <span class="nc">Batman</span><span class="p">(</span><span class="n">Superhero</span><span class="p">,</span> <span class="n">Bat</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># 通常、属性を継承するにはsuper()を呼び出します。</span>
        <span class="c1"># super(Batman, self).__init__(*args, **kwargs)</span>
        <span class="c1"># しかし、ここでは多重継承を行っているので、 super() はMRO(メソッド解決順序)の次の基本クラスにのみ動作します。</span>
        <span class="c1"># なので、全ての祖先に対して明示的に __init__ を呼ぶことにします。</span>
        <span class="c1"># *args と **kwargs を使うことで、それぞれの継承元が</span>
        <span class="c1"># たまねぎの皮を剥がすごとく、引数を用いることができます。</span>
        <span class="n">Superhero</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;anonymous&#39;</span><span class="p">,</span> <span class="n">movie</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">superpowers</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Wealthy&#39;</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">Bat</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">can_fly</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># 名前の属性の値を上書きします。</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Sad Affleck&#39;</span>

    <span class="k">def</span> <span class="nf">sing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;nan nan nan nan nan batman!&#39;</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">sup</span> <span class="o">=</span> <span class="n">Batman</span><span class="p">()</span>

    <span class="c1"># getattr() や super() の両方で使われるMROを取得します。</span>
    <span class="c1"># この属性は動的であり、更新が可能です。</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">Batman</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">)</span>       <span class="c1"># =&gt; (&lt;class &#39;__main__.Batman&#39;&gt;,</span>
                                <span class="c1"># =&gt; &lt;class &#39;superhero.Superhero&#39;&gt;,</span>
                                <span class="c1"># =&gt; &lt;class &#39;human.Human&#39;&gt;,</span>
                                <span class="c1"># =&gt; &lt;class &#39;bat.Bat&#39;&gt;, &lt;class &#39;object&#39;&gt;)</span>


    <span class="c1"># 親メソッドを呼び出しますが、独自のクラス属性を参照します。</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sup</span><span class="o">.</span><span class="n">get_species</span><span class="p">())</span>    <span class="c1"># =&gt; Superhuman</span>

    <span class="c1"># 上書きされたメソッドを呼び出します。</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sup</span><span class="o">.</span><span class="n">sing</span><span class="p">())</span>           <span class="c1"># =&gt; nan nan nan nan nan batman!</span>

    <span class="c1"># 継承順により、Humanから継承されたメソッドを呼び出します。</span>
    <span class="n">sup</span><span class="o">.</span><span class="n">say</span><span class="p">(</span><span class="s1">&#39;I agree&#39;</span><span class="p">)</span>          <span class="c1"># =&gt; Sad Affleck: I agree</span>

    <span class="c1"># 2番目の先祖にのみ存在するメソッドを呼び出してみます。</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sup</span><span class="o">.</span><span class="n">sonar</span><span class="p">())</span>          <span class="c1"># =&gt; ))) ... (((</span>

    <span class="c1"># 継承されたクラス属性</span>
    <span class="n">sup</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sup</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>              <span class="c1"># =&gt; 100</span>

    <span class="c1"># デフォルト値が上書きされて、2番目の先祖から継承された属性</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Can I fly? &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sup</span><span class="o">.</span><span class="n">fly</span><span class="p">))</span>  <span class="c1"># =&gt; Can I fly? False</span>


<span class="c1">####################################################</span>
<span class="c1"># 7. 発展的内容</span>
<span class="c1">####################################################</span>

<span class="c1"># ジェネレータは遅延をするコードの作成に役立ちます。</span>
<span class="k">def</span> <span class="nf">double_numbers</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">i</span> <span class="o">+</span> <span class="n">i</span>

<span class="c1"># 次の値を処理するのに必要なデータしか読み込まないので、ジェネレータはメモリをあまり消費しません。</span>
<span class="c1"># この性質により、他の方法では非常に多くのメモリを消費するような操作が可能になります。</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">double_numbers</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">900000000</span><span class="p">)):</span>  <span class="c1"># `range` もジェネレータの1つです。</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">30</span><span class="p">:</span>
        <span class="k">break</span>

<span class="c1"># リスト内包表記のように、ジェネータ内包表記を作成することもできます。</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>                    <span class="c1"># prints -1 -2 -3 -4 -5</span>

<span class="c1"># ジェネレータ内包表記から直接リストを作成することもできます。</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="n">gen_to_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gen_to_list</span><span class="p">)</span>  <span class="c1"># =&gt; [-1, -2, -3, -4, -5]</span>

<span class="c1"># デコレータ</span>
<span class="c1"># この例では`beg` が `say` を `wraps`します。</span>
<span class="c1"># もし say_please が True なら、出力が変更されます。</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>


<span class="k">def</span> <span class="nf">beg</span><span class="p">(</span><span class="n">target_function</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">target_function</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">msg</span><span class="p">,</span> <span class="n">say_please</span> <span class="o">=</span> <span class="n">target_function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">say_please</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s2">&quot;Please! I am poor :(&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">msg</span>

    <span class="k">return</span> <span class="n">wrapper</span>


<span class="nd">@beg</span>
<span class="k">def</span> <span class="nf">say</span><span class="p">(</span><span class="n">say_please</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Can you buy me a beer?&quot;</span>
    <span class="k">return</span> <span class="n">msg</span><span class="p">,</span> <span class="n">say_please</span>


<span class="nb">print</span><span class="p">(</span><span class="n">say</span><span class="p">())</span>                 <span class="c1"># Can you buy me a beer?</span>
<span class="nb">print</span><span class="p">(</span><span class="n">say</span><span class="p">(</span><span class="n">say_please</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>  <span class="c1"># Can you buy me a beer? Please! I am poor :(</span>
</pre></div>
<h2>さらなる学習の準備ができましたか？</h2>

<h3>無料のオンラインコンテンツ</h3>

<ul>
<li><a href="https://automatetheboringstuff.com">Automate the Boring Stuff with Python</a></li>
<li><a href="http://pythonpracticeprojects.com">Ideas for Python Projects</a></li>
<li><a href="http://docs.python.org/3/">The Official Docs</a></li>
<li><a href="http://docs.python-guide.org/en/latest/">Hitchhiker&rsquo;s Guide to Python</a></li>
<li><a href="http://www.python-course.eu/index.php">Python Course</a></li>
<li><a href="https://realpython.com/learn/python-first-steps/">First Steps With Python</a></li>
<li><a href="https://github.com/vinta/awesome-python">A curated list of awesome Python frameworks, libraries and software</a></li>
<li><a href="http://sahandsaba.com/thirty-python-language-features-and-tricks-you-may-not-know.html">30 Python Language Features and Tricks You May Not Know About</a></li>
<li><a href="https://www.python.org/dev/peps/pep-0008/">Official Style Guide for Python</a></li>
<li><a href="http://cscircles.cemc.uwaterloo.ca/">Python 3 Computer Science Circles</a></li>
<li><a href="http://www.diveintopython3.net/index.html">Dive Into Python 3</a></li>
<li><a href="http://nbviewer.jupyter.org/gist/anonymous/5924718">A Crash Course in Python for Scientists</a></li>
</ul>

    <hr>
    <p>提案がありますか？それとも修正が必要ですか？ Githubレポジトリで<a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Issueを開く</a>か自分で<a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/ja-jp/python-jp.html.markdown">プルリクエスト</a>を作ってください。
    </p>
    <p class="contributed">
    Louie Dinhが初めて貢献し、後に<a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/ja-jp/python-jp.html.markdown">7人の貢献者</a>が更新してきました。
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="http://pythonpracticeprojects.com">Louie Dinh</a>,
        <a href="http://github.com/xksteven">Steven Basart</a>,
        <a href="https://github.com/Oire">Andre Polykanine</a>,
        <a href="http://github.com/zfergus2">Zachary Ferguson</a>,
        <a href="http://github.com/evuez">evuez</a>,
        <a href="https://ebzzry.io">Rommel Martinez</a>,
        <a href="https://github.com/robertofd1995">Roberto Fernandez Diaz</a>
    </p>

    <p>
      Translated by:
        <a href="https://github.com/kakakaya">kakakaya</a>
        <a href="https://github.com/PicoSushi">Ryota Kayanuma</a>
        <a href="https://github.com/kenryuS">Kenryu Shibata</a>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>
    </body>
</html>
