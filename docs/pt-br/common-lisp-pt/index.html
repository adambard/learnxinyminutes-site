<!DOCTYPE html lang="pt-br" xml:lang="pt-br" xmlns="http://www.w3.org/1999/xhtml">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
      <!-- Google tag (gtag.js) -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WXC8R75DEN"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-WXC8R75DEN');
      </script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="pt-br">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn Common Lisp in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/pt-br/common-lisp-pt/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }

                if (theme === "dark" ) {
                    el.className = "dark";
                } else {
                    el.className = "light";
                }

                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (theme) {
                set_theme(theme);
              }
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.addEventListener("load", function(){
              load_theme();
            });
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Fpt-br%2Fcommon-lisp-pt%2F&text=Aprenda+X+em+Y+Minutos%2C+onde+X%3DCommon+Lisp">
        Compartilhe esta página
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">Selecione o tema:</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">claro</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">sombrio</button>
  </div>
  <h1><a href="/">Aprenda X em Y Minutos</a></h1>
  <h2>Onde X=Common Lisp</h2>
    <p class="filelink">
    Baixar o código:
    <a href="/docs/files/commonlisp-pt.lisp">commonlisp-pt.lisp</a>
    </p>
  <div id="doc">
    <p>ANSI Common Lisp é uma linguagem de uso geral, multi-paradigma, designada
para uma variedade de aplicações na indústria. É frequentemente citada
como uma linguagem de programação programável.</p>

<p>O ponto inicial clássico é <a href="http://www.gigamonkeys.com/book/">Practical Common Lisp e livremente disponível</a></p>

<p>Outro livro recente e popular é o
<a href="http://landoflisp.com/">Land of Lisp</a>.</p>
<div class="highlight"><pre><span></span><span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;;; 0. Sintaxe</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;;; &quot;Form&quot; Geral</span>


<span class="c1">;; Lisp tem dois pedaços fundamentais de sintaxe: o ATOM e S-expression.</span>
<span class="c1">;; Tipicamente, S-expressions agrupadas são chamadas de `forms`.</span>


<span class="mi">10</span><span class="w">  </span><span class="c1">; um atom; é avaliado para ele mesmo</span>

<span class="ss">:THING</span><span class="w"> </span><span class="c1">;Outro atom; avaliado para o símbolo :thing.</span>

<span class="no">t</span><span class="w"> </span><span class="c1">; outro atom, denotado true.</span>

<span class="p">(</span><span class="nb">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="c1">; uma s-expression</span>

<span class="o">&#39;</span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="ss">:foo</span><span class="w">  </span><span class="no">t</span><span class="p">)</span><span class="w">  </span><span class="c1">;outra s-expression</span>


<span class="c1">;;; Comentários</span>

<span class="c1">;; Comentários de uma única linha começam com ponto e vírgula; usar dois para</span>
<span class="c1">;; comentários normais, três para comentários de seção, e quadro para comentários</span>
<span class="c1">;; em nível de arquivo.</span>

<span class="cm">#| Bloco de comentário</span>
<span class="cm">   pode abranger várias linhas e...</span>
<span class="cm">    #|</span>
<span class="cm">       eles podem ser aninhados</span>
<span class="cm">    |#</span>
<span class="cm">|#</span>

<span class="c1">;;; Ambiente</span>

<span class="c1">;; Existe uma variedade de implementações; a maioria segue o padrão.</span>
<span class="c1">;; CLISP é um bom ponto de partida.</span>

<span class="c1">;; Bibliotecas são gerenciadas através do Quicklisp.org&#39;s Quicklisp sistema.</span>

<span class="c1">;; Common Lisp é normalmente desenvolvido com um editor de texto e um REPL</span>
<span class="c1">;; (Read Evaluate Print Loop) rodando ao mesmo tempo. O REPL permite exploração</span>
<span class="c1">;; interativa do programa como ele é &quot;ao vivo&quot; no sistema.</span>


<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;;; 1. Tipos Primitivos e Operadores</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;;; Símbolos</span>

<span class="ss">&#39;foo</span><span class="w"> </span><span class="c1">; =&gt; FOO Perceba que um símbolo é automáticamente convertido para maiúscula.</span>

<span class="c1">;; Intern manualmente cria um símbolo a partir de uma string.</span>

<span class="p">(</span><span class="nb">intern</span><span class="w"> </span><span class="s">&quot;AAAA&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; AAAA</span>

<span class="p">(</span><span class="nb">intern</span><span class="w"> </span><span class="s">&quot;aaa&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; |aaa|</span>

<span class="c1">;;; Números</span>
<span class="mi">9999999999999999999999</span><span class="w"> </span><span class="c1">; inteiro</span>
<span class="mb">#b111</span><span class="w">                  </span><span class="c1">; binário =&gt; 7</span>
<span class="mo">#o111</span><span class="w">                  </span><span class="c1">; octal =&gt; 73</span>
<span class="mh">#x111</span><span class="w">                  </span><span class="c1">; hexadecimal =&gt; 273</span>
<span class="mf">3.14159s0</span><span class="w">              </span><span class="c1">; single</span>
<span class="mf">3.14159d0</span><span class="w">              </span><span class="c1">; double</span>
<span class="m">1/2</span><span class="w">                    </span><span class="c1">; ratios</span>
<span class="m">#C</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">                </span><span class="c1">; números complexos</span>


<span class="c1">;; Funções são escritas como (f x y z ...)</span>
<span class="c1">;; onde f é uma função e x, y, z, ... são operadores</span>
<span class="c1">;; Se você quiser criar uma lista literal de dados, use &#39; para evitar </span>
<span class="c1">;; que a lista seja avaliada - literalmente, &quot;quote&quot; os dados.</span>
<span class="o">&#39;</span><span class="p">(</span><span class="nb">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; (+ 1 2)</span>
<span class="c1">;; Você também pode chamar uma função manualmente:</span>
<span class="p">(</span><span class="nb">funcall</span><span class="w"> </span><span class="nf">#&#39;</span><span class="nb">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; 6</span>
<span class="c1">;; O mesmo para operações aritiméticas</span>
<span class="p">(</span><span class="nb">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">              </span><span class="c1">; =&gt; 2</span>
<span class="p">(</span><span class="nb">-</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">              </span><span class="c1">; =&gt; 7</span>
<span class="p">(</span><span class="nb">*</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">             </span><span class="c1">; =&gt; 20</span>
<span class="p">(</span><span class="nb">expt</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">           </span><span class="c1">; =&gt; 8</span>
<span class="p">(</span><span class="nb">mod</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">            </span><span class="c1">; =&gt; 1</span>
<span class="p">(</span><span class="nb">/</span><span class="w"> </span><span class="mi">35</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w">             </span><span class="c1">; =&gt; 7</span>
<span class="p">(</span><span class="nb">/</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">              </span><span class="c1">; =&gt; 1/3</span>
<span class="p">(</span><span class="nb">+</span><span class="w"> </span><span class="m">#C</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="m">#C</span><span class="p">(</span><span class="mi">6</span><span class="w"> </span><span class="mi">-4</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; #C(7 -2)</span>

<span class="w">                     </span><span class="c1">;;; Booleans</span>
<span class="no">t</span><span class="w">                    </span><span class="c1">; para true (qualquer valor não nil é true)</span>
<span class="no">nil</span><span class="w">                  </span><span class="c1">; para false - e para lista vazia</span>
<span class="p">(</span><span class="nb">not</span><span class="w"> </span><span class="no">nil</span><span class="p">)</span><span class="w">            </span><span class="c1">; =&gt; t</span>
<span class="p">(</span><span class="nb">and</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="no">t</span><span class="p">)</span><span class="w">            </span><span class="c1">; =&gt; t</span>
<span class="p">(</span><span class="nb">or</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="no">nil</span><span class="p">)</span><span class="w">           </span><span class="c1">; =&gt; 0</span>

<span class="w">                     </span><span class="c1">;;; Caracteres</span>
<span class="sc">#\A</span><span class="w">                  </span><span class="c1">; =&gt; #\A</span>
<span class="sc">#\λ</span><span class="w">                  </span><span class="c1">; =&gt; #\GREEK_SMALL_LETTER_LAMDA</span>
<span class="sc">#\u03BB</span><span class="w">              </span><span class="c1">; =&gt; #\GREEK_SMALL_LETTER_LAMDA</span>

<span class="c1">;;; String são arrays de caracteres com tamanho fixo.</span>
<span class="s">&quot;Hello, world!&quot;</span>
<span class="s">&quot;Benjamin \&quot;Bugsy\&quot; Siegel&quot;</span><span class="w">   </span><span class="c1">; barra é um escape de caracter</span>

<span class="c1">;; String podem ser concatenadas também!</span>
<span class="p">(</span><span class="nb">concatenate</span><span class="w"> </span><span class="ss">&#39;string</span><span class="w"> </span><span class="s">&quot;Hello &quot;</span><span class="w"> </span><span class="s">&quot;world!&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; &quot;Hello world!&quot;</span>

<span class="c1">;; Uma String pode ser tratada como uma sequência de caracteres</span>
<span class="p">(</span><span class="nb">elt</span><span class="w"> </span><span class="s">&quot;Apple&quot;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; #\A</span>

<span class="c1">;; format pode ser usado para formatar strings</span>
<span class="p">(</span><span class="nb">format</span><span class="w"> </span><span class="no">nil</span><span class="w"> </span><span class="s">&quot;~a can be ~a&quot;</span><span class="w"> </span><span class="s">&quot;strings&quot;</span><span class="w"> </span><span class="s">&quot;formatted&quot;</span><span class="p">)</span>

<span class="c1">;; Impimir é bastante fácil; ~% indica nova linha</span>
<span class="p">(</span><span class="nb">format</span><span class="w"> </span><span class="no">t</span><span class="w"> </span><span class="s">&quot;Common Lisp is groovy. Dude.~%&quot;</span><span class="p">)</span>


<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 2. Variáveis</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; Você pode criar uma global (escopo dinâmico) usando defparameter</span>
<span class="c1">;; um nome de variável pode conter qualquer caracter, exceto: ()&quot;,&#39;`;#|\</span>

<span class="c1">;; Variáveis de escopo dinâmico devem ter asteriscos em seus nomes!</span>

<span class="p">(</span><span class="nb">defparameter</span><span class="w"> </span><span class="vg">*some-var*</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="vg">*some-var*</span><span class="w"> </span><span class="c1">; =&gt; 5</span>

<span class="c1">;; Você pode usar caracteres unicode também.</span>
<span class="p">(</span><span class="nb">defparameter</span><span class="w"> </span><span class="vg">*AΛB*</span><span class="w"> </span><span class="no">nil</span><span class="p">)</span>


<span class="c1">;; Acessando uma variável anteriormente não ligada é um</span>
<span class="c1">;; comportamento não definido (mas possível). Não faça isso.</span>

<span class="c1">;; Ligação local: `me` é vinculado com &quot;dance with you&quot; somente dentro</span>
<span class="c1">;; de (let ... ). Let permite retornar o valor do último `form` no form let.</span>

<span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nv">me</span><span class="w"> </span><span class="s">&quot;dance with you&quot;</span><span class="p">))</span>
<span class="w">  </span><span class="nv">me</span><span class="p">)</span>
<span class="c1">;; =&gt; &quot;dance with you&quot;</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 3. Estruturas e Coleções</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Estruturas</span>
<span class="p">(</span><span class="nb">defstruct</span><span class="w"> </span><span class="nv">dog</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">breed</span><span class="w"> </span><span class="nv">age</span><span class="p">)</span>
<span class="p">(</span><span class="nb">defparameter</span><span class="w"> </span><span class="vg">*rover*</span>
<span class="w">    </span><span class="p">(</span><span class="nv">make-dog</span><span class="w"> </span><span class="ss">:name</span><span class="w"> </span><span class="s">&quot;rover&quot;</span>
<span class="w">              </span><span class="ss">:breed</span><span class="w"> </span><span class="s">&quot;collie&quot;</span>
<span class="w">              </span><span class="ss">:age</span><span class="w"> </span><span class="mi">5</span><span class="p">))</span>
<span class="vg">*rover*</span><span class="w"> </span><span class="c1">; =&gt; #S(DOG :NAME &quot;rover&quot; :BREED &quot;collie&quot; :AGE 5)</span>

<span class="p">(</span><span class="nv">dog-p</span><span class="w"> </span><span class="vg">*rover*</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; t  ;; ewww)</span>
<span class="p">(</span><span class="nv">dog-name</span><span class="w"> </span><span class="vg">*rover*</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; &quot;rover&quot;</span>

<span class="c1">;; Dog-p, make-dog, e dog-name foram todas criadas por defstruct!</span>

<span class="c1">;;; Pares</span>
<span class="c1">;; `cons&#39; constroi pares, `car&#39; and `cdr&#39; extrai o primeiro</span>
<span class="c1">;; e o segundo elemento</span>
<span class="p">(</span><span class="nb">cons</span><span class="w"> </span><span class="ss">&#39;SUBJECT</span><span class="w"> </span><span class="ss">&#39;VERB</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; &#39;(SUBJECT . VERB)</span>
<span class="p">(</span><span class="nb">car</span><span class="w"> </span><span class="p">(</span><span class="nb">cons</span><span class="w"> </span><span class="ss">&#39;SUBJECT</span><span class="w"> </span><span class="ss">&#39;VERB</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; SUBJECT</span>
<span class="p">(</span><span class="nb">cdr</span><span class="w"> </span><span class="p">(</span><span class="nb">cons</span><span class="w"> </span><span class="ss">&#39;SUBJECT</span><span class="w"> </span><span class="ss">&#39;VERB</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; VERB</span>

<span class="c1">;;; Listas</span>

<span class="c1">;; Listas são estruturas de dados do tipo listas encadeadas, criadas com `cons&#39;</span>
<span class="c1">;; pares e terminam `nil&#39; (ou &#39;()) para marcar o final da lista</span>
<span class="p">(</span><span class="nb">cons</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">cons</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="nb">cons</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="no">nil</span><span class="p">)))</span><span class="w"> </span><span class="c1">; =&gt; &#39;(1 2 3)</span>
<span class="c1">;; `list&#39; é um construtor conveniente para listas</span>
<span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; &#39;(1 2 3)</span>
<span class="c1">;; e a quote (&#39;) também pode ser usado para um valor de lista literal</span>
<span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; &#39;(1 2 3)</span>

<span class="c1">;; Ainda pode-se usar `cons&#39; para adicionar um item no começo da lista.</span>
<span class="p">(</span><span class="nb">cons</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; &#39;(4 1 2 3)</span>

<span class="c1">;; Use `append&#39; para - surpreendentemente - juntar duas listas</span>
<span class="p">(</span><span class="nb">append</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; &#39;(1 2 3 4)</span>

<span class="c1">;; Ou use concatenate -</span>

<span class="p">(</span><span class="nb">concatenate</span><span class="w"> </span><span class="ss">&#39;list</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">))</span>

<span class="c1">;; Listas são um tipo muito central, então existe uma grande variedade de</span>
<span class="c1">;; funcionalidades para eles, alguns exemplos:</span>
<span class="p">(</span><span class="nb">mapcar</span><span class="w"> </span><span class="nf">#&#39;</span><span class="nb">1+</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">))</span><span class="w">             </span><span class="c1">; =&gt; &#39;(2 3 4)</span>
<span class="p">(</span><span class="nb">mapcar</span><span class="w"> </span><span class="nf">#&#39;</span><span class="nb">+</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">10</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mi">30</span><span class="p">))</span><span class="w">  </span><span class="c1">; =&gt; &#39;(11 22 33)</span>
<span class="p">(</span><span class="nb">remove-if-not</span><span class="w"> </span><span class="nf">#&#39;</span><span class="nb">evenp</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; &#39;(2 4)</span>
<span class="p">(</span><span class="nb">every</span><span class="w"> </span><span class="nf">#&#39;</span><span class="nb">evenp</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">))</span><span class="w">         </span><span class="c1">; =&gt; nil</span>
<span class="p">(</span><span class="nb">some</span><span class="w"> </span><span class="nf">#&#39;</span><span class="nb">oddp</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">))</span><span class="w">           </span><span class="c1">; =&gt; T</span>
<span class="p">(</span><span class="nb">butlast</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="nv">subject</span><span class="w"> </span><span class="nv">verb</span><span class="w"> </span><span class="nv">object</span><span class="p">))</span><span class="w">   </span><span class="c1">; =&gt; (SUBJECT VERB)</span>


<span class="c1">;;; Vetores</span>

<span class="c1">;; Vector&#39;s literais são arrays de tamanho fixo.</span>
<span class="o">#(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; #(1 2 3)</span>

<span class="c1">;; Use concatenate para juntar dois vectors</span>
<span class="p">(</span><span class="nb">concatenate</span><span class="w"> </span><span class="ss">&#39;vector</span><span class="w"> </span><span class="o">#(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">#(</span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; #(1 2 3 4 5 6)</span>

<span class="c1">;;; Arrays</span>

<span class="c1">;; Ambos vetores e strings são um caso especial de arrays.</span>

<span class="c1">;; 2D arrays</span>

<span class="p">(</span><span class="nb">make-array</span><span class="w"> </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span>

<span class="c1">;; (make-array &#39;(2 2)) também funciona.</span>

<span class="c1">; =&gt; #2A((0 0) (0 0))</span>

<span class="p">(</span><span class="nb">make-array</span><span class="w"> </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span>

<span class="c1">; =&gt; #3A(((0 0) (0 0)) ((0 0) (0 0)))</span>

<span class="c1">;; Cuidado - os valores de inicialição padrões são</span>
<span class="c1">;; definidos pela implementção. Aqui vai como defini-lós.</span>

<span class="p">(</span><span class="nb">make-array</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="ss">:initial-element</span><span class="w"> </span><span class="ss">&#39;unset</span><span class="p">)</span>

<span class="c1">; =&gt; #(UNSET UNSET)</span>

<span class="c1">;; E, para acessar o element em 1,1,1 -</span>
<span class="p">(</span><span class="nb">aref</span><span class="w"> </span><span class="p">(</span><span class="nb">make-array</span><span class="w"> </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="c1">; =&gt; 0</span>

<span class="c1">;;; Vetores Ajustáveis</span>

<span class="c1">;; Vetores ajustáveis tem a mesma representação impressa que os vectores</span>
<span class="c1">;;  de tamanho fixo</span>
<span class="p">(</span><span class="nb">defparameter</span><span class="w"> </span><span class="vg">*adjvec*</span><span class="w"> </span><span class="p">(</span><span class="nb">make-array</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="ss">:initial-contents</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">      </span><span class="ss">:adjustable</span><span class="w"> </span><span class="no">t</span><span class="w"> </span><span class="ss">:fill-pointer</span><span class="w"> </span><span class="no">t</span><span class="p">))</span>

<span class="vg">*adjvec*</span><span class="w"> </span><span class="c1">; =&gt; #(1 2 3)</span>

<span class="c1">;; Adicionando novo elemento</span>
<span class="p">(</span><span class="nb">vector-push-extend</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="vg">*adjvec*</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; 3</span>

<span class="vg">*adjvec*</span><span class="w"> </span><span class="c1">; =&gt; #(1 2 3 4)</span>



<span class="c1">;;; Ingenuamente, conjuntos são apenas listas:</span>

<span class="p">(</span><span class="nb">set-difference</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">7</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; (3 2 1)</span>
<span class="p">(</span><span class="nb">intersection</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">7</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; 4</span>
<span class="p">(</span><span class="nb">union</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">7</span><span class="p">))</span><span class="w">        </span><span class="c1">; =&gt; (3 2 1 4 5 6 7)</span>
<span class="p">(</span><span class="nb">adjoin</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">))</span><span class="w">     </span><span class="c1">; =&gt; (1 2 3 4)</span>

<span class="c1">;; Mas você irá querer usar uma estrutura de dados melhor que uma lista encadeada.</span>
<span class="c1">;; para performance.</span>

<span class="c1">;;; Dicionários são implementados como hash tables</span>

<span class="c1">;; Cria um hash table</span>
<span class="p">(</span><span class="nb">defparameter</span><span class="w"> </span><span class="vg">*m*</span><span class="w"> </span><span class="p">(</span><span class="nb">make-hash-table</span><span class="p">))</span>

<span class="c1">;; seta um valor</span>
<span class="p">(</span><span class="nb">setf</span><span class="w"> </span><span class="p">(</span><span class="nb">gethash</span><span class="w"> </span><span class="ss">&#39;a</span><span class="w"> </span><span class="vg">*m*</span><span class="p">)</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="c1">;; Recupera um valor</span>
<span class="p">(</span><span class="nb">gethash</span><span class="w"> </span><span class="ss">&#39;a</span><span class="w"> </span><span class="vg">*m*</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; 1, t</span>

<span class="c1">;; Detalhe - Common Lisp  tem multiplos valores de retorno possíveis. gethash</span>
<span class="c1">;; retorna t no segundo valor se alguma coisa foi encontrada, e nil se não.</span>

<span class="c1">;; Recuperando um valor não presente retorna nil</span>
<span class="w"> </span><span class="p">(</span><span class="nb">gethash</span><span class="w"> </span><span class="ss">&#39;d</span><span class="w"> </span><span class="vg">*m*</span><span class="p">)</span><span class="w"> </span><span class="c1">;=&gt; nil, nil</span>

<span class="c1">;; Você pode fornecer um valor padrão para uma valores não encontrados</span>
<span class="p">(</span><span class="nb">gethash</span><span class="w"> </span><span class="ss">&#39;d</span><span class="w"> </span><span class="vg">*m*</span><span class="w"> </span><span class="ss">:not-found</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; :NOT-FOUND</span>

<span class="c1">;; Vamos tratas múltiplos valores de rotorno aqui.</span>

<span class="p">(</span><span class="nb">multiple-value-bind</span>
<span class="w">      </span><span class="p">(</span><span class="nv">a</span><span class="w"> </span><span class="nv">b</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">gethash</span><span class="w"> </span><span class="ss">&#39;d</span><span class="w"> </span><span class="vg">*m*</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">b</span><span class="p">))</span>
<span class="c1">; =&gt; (NIL NIL)</span>

<span class="p">(</span><span class="nb">multiple-value-bind</span>
<span class="w">      </span><span class="p">(</span><span class="nv">a</span><span class="w"> </span><span class="nv">b</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">gethash</span><span class="w"> </span><span class="ss">&#39;a</span><span class="w"> </span><span class="vg">*m*</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">b</span><span class="p">))</span>
<span class="c1">; =&gt; (1 T)</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 3. Funções</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Use `lambda&#39; para criar funções anônimas</span>
<span class="c1">;; Uma função sempre retorna um valor da última expressão avaliada.</span>
<span class="c1">;; A representação exata impressão de uma função varia de acordo ...</span>

<span class="p">(</span><span class="k">lambda</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="s">&quot;Hello World&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; #&lt;FUNCTION (LAMBDA ()) {1004E7818B}&gt;</span>

<span class="c1">;; Use funcall para chamar uma função lambda.</span>
<span class="p">(</span><span class="nb">funcall</span><span class="w"> </span><span class="p">(</span><span class="k">lambda</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="s">&quot;Hello World&quot;</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; &quot;Hello World&quot;</span>

<span class="c1">;; Ou Apply</span>
<span class="p">(</span><span class="nb">apply</span><span class="w"> </span><span class="p">(</span><span class="k">lambda</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="s">&quot;Hello World&quot;</span><span class="p">)</span><span class="w"> </span><span class="no">nil</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; &quot;Hello World&quot;</span>

<span class="c1">;; &quot;De-anonymize&quot; a função</span>
<span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">hello-world</span><span class="w"> </span><span class="p">()</span>
<span class="w">   </span><span class="s">&quot;Hello World&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nv">hello-world</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; &quot;Hello World&quot;</span>

<span class="c1">;; O () acima é a lista de argumentos da função.</span>
<span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">hello</span><span class="w"> </span><span class="p">(</span><span class="nv">name</span><span class="p">)</span>
<span class="w">   </span><span class="p">(</span><span class="nb">format</span><span class="w"> </span><span class="no">nil</span><span class="w"> </span><span class="s">&quot;Hello, ~a &quot;</span><span class="w"> </span><span class="nv">name</span><span class="p">))</span>

<span class="p">(</span><span class="nv">hello</span><span class="w"> </span><span class="s">&quot;Steve&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; &quot;Hello, Steve&quot;</span>

<span class="c1">;; Funções podem ter argumentos opcionais; eles são nil por padrão</span>

<span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">hello</span><span class="w"> </span><span class="p">(</span><span class="nv">name</span><span class="w"> </span><span class="k">&amp;optional</span><span class="w"> </span><span class="nv">from</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="nv">from</span>
<span class="w">        </span><span class="p">(</span><span class="nb">format</span><span class="w"> </span><span class="no">t</span><span class="w"> </span><span class="s">&quot;Hello, ~a, from ~a&quot;</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">from</span><span class="p">)</span>
<span class="w">        </span><span class="p">(</span><span class="nb">format</span><span class="w"> </span><span class="no">t</span><span class="w"> </span><span class="s">&quot;Hello, ~a&quot;</span><span class="w"> </span><span class="nv">name</span><span class="p">)))</span>

<span class="w"> </span><span class="p">(</span><span class="nv">hello</span><span class="w"> </span><span class="s">&quot;Jim&quot;</span><span class="w"> </span><span class="s">&quot;Alpacas&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">;; =&gt; Hello, Jim, from Alpacas</span>

<span class="c1">;; E os padrões podem ser configurados...</span>
<span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">hello</span><span class="w"> </span><span class="p">(</span><span class="nv">name</span><span class="w"> </span><span class="k">&amp;optional</span><span class="w"> </span><span class="p">(</span><span class="nv">from</span><span class="w"> </span><span class="s">&quot;The world&quot;</span><span class="p">))</span>
<span class="w">   </span><span class="p">(</span><span class="nb">format</span><span class="w"> </span><span class="no">t</span><span class="w"> </span><span class="s">&quot;Hello, ~a, from ~a&quot;</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">from</span><span class="p">))</span>

<span class="p">(</span><span class="nv">hello</span><span class="w"> </span><span class="s">&quot;Steve&quot;</span><span class="p">)</span>
<span class="c1">; =&gt; Hello, Steve, from The world</span>

<span class="p">(</span><span class="nv">hello</span><span class="w"> </span><span class="s">&quot;Steve&quot;</span><span class="w"> </span><span class="s">&quot;the alpacas&quot;</span><span class="p">)</span>
<span class="c1">; =&gt; Hello, Steve, from the alpacas</span>


<span class="c1">;; E é claro, palavras-chaves são permitidas também... frequentemente mais</span>
<span class="c1">;; flexivel que &amp;optional.</span>

<span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">generalized-greeter</span><span class="w"> </span><span class="p">(</span><span class="nv">name</span><span class="w"> </span><span class="k">&amp;key</span><span class="w"> </span><span class="p">(</span><span class="nv">from</span><span class="w"> </span><span class="s">&quot;the world&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">honorific</span><span class="w"> </span><span class="s">&quot;Mx&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="p">(</span><span class="nb">format</span><span class="w"> </span><span class="no">t</span><span class="w"> </span><span class="s">&quot;Hello, ~a ~a, from ~a&quot;</span><span class="w"> </span><span class="nv">honorific</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">from</span><span class="p">))</span>

<span class="p">(</span><span class="nv">generalized-greeter</span><span class="w"> </span><span class="s">&quot;Jim&quot;</span><span class="p">)</span><span class="w">   </span><span class="c1">; =&gt; Hello, Mx Jim, from the world</span>

<span class="p">(</span><span class="nv">generalized-greeter</span><span class="w"> </span><span class="s">&quot;Jim&quot;</span><span class="w"> </span><span class="ss">:from</span><span class="w"> </span><span class="s">&quot;the alpacas you met last summer&quot;</span><span class="w"> </span><span class="ss">:honorific</span><span class="w"> </span><span class="s">&quot;Mr&quot;</span><span class="p">)</span>
<span class="c1">; =&gt; Hello, Mr Jim, from the alpacas you met last summer</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 4. Igualdade</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Common Lisp tem um sistema sofisticado de igualdade. Alguns são cobertos aqui.</span>

<span class="c1">;; Para número use `=&#39;</span>
<span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mf">3.0</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; t</span>
<span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; nil</span>

<span class="c1">;; para identidade de objeto (aproximadamente) use `eql`</span>
<span class="p">(</span><span class="nb">eql</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; t</span>
<span class="p">(</span><span class="nb">eql</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mf">3.0</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; nil</span>
<span class="p">(</span><span class="nb">eql</span><span class="w"> </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="mi">3</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; nil</span>

<span class="c1">;; para listas, strings, e para pedaços de vetores use `equal&#39;</span>
<span class="p">(</span><span class="nb">equal</span><span class="w"> </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="ss">&#39;a</span><span class="w"> </span><span class="ss">&#39;b</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="ss">&#39;a</span><span class="w"> </span><span class="ss">&#39;b</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; t</span>
<span class="p">(</span><span class="nb">equal</span><span class="w"> </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="ss">&#39;a</span><span class="w"> </span><span class="ss">&#39;b</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="ss">&#39;b</span><span class="w"> </span><span class="ss">&#39;a</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; nil</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 5. Fluxo de Controle</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;;; Condicionais</span>

<span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="no">t</span><span class="w">                </span><span class="c1">; testa a expressão</span>
<span class="w">    </span><span class="s">&quot;this is true&quot;</span><span class="w">   </span><span class="c1">; então expressão</span>
<span class="w">    </span><span class="s">&quot;this is false&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">; senão expressão</span>
<span class="c1">; =&gt; &quot;this is true&quot;</span>

<span class="c1">;; Em condicionais, todos valores não nulos são tratados como true</span>
<span class="p">(</span><span class="nb">member</span><span class="w"> </span><span class="ss">&#39;Groucho</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="nv">Harpo</span><span class="w"> </span><span class="nv">Groucho</span><span class="w"> </span><span class="nv">Zeppo</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; &#39;(GROUCHO ZEPPO)</span>
<span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">member</span><span class="w"> </span><span class="ss">&#39;Groucho</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="nv">Harpo</span><span class="w"> </span><span class="nv">Groucho</span><span class="w"> </span><span class="nv">Zeppo</span><span class="p">))</span>
<span class="w">    </span><span class="ss">&#39;yep</span>
<span class="w">    </span><span class="ss">&#39;nope</span><span class="p">)</span>
<span class="c1">; =&gt; &#39;YEP</span>

<span class="c1">;; `cond&#39; encadeia uma série de testes para selecionar um resultado</span>
<span class="p">(</span><span class="nb">cond</span><span class="w"> </span><span class="p">((</span><span class="nb">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">error</span><span class="w"> </span><span class="s">&quot;wrong!&quot;</span><span class="p">))</span>
<span class="w">      </span><span class="p">((</span><span class="nb">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">error</span><span class="w"> </span><span class="s">&quot;wrong again!&quot;</span><span class="p">))</span>
<span class="w">      </span><span class="p">(</span><span class="no">t</span><span class="w"> </span><span class="ss">&#39;ok</span><span class="p">))</span><span class="w"> </span><span class="c1">; =&gt; &#39;OK</span>

<span class="c1">;; Typecase é um condicional que escolhe uma de seus cláusulas com base do tipo</span>
<span class="c1">;; do seu valor</span>

<span class="p">(</span><span class="nb">typecase</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="p">(</span><span class="nb">string</span><span class="w"> </span><span class="ss">:string</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nc">integer</span><span class="w"> </span><span class="ss">:int</span><span class="p">))</span>

<span class="c1">; =&gt; :int</span>

<span class="c1">;;; Interação</span>

<span class="c1">;; Claro que recursão é suportada:</span>

<span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">walker</span><span class="w"> </span><span class="p">(</span><span class="nv">n</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">zerop</span><span class="w"> </span><span class="nv">n</span><span class="p">)</span>
<span class="w">      </span><span class="ss">:walked</span>
<span class="w">      </span><span class="p">(</span><span class="nv">walker</span><span class="w"> </span><span class="p">(</span><span class="nb">1-</span><span class="w"> </span><span class="nv">n</span><span class="p">))))</span>

<span class="p">(</span><span class="nv">walker</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="c1">; =&gt; :walked</span>

<span class="c1">;; Na maioria das vezes, nós usamos DOTLISO ou LOOP</span>

<span class="p">(</span><span class="nb">dolist</span><span class="w"> </span><span class="p">(</span><span class="nv">i</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nb">format</span><span class="w"> </span><span class="no">t</span><span class="w"> </span><span class="s">&quot;~a&quot;</span><span class="w"> </span><span class="nv">i</span><span class="p">))</span>

<span class="c1">; =&gt; 1234</span>

<span class="p">(</span><span class="nb">loop</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nv">below</span><span class="w"> </span><span class="mi">10</span>
<span class="w">      </span><span class="nv">collect</span><span class="w"> </span><span class="nv">i</span><span class="p">)</span>

<span class="c1">; =&gt; (0 1 2 3 4 5 6 7 8 9)</span>


<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 6. Mutação</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Use `setf&#39; para atribuir um novo valor para uma variável existente. Isso foi</span>
<span class="c1">;; demonstrado anteriormente no exemplo da hash table.</span>

<span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nv">variable</span><span class="w"> </span><span class="mi">10</span><span class="p">))</span>
<span class="w">    </span><span class="p">(</span><span class="nb">setf</span><span class="w"> </span><span class="nv">variable</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span>
<span class="w"> </span><span class="c1">; =&gt; 2</span>


<span class="c1">;; Um bom estilo Lisp é para minimizar funções destrutivas e para evitar </span>
<span class="c1">;; mutação quando razoável.</span>


<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 7. Classes e Objetos</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Sem clases Animal, vamos usar os veículos de transporte de tração</span>
<span class="c1">;; humana mecânicos.</span>

<span class="p">(</span><span class="nb">defclass</span><span class="w"> </span><span class="nv">human-powered-conveyance</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="p">((</span><span class="nv">velocity</span>
<span class="w">    </span><span class="ss">:accessor</span><span class="w"> </span><span class="nv">velocity</span>
<span class="w">    </span><span class="ss">:initarg</span><span class="w"> </span><span class="ss">:velocity</span><span class="p">)</span>
<span class="w">   </span><span class="p">(</span><span class="nv">average-efficiency</span>
<span class="w">    </span><span class="ss">:accessor</span><span class="w"> </span><span class="nv">average-efficiency</span>
<span class="w">   </span><span class="ss">:initarg</span><span class="w"> </span><span class="ss">:average-efficiency</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="ss">:documentation</span><span class="w"> </span><span class="s">&quot;A human powered conveyance&quot;</span><span class="p">))</span>

<span class="c1">;; defcalss, seguido do nome, seguido por uma list de superclass,</span>
<span class="c1">;; seguido por um uma &#39;slot list&#39;, seguido por qualidades opcionais como</span>
<span class="c1">;; :documentation</span>

<span class="c1">;; Quando nenhuma lista de superclasse é setada, uma lista padrão para</span>
<span class="c1">;; para o objeto padrão é usada. Isso *pode* ser mudado, mas não até você</span>
<span class="c1">;; saber o que está fazendo. Olhe em Art of the Metaobject Protocol</span>
<span class="c1">;; para maiores informações.</span>

<span class="p">(</span><span class="nb">defclass</span><span class="w"> </span><span class="nv">bicycle</span><span class="w"> </span><span class="p">(</span><span class="nv">human-powered-conveyance</span><span class="p">)</span>
<span class="w">  </span><span class="p">((</span><span class="nv">wheel-size</span>
<span class="w">    </span><span class="ss">:accessor</span><span class="w"> </span><span class="nv">wheel-size</span>
<span class="w">    </span><span class="ss">:initarg</span><span class="w"> </span><span class="ss">:wheel-size</span>
<span class="w">    </span><span class="ss">:documentation</span><span class="w"> </span><span class="s">&quot;Diameter of the wheel.&quot;</span><span class="p">)</span>
<span class="w">   </span><span class="p">(</span><span class="nv">height</span>
<span class="w">    </span><span class="ss">:accessor</span><span class="w"> </span><span class="nv">height</span>
<span class="w">    </span><span class="ss">:initarg</span><span class="w"> </span><span class="ss">:height</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">defclass</span><span class="w"> </span><span class="nv">recumbent</span><span class="w"> </span><span class="p">(</span><span class="nv">bicycle</span><span class="p">)</span>
<span class="w">  </span><span class="p">((</span><span class="nv">chain-type</span>
<span class="w">    </span><span class="ss">:accessor</span><span class="w"> </span><span class="nv">chain-type</span>
<span class="w">    </span><span class="ss">:initarg</span><span class="w">  </span><span class="ss">:chain-type</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">defclass</span><span class="w"> </span><span class="nv">unicycle</span><span class="w"> </span><span class="p">(</span><span class="nv">human-powered-conveyance</span><span class="p">)</span><span class="w"> </span><span class="no">nil</span><span class="p">)</span>

<span class="p">(</span><span class="nb">defclass</span><span class="w"> </span><span class="nv">canoe</span><span class="w"> </span><span class="p">(</span><span class="nv">human-powered-conveyance</span><span class="p">)</span>
<span class="w">  </span><span class="p">((</span><span class="nv">number-of-rowers</span>
<span class="w">    </span><span class="ss">:accessor</span><span class="w"> </span><span class="nv">number-of-rowers</span>
<span class="w">    </span><span class="ss">:initarg</span><span class="w"> </span><span class="ss">:number-of-rowers</span><span class="p">)))</span>


<span class="c1">;; Chamando DESCRIBE na classe human-powered-conveyance no REPL dá:</span>

<span class="p">(</span><span class="nb">describe</span><span class="w"> </span><span class="ss">&#39;human-powered-conveyance</span><span class="p">)</span>

<span class="c1">; COMMON-LISP-USER::HUMAN-POWERED-CONVEYANCE</span>
<span class="c1">;  [symbol]</span>
<span class="c1">;</span>
<span class="c1">; HUMAN-POWERED-CONVEYANCE names the standard-class #&lt;STANDARD-CLASS</span>
<span class="c1">;                                                    HUMAN-POWERED-CONVEYANCE&gt;:</span>
<span class="c1">;  Documentation:</span>
<span class="c1">;    A human powered conveyance</span>
<span class="c1">;  Direct superclasses: STANDARD-OBJECT</span>
<span class="c1">;  Direct subclasses: UNICYCLE, BICYCLE, CANOE</span>
<span class="c1">;  Not yet finalized.</span>
<span class="c1">;  Direct slots:</span>
<span class="c1">;    VELOCITY</span>
<span class="c1">;      Readers: VELOCITY</span>
<span class="c1">;      Writers: (SETF VELOCITY)</span>
<span class="c1">;    AVERAGE-EFFICIENCY</span>
<span class="c1">;      Readers: AVERAGE-EFFICIENCY</span>
<span class="c1">;      Writers: (SETF AVERAGE-EFFICIENCY)</span>

<span class="c1">;; Note o comportamento reflexivo disponível para você! Common Lisp é</span>
<span class="c1">;; projetada para ser um sistema interativo.</span>

<span class="c1">;; Para definir um métpdo, vamos encontrar o que nossa cirunferência da</span>
<span class="c1">;; roda da bicicleta usando a equação: C = d * pi</span>

<span class="p">(</span><span class="nb">defmethod</span><span class="w"> </span><span class="nv">circumference</span><span class="w"> </span><span class="p">((</span><span class="nv">object</span><span class="w"> </span><span class="nv">bicycle</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nb">*</span><span class="w"> </span><span class="nv">pi</span><span class="w"> </span><span class="p">(</span><span class="nv">wheel-size</span><span class="w"> </span><span class="nv">object</span><span class="p">)))</span>

<span class="c1">;; pi já é definido para a gente em Lisp!</span>

<span class="c1">;; Vamos supor que nós descobrimos que o valor da eficiência do número</span>
<span class="c1">;; de remadores em uma canoa é aproximadamente logarítmica. Isso provavelmente</span>
<span class="c1">;; deve ser definido no construtor / inicializador.</span>

<span class="c1">;; Veja como initializar sua instância após Common Lisp ter construído isso:</span>

<span class="p">(</span><span class="nb">defmethod</span><span class="w"> </span><span class="nb">initialize-instance</span><span class="w"> </span><span class="ss">:after</span><span class="w"> </span><span class="p">((</span><span class="nv">object</span><span class="w"> </span><span class="nv">canoe</span><span class="p">)</span><span class="w"> </span><span class="k">&amp;rest</span><span class="w"> </span><span class="nv">args</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">setf</span><span class="w"> </span><span class="p">(</span><span class="nv">average-efficiency</span><span class="w"> </span><span class="nv">object</span><span class="p">)</span><span class="w">  </span><span class="p">(</span><span class="nb">log</span><span class="w"> </span><span class="p">(</span><span class="nb">1+</span><span class="w"> </span><span class="p">(</span><span class="nv">number-of-rowers</span><span class="w"> </span><span class="nv">object</span><span class="p">)))))</span>

<span class="c1">;; Em seguida, para a construção de uma ocorrência e verificar a eficiência média ...</span>

<span class="p">(</span><span class="nv">average-efficiency</span><span class="w"> </span><span class="p">(</span><span class="nb">make-instance</span><span class="w"> </span><span class="ss">&#39;canoe</span><span class="w"> </span><span class="ss">:number-of-rowers</span><span class="w"> </span><span class="mi">15</span><span class="p">))</span>
<span class="c1">; =&gt; 2.7725887</span>




<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 8. Macros</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Macros permitem que você estenda a sintaxe da lingaugem</span>

<span class="c1">;; Common Lisp não vem com um loop WHILE - vamos adicionar um.</span>
<span class="c1">;; Se obedecermos nossos instintos &#39;assembler&#39;, acabamos com:</span>

<span class="p">(</span><span class="nb">defmacro</span><span class="w"> </span><span class="nv">while</span><span class="w"> </span><span class="p">(</span><span class="kt">condition</span><span class="w"> </span><span class="k">&amp;body</span><span class="w"> </span><span class="nv">body</span><span class="p">)</span>
<span class="w">    </span><span class="s">&quot;Enquanto `condition` é verdadeiro, `body` é executado.</span>

<span class="s">`condition` é testado antes de cada execução do `body`&quot;</span>
<span class="w">    </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nv">block-name</span><span class="w"> </span><span class="p">(</span><span class="nb">gensym</span><span class="p">)))</span>
<span class="w">        </span><span class="o">`</span><span class="p">(</span><span class="k">tagbody</span>
<span class="w">           </span><span class="p">(</span><span class="nb">unless</span><span class="w"> </span><span class="o">,</span><span class="kt">condition</span>
<span class="w">               </span><span class="p">(</span><span class="k">go</span><span class="w"> </span><span class="o">,</span><span class="nv">block-name</span><span class="p">))</span>
<span class="w">           </span><span class="p">(</span><span class="k">progn</span>
<span class="w">           </span><span class="o">,@</span><span class="nv">body</span><span class="p">)</span>
<span class="w">           </span><span class="o">,</span><span class="nv">block-name</span><span class="p">)))</span>

<span class="c1">;; Vamos dar uma olhada em uma versão alto nível disto:</span>


<span class="p">(</span><span class="nb">defmacro</span><span class="w"> </span><span class="nv">while</span><span class="w"> </span><span class="p">(</span><span class="kt">condition</span><span class="w"> </span><span class="k">&amp;body</span><span class="w"> </span><span class="nv">body</span><span class="p">)</span>
<span class="w">    </span><span class="s">&quot;Enquanto `condition` for verdadeira, `body` é executado.</span>

<span class="s">`condition` é testado antes de cada execução do `body`&quot;</span>
<span class="w">  </span><span class="o">`</span><span class="p">(</span><span class="nb">loop</span><span class="w"> </span><span class="nv">while</span><span class="w"> </span><span class="o">,</span><span class="kt">condition</span>
<span class="w">         </span><span class="nb">do</span>
<span class="w">         </span><span class="p">(</span><span class="k">progn</span>
<span class="w">            </span><span class="o">,@</span><span class="nv">body</span><span class="p">)))</span>

<span class="c1">;; Entretanto, com um compilador moderno, isso não é preciso; o LOOP</span>
<span class="c1">;; &#39;form&#39; compila igual e é bem mais fácil de ler.</span>

<span class="c1">;; Noteq ue ``` é usado , bem como `,` e `@`. ``` é um operador &#39;quote-type&#39;</span>
<span class="c1">;; conhecido como &#39;quasiquote&#39;; isso permite o uso de `,` . `,` permite &quot;unquoting&quot;</span>
<span class="c1">;; e variáveis. @ interpolará listas.</span>

<span class="c1">;; Gensym cria um símbolo único garantido que não existe em outras posições</span>
<span class="c1">;; o sistema. Isto é porque macros são expandidas em tempo de compilação e</span>
<span class="c1">;; variáveis declaradas na macro podem colidir com as variáveis usadas na</span>
<span class="c1">;; código regular.</span>

<span class="c1">;; Veja Practical Common Lisp para maiores informações sobre macros.</span>
</pre></div>
<h2>Leitura Adicional</h2>

<p><a href="http://www.gigamonkeys.com/book/">Continua em frente com  Practical Common Lisp book.</a></p>

<h2>Créditos</h2>

<p>Muitos  agradecimentos ao pessoal de Schema por fornecer um grande ponto de partida
o que facilitou muito a migração para Common Lisp.</p>

<ul>
<li><a href="https://github.com/pkhuong">Paul Khuong</a> pelas grandes revisões.</li>
</ul>

    <hr>
    <p>Sugestões ou correções? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Abra uma issue</a> no repositório do Github, ou faça um <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/pt-br/common-lisp-pt.html.markdown">pull request</a> você mesmo!
    </p>
    <p class="contributed">
    Originalmente contribuído por Paul Nathan e atualizado por <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/pt-br/common-lisp-pt.html.markdown">2 colaborador(es)</a>.
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="https://github.com/pnathan">Paul Nathan</a>
    </p>

    <p>
      Translated by:
        <a href="https://github.com/edipofederle">Édipo Luis Féderle</a>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>
    </body>
</html>
