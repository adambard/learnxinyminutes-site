<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="pt-br" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="pt-br" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="pt-br" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="pt-br" class="no-js"> <!--<![endif]-->
    <head>
      <!-- Google tag (gtag.js) -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WXC8R75DEN"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-WXC8R75DEN');
      </script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="pt-br">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn Lua in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/pt-br/lua-pt/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }

                if (theme === "dark" ) {
                    el.className = "dark";
                } else {
                    el.className = "light";
                }

                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (theme) {
                set_theme(theme);
              }
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.addEventListener("load", function(){
              load_theme();
            });
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Fpt-br%2Flua-pt%2F&text=Aprenda+X+em+Y+Minutos%2C+onde+X%3DLua">
        Compartilhe esta página
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">Selecione o tema:</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">claro</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">sombrio</button>
  </div>
  <h1><a href="/">Aprenda X em Y Minutos</a></h1>
  <h2>Onde X=Lua</h2>
    <p class="filelink">
    Baixar o código:
    <a href="/docs/files/learnlua-pt.lua">learnlua-pt.lua</a>
    </p>
  <div id="doc">
    <div class="highlight"><pre><span></span><span class="c1">-- Dois hífens começam um comentário de uma linha.</span>

<span class="cm">--[[</span>
<span class="cm">     Adicionar dois [  ] (colchetes) criam um comentário</span>
<span class="cm">     de múltiplas linhas.</span>
<span class="cm">--]]</span>

<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 1. Variáveis e fluxo de controle.</span>
<span class="c1">----------------------------------------------------</span>

<span class="n">num</span> <span class="o">=</span> <span class="mi">42</span>  <span class="c1">-- Todos os números são doubles.</span>
<span class="c1">-- Não se preocupe, doubles de 64-bits contém 52 bits para</span>
<span class="c1">-- armazenar corretamente valores int; a precisão da máquina</span>
<span class="c1">-- não é um problema para ints que são &lt; 52 bits.</span>

<span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;alternados&#39;</span>  <span class="c1">-- String são imutáveis, como em Python.</span>
<span class="n">t</span> <span class="o">=</span> <span class="s2">&quot;Aspas duplas também são válidas&quot;</span>
<span class="n">u</span> <span class="o">=</span> <span class="s">[[ Dois colchetes</span>
<span class="s">       começam e terminam</span>
<span class="s">       strings de múltiplas linhas.]]</span>
<span class="n">t</span> <span class="o">=</span> <span class="kc">nil</span>  <span class="c1">-- Torna t undefined(indefinido); Lua tem um Garbage Collector.</span>

<span class="c1">-- Blocos são representados com palavras do/end:</span>
<span class="kr">while</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="mi">50</span> <span class="kr">do</span>
  <span class="n">num</span> <span class="o">=</span> <span class="n">num</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1">-- Sem operadores do tipo ++ ou +=</span>
<span class="kr">end</span>

<span class="c1">--Cláusula If :</span>
<span class="kr">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">40</span> <span class="kr">then</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;over 40&#39;</span><span class="p">)</span>
<span class="kr">elseif</span> <span class="n">s</span> <span class="o">~=</span> <span class="s1">&#39;walternate&#39;</span> <span class="kr">then</span>  <span class="c1">-- ~= signfica não é igual.</span>
  <span class="c1">-- Para fazer checagem use == como em Python; Funciona para comparar strings também.</span>
  <span class="nb">io.write</span><span class="p">(</span><span class="s1">&#39;not over 40</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1">-- Padrão para saídas.</span>
<span class="kr">else</span>
  <span class="c1">-- Variáveis são globais por padrão.</span>
  <span class="n">thisIsGlobal</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1">-- Camel case é o comum.</span>

  <span class="c1">-- Como fazer variáveis locais:</span>
  <span class="kd">local</span> <span class="n">line</span> <span class="o">=</span> <span class="nb">io.read</span><span class="p">()</span>  <span class="c1">-- Leia a proxima linha de entrada.</span>

  <span class="c1">-- Para concatenação de strings use o operador .. :</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Winter is coming, &#39;</span> <span class="o">..</span> <span class="n">line</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">-- Variáveis indefinidas são do tipo nil.</span>
<span class="c1">-- Isso não é um erro:</span>
<span class="n">foo</span> <span class="o">=</span> <span class="n">anUnknownVariable</span>  <span class="c1">-- Agora foo = nil.</span>

<span class="n">aBoolValue</span> <span class="o">=</span> <span class="kc">false</span>

<span class="c1">-- Apenas nil e false são do tipo falso; 0 e &#39;&#39; são verdadeiros!</span>
<span class="kr">if</span> <span class="ow">not</span> <span class="n">aBoolValue</span> <span class="kr">then</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;twas false&#39;</span><span class="p">)</span> <span class="kr">end</span>

<span class="c1">-- &#39;or&#39; e &#39;and&#39; são operadores lógicos.</span>
<span class="c1">-- Esse operador em C/JS a?b:c , em lua seria o mesmo que:</span>
<span class="n">ans</span> <span class="o">=</span> <span class="n">aBoolValue</span> <span class="ow">and</span> <span class="s1">&#39;yes&#39;</span> <span class="ow">or</span> <span class="s1">&#39;no&#39;</span>  <span class="c1">--&gt; &#39;no&#39;</span>

<span class="n">karlSum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span> <span class="kr">do</span>  <span class="c1">-- O intervalo inclui inicio e fim.</span>
  <span class="n">karlSum</span> <span class="o">=</span> <span class="n">karlSum</span> <span class="o">+</span> <span class="n">i</span>
<span class="kr">end</span>

<span class="c1">-- Use &quot;100, 1, -1&quot; para um intervalo que diminui:</span>
<span class="n">fredSum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="kr">for</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="kr">do</span> <span class="n">fredSum</span> <span class="o">=</span> <span class="n">fredSum</span> <span class="o">+</span> <span class="n">j</span> <span class="kr">end</span>

<span class="c1">-- Em geral, o intervalo é começo, fim[, etapas].</span>

<span class="c1">-- Outro construtor de loop:</span>
<span class="kr">repeat</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A estrada do futuro.&#39;</span><span class="p">)</span>
  <span class="n">num</span> <span class="o">=</span> <span class="n">num</span> <span class="o">-</span> <span class="mi">1</span>
<span class="kr">until</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span>


<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 2. Funções.</span>
<span class="c1">----------------------------------------------------</span>

<span class="kr">function</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="kr">then</span> <span class="kr">return</span> <span class="mi">1</span> <span class="kr">end</span>
  <span class="kr">return</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">-- Closures e Funções anônimas são permitidas:</span>
<span class="kr">function</span> <span class="nf">adder</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
  <span class="c1">-- O retorno da função é criado quando adder é</span>
  <span class="c1">-- chamado, e ele sabe o valor de x:</span>
  <span class="kr">return</span> <span class="kr">function</span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="kr">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="kr">end</span>
<span class="kr">end</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">adder</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">adder</span><span class="p">(</span><span class="mi">36</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a1</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span>  <span class="c1">--&gt; 25</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a2</span><span class="p">(</span><span class="mi">64</span><span class="p">))</span>  <span class="c1">--&gt; 100</span>

<span class="c1">-- Retornos, chamadas de funções e atribuições, todos eles trabalham</span>
<span class="c1">-- com listas que podem ter tamanhos incompatíveis.</span>
<span class="c1">-- Receptores incompatpiveis serão nil;</span>
<span class="c1">-- Destinos incompatíveis serão descartados.</span>

<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span>
<span class="c1">-- Agora x = 1, y = 2, z = 3, e 4 é jogado fora.</span>

<span class="kr">function</span> <span class="nf">bar</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
  <span class="kr">return</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">42</span>
<span class="kr">end</span>

<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">bar</span><span class="p">(</span><span class="s1">&#39;zaphod&#39;</span><span class="p">)</span>  <span class="c1">--&gt; imprime &quot;zaphod  nil nil&quot;</span>
<span class="c1">-- Agora x = 4, y = 8, os valores 15...42 foram descartados.</span>

<span class="c1">-- Funções são de primeira-classe, portanto podem ser local/global.</span>
<span class="c1">-- Estes exemplos são equivalentes:</span>
<span class="kr">function</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="kr">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="kr">end</span>
<span class="n">f</span> <span class="o">=</span> <span class="kr">function</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="kr">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="kr">end</span>

<span class="c1">-- Logo, estes são equivalentes também:</span>
<span class="kd">local</span> <span class="kr">function</span> <span class="nf">g</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="kr">return</span> <span class="nb">math.sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="kr">end</span>
<span class="kd">local</span> <span class="n">g</span><span class="p">;</span> <span class="n">g</span>  <span class="o">=</span> <span class="kr">function</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="kr">return</span> <span class="nb">math.sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="kr">end</span>
<span class="c1">--  &#39;local g&#39; essa declaração de auto-referência é válida.</span>

<span class="c1">-- A propósito, as funções de trigonometria trabalham em radianos.</span>

<span class="c1">-- Chamadas de função com apenas um parâmetro de string não precisam de parênteses:</span>
<span class="nb">print</span> <span class="s1">&#39;hello&#39;</span>  <span class="c1">-- Funciona perfeitamente.</span>


<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 3. Tabelas.</span>
<span class="c1">----------------------------------------------------</span>

<span class="c1">-- Tabelas = A unica estrutura de dados composta em Lua;</span>
<span class="c1">--          elas são matrizes associativas.</span>
<span class="c1">-- Semelhantes aos arrays de PHP ou objetos de javascript, eles são:</span>
<span class="c1">-- hash-lookup(chave:valor) que também podem ser usados como listas.</span>

<span class="c1">-- Usando tabelas como dicionário / mapas:</span>

<span class="c1">-- Dicionários literais tem strings como chaves por padrão:</span>
<span class="n">t</span> <span class="o">=</span> <span class="p">{</span><span class="n">key1</span> <span class="o">=</span> <span class="s1">&#39;value1&#39;</span><span class="p">,</span> <span class="n">key2</span> <span class="o">=</span> <span class="kc">false</span><span class="p">}</span>

<span class="c1">-- As chaves do tipo string podem usar notação de ponto,semelhante a javascript:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">key1</span><span class="p">)</span>  <span class="c1">-- Imprime &#39;value1&#39;.</span>
<span class="n">t</span><span class="p">.</span><span class="n">newKey</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1">-- Adiciona um novo par chave/valor.</span>
<span class="n">t</span><span class="p">.</span><span class="n">key2</span> <span class="o">=</span> <span class="kc">nil</span>   <span class="c1">-- Remove key2 da tabela.</span>

<span class="c1">-- Qualquer notação literal (não-nulo) pode ser uma chave:</span>
<span class="n">u</span> <span class="o">=</span> <span class="p">{[</span><span class="s1">&#39;@!#&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;qbert&#39;</span><span class="p">,</span> <span class="p">[{}]</span> <span class="o">=</span> <span class="mi">1729</span><span class="p">,</span> <span class="p">[</span><span class="mf">6.28</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;tau&#39;</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="mf">6.28</span><span class="p">])</span>  <span class="c1">-- imprime &quot;tau&quot;</span>

<span class="c1">-- A correspondência de chave é basicamente o valor para números</span>
<span class="c1">-- e strings, mas por identidade para tabelas.</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">u</span><span class="p">[</span><span class="s1">&#39;@!#&#39;</span><span class="p">]</span>  <span class="c1">-- Agora a = &#39;qbert&#39;.</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">u</span><span class="p">[{}]</span>     <span class="c1">-- Nós esperavamso o resultado 1729, mas ele é nil:</span>
<span class="c1">-- b = nil já que a busca falha. Ela falha</span>
<span class="c1">-- porque a chave que usamos não é a mesma que o objeto</span>
<span class="c1">-- como aquele que usamos para guardar o valor original. Por isso</span>
<span class="c1">-- strings &amp; numeros são chaves mais recomendadas.</span>

<span class="c1">-- Uma chamada de função de apenas um paramêtro de tabela, não precisa de parênteses:</span>

<span class="kr">function</span> <span class="nf">h</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">key1</span><span class="p">)</span> <span class="kr">end</span>
<span class="n">h</span><span class="p">{</span><span class="n">key1</span> <span class="o">=</span> <span class="s1">&#39;Sonmi~451&#39;</span><span class="p">}</span>  <span class="c1">-- Imprime &#39;Sonmi~451&#39;.</span>

<span class="kr">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="kr">do</span>  <span class="c1">-- Iteração de tabela.</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">-- _G é uma tabela especial que guarda tudo que é global.</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">_G</span><span class="p">[</span><span class="s1">&#39;_G&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">_G</span><span class="p">)</span>  <span class="c1">-- Imprime &#39;true&#39;.</span>

<span class="c1">-- Usando tabelas como listas / arrays:</span>

<span class="c1">-- Listas literais com chaves int implícitas:</span>
<span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;value1&#39;</span><span class="p">,</span> <span class="s1">&#39;value2&#39;</span><span class="p">,</span> <span class="mf">1.21</span><span class="p">,</span> <span class="s1">&#39;gigawatts&#39;</span><span class="p">}</span>
<span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">#</span><span class="n">v</span> <span class="kr">do</span>  <span class="c1">-- #v é o tamanho de v</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>  <span class="c1">-- Índices começam em 1 !! MUITO LOCO!</span>
<span class="kr">end</span>
<span class="c1">-- Uma &#39;list&#39; não é um tipo real. v é apenas uma tabela</span>
<span class="c1">-- com chaves int consecutivas, tratando ela como uma lista.</span>

<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 3.1 Metatabelas e metamétodos.</span>
<span class="c1">----------------------------------------------------</span>

<span class="c1">-- Uma tabela pode ter uma metatabela que fornece à tabela</span>
<span class="c1">-- um compotamento de sobrecarga de operador. Depois veremos</span>
<span class="c1">-- como metatabelas suportam o comportamento do Javascript-prototype.</span>

<span class="n">f1</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">}</span>  <span class="c1">-- Representa uma fração de a/b.</span>
<span class="n">f2</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">}</span>

<span class="c1">-- Isso falharia:</span>
<span class="c1">-- s = f1 + f2</span>

<span class="n">metafraction</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kr">function</span> <span class="nc">metafraction</span><span class="p">.</span><span class="nf">__add</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">)</span>
  <span class="n">sum</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="n">sum</span><span class="p">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">f1</span><span class="p">.</span><span class="n">b</span> <span class="o">*</span> <span class="n">f2</span><span class="p">.</span><span class="n">b</span>
  <span class="n">sum</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">f1</span><span class="p">.</span><span class="n">a</span> <span class="o">*</span> <span class="n">f2</span><span class="p">.</span><span class="n">b</span> <span class="o">+</span> <span class="n">f2</span><span class="p">.</span><span class="n">a</span> <span class="o">*</span> <span class="n">f1</span><span class="p">.</span><span class="n">b</span>
  <span class="kr">return</span> <span class="n">sum</span>
<span class="kr">end</span>

<span class="nb">setmetatable</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">metafraction</span><span class="p">)</span>
<span class="nb">setmetatable</span><span class="p">(</span><span class="n">f2</span><span class="p">,</span> <span class="n">metafraction</span><span class="p">)</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">f1</span> <span class="o">+</span> <span class="n">f2</span>  <span class="c1">-- chama __add(f1, f2) na metatabela de f1</span>

<span class="c1">-- f1, f2 não tem chave para sua metatabela, ao contrário de</span>
<span class="c1">-- prototypes em javascript, então você deve recuperá-lo com</span>
<span class="c1">-- getmetatable(f1). A metatabela é uma tabela normal</span>
<span class="c1">-- com chaves que Lua reconhece, como __add.</span>

<span class="c1">-- Mas a proxima linha irá falhar porque s não tem uma metatabela:</span>
<span class="c1">-- t = s + s</span>
<span class="c1">-- O padrão de Classes abaixo consertam esse problema.</span>

<span class="c1">-- Uma __index em uma metatable sobrecarrega pesquisas de ponto:</span>
<span class="n">defaultFavs</span> <span class="o">=</span> <span class="p">{</span><span class="n">animal</span> <span class="o">=</span> <span class="s1">&#39;gru&#39;</span><span class="p">,</span> <span class="n">food</span> <span class="o">=</span> <span class="s1">&#39;donuts&#39;</span><span class="p">}</span>
<span class="n">myFavs</span> <span class="o">=</span> <span class="p">{</span><span class="n">food</span> <span class="o">=</span> <span class="s1">&#39;pizza&#39;</span><span class="p">}</span>
<span class="nb">setmetatable</span><span class="p">(</span><span class="n">myFavs</span><span class="p">,</span> <span class="p">{</span><span class="n">__index</span> <span class="o">=</span> <span class="n">defaultFavs</span><span class="p">})</span>
<span class="n">eatenBy</span> <span class="o">=</span> <span class="n">myFavs</span><span class="p">.</span><span class="n">animal</span>  <span class="c1">-- Funciona! obrigado, metatabela.</span>

<span class="c1">-- As pesquisas diretas de tabela que falham tentarão pesquisar novamente usando</span>
<span class="c1">-- o __index da metatabela, e isso é recursivo.</span>

<span class="c1">-- Um valor de __index também pode ser uma function(tbl, key)</span>
<span class="c1">-- para pesquisas mais personalizadas.</span>

<span class="c1">-- Valores do tipo __index,add, .. são chamados de metamétodos.</span>
<span class="c1">-- Uma lista completa com os metamétodos.</span>

<span class="c1">-- __add(a, b)                     para a + b</span>
<span class="c1">-- __sub(a, b)                     para a - b</span>
<span class="c1">-- __mul(a, b)                     para a * b</span>
<span class="c1">-- __div(a, b)                     para a / b</span>
<span class="c1">-- __mod(a, b)                     para a % b</span>
<span class="c1">-- __pow(a, b)                     para a ^ b</span>
<span class="c1">-- __unm(a)                        para -a</span>
<span class="c1">-- __concat(a, b)                  para a .. b</span>
<span class="c1">-- __len(a)                        para #a</span>
<span class="c1">-- __eq(a, b)                      para a == b</span>
<span class="c1">-- __lt(a, b)                      para a &lt; b</span>
<span class="c1">-- __le(a, b)                      para a &lt;= b</span>
<span class="c1">-- __index(a, b)  &lt;fn or a table&gt;  para a.b</span>
<span class="c1">-- __newindex(a, b, c)             para a.b = c</span>
<span class="c1">-- __call(a, ...)                  para a(...)</span>

<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 3.2 Tabelas como Classes e sua herança.</span>
<span class="c1">----------------------------------------------------</span>

<span class="c1">-- Classes não são disseminadas; existem maneiras diferentes</span>
<span class="c1">-- para fazer isso usando tabelas e metamétodos...</span>

<span class="c1">-- A explicação para este exemplo está logo abaixo.</span>

<span class="n">Dog</span> <span class="o">=</span> <span class="p">{}</span>                                   <span class="c1">-- 1.</span>

<span class="kr">function</span> <span class="nc">Dog</span><span class="p">:</span><span class="nf">new</span><span class="p">()</span>                         <span class="c1">-- 2.</span>
  <span class="n">newObj</span> <span class="o">=</span> <span class="p">{</span><span class="n">sound</span> <span class="o">=</span> <span class="s1">&#39;woof&#39;</span><span class="p">}</span>                <span class="c1">-- 3.</span>
  <span class="n">self</span><span class="p">.</span><span class="n">__index</span> <span class="o">=</span> <span class="n">self</span>                      <span class="c1">-- 4.</span>
  <span class="kr">return</span> <span class="nb">setmetatable</span><span class="p">(</span><span class="n">newObj</span><span class="p">,</span> <span class="n">self</span><span class="p">)</span>        <span class="c1">-- 5.</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Dog</span><span class="p">:</span><span class="nf">makeSound</span><span class="p">()</span>                   <span class="c1">-- 6.</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;I say &#39;</span> <span class="o">..</span> <span class="n">self</span><span class="p">.</span><span class="n">sound</span><span class="p">)</span>
<span class="kr">end</span>

<span class="n">mrDog</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">:</span><span class="n">new</span><span class="p">()</span>                          <span class="c1">-- 7.</span>
<span class="n">mrDog</span><span class="p">:</span><span class="n">makeSound</span><span class="p">()</span>  <span class="c1">-- &#39;I say woof&#39;         -- 8.</span>

<span class="c1">-- 1. Dog atua como uma classe; mas na verdade, é uma tabela.</span>
<span class="c1">-- 2. function tablename:fn(...) é a mesma coisa que</span>
<span class="c1">--    function tablename.fn(self, ...)</span>
<span class="c1">--    O : apenas adiciona um primeiro argumento chamado self.</span>
<span class="c1">--    Leia 7 &amp; 8 abaixo para ver como self obtém seu valor.</span>
<span class="c1">-- 3. newObj será uma instância da classe Dog.</span>
<span class="c1">-- 4. self = a classe que que foi instanciada. Regularmente</span>
<span class="c1">--    self = Dog, mas a herança pode mudar isso.</span>
<span class="c1">--    newObj recebe as funções de self como se tivessimos definido em ambos</span>
<span class="c1">--    a metatabela de newObj e self __index para self.</span>
<span class="c1">-- 5. Lembre-se: setmetatable retorna seu primeiro argumento definido.</span>
<span class="c1">-- 6. O : funciona como em 2, mas desta vez esperamos que</span>
<span class="c1">--    self seja uma instância já instanciada da classe.</span>
<span class="c1">-- 7. Igual a Dog.new(Dog), logo self = Dog no new().</span>
<span class="c1">-- 8. Igual a mrDog.makeSound(mrDog); self = mrDog.</span>

<span class="c1">----------------------------------------------------</span>

<span class="c1">-- Heranças exemplos:</span>

<span class="n">LoudDog</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">:</span><span class="n">new</span><span class="p">()</span>                           <span class="c1">-- 1.</span>

<span class="kr">function</span> <span class="nc">LoudDog</span><span class="p">:</span><span class="nf">makeSound</span><span class="p">()</span>
  <span class="n">s</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">sound</span> <span class="o">..</span> <span class="s1">&#39; &#39;</span>                       <span class="c1">-- 2.</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">s</span> <span class="o">..</span> <span class="n">s</span> <span class="o">..</span> <span class="n">s</span><span class="p">)</span>
<span class="kr">end</span>

<span class="n">seymour</span> <span class="o">=</span> <span class="n">LoudDog</span><span class="p">:</span><span class="n">new</span><span class="p">()</span>                       <span class="c1">-- 3.</span>
<span class="n">seymour</span><span class="p">:</span><span class="n">makeSound</span><span class="p">()</span>  <span class="c1">-- &#39;woof woof woof&#39;      -- 4.</span>

<span class="c1">-- 1. LoudDog recebe os metodos e variáveis de Dog.</span>
<span class="c1">-- 2. self tem uma chave &#39;sound&#39; vindo de new(), veja o 3.</span>
<span class="c1">-- 3. Mesma coisa que LoudDog.new(LoudDog), convertido para</span>
<span class="c1">--    Dog.new(LoudDog) como LoudDog não tem uma chave &#39;new&#39;,</span>
<span class="c1">--    mas tem uma chave __index = Dog na sua metatabela o</span>
<span class="c1">--    resultado será: a metabela de seymour é a LoudDog, e</span>
<span class="c1">--    LoudDog.__index = LoudDog. Então seymour.key será</span>
<span class="c1">--    = seymour.key, LoudDog.key, Dog.key,seja qual for a primeira</span>
<span class="c1">--    chave fornecida.</span>
<span class="c1">-- 4. A chave &#39;makeSound&#39; foi encontrada em LoudDog; isto</span>
<span class="c1">--    é a mesma coisa que LoudDog.makeSound(seymour).</span>

<span class="c1">-- Se precisar de, uma subclasse de new() como uma base:</span>
<span class="kr">function</span> <span class="nc">LoudDog</span><span class="p">:</span><span class="nf">new</span><span class="p">()</span>
  <span class="n">newObj</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="c1">-- define newObj</span>
  <span class="n">self</span><span class="p">.</span><span class="n">__index</span> <span class="o">=</span> <span class="n">self</span>
  <span class="kr">return</span> <span class="nb">setmetatable</span><span class="p">(</span><span class="n">newObj</span><span class="p">,</span> <span class="n">self</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 4. Módulos.</span>
<span class="c1">----------------------------------------------------</span>


<span class="c1">--[[ Estou comentando esta seção, então o resto</span>
<span class="c1">--   desse script é executável.</span>
</pre></div><div class="highlight"><pre><span></span><span class="c1">-- Suponhamos que o arquivo mod.lua se pareça com isso:</span>
<span class="kd">local</span> <span class="n">M</span> <span class="o">=</span> <span class="p">{}</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">sayMyName</span><span class="p">()</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hrunkner&#39;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">M</span><span class="p">.</span><span class="nf">sayHello</span><span class="p">()</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Why hello there&#39;</span><span class="p">)</span>
  <span class="n">sayMyName</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">return</span> <span class="n">M</span>

<span class="c1">-- Outro arquivo pode usar as funcionalidades de mod.lua:</span>
<span class="kd">local</span> <span class="n">mod</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;mod&#39;</span><span class="p">)</span>  <span class="c1">-- Roda o arquivo mod.lua.</span>

<span class="c1">-- require é a forma que usamos para incluir módulos.</span>
<span class="c1">-- require atua como:     (se não for cacheado; veja abaixo)</span>
<span class="kd">local</span> <span class="n">mod</span> <span class="o">=</span> <span class="p">(</span><span class="kr">function</span> <span class="p">()</span>
  <span class="o">&lt;</span><span class="n">contents</span> <span class="n">of</span> <span class="n">mod</span><span class="p">.</span><span class="n">lua</span><span class="o">&gt;</span>
<span class="kr">end</span><span class="p">)()</span>
<span class="c1">-- É como se mod.lua fosse um corpo de uma função, então</span>
<span class="c1">-- os locais dentro de mod.lua são invisíveis fora dele.</span>

<span class="c1">-- Isso irá funcionar porque mod aqui = M dentro de mod.lua:</span>
<span class="n">mod</span><span class="p">.</span><span class="n">sayHello</span><span class="p">()</span>  <span class="c1">-- Diz olá para Hrunkner.</span>

<span class="c1">-- Isso aqui é errado; sayMyName existe apenas em mod.lua:</span>
<span class="n">mod</span><span class="p">.</span><span class="n">sayMyName</span><span class="p">()</span>  <span class="c1">-- erro</span>

<span class="c1">-- valores retornados de require são armazenados em cache para que um arquivo seja</span>
<span class="c1">-- execute no máximo uma vez, mesmo quando é exigidos várias vezes.</span>

<span class="c1">-- Suponhamos que mod2.lua contém &quot;print(&#39;Hi!&#39;)&quot;.</span>
<span class="kd">local</span> <span class="n">a</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;mod2&#39;</span><span class="p">)</span>  <span class="c1">-- Imprime Hi!</span>
<span class="kd">local</span> <span class="n">b</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;mod2&#39;</span><span class="p">)</span>  <span class="c1">-- Não imprime;pois a=b.</span>

<span class="c1">-- dofile é parecido com require, porém sem cacheamento:</span>
<span class="nb">dofile</span><span class="p">(</span><span class="s1">&#39;mod2.lua&#39;</span><span class="p">)</span>  <span class="c1">--&gt; Hi!</span>
<span class="nb">dofile</span><span class="p">(</span><span class="s1">&#39;mod2.lua&#39;</span><span class="p">)</span>  <span class="c1">--&gt; Hi! (roda novamente)</span>

<span class="c1">-- loadfile carrega um arquivo lua, porém não o executa.</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">loadfile</span><span class="p">(</span><span class="s1">&#39;mod2.lua&#39;</span><span class="p">)</span>  <span class="c1">-- Chame f() para executar.</span>

<span class="c1">-- loadstring é um loadfile para strings.</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">loadstring</span><span class="p">(</span><span class="s1">&#39;print(343)&#39;</span><span class="p">)</span>  <span class="c1">-- Retorna uma função.</span>
<span class="n">g</span><span class="p">()</span>  <span class="c1">-- Imprime 343; nada foi impresso antes disso.</span>

<span class="c1">--]]</span>
</pre></div>
<h2>Referências</h2>

<p>Fiquei bastante animado para aprender Lua pois consegui fazer jogos
com a <a href="http://love2d.org/">Love 2D engine de jogos</a>.</p>

<p>Eu comecei com <a href="http://nova-fusion.com/2012/08/27/lua-for-programmers-part-1/">BlackBulletIV&rsquo;s para programadores LUA</a>.
Em seguida, eu li a documentação oficial <a href="https://www.lua.org/manual/5.1/pt/index.html#contents">Programando em Lua</a>.
É assim que se começa.</p>

<p>Pode ser útil conferir <a href="http://lua-users.org/files/wiki_insecure/users/thomasl/luarefv51.pdf">Uma pequena referencia sobre LUA</a> em lua-users.org.</p>

<p>Os principais tópicos não cobertos, são as bibliotecas padrões:</p>

<ul>
<li><a href="http://lua-users.org/wiki/StringLibraryTutorial">Biblioteca de strings</a></li>
<li><a href="http://lua-users.org/wiki/TableLibraryTutorial">Biblioteca de tabelas</a></li>
<li><a href="http://lua-users.org/wiki/MathLibraryTutorial">Biblioteca de matemática</a></li>
<li><a href="http://lua-users.org/wiki/IoLibraryTutorial">Biblioteca de entrada/saída</a></li>
<li><a href="http://lua-users.org/wiki/OsLibraryTutorial">Biblioteca do sistema operacional</a></li>
</ul>

<p>A propósito, todo este arquivo é um código LUA válido, salve-o como
aprenda.lua e rode-o com &ldquo;lua aprenda.lua&rdquo; !</p>

<p>Este guia foi escrito pela primeira vez por tylerneylon.com, e agora
também disponível em <a href="https://gist.github.com/tylerneylon/5853042">github gist</a>. E também em português.</p>

<p>Se divirta com lua</p>

    <hr>
    <p>Sugestões ou correções? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Abra uma issue</a> no repositório do Github, ou faça um <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/pt-br/lua-pt.html.markdown">pull request</a> você mesmo!
    </p>
    <p class="contributed">
    Originalmente contribuído por Tyler Neylon e atualizado por <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/pt-br/lua-pt.html.markdown">1 colaborador(es)</a>.
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="http://tylerneylon.com/">Tyler Neylon</a>
    </p>

    <p>
      Translated by:
        <a href="https://github.com/ianitow">Iaan Mesquita</a>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>
    </body>
</html>
