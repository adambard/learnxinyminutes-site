<!DOCTYPE html lang="en-us" xml:lang="en-us" xmlns="http://www.w3.org/1999/xhtml">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
      <!-- Google tag (gtag.js) -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WXC8R75DEN"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-WXC8R75DEN');
      </script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="en-us">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn kdb+ in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/kdb+/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }

                if (theme === "dark" ) {
                    el.className = "dark";
                } else {
                    el.className = "light";
                }

                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (theme) {
                set_theme(theme);
              }
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.addEventListener("load", function(){
              load_theme();
            });
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Fkdb%2B%2F&text=Learn+X+in+Y+minutes%2C+where+X%3Dkdb%2B">
        Share this page
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">Select theme:</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">light</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">dark</button>
  </div>
  <h1><a href="/">Learn X in Y minutes</a></h1>
  <h2>Where X=kdb+</h2>
    <p class="filelink">
    Get the code:
    <a href="/docs/files/learnkdb.q">learnkdb.q</a>
    </p>
  <div id="doc">
    <p>The q language and its database component kdb+ were developed by Arthur Whitney
and released by Kx systems in 2003. q is a descendant of APL and as such is
very terse and a little strange looking for anyone from a &ldquo;C heritage&rdquo; language
background. Its expressiveness and vector oriented nature make it well suited
to performing complex calculations on large amounts of data (while also
encouraging some amount of <a href="https://en.wikipedia.org/wiki/Code_golf">code
golf</a>). The fundamental structure in
the language is not the object but instead the list, and tables are built as
collections of lists. This means - unlike most traditional RDBMS systems -
tables are column oriented.  The language has both an in-memory and on-disk
database built in, giving a large amount of flexibility. kdb+ is most widely
used in the world of finance to store, analyze, process and retrieve large
time-series data sets.</p>

<p>The terms <em>q</em> and <em>kdb+</em> are usually used interchangeably, as the two are not
separable so this distinction is not really useful.</p>

<p>All Feedback welcome!  You can reach me at matt.doherty@aquaq.co.uk, or Jonny
at jonny.press@aquaq.co.uk</p>

<p>To learn more about kdb+ you can join the <a href="https://groups.google.com/forum/#!forum/personal-kdbplus">Personal kdb+</a> or <a href="https://groups.google.com/forum/#!forum/kdbtorq">TorQ kdb+</a> group.</p>
<div class="highlight"><pre><span></span><span class="o">/</span><span class="w"> </span><span class="n">Single</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">forward</span><span class="o">-</span><span class="n">slash</span>
<span class="o">/</span><span class="w"> </span><span class="n">These</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="ow">in</span><span class="o">-</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">long</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">least</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">whitespace</span><span class="w"> </span><span class="n">character</span>
<span class="o">/</span><span class="w"> </span><span class="n">separates</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">left</span>
<span class="o">/</span>
<span class="w">  </span><span class="n">A</span><span class="w"> </span><span class="n">forward</span><span class="o">-</span><span class="n">slash</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">itself</span><span class="w"> </span><span class="n">starts</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">multiline</span><span class="w"> </span><span class="n">comment</span>
<span class="w">  </span><span class="ow">and</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backward</span><span class="o">-</span><span class="n">slash</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">itself</span><span class="w"> </span><span class="n">terminates</span><span class="w"> </span><span class="n">it</span>
\

<span class="o">/</span><span class="w"> </span><span class="n">Run</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">directory</span>


<span class="o">////////////////////////////////////</span>
<span class="o">//</span><span class="w"> </span><span class="n">Basic</span><span class="w"> </span><span class="n">Operators</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">Datatypes</span><span class="w">  </span><span class="o">//</span>
<span class="o">////////////////////////////////////</span>

<span class="o">/</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">integers</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span>
<span class="mi">3</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span>

<span class="o">/</span><span class="w"> </span><span class="n">And</span><span class="w"> </span><span class="n">floats</span><span class="p">,</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">standard</span><span class="o">.</span><span class="w">  </span><span class="n">Trailing</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">distinguishes</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="nb nb-Type">int</span>
<span class="mf">3.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="n">f</span>

<span class="o">/</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">numerical</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">trailing</span><span class="w"> </span><span class="n">chars</span>
<span class="mi">3</span><span class="n">i</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="n">i</span>
<span class="mf">3.0</span><span class="n">e</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="n">e</span>

<span class="o">/</span><span class="w"> </span><span class="n">Math</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">mostly</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">expect</span>
<span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span>
<span class="mi">8</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">7</span>
<span class="mi">10</span><span class="o">*</span><span class="mi">2</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">20</span>
<span class="o">/</span><span class="w"> </span><span class="n">Except</span><span class="w"> </span><span class="n">division</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">percent</span><span class="w"> </span><span class="p">(</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">forward</span><span class="o">-</span><span class="n">slash</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="p">)</span>
<span class="mi">35</span><span class="o">%</span><span class="mi">5</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">7</span><span class="n">f</span><span class="w">  </span><span class="p">(</span><span class="n">the</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">always</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nb nb-Type">float</span><span class="p">)</span>

<span class="o">/</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">integer</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">keyword</span><span class="w"> </span><span class="n">div</span>
<span class="mi">4</span><span class="w"> </span><span class="n">div</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span>

<span class="o">/</span><span class="w"> </span><span class="n">Modulo</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">keyword</span><span class="p">,</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">percent</span><span class="w"> </span><span class="p">(</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">taken</span>
<span class="mi">4</span><span class="w"> </span><span class="n">mod</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span>

<span class="o">/</span><span class="w"> </span><span class="n">And</span><span class="w"> </span><span class="n">exponentiation</span><span class="o">...</span>
<span class="mi">2</span><span class="w"> </span><span class="n">xexp</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">16</span>

<span class="o">/</span><span class="w"> </span><span class="o">...</span><span class="ow">and</span><span class="w"> </span><span class="n">truncating</span><span class="o">...</span>
<span class="nb">floor</span><span class="w"> </span><span class="mf">3.14159</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span>

<span class="o">/</span><span class="w"> </span><span class="o">...</span><span class="n">getting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">absolute</span><span class="w"> </span><span class="n">value</span><span class="o">...</span>
<span class="nb">abs</span><span class="w"> </span><span class="o">-</span><span class="mf">3.14159</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mf">3.14159</span>
<span class="o">/</span><span class="w"> </span><span class="o">...</span><span class="ow">and</span><span class="w"> </span><span class="n">many</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">things</span>
<span class="o">/</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">code</span><span class="o">.</span><span class="n">kx</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">q</span><span class="o">/</span><span class="n">ref</span><span class="o">/</span><span class="n">card</span><span class="o">/</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span>

<span class="o">/</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">precedence</span><span class="p">,</span><span class="w"> </span><span class="n">everything</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">evaluated</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">left</span>
<span class="o">/</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">getting</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span>
<span class="mi">2</span><span class="o">*</span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">precedence</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">remember</span><span class="o">!</span><span class="p">)</span>

<span class="o">/</span><span class="w"> </span><span class="n">Precedence</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">modified</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">parentheses</span><span class="w"> </span><span class="p">(</span><span class="n">restoring</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s1">&#39;normal&#39;</span><span class="w"> </span><span class="n">result</span><span class="p">)</span>
<span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span>

<span class="o">/</span><span class="w"> </span><span class="n">Assignment</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">colon</span><span class="w"> </span><span class="p">(:)</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">equals</span><span class="w"> </span><span class="p">(</span><span class="o">=</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">declare</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">assignment</span>
<span class="n">a</span><span class="p">:</span><span class="mi">3</span>
<span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span>

<span class="o">/</span><span class="w"> </span><span class="n">Variables</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">assigned</span><span class="w"> </span><span class="ow">in</span><span class="o">-</span><span class="n">line</span>
<span class="o">/</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">affect</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="n">on</span>
<span class="n">c</span><span class="p">:</span><span class="mi">3</span><span class="o">+</span><span class="n">b</span><span class="p">:</span><span class="mi">2</span><span class="o">+</span><span class="n">a</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="s2">&quot;flows&quot;</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">left</span><span class="p">)</span>
<span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span>
<span class="n">b</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span>
<span class="n">c</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">6</span>

<span class="o">/</span><span class="w"> </span><span class="n">In</span><span class="o">-</span><span class="n">place</span><span class="w"> </span><span class="n">operations</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">expect</span>
<span class="n">a</span><span class="o">+</span><span class="p">:</span><span class="mi">2</span>
<span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span>

<span class="o">/</span><span class="w"> </span><span class="n">There</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s2">&quot;false&quot;</span><span class="w"> </span><span class="n">keywords</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">q</span>
<span class="o">/</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">indicated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bit</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">followed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">b</span>
<span class="mi">1</span><span class="n">b</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="bp">true</span><span class="w"> </span><span class="n">value</span>
<span class="mi">0</span><span class="n">b</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="bp">false</span><span class="w"> </span><span class="n">value</span>

<span class="o">/</span><span class="w"> </span><span class="n">Equality</span><span class="w"> </span><span class="n">comparisons</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">equals</span><span class="w"> </span><span class="p">(</span><span class="o">=</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">since</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">don</span><span class="s1">&#39;t need it for assignment)</span>
<span class="mi">1</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="n">b</span>
<span class="mi">2</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">0</span><span class="n">b</span>

<span class="o">/</span><span class="w"> </span><span class="n">Inequality</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="o">&lt;&gt;</span>
<span class="mi">1</span><span class="o">&lt;&gt;</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">0</span><span class="n">b</span>
<span class="mi">2</span><span class="o">&lt;&gt;</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="n">b</span>

<span class="o">/</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">comparisons</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">expect</span>
<span class="mi">1</span><span class="o">&lt;</span><span class="mi">2</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="n">b</span>
<span class="mi">1</span><span class="o">&gt;</span><span class="mi">2</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">0</span><span class="n">b</span>
<span class="mi">2</span><span class="o">&lt;=</span><span class="mi">2</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="n">b</span>
<span class="mi">2</span><span class="o">&gt;=</span><span class="mi">2</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="n">b</span>

<span class="o">/</span><span class="w"> </span><span class="n">Comparison</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">strict</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">regard</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">types</span><span class="o">...</span>
<span class="mi">42</span><span class="o">=</span><span class="mf">42.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="n">b</span>

<span class="o">/</span><span class="w"> </span><span class="o">...</span><span class="n">unless</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="bp">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">entities</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">identical</span>
<span class="mi">42</span><span class="o">~</span><span class="mf">42.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">0</span><span class="n">b</span>

<span class="o">/</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="bp">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">underlying</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">zero</span>
<span class="ow">not</span><span class="w"> </span><span class="mi">0</span><span class="n">b</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="n">b</span>
<span class="ow">not</span><span class="w"> </span><span class="mi">1</span><span class="n">b</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">0</span><span class="n">b</span>
<span class="ow">not</span><span class="w"> </span><span class="mi">42</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">0</span><span class="n">b</span>
<span class="ow">not</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="n">b</span>

<span class="o">/</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="nb">max</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="p">(</span><span class="o">|</span><span class="p">)</span><span class="w"> </span><span class="n">reduces</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">logical</span><span class="w"> </span><span class="s2">&quot;or&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">bools</span>
<span class="mi">42</span><span class="o">|</span><span class="mf">2.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">42</span><span class="n">f</span>
<span class="mi">1</span><span class="n">b</span><span class="o">|</span><span class="mi">0</span><span class="n">b</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="n">b</span>

<span class="o">/</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="nb">min</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="p">)</span><span class="w"> </span><span class="n">reduces</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">logical</span><span class="w"> </span><span class="s2">&quot;and&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">bools</span>
<span class="mi">42</span><span class="o">&amp;</span><span class="mf">2.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="n">f</span>
<span class="mi">1</span><span class="n">b</span><span class="o">&amp;</span><span class="mi">0</span><span class="n">b</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">0</span><span class="n">b</span>

<span class="o">/</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">provides</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">ways</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="n">character</span><span class="w"> </span><span class="n">data</span>
<span class="o">/</span><span class="w"> </span><span class="n">Chars</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">double</span><span class="o">-</span><span class="n">quotes</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;)</span>
<span class="n">ch</span><span class="p">:</span><span class="s2">&quot;a&quot;</span>
<span class="o">/</span><span class="w"> </span><span class="n">Strings</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">simply</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nb">char</span><span class="w"> </span><span class="p">(</span><span class="n">more</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="n">later</span><span class="p">)</span>
<span class="nb">str</span><span class="p">:</span><span class="s2">&quot;This is a string&quot;</span>
<span class="o">/</span><span class="w"> </span><span class="n">Escape</span><span class="w"> </span><span class="n">characters</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">normal</span>
<span class="nb">str</span><span class="p">:</span><span class="s2">&quot;This is a string with </span><span class="se">\&quot;</span><span class="s2">quotes</span><span class="se">\&quot;</span><span class="s2">&quot;</span>

<span class="o">/</span><span class="w"> </span><span class="n">Char</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">symbols</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">backtick</span><span class="w"> </span><span class="p">(</span><span class="err">`</span><span class="p">)</span>
<span class="n">symbol</span><span class="p">:</span><span class="err">`</span><span class="n">sym</span>
<span class="o">/</span><span class="w"> </span><span class="n">Symbols</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">LISTS</span><span class="p">,</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">enumeration</span>
<span class="o">/</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">stores</span><span class="w"> </span><span class="n">internally</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">vector</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">strings</span>
<span class="o">/</span><span class="w"> </span><span class="n">symbols</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">enumerated</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">vector</span>
<span class="o">/</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">speed</span><span class="w"> </span><span class="n">efficient</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">constant</span><span class="w"> </span><span class="n">width</span>

<span class="o">/</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">converts</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">strings</span>
<span class="n">string</span><span class="w"> </span><span class="err">`</span><span class="n">symbol</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">&quot;symbol&quot;</span>
<span class="n">string</span><span class="w"> </span><span class="mf">1.2345</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">&quot;1.2345&quot;</span>

<span class="o">/</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">type</span><span class="o">...</span>
<span class="n">t</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000</span>
<span class="o">/</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">type</span><span class="o">...</span>
<span class="n">d</span><span class="p">:</span><span class="mf">2015.12</span><span class="o">.</span><span class="mi">25</span>
<span class="o">/</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">datetime</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">(</span><span class="n">among</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">types</span><span class="p">)</span>
<span class="n">dt</span><span class="p">:</span><span class="mf">2015.12</span><span class="o">.</span><span class="mi">25</span><span class="n">D12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000000000</span>

<span class="o">/</span><span class="w"> </span><span class="n">These</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">arithmetic</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">easy</span><span class="w"> </span><span class="n">manipulation</span>
<span class="n">dt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mf">2015.12</span><span class="o">.</span><span class="mi">25</span><span class="n">D13</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000000000</span>
<span class="n">t</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mf">00.000</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mf">00.000</span>
<span class="o">/</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">decomposed</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">dot</span><span class="w"> </span><span class="n">notation</span>
<span class="n">d</span><span class="o">.</span><span class="n">year</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2015</span><span class="n">i</span>
<span class="n">d</span><span class="o">.</span><span class="n">mm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">12</span><span class="n">i</span>
<span class="n">d</span><span class="o">.</span><span class="n">dd</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">25</span><span class="n">i</span>
<span class="o">/</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">code</span><span class="o">.</span><span class="n">kx</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">q4m3</span><span class="o">/</span><span class="mi">2</span><span class="n">_Basic_Data_Types_Atoms</span><span class="o">/</span><span class="c1">#25-temporal-data for more</span>

<span class="o">/</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">infinity</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">div</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">zero</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span>
<span class="mi">1</span><span class="o">%</span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">0</span><span class="n">w</span>
<span class="o">-</span><span class="mi">1</span><span class="o">%</span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span><span class="n">w</span>

<span class="o">/</span><span class="w"> </span><span class="n">And</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">representing</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="n">values</span>
<span class="mi">0</span><span class="n">N</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="nb nb-Type">int</span>
<span class="mi">0</span><span class="n">n</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="nb nb-Type">float</span>
<span class="o">/</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">code</span><span class="o">.</span><span class="n">kx</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">q4m3</span><span class="o">/</span><span class="mi">2</span><span class="n">_Basic_Data_Types_Atoms</span><span class="o">/</span><span class="c1">#27-nulls for more</span>

<span class="o">/</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">structures</span>
<span class="o">/</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">expect</span><span class="w"> </span><span class="p">(;</span><span class="w"> </span><span class="n">separates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">condition</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">instructions</span><span class="p">)</span>
<span class="k">if</span><span class="p">[</span><span class="mi">1</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">a</span><span class="p">:</span><span class="s2">&quot;hi&quot;</span><span class="p">]</span>
<span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">&quot;hi&quot;</span>
<span class="o">/</span><span class="w"> </span><span class="k">if</span><span class="o">-</span><span class="k">else</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="p">(</span><span class="ow">and</span><span class="w"> </span><span class="n">unlike</span><span class="w"> </span><span class="k">if</span><span class="p">,</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">value</span><span class="p">)</span>
<span class="o">$</span><span class="p">[</span><span class="mi">1</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">a</span><span class="p">:</span><span class="s2">&quot;hi&quot;</span><span class="p">;</span><span class="n">a</span><span class="p">:</span><span class="s2">&quot;bye&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">&quot;bye&quot;</span>
<span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">&quot;bye&quot;</span>
<span class="o">/</span><span class="w"> </span><span class="k">if</span><span class="o">-</span><span class="k">else</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">extended</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">clauses</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">adding</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="n">separated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="p">;</span>
<span class="o">$</span><span class="p">[</span><span class="mi">1</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">a</span><span class="p">:</span><span class="s2">&quot;hi&quot;</span><span class="p">;</span><span class="mi">0</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">a</span><span class="p">:</span><span class="s2">&quot;bye&quot;</span><span class="p">;</span><span class="n">a</span><span class="p">:</span><span class="s2">&quot;hello again&quot;</span><span class="p">]</span>
<span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">&quot;hello again&quot;</span>


<span class="o">////////////////////////////////////</span>
<span class="o">////</span><span class="w">      </span><span class="n">Data</span><span class="w"> </span><span class="n">Structures</span><span class="w">       </span><span class="o">////</span>
<span class="o">////////////////////////////////////</span>

<span class="o">/</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">oriented</span><span class="w"> </span><span class="n">language</span>
<span class="o">/</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">complexity</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">built</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">ordered</span><span class="w"> </span><span class="n">lists</span>
<span class="o">/</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">mapping</span><span class="w"> </span><span class="n">them</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">higher</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">structures</span><span class="p">:</span><span class="w"> </span><span class="n">dictionaries</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">tables</span>

<span class="o">/</span><span class="w"> </span><span class="n">Lists</span><span class="w"> </span><span class="p">(</span><span class="ow">or</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">prefer</span><span class="p">)</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="n">ordered</span><span class="w"> </span><span class="n">collections</span>
<span class="o">/</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">parentheses</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">semi</span><span class="o">-</span><span class="n">colons</span><span class="w"> </span><span class="p">(;)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span>
<span class="p">(</span><span class="o">-</span><span class="mf">10.0</span><span class="p">;</span><span class="mf">3.14159</span><span class="n">e</span><span class="p">;</span><span class="mi">1</span><span class="n">b</span><span class="p">;</span><span class="err">`</span><span class="n">abc</span><span class="p">;</span><span class="s2">&quot;c&quot;</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">-</span><span class="mi">10</span><span class="n">f</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mf">3.14159</span><span class="n">e</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="n">b</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="err">`</span><span class="n">abc</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="w">  </span><span class="p">(</span><span class="n">mixed</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">displayed</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">lines</span><span class="p">)</span>
<span class="p">((</span><span class="mi">1</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="mi">3</span><span class="p">);(</span><span class="mi">4</span><span class="p">;</span><span class="mi">5</span><span class="p">;</span><span class="mi">6</span><span class="p">);(</span><span class="mi">7</span><span class="p">;</span><span class="mi">8</span><span class="p">;</span><span class="mi">9</span><span class="p">))</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">9</span>

<span class="o">/</span><span class="w"> </span><span class="n">Lists</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">uniform</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">concisely</span>
<span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span>
<span class="err">`</span><span class="n">list</span><span class="err">`</span><span class="n">of</span><span class="err">`</span><span class="n">syms</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="err">`</span><span class="n">list</span><span class="err">`</span><span class="n">of</span><span class="err">`</span><span class="n">syms</span>
<span class="err">`</span><span class="n">list</span><span class="err">`</span><span class="n">of</span><span class="err">`</span><span class="n">syms</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="p">(</span><span class="err">`</span><span class="n">list</span><span class="p">;</span><span class="err">`</span><span class="n">of</span><span class="p">;</span><span class="err">`</span><span class="n">syms</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="n">b</span>

<span class="o">/</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">length</span>
<span class="n">count</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span>
<span class="n">count</span><span class="w"> </span><span class="s2">&quot;I am a string&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="p">(</span><span class="n">string</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nb">char</span><span class="p">)</span>

<span class="o">/</span><span class="w"> </span><span class="n">Empty</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">parentheses</span>
<span class="n">l</span><span class="p">:()</span>
<span class="n">count</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">0</span>

<span class="o">/</span><span class="w"> </span><span class="n">Simple</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">equivalent</span>
<span class="o">/</span><span class="w"> </span><span class="n">parentheses</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="p">(</span><span class="n">they</span><span class="w"> </span><span class="n">indicate</span><span class="w"> </span><span class="n">precedence</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">~</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="n">b</span>
<span class="o">/</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">enlist</span>
<span class="n">singleton</span><span class="p">:</span><span class="n">enlist</span><span class="w"> </span><span class="mi">1</span>
<span class="o">/</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">appending</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">list</span>
<span class="n">singleton</span><span class="p">:(),</span><span class="mi">1</span>
<span class="mi">1</span><span class="o">~</span><span class="p">(),</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">0</span><span class="n">b</span>

<span class="o">/</span><span class="w"> </span><span class="n">Speaking</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">appending</span><span class="p">,</span><span class="w"> </span><span class="n">comma</span><span class="w"> </span><span class="p">(,)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">plus</span><span class="w"> </span><span class="p">(</span><span class="o">+</span><span class="p">)</span>
<span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span>
<span class="s2">&quot;hello &quot;</span><span class="p">,</span><span class="s2">&quot;there&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">&quot;hello there&quot;</span>

<span class="o">/</span><span class="w"> </span><span class="n">Indexing</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="n">brackets</span><span class="w"> </span><span class="p">[]</span>
<span class="n">l</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span>
<span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span>
<span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span>
<span class="o">/</span><span class="w"> </span><span class="n">indexing</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">bounds</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">rather</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span>
<span class="n">l</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">0</span><span class="n">N</span>
<span class="o">/</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">indexed</span><span class="w"> </span><span class="n">assignment</span>
<span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span><span class="mi">5</span>
<span class="n">l</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span>

<span class="o">/</span><span class="w"> </span><span class="n">Lists</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">indexing</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">indexed</span><span class="w"> </span><span class="n">assignment</span>
<span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">4</span>
<span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="p">]:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span>
<span class="n">l</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">3</span>

<span class="o">/</span><span class="w"> </span><span class="n">Lists</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">untyped</span><span class="o">/</span><span class="n">mixed</span><span class="w"> </span><span class="n">type</span>
<span class="n">l</span><span class="p">:(</span><span class="mi">1</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="err">`</span><span class="n">hi</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">once</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">uniformly</span><span class="w"> </span><span class="n">typed</span><span class="p">,</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">enforce</span><span class="w"> </span><span class="n">this</span>
<span class="n">l</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span><span class="mi">3</span>
<span class="n">l</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span>
<span class="n">l</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span><span class="err">`</span><span class="n">hi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">error</span>
<span class="o">/</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">makes</span><span class="w"> </span><span class="n">sense</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">columns</span><span class="w"> </span><span class="p">(</span><span class="n">more</span><span class="w"> </span><span class="n">later</span><span class="p">)</span>

<span class="o">/</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">nested</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">depth</span>
<span class="n">l</span><span class="p">:((</span><span class="mi">1</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="mi">3</span><span class="p">);(</span><span class="mi">4</span><span class="p">;</span><span class="mi">5</span><span class="p">;</span><span class="mi">6</span><span class="p">);(</span><span class="mi">7</span><span class="p">;</span><span class="mi">8</span><span class="p">;</span><span class="mi">9</span><span class="p">))</span>
<span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">;</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">5</span>

<span class="o">/</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">elide</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">indexes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">entire</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">columns</span>
<span class="n">l</span><span class="p">[;</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">8</span>
<span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">;]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span>

<span class="o">/</span><span class="w"> </span><span class="n">All</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="n">mentioned</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="n">natively</span>
<span class="mi">1</span><span class="o">+</span><span class="p">(</span><span class="mi">1</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">(</span><span class="n">single</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">list</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">-</span><span class="mi">2</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="n">list</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">list</span><span class="p">)</span>

<span class="o">/</span><span class="w"> </span><span class="n">And</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">many</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">designed</span><span class="w"> </span><span class="n">specifically</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">lists</span>
<span class="n">avg</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="n">f</span>
<span class="n">sum</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">6</span>
<span class="n">sums</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="w"> </span><span class="n">sum</span><span class="p">)</span>
<span class="n">last</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span>
<span class="mi">1</span><span class="w"> </span><span class="n">rotate</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">1</span>
<span class="o">/</span><span class="w"> </span><span class="n">etc</span><span class="o">.</span>
<span class="o">/</span><span class="w"> </span><span class="n">Using</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">combining</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">manipulate</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">much</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span>
<span class="o">/</span><span class="w"> </span><span class="n">power</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">expressiveness</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">language</span><span class="w"> </span><span class="n">comes</span><span class="w"> </span><span class="n">from</span>

<span class="o">/</span><span class="w"> </span><span class="n">Take</span><span class="w"> </span><span class="p">(</span><span class="c1">#), drop (_) and find (?) are also useful working with lists</span>
<span class="n">l</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">9</span>
<span class="n">l</span><span class="p">:</span><span class="mi">1</span><span class="o">+</span><span class="n">til</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">til</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="n">shortcut</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">generating</span><span class="w"> </span><span class="n">ranges</span>
<span class="o">/</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">elements</span>
<span class="mi">5</span><span class="c1">#l / =&gt; 1 2 3 4 5</span>
<span class="o">/</span><span class="w"> </span><span class="n">drop</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="mi">5</span>
<span class="mi">5</span><span class="n">_l</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">9</span>
<span class="o">/</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="mi">5</span>
<span class="o">-</span><span class="mi">5</span><span class="c1">#l / =&gt; 5 6 7 8 9</span>
<span class="o">/</span><span class="w"> </span><span class="n">drop</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="mi">5</span>
<span class="o">-</span><span class="mi">5</span><span class="n">_l</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span>
<span class="o">/</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">occurrence</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">4</span>
<span class="n">l</span><span class="err">?</span><span class="mi">4</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span>
<span class="n">l</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">4</span>

<span class="o">/</span><span class="w"> </span><span class="n">Dictionaries</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">generalization</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">lists</span>
<span class="o">/</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="p">(</span><span class="n">of</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="n">length</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bang</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">)</span><span class="w"> </span><span class="n">symbol</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">defining</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">dictionary</span>
<span class="n">d</span><span class="p">:(</span><span class="err">`</span><span class="n">a</span><span class="p">;</span><span class="err">`</span><span class="n">b</span><span class="p">;</span><span class="err">`</span><span class="n">c</span><span class="p">)</span><span class="o">!</span><span class="p">(</span><span class="mi">1</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="mi">3</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">simply</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">concise</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">syntax</span>
<span class="n">d</span><span class="p">:</span><span class="err">`</span><span class="n">a</span><span class="err">`</span><span class="n">b</span><span class="err">`</span><span class="n">c</span><span class="o">!</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span>
<span class="o">/</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">keyword</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">list</span>
<span class="n">key</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="err">`</span><span class="n">a</span><span class="err">`</span><span class="n">b</span><span class="err">`</span><span class="n">c</span>
<span class="o">/</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">second</span>
<span class="n">value</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span>

<span class="o">/</span><span class="w"> </span><span class="n">Indexing</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">identical</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">lists</span>
<span class="o">/</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">position</span>
<span class="n">d</span><span class="p">[</span><span class="err">`</span><span class="n">a</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span>
<span class="n">d</span><span class="p">[</span><span class="err">`</span><span class="n">b</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span>

<span class="o">/</span><span class="w"> </span><span class="n">As</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">assignment</span>
<span class="n">d</span><span class="p">[</span><span class="err">`</span><span class="n">c</span><span class="p">]:</span><span class="mi">4</span>
<span class="n">d</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="o">|</span><span class="w"> </span><span class="mi">1</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">b</span><span class="o">|</span><span class="w"> </span><span class="mi">2</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c</span><span class="o">|</span><span class="w"> </span><span class="mi">4</span>

<span class="o">/</span><span class="w"> </span><span class="n">Arithmetic</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">comparison</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="n">natively</span><span class="p">,</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">lists</span>
<span class="n">e</span><span class="p">:(</span><span class="err">`</span><span class="n">a</span><span class="p">;</span><span class="err">`</span><span class="n">b</span><span class="p">;</span><span class="err">`</span><span class="n">c</span><span class="p">)</span><span class="o">!</span><span class="p">(</span><span class="mi">2</span><span class="p">;</span><span class="mi">3</span><span class="p">;</span><span class="mi">4</span><span class="p">)</span>
<span class="n">d</span><span class="o">+</span><span class="n">e</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="o">|</span><span class="w"> </span><span class="mi">3</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">b</span><span class="o">|</span><span class="w"> </span><span class="mi">5</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c</span><span class="o">|</span><span class="w"> </span><span class="mi">8</span>
<span class="n">d</span><span class="o">-</span><span class="mi">2</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="o">|</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">b</span><span class="o">|</span><span class="w"> </span><span class="mi">0</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c</span><span class="o">|</span><span class="w"> </span><span class="mi">2</span>
<span class="n">d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">;</span><span class="mi">1</span><span class="p">;</span><span class="mi">1</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="o">|</span><span class="w"> </span><span class="mi">0</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">b</span><span class="o">|</span><span class="w"> </span><span class="mi">1</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c</span><span class="o">|</span><span class="w"> </span><span class="mi">1</span>

<span class="o">/</span><span class="w"> </span><span class="n">And</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">take</span><span class="p">,</span><span class="w"> </span><span class="n">drop</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">remarkably</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">too</span>
<span class="err">`</span><span class="n">a</span><span class="err">`</span><span class="n">b</span><span class="c1">#d</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="o">|</span><span class="w"> </span><span class="mi">1</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">b</span><span class="o">|</span><span class="w"> </span><span class="mi">2</span>
<span class="err">`</span><span class="n">a</span><span class="err">`</span><span class="n">b</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">d</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c</span><span class="o">|</span><span class="w"> </span><span class="mi">4</span>
<span class="n">d</span><span class="err">?</span><span class="mi">2</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="err">`</span><span class="n">b</span>

<span class="o">/</span><span class="w"> </span><span class="n">Tables</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">basically</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">subset</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">dictionaries</span>
<span class="o">/</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">dictionary</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">length</span>
<span class="o">/</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">column</span><span class="w"> </span><span class="n">oriented</span><span class="w"> </span><span class="p">(</span><span class="n">unlike</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">RDBMS</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">flip</span><span class="w"> </span><span class="n">keyword</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="nb">convert</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">dictionary</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">table</span>
<span class="o">/</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">flip</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">indices</span>
<span class="n">flip</span><span class="w"> </span><span class="err">`</span><span class="n">c1</span><span class="err">`</span><span class="n">c2</span><span class="err">`</span><span class="n">c3</span><span class="o">!</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="mi">7</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="n">c3</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">--------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="mi">4</span><span class="w">  </span><span class="mi">7</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="mi">5</span><span class="w">  </span><span class="mi">8</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="mi">6</span><span class="w">  </span><span class="mi">9</span>
<span class="o">/</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">syntax</span>
<span class="n">t</span><span class="p">:([]</span><span class="n">c1</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="n">c2</span><span class="p">:</span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="n">c3</span><span class="p">:</span><span class="mi">7</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span>
<span class="n">t</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="n">c3</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">--------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="mi">4</span><span class="w">  </span><span class="mi">7</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="mi">5</span><span class="w">  </span><span class="mi">8</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="mi">6</span><span class="w">  </span><span class="mi">9</span>

<span class="o">/</span><span class="w"> </span><span class="n">Tables</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">indexed</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">manipulated</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">dicts</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">lists</span>
<span class="n">t</span><span class="p">[</span><span class="err">`</span><span class="n">c1</span><span class="p">]</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span>
<span class="o">/</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">dictionaries</span>
<span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c1</span><span class="o">|</span><span class="w"> </span><span class="mi">2</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c2</span><span class="o">|</span><span class="w"> </span><span class="mi">5</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c3</span><span class="o">|</span><span class="w"> </span><span class="mi">8</span>

<span class="o">/</span><span class="w"> </span><span class="n">meta</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">information</span>
<span class="n">meta</span><span class="w"> </span><span class="n">t</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">a</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">--|</span><span class="w"> </span><span class="o">-----</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c1</span><span class="o">|</span><span class="w"> </span><span class="n">j</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c2</span><span class="o">|</span><span class="w"> </span><span class="n">j</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c3</span><span class="o">|</span><span class="w"> </span><span class="n">j</span>
<span class="o">/</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">why</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">enforced</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="p">(</span><span class="n">to</span><span class="w"> </span><span class="n">protect</span><span class="w"> </span><span class="n">column</span><span class="w"> </span><span class="n">types</span><span class="p">)</span>
<span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">;</span><span class="err">`</span><span class="n">c1</span><span class="p">]:</span><span class="mi">3</span>
<span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">;</span><span class="err">`</span><span class="n">c1</span><span class="p">]:</span><span class="mf">3.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">error</span>

<span class="o">/</span><span class="w"> </span><span class="n">Most</span><span class="w"> </span><span class="n">traditional</span><span class="w"> </span><span class="n">databases</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">primary</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">columns</span>
<span class="o">/</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">keyed</span><span class="w"> </span><span class="n">tables</span><span class="p">,</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">columns</span>
<span class="o">/</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">mapped</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">bang</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">)</span>
<span class="n">k</span><span class="p">:([]</span><span class="n">id</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="n">k</span><span class="o">!</span><span class="n">t</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">id</span><span class="o">|</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="n">c3</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">--|</span><span class="w"> </span><span class="o">--------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="mi">4</span><span class="w">  </span><span class="mi">7</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="mi">5</span><span class="w">  </span><span class="mi">8</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="mi">6</span><span class="w">  </span><span class="mi">9</span>

<span class="o">/</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">shortcut</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">defining</span><span class="w"> </span><span class="n">keyed</span><span class="w"> </span><span class="n">tables</span>
<span class="n">kt</span><span class="p">:([</span><span class="n">id</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="n">c1</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="n">c2</span><span class="p">:</span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="n">c3</span><span class="p">:</span><span class="mi">7</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span>

<span class="o">/</span><span class="w"> </span><span class="n">Records</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">retrieved</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">key</span>
<span class="n">kt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c1</span><span class="o">|</span><span class="w"> </span><span class="mi">1</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c2</span><span class="o">|</span><span class="w"> </span><span class="mi">4</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c3</span><span class="o">|</span><span class="w"> </span><span class="mi">7</span>
<span class="n">kt</span><span class="p">[</span><span class="err">`</span><span class="n">id</span><span class="o">!</span><span class="mi">1</span><span class="p">]</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c1</span><span class="o">|</span><span class="w"> </span><span class="mi">1</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c2</span><span class="o">|</span><span class="w"> </span><span class="mi">4</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c3</span><span class="o">|</span><span class="w"> </span><span class="mi">7</span>


<span class="o">////////////////////////////////////</span>
<span class="o">////////</span><span class="w">     </span><span class="n">Functions</span><span class="w">      </span><span class="o">////////</span>
<span class="o">////////////////////////////////////</span>

<span class="o">/</span><span class="w"> </span><span class="n">In</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">mathematical</span><span class="w"> </span><span class="n">map</span><span class="p">,</span><span class="w"> </span><span class="n">mapping</span><span class="w"> </span><span class="n">inputs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">outputs</span>
<span class="o">/</span><span class="w"> </span><span class="n">curly</span><span class="w"> </span><span class="n">braces</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">definition</span>
<span class="o">/</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="n">brackets</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">calling</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="p">(</span><span class="n">just</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">indexing</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">very</span><span class="w"> </span><span class="n">minimal</span><span class="w"> </span><span class="n">function</span>
<span class="n">f</span><span class="p">:{</span><span class="n">x</span><span class="o">+</span><span class="n">x</span><span class="p">}</span>
<span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">4</span>

<span class="o">/</span><span class="w"> </span><span class="n">Functions</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">anonymous</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">definition</span>
<span class="p">{</span><span class="n">x</span><span class="o">+</span><span class="n">x</span><span class="p">}[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">4</span>

<span class="o">/</span><span class="w"> </span><span class="n">By</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">returned</span>
<span class="o">/</span><span class="w"> </span><span class="n">colon</span><span class="w"> </span><span class="p">(:)</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="k">return</span>
<span class="p">{</span><span class="n">x</span><span class="o">+</span><span class="n">x</span><span class="p">}[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">4</span>
<span class="p">{:</span><span class="n">x</span><span class="o">+</span><span class="n">x</span><span class="p">}[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">4</span>
<span class="o">/</span><span class="w"> </span><span class="n">semi</span><span class="o">-</span><span class="n">colon</span><span class="w"> </span><span class="p">(;)</span><span class="w"> </span><span class="n">separates</span><span class="w"> </span><span class="n">expressions</span>
<span class="p">{</span><span class="n">r</span><span class="p">:</span><span class="n">x</span><span class="o">+</span><span class="n">x</span><span class="p">;:</span><span class="n">r</span><span class="p">}[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">4</span>

<span class="o">/</span><span class="w"> </span><span class="n">Function</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">explicitly</span><span class="w"> </span><span class="p">(</span><span class="n">separated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="p">;)</span>
<span class="p">{[</span><span class="n">arg1</span><span class="p">;</span><span class="n">arg2</span><span class="p">]</span><span class="w"> </span><span class="n">arg1</span><span class="o">+</span><span class="n">arg2</span><span class="p">}[</span><span class="mi">1</span><span class="p">;</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span>
<span class="o">/</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">omitted</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">z</span>
<span class="p">{</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">+</span><span class="n">z</span><span class="p">}[</span><span class="mi">1</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">6</span>

<span class="o">/</span><span class="w"> </span><span class="n">Built</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">different</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="p">(</span><span class="n">with</span><span class="w"> </span><span class="p">[])</span>
<span class="o">+</span><span class="p">[</span><span class="mi">1</span><span class="p">;</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span>
<span class="o">&lt;</span><span class="p">[</span><span class="mi">1</span><span class="p">;</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="n">b</span>

<span class="o">/</span><span class="w"> </span><span class="n">Functions</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">returned</span><span class="p">,</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="n">etc</span><span class="o">.</span>
<span class="p">{:{</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">}}[]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">}</span>
<span class="p">(</span><span class="mi">1</span><span class="p">;</span><span class="s2">&quot;hi&quot;</span><span class="p">;{</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">})</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">&quot;hi&quot;</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">}</span>

<span class="o">/</span><span class="w"> </span><span class="n">There</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">overloading</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">keyword</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">functions</span>
<span class="o">/</span><span class="w"> </span><span class="n">however</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">dictionary</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">overcome</span><span class="w"> </span><span class="n">this</span>
<span class="o">/</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">differing</span><span class="w"> </span><span class="n">functionality</span>
<span class="n">d</span><span class="p">:</span><span class="err">`</span><span class="n">arg1</span><span class="err">`</span><span class="n">arg2</span><span class="err">`</span><span class="n">arg3</span><span class="o">!</span><span class="p">(</span><span class="mf">1.0</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="s2">&quot;my function argument&quot;</span><span class="p">)</span>
<span class="p">{</span><span class="n">x</span><span class="p">[</span><span class="err">`</span><span class="n">arg1</span><span class="p">]</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="err">`</span><span class="n">arg2</span><span class="p">]}[</span><span class="n">d</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="n">f</span>

<span class="o">/</span><span class="w"> </span><span class="n">Functions</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">global</span><span class="w"> </span><span class="n">scope</span>
<span class="n">a</span><span class="p">:</span><span class="mi">1</span>
<span class="p">{:</span><span class="n">a</span><span class="p">}[]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span>

<span class="o">/</span><span class="w"> </span><span class="n">However</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">obscures</span><span class="w"> </span><span class="n">this</span>
<span class="n">a</span><span class="p">:</span><span class="mi">1</span>
<span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="mi">2</span><span class="p">;:</span><span class="n">a</span><span class="p">}[]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span>
<span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span>

<span class="o">/</span><span class="w"> </span><span class="n">Functions</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">nested</span><span class="w"> </span><span class="n">scopes</span><span class="w"> </span><span class="p">(</span><span class="n">only</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">global</span><span class="p">)</span>
<span class="p">{</span><span class="n">local</span><span class="p">:</span><span class="mi">1</span><span class="p">;{:</span><span class="n">local</span><span class="p">}[]}[]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">inner</span><span class="w"> </span><span class="n">function</span>

<span class="o">/</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="n">fixed</span><span class="w"> </span><span class="p">(</span><span class="n">projection</span><span class="p">)</span>
<span class="n">f</span><span class="p">:</span><span class="o">+</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="n">f</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">8</span>
<span class="n">f</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">9</span>
<span class="n">f</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">10</span>


<span class="o">////////////////////////////////////</span>
<span class="o">//////////</span><span class="w">     </span><span class="n">q</span><span class="o">-</span><span class="n">sql</span><span class="w">      </span><span class="o">//////////</span>
<span class="o">////////////////////////////////////</span>

<span class="o">/</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">manipulating</span><span class="w"> </span><span class="n">tables</span><span class="p">,</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">SQL</span>
<span class="o">/</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">usual</span><span class="w"> </span><span class="n">suspects</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">select</span><span class="p">,</span><span class="w"> </span><span class="n">insert</span><span class="p">,</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">etc</span><span class="o">.</span>
<span class="o">/</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">functionality</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">typically</span><span class="w"> </span><span class="n">available</span>
<span class="o">/</span><span class="w"> </span><span class="n">q</span><span class="o">-</span><span class="n">sql</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">significant</span><span class="w"> </span><span class="n">differences</span><span class="w"> </span><span class="p">(</span><span class="n">other</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">syntax</span><span class="p">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">normal</span><span class="w"> </span><span class="n">SQL</span><span class="p">:</span>
<span class="o">/</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="n">orders</span>
<span class="o">/</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">collection</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">columns</span>
<span class="o">/</span><span class="w">   </span><span class="p">(</span><span class="n">so</span><span class="w"> </span><span class="n">vectorized</span><span class="w"> </span><span class="n">column</span><span class="w"> </span><span class="n">operations</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">fast</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">q</span><span class="o">-</span><span class="n">sql</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">little</span><span class="w"> </span><span class="n">beyond</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">intro</span>
<span class="o">/</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">cover</span><span class="w"> </span><span class="n">enough</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">basics</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">going</span>

<span class="o">/</span><span class="w"> </span><span class="n">First</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">ourselves</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">table</span>
<span class="n">t</span><span class="p">:([]</span><span class="n">name</span><span class="p">:</span><span class="err">`</span><span class="n">Arthur</span><span class="err">`</span><span class="n">Thomas</span><span class="err">`</span><span class="n">Polly</span><span class="p">;</span><span class="n">age</span><span class="p">:</span><span class="mi">35</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class="mi">52</span><span class="p">;</span><span class="n">height</span><span class="p">:</span><span class="mi">180</span><span class="w"> </span><span class="mi">175</span><span class="w"> </span><span class="mi">160</span><span class="p">;</span><span class="n">sex</span><span class="p">:</span><span class="err">`</span><span class="n">m</span><span class="err">`</span><span class="n">m</span><span class="err">`</span><span class="n">f</span><span class="p">)</span>

<span class="o">/</span><span class="w"> </span><span class="n">equivalent</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="n">t</span>
<span class="n">select</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">lower</span><span class="w"> </span><span class="n">case</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">wildcard</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">necessary</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="n">age</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">sex</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">---------------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Arthur</span><span class="w"> </span><span class="mi">35</span><span class="w">  </span><span class="mi">180</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Thomas</span><span class="w"> </span><span class="mi">32</span><span class="w">  </span><span class="mi">175</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Polly</span><span class="w">  </span><span class="mi">52</span><span class="w">  </span><span class="mi">160</span><span class="w">    </span><span class="n">f</span>

<span class="o">/</span><span class="w"> </span><span class="n">Select</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">columns</span>
<span class="n">select</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="n">age</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">t</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="n">age</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">----------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Arthur</span><span class="w"> </span><span class="mi">35</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Thomas</span><span class="w"> </span><span class="mi">32</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Polly</span><span class="w">  </span><span class="mi">52</span>

<span class="o">/</span><span class="w"> </span><span class="n">And</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">them</span><span class="w"> </span><span class="p">(</span><span class="n">equivalent</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">AS</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">SQL</span><span class="p">)</span>
<span class="n">select</span><span class="w"> </span><span class="n">charactername</span><span class="p">:</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">currentage</span><span class="p">:</span><span class="n">age</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">t</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">charactername</span><span class="w"> </span><span class="n">currentage</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">------------------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Arthur</span><span class="w">        </span><span class="mi">35</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Thomas</span><span class="w">        </span><span class="mi">32</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Polly</span><span class="w">         </span><span class="mi">52</span>

<span class="o">/</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">SQL</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">integrated</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">language</span>
<span class="o">/</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">seamlessly</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">SQL</span><span class="w"> </span><span class="n">statements</span>
<span class="n">select</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">feet</span><span class="p">:</span><span class="nb">floor</span><span class="w"> </span><span class="n">height</span><span class="o">*</span><span class="mf">0.032</span><span class="p">,</span><span class="w"> </span><span class="n">inches</span><span class="p">:</span><span class="mi">12</span><span class="o">*</span><span class="p">(</span><span class="n">height</span><span class="o">*</span><span class="mf">0.032</span><span class="p">)</span><span class="w"> </span><span class="n">mod</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">t</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="n">feet</span><span class="w"> </span><span class="n">inches</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">------------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Arthur</span><span class="w"> </span><span class="mi">5</span><span class="w">    </span><span class="mf">9.12</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Thomas</span><span class="w"> </span><span class="mi">5</span><span class="w">    </span><span class="mf">7.2</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Polly</span><span class="w">  </span><span class="mi">5</span><span class="w">    </span><span class="mf">1.44</span>

<span class="o">/</span><span class="w"> </span><span class="n">Including</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">functions</span>
<span class="n">select</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">growth</span><span class="p">:{[</span><span class="n">h</span><span class="p">;</span><span class="n">a</span><span class="p">]</span><span class="n">h</span><span class="o">%</span><span class="n">a</span><span class="p">}[</span><span class="n">height</span><span class="p">;</span><span class="n">age</span><span class="p">]</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">t</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="n">growth</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">---------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Arthur</span><span class="w"> </span><span class="mf">5.142857</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Thomas</span><span class="w"> </span><span class="mf">5.46875</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Polly</span><span class="w">  </span><span class="mf">3.076923</span>

<span class="o">/</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">clause</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">statements</span><span class="w"> </span><span class="n">separated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">commas</span>
<span class="n">select</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">age</span><span class="o">&gt;</span><span class="mi">33</span><span class="p">,</span><span class="n">height</span><span class="o">&gt;</span><span class="mi">175</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="n">age</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">sex</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">---------------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Arthur</span><span class="w"> </span><span class="mi">35</span><span class="w">  </span><span class="mi">180</span><span class="w">    </span><span class="n">m</span>

<span class="o">/</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">statements</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">sequentially</span><span class="w"> </span><span class="p">(</span><span class="ow">not</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">logical</span><span class="w"> </span><span class="n">AND</span><span class="p">)</span>
<span class="n">select</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">age</span><span class="o">&lt;</span><span class="mi">40</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="nb">min</span><span class="w"> </span><span class="n">height</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="n">age</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">sex</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">---------------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Thomas</span><span class="w"> </span><span class="mi">32</span><span class="w">  </span><span class="mi">175</span><span class="w">    </span><span class="n">m</span>
<span class="n">select</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="p">(</span><span class="n">age</span><span class="o">&lt;</span><span class="mi">40</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="nb">min</span><span class="w"> </span><span class="n">height</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">sex</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">-------------------</span>

<span class="o">/</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">clause</span><span class="w"> </span><span class="n">falls</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">from</span>
<span class="o">/</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">equivalent</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">SQL</span><span class="s1">&#39;s GROUP BY</span>
<span class="n">select</span><span class="w"> </span><span class="n">avg</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">sex</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">t</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">sex</span><span class="o">|</span><span class="w"> </span><span class="n">height</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">---|</span><span class="w"> </span><span class="o">------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">f</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">160</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">m</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mf">177.5</span>

<span class="o">/</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">aggregation</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">specified</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">assumed</span>
<span class="n">select</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">sex</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">t</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">sex</span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="n">age</span><span class="w"> </span><span class="n">height</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">---|</span><span class="w"> </span><span class="o">-----------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">f</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Polly</span><span class="w">  </span><span class="mi">52</span><span class="w">  </span><span class="mi">160</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">m</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Thomas</span><span class="w"> </span><span class="mi">32</span><span class="w">  </span><span class="mi">175</span>

<span class="o">/</span><span class="w"> </span><span class="n">Update</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">basic</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">select</span>
<span class="n">update</span><span class="w"> </span><span class="n">sex</span><span class="p">:</span><span class="err">`</span><span class="n">male</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">sex</span><span class="o">=</span><span class="err">`</span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="n">age</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">sex</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">----------------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Arthur</span><span class="w"> </span><span class="mi">35</span><span class="w">  </span><span class="mi">180</span><span class="w">    </span><span class="n">male</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Thomas</span><span class="w"> </span><span class="mi">32</span><span class="w">  </span><span class="mi">175</span><span class="w">    </span><span class="n">male</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Polly</span><span class="w">  </span><span class="mi">52</span><span class="w">  </span><span class="mi">160</span><span class="w">    </span><span class="n">f</span>

<span class="o">/</span><span class="w"> </span><span class="n">As</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">delete</span>
<span class="n">delete</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">sex</span><span class="o">=</span><span class="err">`</span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">  </span><span class="n">age</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">sex</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">--------------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Polly</span><span class="w"> </span><span class="mi">52</span><span class="w">  </span><span class="mi">160</span><span class="w">    </span><span class="n">f</span>

<span class="o">/</span><span class="w"> </span><span class="n">None</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">sql</span><span class="w"> </span><span class="n">operations</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">carried</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">place</span>
<span class="n">t</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="n">age</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">sex</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">---------------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Arthur</span><span class="w"> </span><span class="mi">35</span><span class="w">  </span><span class="mi">180</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Thomas</span><span class="w"> </span><span class="mi">32</span><span class="w">  </span><span class="mi">175</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Polly</span><span class="w">  </span><span class="mi">52</span><span class="w">  </span><span class="mi">160</span><span class="w">    </span><span class="n">f</span>

<span class="o">/</span><span class="w"> </span><span class="n">Insert</span><span class="w"> </span><span class="n">however</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">place</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">data</span>
<span class="err">`</span><span class="n">t</span><span class="w"> </span><span class="n">insert</span><span class="w"> </span><span class="p">(</span><span class="err">`</span><span class="n">John</span><span class="p">;</span><span class="mi">25</span><span class="p">;</span><span class="mi">178</span><span class="p">;</span><span class="err">`</span><span class="n">m</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">,</span><span class="mi">3</span>
<span class="n">t</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="n">age</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">sex</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">---------------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Arthur</span><span class="w"> </span><span class="mi">35</span><span class="w">  </span><span class="mi">180</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Thomas</span><span class="w"> </span><span class="mi">32</span><span class="w">  </span><span class="mi">175</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Polly</span><span class="w">  </span><span class="mi">52</span><span class="w">  </span><span class="mi">160</span><span class="w">    </span><span class="n">f</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">John</span><span class="w">   </span><span class="mi">25</span><span class="w">  </span><span class="mi">178</span><span class="w">    </span><span class="n">m</span>

<span class="o">/</span><span class="w"> </span><span class="n">Upsert</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="p">(</span><span class="n">but</span><span class="w"> </span><span class="n">doesn</span><span class="s1">&#39;t have to be in-place)</span>
<span class="n">t</span><span class="w"> </span><span class="n">upsert</span><span class="w"> </span><span class="p">(</span><span class="err">`</span><span class="n">Chester</span><span class="p">;</span><span class="mi">58</span><span class="p">;</span><span class="mi">179</span><span class="p">;</span><span class="err">`</span><span class="n">m</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">    </span><span class="n">age</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">sex</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">----------------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Arthur</span><span class="w">  </span><span class="mi">35</span><span class="w">  </span><span class="mi">180</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Thomas</span><span class="w">  </span><span class="mi">32</span><span class="w">  </span><span class="mi">175</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Polly</span><span class="w">   </span><span class="mi">52</span><span class="w">  </span><span class="mi">160</span><span class="w">    </span><span class="n">f</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">John</span><span class="w">    </span><span class="mi">25</span><span class="w">  </span><span class="mi">178</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Chester</span><span class="w"> </span><span class="mi">58</span><span class="w">  </span><span class="mi">179</span><span class="w">    </span><span class="n">m</span>

<span class="o">/</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">upsert</span><span class="w"> </span><span class="n">dicts</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">tables</span>
<span class="n">t</span><span class="w"> </span><span class="n">upsert</span><span class="w"> </span><span class="err">`</span><span class="n">name</span><span class="err">`</span><span class="n">age</span><span class="err">`</span><span class="n">height</span><span class="err">`</span><span class="n">sex</span><span class="o">!</span><span class="p">(</span><span class="err">`</span><span class="n">Chester</span><span class="p">;</span><span class="mi">58</span><span class="p">;</span><span class="mi">179</span><span class="p">;</span><span class="err">`</span><span class="n">m</span><span class="p">)</span>
<span class="n">t</span><span class="w"> </span><span class="n">upsert</span><span class="w"> </span><span class="p">(</span><span class="err">`</span><span class="n">Chester</span><span class="p">;</span><span class="mi">58</span><span class="p">;</span><span class="mi">179</span><span class="p">;</span><span class="err">`</span><span class="n">m</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">    </span><span class="n">age</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">sex</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">----------------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Arthur</span><span class="w">  </span><span class="mi">35</span><span class="w">  </span><span class="mi">180</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Thomas</span><span class="w">  </span><span class="mi">32</span><span class="w">  </span><span class="mi">175</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Polly</span><span class="w">   </span><span class="mi">52</span><span class="w">  </span><span class="mi">160</span><span class="w">    </span><span class="n">f</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">John</span><span class="w">    </span><span class="mi">25</span><span class="w">  </span><span class="mi">178</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Chester</span><span class="w"> </span><span class="mi">58</span><span class="w">  </span><span class="mi">179</span><span class="w">    </span><span class="n">m</span>

<span class="o">/</span><span class="w"> </span><span class="n">And</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">keyed</span>
<span class="n">kt</span><span class="p">:</span><span class="err">`</span><span class="n">name</span><span class="w"> </span><span class="n">xkey</span><span class="w"> </span><span class="n">t</span>
<span class="o">/</span><span class="w"> </span><span class="n">upsert</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">replace</span><span class="w"> </span><span class="n">records</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">required</span>
<span class="n">kt</span><span class="w"> </span><span class="n">upsert</span><span class="w"> </span><span class="p">([]</span><span class="n">name</span><span class="p">:</span><span class="err">`</span><span class="n">Thomas</span><span class="err">`</span><span class="n">Chester</span><span class="p">;</span><span class="n">age</span><span class="p">:</span><span class="mi">33</span><span class="w"> </span><span class="mi">58</span><span class="p">;</span><span class="n">height</span><span class="p">:</span><span class="mi">175</span><span class="w"> </span><span class="mi">179</span><span class="p">;</span><span class="n">sex</span><span class="p">:</span><span class="err">`</span><span class="n">f</span><span class="err">`</span><span class="n">m</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">sex</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">-------|</span><span class="w"> </span><span class="o">--------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Arthur</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">35</span><span class="w">  </span><span class="mi">180</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Thomas</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">33</span><span class="w">  </span><span class="mi">175</span><span class="w">    </span><span class="n">f</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Polly</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">52</span><span class="w">  </span><span class="mi">160</span><span class="w">    </span><span class="n">f</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">John</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">25</span><span class="w">  </span><span class="mi">178</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Chester</span><span class="o">|</span><span class="w"> </span><span class="mi">58</span><span class="w">  </span><span class="mi">179</span><span class="w">    </span><span class="n">m</span>

<span class="o">/</span><span class="w"> </span><span class="n">There</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">ORDER</span><span class="w"> </span><span class="n">BY</span><span class="w"> </span><span class="n">clause</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">q</span><span class="o">-</span><span class="n">sql</span><span class="p">,</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">xasc</span><span class="o">/</span><span class="n">xdesc</span>
<span class="err">`</span><span class="n">name</span><span class="w"> </span><span class="n">xasc</span><span class="w"> </span><span class="n">t</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="n">age</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">sex</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">---------------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Arthur</span><span class="w"> </span><span class="mi">35</span><span class="w">  </span><span class="mi">180</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">John</span><span class="w">   </span><span class="mi">25</span><span class="w">  </span><span class="mi">178</span><span class="w">    </span><span class="n">m</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Polly</span><span class="w">  </span><span class="mi">52</span><span class="w">  </span><span class="mi">160</span><span class="w">    </span><span class="n">f</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Thomas</span><span class="w"> </span><span class="mi">32</span><span class="w">  </span><span class="mi">175</span><span class="w">    </span><span class="n">m</span>

<span class="o">/</span><span class="w"> </span><span class="n">Most</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">SQL</span><span class="w"> </span><span class="n">joins</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">present</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">q</span><span class="o">-</span><span class="n">sql</span><span class="p">,</span><span class="w"> </span><span class="n">plus</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">few</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">friends</span>
<span class="o">/</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">code</span><span class="o">.</span><span class="n">kx</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">q4m3</span><span class="o">/</span><span class="mi">9</span><span class="n">_Queries_q</span><span class="o">-</span><span class="n">sql</span><span class="o">/</span><span class="c1">#99-joins</span>
<span class="o">/</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">important</span><span class="w"> </span><span class="p">(</span><span class="n">commonly</span><span class="w"> </span><span class="n">used</span><span class="p">)</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">lj</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">aj</span>

<span class="o">/</span><span class="w"> </span><span class="n">lj</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">basically</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">SQL</span><span class="w"> </span><span class="n">LEFT</span><span class="w"> </span><span class="n">JOIN</span>
<span class="o">/</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">join</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">carried</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">columns</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="n">table</span>
<span class="n">le</span><span class="p">:([</span><span class="n">sex</span><span class="p">:</span><span class="err">`</span><span class="n">m</span><span class="err">`</span><span class="n">f</span><span class="p">]</span><span class="n">lifeexpectancy</span><span class="p">:</span><span class="mi">78</span><span class="w"> </span><span class="mi">85</span><span class="p">)</span>
<span class="n">t</span><span class="w"> </span><span class="n">lj</span><span class="w"> </span><span class="n">le</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="n">age</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">sex</span><span class="w"> </span><span class="n">lifeexpectancy</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">------------------------------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Arthur</span><span class="w"> </span><span class="mi">35</span><span class="w">  </span><span class="mi">180</span><span class="w">    </span><span class="n">m</span><span class="w">   </span><span class="mi">78</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Thomas</span><span class="w"> </span><span class="mi">32</span><span class="w">  </span><span class="mi">175</span><span class="w">    </span><span class="n">m</span><span class="w">   </span><span class="mi">78</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Polly</span><span class="w">  </span><span class="mi">52</span><span class="w">  </span><span class="mi">160</span><span class="w">    </span><span class="n">f</span><span class="w">   </span><span class="mi">85</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">John</span><span class="w">   </span><span class="mi">25</span><span class="w">  </span><span class="mi">178</span><span class="w">    </span><span class="n">m</span><span class="w">   </span><span class="mi">78</span>

<span class="o">/</span><span class="w"> </span><span class="n">aj</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">asof</span><span class="w"> </span><span class="n">join</span><span class="o">.</span><span class="w">  </span><span class="n">This</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">SQL</span><span class="w"> </span><span class="n">join</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">very</span><span class="w"> </span><span class="n">powerful</span>
<span class="o">/</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">canonical</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">joining</span><span class="w"> </span><span class="n">financial</span><span class="w"> </span><span class="n">trades</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">quotes</span><span class="w"> </span><span class="n">tables</span>
<span class="n">trades</span><span class="p">:([]</span><span class="n">time</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">03</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">04</span><span class="p">;</span><span class="n">sym</span><span class="p">:</span><span class="err">`</span><span class="n">msft</span><span class="err">`</span><span class="n">ibm</span><span class="err">`</span><span class="n">ge</span><span class="p">;</span><span class="n">qty</span><span class="p">:</span><span class="mi">100</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="mi">150</span><span class="p">)</span>
<span class="n">quotes</span><span class="p">:([]</span><span class="n">time</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">03</span><span class="p">;</span>
<span class="w">          </span><span class="n">sym</span><span class="p">:</span><span class="err">`</span><span class="n">ibm</span><span class="err">`</span><span class="n">msft</span><span class="err">`</span><span class="n">msft</span><span class="err">`</span><span class="n">ibm</span><span class="p">;</span><span class="w"> </span><span class="n">px</span><span class="p">:</span><span class="mi">100</span><span class="w"> </span><span class="mi">99</span><span class="w"> </span><span class="mi">101</span><span class="w"> </span><span class="mi">98</span><span class="p">)</span>
<span class="n">aj</span><span class="p">[</span><span class="err">`</span><span class="n">time</span><span class="err">`</span><span class="n">sym</span><span class="p">;</span><span class="n">trades</span><span class="p">;</span><span class="n">quotes</span><span class="p">]</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">time</span><span class="w">     </span><span class="n">sym</span><span class="w">  </span><span class="n">qty</span><span class="w"> </span><span class="n">px</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">---------------------</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="n">msft</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="mi">101</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">03</span><span class="w"> </span><span class="n">ibm</span><span class="w">  </span><span class="mi">200</span><span class="w"> </span><span class="mi">98</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">04</span><span class="w"> </span><span class="n">ge</span><span class="w">   </span><span class="mi">150</span>
<span class="o">/</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">trade</span><span class="w"> </span><span class="n">table</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="p">(</span><span class="n">prevailing</span><span class="p">)</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="p">(</span><span class="n">px</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">sym</span>
<span class="o">/</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">joined</span><span class="w"> </span><span class="n">on</span><span class="o">.</span>
<span class="o">/</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">code</span><span class="o">.</span><span class="n">kx</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">q4m3</span><span class="o">/</span><span class="mi">9</span><span class="n">_Queries_q</span><span class="o">-</span><span class="n">sql</span><span class="o">/</span><span class="c1">#998-as-of-joins</span>

<span class="o">////////////////////////////////////</span>
<span class="o">/////</span><span class="w">     </span><span class="n">Extra</span><span class="o">/</span><span class="n">Advanced</span><span class="w">      </span><span class="o">//////</span>
<span class="o">////////////////////////////////////</span>

<span class="o">//////</span><span class="w"> </span><span class="n">Adverbs</span><span class="w"> </span><span class="o">//////</span>
<span class="o">/</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">noticed</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="n">lack</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">loops</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">point</span>
<span class="o">/</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">mistake</span><span class="o">!</span>
<span class="o">/</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">vector</span><span class="w"> </span><span class="n">language</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">explicit</span><span class="w"> </span><span class="n">loops</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="p">,</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">etc</span><span class="o">.</span><span class="p">)</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">encouraged</span>
<span class="o">/</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="n">functionality</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">vectorized</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">operations</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">lists</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="n">adverbs</span><span class="w"> </span><span class="n">supplement</span><span class="w"> </span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="n">modifying</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">behaviour</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">functions</span>
<span class="o">/</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">providing</span><span class="w"> </span><span class="n">loop</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">functionality</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">required</span>
<span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="ow">in</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">sometimes</span><span class="w"> </span><span class="n">referred</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">verbs</span><span class="p">,</span><span class="w"> </span><span class="n">hence</span><span class="w"> </span><span class="n">adverbs</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s2">&quot;each&quot;</span><span class="w"> </span><span class="n">adverb</span><span class="w"> </span><span class="n">modifies</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">treat</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">individual</span><span class="w"> </span><span class="n">variables</span>
<span class="n">first</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="mi">7</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">7</span>

<span class="o">/</span><span class="w"> </span><span class="n">each</span><span class="o">-</span><span class="n">left</span><span class="w"> </span><span class="p">(</span>\<span class="p">:)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">each</span><span class="o">-</span><span class="n">right</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="p">:)</span><span class="w"> </span><span class="n">modify</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">two</span><span class="o">-</span><span class="n">argument</span><span class="w"> </span><span class="n">function</span>
<span class="o">/</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">treat</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">individual</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span>
<span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">+</span>\<span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="mi">22</span><span class="w"> </span><span class="mi">33</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span><span class="mi">34</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="mi">35</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class="mi">36</span>
<span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">+/</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="mi">22</span><span class="w"> </span><span class="mi">33</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="mi">14</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="mi">25</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">34</span><span class="w"> </span><span class="mi">35</span><span class="w"> </span><span class="mi">36</span>

<span class="o">/</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="bp">true</span><span class="w"> </span><span class="n">alternatives</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">loops</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">adverbs</span><span class="w"> </span><span class="n">scan</span><span class="w"> </span><span class="p">(</span>\<span class="p">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">behaviour</span><span class="w"> </span><span class="n">differs</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">they</span>
<span class="o">/</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">modifying</span><span class="w"> </span><span class="n">receives</span><span class="o">.</span><span class="w">  </span><span class="n">Here</span><span class="w"> </span><span class="n">I</span><span class="s1">&#39;ll summarise some of the most useful cases</span>
<span class="o">/</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">modified</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">scan</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="n">behaves</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="s2">&quot;do&quot;</span>
<span class="p">{</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span>\<span class="p">[</span><span class="mi">5</span><span class="p">;</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">multiply</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">times</span><span class="p">)</span>
<span class="p">{</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span><span class="o">/</span><span class="p">[</span><span class="mi">5</span><span class="p">;</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class="p">(</span><span class="n">using</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">shown</span><span class="p">)</span>

<span class="o">/</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">function</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">equivalent</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="s2">&quot;while&quot;</span>
<span class="p">{</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span>\<span class="p">[{</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">100</span><span class="p">};</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class="mi">64</span><span class="w"> </span><span class="mi">128</span><span class="w"> </span><span class="p">(</span><span class="n">iterates</span><span class="w"> </span><span class="n">until</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="mi">0</span><span class="n">b</span><span class="p">)</span>
<span class="p">{</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span><span class="o">/</span><span class="p">[{</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">100</span><span class="p">};</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">128</span><span class="w"> </span><span class="p">(</span><span class="n">again</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">result</span><span class="p">)</span>

<span class="o">/</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">arguments</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="k">pass</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="s2">&quot;for&quot;</span>
<span class="o">/</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">loop</span>
<span class="o">/</span><span class="w"> </span><span class="n">along</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">member</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">list</span>
<span class="p">{</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">}</span>\<span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">sum</span><span class="p">)</span>
<span class="p">{</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">}</span><span class="o">/</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="p">(</span><span class="n">only</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">result</span><span class="p">)</span>

<span class="o">/</span><span class="w"> </span><span class="n">There</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">adverbs</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">uses</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">intended</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">quick</span><span class="w"> </span><span class="n">overview</span>
<span class="o">/</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">code</span><span class="o">.</span><span class="n">kx</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">q4m3</span><span class="o">/</span><span class="mi">6</span><span class="n">_Functions</span><span class="o">/</span><span class="c1">#67-adverbs</span>

<span class="o">//////</span><span class="w"> </span><span class="n">Scripts</span><span class="w"> </span><span class="o">//////</span>
<span class="o">/</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">scripts</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s2">&quot;\l&quot;</span><span class="w"> </span><span class="n">command</span>
<span class="o">/</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="s2">&quot;\l learnkdb.q&quot;</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="nb">load</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">script</span>
<span class="o">/</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">prompt</span><span class="w"> </span><span class="n">passing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">argument</span>
<span class="o">/</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="s2">&quot;q learnkdb.q&quot;</span>

<span class="o">//////</span><span class="w"> </span><span class="n">On</span><span class="o">-</span><span class="n">disk</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">//////</span>
<span class="o">/</span><span class="w"> </span><span class="n">Tables</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">persisted</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">disk</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">several</span><span class="w"> </span><span class="n">formats</span>
<span class="o">/</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">fundamental</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">serialized</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">splayed</span>
<span class="n">t</span><span class="p">:([]</span><span class="n">a</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="n">b</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="n">f</span><span class="p">)</span>
<span class="err">`</span><span class="p">:</span><span class="n">serialized</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">saves</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">serialized</span><span class="w"> </span><span class="n">file</span>
<span class="err">`</span><span class="p">:</span><span class="n">splayed</span><span class="o">/</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">saves</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">splayed</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">directory</span>

<span class="o">/</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dir</span><span class="w"> </span><span class="n">structure</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">look</span><span class="w"> </span><span class="n">something</span><span class="w"> </span><span class="n">like</span><span class="p">:</span>
<span class="o">/</span><span class="w"> </span><span class="n">db</span><span class="o">/</span>
<span class="o">/</span><span class="w"> </span><span class="err">├──</span><span class="w"> </span><span class="n">serialized</span>
<span class="o">/</span><span class="w"> </span><span class="err">└──</span><span class="w"> </span><span class="n">splayed</span>
<span class="o">/</span><span class="w">     </span><span class="err">├──</span><span class="w"> </span><span class="n">a</span>
<span class="o">/</span><span class="w">     </span><span class="err">└──</span><span class="w"> </span><span class="n">b</span>

<span class="o">/</span><span class="w"> </span><span class="n">Loading</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="p">(</span><span class="k">as</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">script</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">above</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="n">loads</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="n">session</span>
\<span class="n">l</span><span class="w"> </span><span class="o">.</span>
<span class="o">/</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">serialized</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">memory</span>
<span class="o">/</span><span class="w"> </span><span class="n">however</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">splayed</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">mapped</span><span class="p">,</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">loaded</span>
<span class="o">/</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">queried</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">q</span><span class="o">-</span><span class="n">sql</span>
<span class="n">select</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">serialized</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">---</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">3</span>
<span class="n">select</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">splayed</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">the</span><span class="w"> </span><span class="n">columns</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">disk</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">request</span><span class="p">)</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">---</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span>
<span class="o">/</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">3</span>
<span class="o">/</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">code</span><span class="o">.</span><span class="n">kx</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">q4m3</span><span class="o">/</span><span class="mi">14</span><span class="n">_Introduction_to_Kdb</span><span class="o">+/</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span>

<span class="o">//////</span><span class="w"> </span><span class="n">Frameworks</span><span class="w"> </span><span class="o">//////</span>
<span class="o">/</span><span class="w"> </span><span class="n">kdb</span><span class="o">+</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">typically</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">capture</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">analysis</span><span class="o">.</span>
<span class="o">/</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">involves</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">architecture</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">processes</span>
<span class="o">/</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">together</span><span class="o">.</span><span class="w">  </span><span class="n">kdb</span><span class="o">+</span><span class="w"> </span><span class="n">frameworks</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">streamline</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">setup</span>
<span class="o">/</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">architecture</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">functionality</span>
<span class="o">/</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">disaster</span><span class="w"> </span><span class="n">recovery</span><span class="p">,</span><span class="w"> </span><span class="n">logging</span><span class="p">,</span><span class="w"> </span><span class="n">access</span><span class="p">,</span><span class="w"> </span><span class="nb">load</span><span class="w"> </span><span class="n">balancing</span><span class="w"> </span><span class="n">etc</span><span class="o">.</span>
<span class="o">/</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">AquaQAnalytics</span><span class="o">/</span><span class="n">TorQ</span>
</pre></div>
<h2>Want to know more?</h2>

<ul>
<li><a href="http://code.kx.com/q4m3/"><em>q for mortals</em> q language tutorial</a></li>
<li><a href="http://code.kx.com/q4m3/14_Introduction_to_Kdb+/"><em>Introduction to Kdb+</em> on disk data tutorial</a></li>
<li><a href="https://code.kx.com/q/ref/">q language reference</a></li>
<li><a href="http://training.aquaq.co.uk/">Online training courses</a></li>
<li><a href="https://github.com/AquaQAnalytics/TorQ">TorQ production framework</a></li>
</ul>

    <hr>
    <p>Got a suggestion? A correction, perhaps? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Open an Issue</a> on the Github Repo, or make a <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/kdb+.html.markdown">pull request</a> yourself!
    </p>
    <p class="contributed">
    Originally contributed by Matt Doherty, and updated by <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/kdb+.html.markdown">6 contributor(s)</a>.
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="https://github.com/picodoc">Matt Doherty</a>,
        <a href="https://github.com/jonnypress">Jonny Press</a>
    </p>

    <p>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>
    </body>
</html>
