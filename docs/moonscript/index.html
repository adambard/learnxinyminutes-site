<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en-us" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en-us" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en-us" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en-us" class="no-js"> <!--<![endif]-->
    <head>
      <!-- Google tag (gtag.js) -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WXC8R75DEN"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-WXC8R75DEN');
      </script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="en-us">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn moonscript in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/moonscript/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }

                if (theme === "dark" ) {
                    el.className = "dark";
                } else {
                    el.className = "light";
                }

                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (theme) {
                set_theme(theme);
              }
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.addEventListener("load", function(){
              load_theme();
            });
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Fmoonscript%2F&text=Learn+X+in+Y+minutes%2C+where+X%3Dmoonscript">
        Share this page
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">Select theme:</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">light</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">dark</button>
  </div>
  <h1><a href="/">Learn X in Y minutes</a></h1>
  <h2>Where X=moonscript</h2>
    <p class="filelink">
    Get the code:
    <a href="/docs/files/moonscript.moon">moonscript.moon</a>
    </p>
  <div id="doc">
    <p>MoonScript is a dynamic scripting language that compiles into Lua. It gives
you the power of one of the fastest scripting languages combined with a
rich set of features.</p>

<p>See <a href="https://moonscript.org/">the MoonScript website</a> to see official guides on installation for all platforms.</p>
<div class="highlight"><pre><span></span><span class="c1">-- Two dashes start a comment. Comments can go until the end of the line.</span>
<span class="c1">-- MoonScript transpiled to Lua does not keep comments.</span>

<span class="c1">-- As a note, MoonScript does not use &#39;do&#39;, &#39;then&#39;, or &#39;end&#39; like Lua would and</span>
<span class="c1">-- instead uses an indented syntax, much like Python.</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- 1. Assignment</span>
<span class="c1">--------------------------------------------------</span>

<span class="n">hello</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">world</span><span class="s2">&quot;</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>
<span class="n">hello</span> <span class="o">=</span> <span class="mi">123</span> <span class="c1">-- Overwrites `hello` from above.</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">x</span> <span class="o">+=</span> <span class="mi">10</span> <span class="c1">-- x = x + 10</span>

<span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">hello </span><span class="s2">&quot;</span>
<span class="n">s</span> <span class="o">..=</span> <span class="s2">&quot;</span><span class="s">world</span><span class="s2">&quot;</span> <span class="c1">-- s = s .. &quot;world&quot;</span>

<span class="n">b</span> <span class="o">=</span> <span class="kc">false</span>
<span class="n">b</span> <span class="k">and</span><span class="o">=</span> <span class="kc">true</span> <span class="k">or</span> <span class="kc">false</span> <span class="c1">-- b = b and (true or false)</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- 2. Literals and Operators</span>
<span class="c1">--------------------------------------------------</span>

<span class="c1">-- Literals work almost exactly as they would in Lua. Strings can be broken in</span>
<span class="c1">-- the middle of a line without requiring a \.</span>

<span class="n">some_string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">exa</span>
<span class="s">mple</span><span class="s2">&quot;</span> <span class="c1">-- local some_string = &quot;exa\nmple&quot;</span>

<span class="c1">-- Strings can also have interpolated values, or values that are evaluated and</span>
<span class="c1">-- then placed inside of a string.</span>

<span class="n">some_string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">This is an #{some_string}</span><span class="s2">&quot;</span> <span class="c1">-- Becomes &#39;This is an exa\nmple&#39;</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- 2.1. Function Literals</span>
<span class="c1">--------------------------------------------------</span>

<span class="c1">-- Functions are written using arrows:</span>

<span class="n">my_function</span> <span class="o">=</span> <span class="nf">-&gt;</span> <span class="c1">-- compiles to `function() end`</span>
<span class="n">my_function</span><span class="kt">()</span> <span class="c1">-- calls an empty function</span>

<span class="c1">-- Functions can be called without using parenthesis. Parentheses may still be</span>
<span class="c1">-- used to have priority over other functions.</span>

<span class="n">func_a</span> <span class="o">=</span> <span class="nf">-&gt;</span> <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">Hello World!</span><span class="s2">&quot;</span>
<span class="n">func_b</span> <span class="o">=</span> <span class="nf">-&gt;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">The value: #{value}</span><span class="s2">&quot;</span>

<span class="c1">-- If a function needs no parameters, it can be called with either `()` or `!`.</span>

<span class="n">func_a</span><span class="o">!</span>
<span class="n">func_b</span><span class="kt">()</span>

<span class="c1">-- Functions can use arguments by preceding the arrow with a list of argument</span>
<span class="c1">-- names bound by parentheses.</span>

<span class="n">sum</span> <span class="o">=</span> <span class="kt">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="kt">)</span><span class="nf">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="c1">-- The last expression is returned from the function.</span>
<span class="nb">print</span> <span class="n">sum</span><span class="kt">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="kt">)</span>

<span class="c1">-- Lua has an idiom of sending the first argument to a function as the object,</span>
<span class="c1">-- like a &#39;self&#39; object. Using a fat arrow (=&gt;) instead of a skinny arrow (-&gt;)</span>
<span class="c1">-- automatically creates a `self` variable. `@x` is a shorthand for `self.x`.</span>

<span class="n">func</span> <span class="o">=</span> <span class="kt">(</span><span class="n">num</span><span class="kt">)</span><span class="nf">=&gt;</span> <span class="vc">@value</span> <span class="o">+</span> <span class="n">num</span>

<span class="c1">-- Default arguments can also be used with function literals:</span>

<span class="n">a_function</span> <span class="o">=</span> <span class="kt">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">something</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="kt">)</span><span class="nf">-&gt;</span>
    <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">Hello, I am #{name}.\nMy height is #{height}.</span><span class="s2">&quot;</span>

<span class="c1">-- Because default arguments are calculated in the body of the function when</span>
<span class="c1">-- transpiled to Lua, you can reference previous arguments.</span>

<span class="n">some_args</span> <span class="o">=</span> <span class="kt">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1000</span><span class="kt">)</span><span class="nf">-&gt;</span> <span class="nb">print</span><span class="kt">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="kt">)</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- Considerations</span>
<span class="c1">--------------------------------------------------</span>

<span class="c1">-- The minus sign plays two roles, a unary negation operator and a binary</span>
<span class="c1">-- subtraction operator. It is recommended to always use spaces between binary</span>
<span class="c1">-- operators to avoid the possible collision.</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">10</span> <span class="c1">--  a = x - 10</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">x</span><span class="o">-</span><span class="mi">10</span> <span class="c1">-- b = x - 10</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span><span class="n">y</span> <span class="c1">-- c = x(-y)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">x</span><span class="o">-</span> <span class="n">z</span> <span class="c1">-- d = x - z</span>

<span class="c1">-- When there is no space between a variable and string literal, the function</span>
<span class="c1">-- call takes priority over following expressions:</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">func</span><span class="s2">&quot;</span><span class="s">hello</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="mi">100</span> <span class="c1">-- func(&quot;hello&quot;) + 100</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">func</span> <span class="s2">&quot;</span><span class="s">hello</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="mi">100</span> <span class="c1">-- func(&quot;hello&quot; + 100)</span>

<span class="c1">-- Arguments to a function can span across multiple lines as long as the</span>
<span class="c1">-- arguments are indented. The indentation can be nested as well.</span>

<span class="n">my_func</span> <span class="mi">5</span><span class="p">,</span> <span class="c1">-- called as my_func(5, 8, another_func(6, 7, 9, 1, 2), 5, 4)</span>
    <span class="mi">8</span><span class="p">,</span> <span class="n">another_func</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="c1">-- called as</span>
        <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span>          <span class="c1">-- another_func(6, 7, 9, 1, 2)</span>
    <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span>

<span class="c1">-- If a function is used at the start of a block, the indentation can be</span>
<span class="c1">-- different than the level of indentation used in a block:</span>

<span class="k">if</span> <span class="n">func</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="c1">-- called as func(1, 2, 3, &quot;hello&quot;, &quot;world&quot;)</span>
        <span class="s2">&quot;</span><span class="s">hello</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="s2">&quot;</span><span class="s">world</span><span class="s2">&quot;</span>
    <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">hello</span><span class="s2">&quot;</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- 3. Tables</span>
<span class="c1">--------------------------------------------------</span>

<span class="c1">-- Tables are defined by curly braces, like Lua:</span>

<span class="n">some_values</span> <span class="o">=</span> <span class="kt">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="kt">}</span>

<span class="c1">-- Tables can use newlines instead of commas.</span>

<span class="n">some_other_values</span> <span class="o">=</span> <span class="kt">{</span>
    <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span>
    <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span>
<span class="kt">}</span>

<span class="c1">-- Assignment is done with `:` instead of `=`:</span>

<span class="n">profile</span> <span class="o">=</span> <span class="kt">{</span>
    <span class="nv">name:</span> <span class="s2">&quot;</span><span class="s">Bill</span><span class="s2">&quot;</span>
    <span class="nv">age:</span> <span class="mi">200</span>
    <span class="s2">&quot;</span><span class="s">favorite food</span><span class="s2">&quot;</span><span class="o">:</span> <span class="s2">&quot;</span><span class="s">rice</span><span class="s2">&quot;</span>
<span class="kt">}</span>

<span class="c1">-- Curly braces can be left off for `key: value` tables.</span>

<span class="n">y</span> <span class="o">=</span> <span class="nv">type:</span> <span class="s2">&quot;</span><span class="s">dog</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">legs:</span> <span class="mi">4</span><span class="p">,</span> <span class="nv">tails:</span> <span class="mi">1</span>

<span class="n">profile</span> <span class="o">=</span>
    <span class="nv">height:</span> <span class="s2">&quot;</span><span class="s">4 feet</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="nv">shoe_size:</span> <span class="mi">13</span><span class="p">,</span>
    <span class="nv">favorite_foods:</span> <span class="c1">-- nested table</span>
        <span class="nv">foo:</span> <span class="s2">&quot;</span><span class="s">ice cream</span><span class="s2">&quot;</span><span class="p">,</span> 
        <span class="nv">bar:</span> <span class="s2">&quot;</span><span class="s">donuts</span><span class="s2">&quot;</span>

<span class="n">my_function</span> <span class="nv">dance:</span> <span class="s2">&quot;</span><span class="s">Tango</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">partner:</span> <span class="s2">&quot;</span><span class="s">none</span><span class="s2">&quot;</span> <span class="c1">-- :( forever alone</span>

<span class="c1">-- Tables constructed from variables can use the same name as the variables</span>
<span class="c1">-- by using `:` as a prefix operator.</span>

<span class="n">hair</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">golden</span><span class="s2">&quot;</span>
<span class="n">height</span> <span class="o">=</span> <span class="mi">200</span>
<span class="n">person</span> <span class="o">=</span> <span class="kt">{</span><span class="nv">:hair</span><span class="p">,</span> <span class="nv">:height</span><span class="kt">}</span>

<span class="c1">-- Like in Lua, keys can be non-string or non-numeric values by using `[]`.</span>

<span class="n">t</span> <span class="o">=</span>
    <span class="kt">[</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="kt">]</span><span class="o">:</span> <span class="s2">&quot;</span><span class="s">hello</span><span class="s2">&quot;</span>
    <span class="s2">&quot;</span><span class="s">hello world</span><span class="s2">&quot;</span><span class="o">:</span> <span class="kc">true</span> <span class="c1">-- Can use string literals without `[]`.</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- 3.1. Table Comprehensions</span>
<span class="c1">--------------------------------------------------</span>

<span class="c1">-- List Comprehensions</span>

<span class="c1">-- Creates a copy of a list but with all items doubled. Using a star before a</span>
<span class="c1">-- variable name or table can be used to iterate through the table&#39;s values.</span>

<span class="n">items</span> <span class="o">=</span> <span class="kt">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="kt">}</span>
<span class="n">doubled</span> <span class="o">=</span> <span class="kt">[</span><span class="n">item</span> <span class="o">*</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="o">*</span><span class="n">items</span><span class="kt">]</span>
<span class="c1">-- Uses `when` to determine if a value should be included.</span>

<span class="n">slice</span> <span class="o">=</span> <span class="kt">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="o">*</span><span class="n">items</span> <span class="k">when</span> <span class="n">item</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">and</span> <span class="n">item</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="kt">]</span>

<span class="c1">-- `for` clauses inside of list comprehensions can be chained.</span>

<span class="n">x_coords</span> <span class="o">=</span> <span class="kt">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="kt">}</span>
<span class="n">y_coords</span> <span class="o">=</span> <span class="kt">{</span><span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="kt">}</span>

<span class="n">points</span> <span class="o">=</span> <span class="kt">[{</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="kt">}</span> <span class="k">for</span> <span class="n">x</span> <span class="k">in</span> <span class="o">*</span><span class="n">x_coords</span> <span class="k">for</span> <span class="n">y</span> <span class="k">in</span> <span class="o">*</span><span class="n">y_coords</span><span class="kt">]</span>

<span class="c1">-- Numeric for loops can also be used in comprehensions:</span>

<span class="n">evens</span> <span class="o">=</span> <span class="kt">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span> <span class="k">when</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="kt">]</span>

<span class="c1">-- Table Comprehensions are very similar but use `{` and `}` and take two</span>
<span class="c1">-- values for each iteration.</span>

<span class="n">thing</span> <span class="o">=</span> <span class="nv">color:</span> <span class="s2">&quot;</span><span class="s">red</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">name:</span> <span class="s2">&quot;</span><span class="s">thing</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">width:</span> <span class="mi">123</span>
<span class="n">thing_copy</span> <span class="o">=</span> <span class="kt">{</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="k">in</span> <span class="nb">pairs</span> <span class="n">thing</span><span class="kt">}</span>

<span class="c1">-- Tables can be &quot;flattened&quot; from key-value pairs in an array by using `unpack`</span>
<span class="c1">-- to return both values, using the first as the key and the second as the</span>
<span class="c1">-- value.</span>

<span class="n">tuples</span> <span class="o">=</span> <span class="kt">{{</span><span class="s2">&quot;</span><span class="s">hello</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">world</span><span class="s2">&quot;</span><span class="kt">}</span><span class="p">,</span> <span class="kt">{</span><span class="s2">&quot;</span><span class="s">foo</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">bar</span><span class="s2">&quot;</span><span class="kt">}}</span>
<span class="n">table</span> <span class="o">=</span> <span class="kt">{</span><span class="n">unpack</span> <span class="n">tuple</span> <span class="k">for</span> <span class="n">tuple</span> <span class="k">in</span> <span class="o">*</span><span class="n">tuples</span><span class="kt">}</span>

<span class="c1">-- Slicing can be done to iterate over only a certain section of an array. It</span>
<span class="c1">-- uses the `*` notation for iterating but appends `[start, end, step]`.</span>

<span class="c1">-- The next example also shows that this syntax can be used in a `for` loop as</span>
<span class="c1">-- well as any comprehensions.</span>

<span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="o">*</span><span class="n">points</span><span class="kt">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="kt">]</span>
    <span class="nb">print</span> <span class="n">unpack</span> <span class="n">item</span>

<span class="c1">-- Any undesired values can be left off. The second comma is not required if</span>
<span class="c1">-- the step is not included.</span>

<span class="n">words</span> <span class="o">=</span> <span class="kt">{</span><span class="s2">&quot;</span><span class="s">these</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">are</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">some</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">words</span><span class="s2">&quot;</span><span class="kt">}</span>
<span class="k">for</span> <span class="n">word</span> <span class="k">in</span> <span class="o">*</span><span class="n">words</span><span class="kt">[</span><span class="p">,</span><span class="mi">3</span><span class="kt">]</span> 
    <span class="nb">print</span> <span class="n">word</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- 4. Control Structures</span>
<span class="c1">--------------------------------------------------</span>

<span class="n">have_coins</span> <span class="o">=</span> <span class="kc">false</span>
<span class="k">if</span> <span class="n">have_coins</span>
    <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">Got coins</span><span class="s2">&quot;</span>
<span class="k">else</span>
    <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">No coins</span><span class="s2">&quot;</span>

<span class="c1">-- Use `then` for single-line `if`</span>
<span class="k">if</span> <span class="n">have_coins</span> <span class="k">then</span> <span class="s2">&quot;</span><span class="s">Got coins</span><span class="s2">&quot;</span> <span class="k">else</span> <span class="s2">&quot;</span><span class="s">No coins</span><span class="s2">&quot;</span>

<span class="c1">-- `unless` is the opposite of `if`</span>
<span class="n">unless</span> <span class="nb">os.date</span><span class="kt">(</span><span class="s2">&quot;</span><span class="s">%A</span><span class="s2">&quot;</span><span class="kt">)</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="s">Monday</span><span class="s2">&quot;</span>
    <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">It is not Monday!</span><span class="s2">&quot;</span>

<span class="c1">-- `if` and `unless` can be used as expressions</span>
<span class="n">is_tall</span> <span class="o">=</span> <span class="kt">(</span><span class="n">name</span><span class="kt">)</span><span class="nf">-&gt;</span> <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="s">Rob</span><span class="s2">&quot;</span> <span class="k">then</span> <span class="kc">true</span> <span class="k">else</span> <span class="kc">false</span>
<span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">I am #{if is_tall </span><span class="s2">&quot;</span><span class="nc">Rob</span><span class="s2">&quot;</span><span class="s"> then </span><span class="s2">&quot;</span><span class="n">very</span> <span class="n">tall</span><span class="s2">&quot;</span><span class="s"> else </span><span class="s2">&quot;</span><span class="k">not</span> <span class="n">so</span> <span class="n">tall</span><span class="s2">&quot;</span><span class="s">}</span><span class="s2">&quot;</span>
<span class="nb">print</span> <span class="n">message</span> <span class="c1">-- &quot;I am very tall&quot;</span>

<span class="c1">-- `if`, `elseif`, and `unless` can evaluate assignment as well as expressions.</span>
<span class="k">if</span> <span class="n">x</span> <span class="o">=</span> <span class="n">possibly_nil</span><span class="o">!</span> <span class="c1">-- sets `x` to `possibly_nil()` and evaluates `x`</span>
    <span class="nb">print</span> <span class="n">x</span>

<span class="c1">-- Conditionals can be used after a statement as well as before. This is</span>
<span class="c1">-- called a &quot;line decorator&quot;.</span>

<span class="n">is_monday</span> <span class="o">=</span> <span class="nb">os.date</span><span class="kt">(</span><span class="s2">&quot;</span><span class="s">%A</span><span class="s2">&quot;</span><span class="kt">)</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="s">Monday</span><span class="s2">&quot;</span>
<span class="nb">print</span><span class="kt">(</span><span class="s2">&quot;</span><span class="s">It IS Monday!</span><span class="s2">&quot;</span><span class="kt">)</span> <span class="k">if</span> <span class="n">isMonday</span>
<span class="nb">print</span><span class="kt">(</span><span class="s2">&quot;</span><span class="s">It is not Monday..</span><span class="s2">&quot;</span><span class="kt">)</span> <span class="n">unless</span> <span class="n">isMonday</span>
<span class="c1">--print(&quot;It IS Monday!&quot; if isMonday) -- Not a statement, does not work</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- 4.1 Loops</span>
<span class="c1">--------------------------------------------------</span>

<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span>
    <span class="nb">print</span> <span class="n">i</span>

<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="k">do</span> <span class="nb">print</span> <span class="n">i</span> <span class="c1">-- Use `do` for single-line loops.</span>

<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span>
    <span class="n">continue</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="c1">-- Continue statement; skip the rest of the loop.</span>
    <span class="nb">print</span> <span class="n">i</span>

<span class="c1">-- Loops can be used as a line decorator, just like conditionals</span>
<span class="nb">print</span> <span class="s2">&quot;</span><span class="s">item: #{item}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="o">*</span><span class="n">items</span>

<span class="c1">-- Using loops as an expression generates an array table. The last statement</span>
<span class="c1">-- in the block is coerced into an expression and added to the table.</span>
<span class="n">my_numbers</span> <span class="o">=</span> <span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span> <span class="k">do</span> <span class="n">i</span> <span class="c1">-- {1, 2, 3, 4, 5, 6}</span>

<span class="c1">-- use `continue` to filter out values</span>
<span class="n">odds</span> <span class="o">=</span> <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="o">*</span><span class="n">my_numbers</span>
    <span class="n">continue</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="c1">-- acts opposite to `when` in comprehensions!</span>
    <span class="n">i</span> <span class="c1">-- Only added to return table if odd</span>

<span class="c1">-- A `for` loop returns `nil` when it is the last statement of a function</span>
<span class="c1">-- Use an explicit `return` to generate a table.</span>
<span class="n">print_squared</span> <span class="o">=</span> <span class="kt">(</span><span class="n">t</span><span class="kt">)</span> <span class="nf">-&gt;</span> <span class="k">for</span> <span class="n">x</span> <span class="k">in</span> <span class="o">*</span><span class="n">t</span> <span class="k">do</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="c1">-- returns `nil`</span>
<span class="n">squared</span> <span class="o">=</span> <span class="kt">(</span><span class="n">t</span><span class="kt">)</span> <span class="nf">-&gt;</span> <span class="k">return</span> <span class="k">for</span> <span class="n">x</span> <span class="k">in</span> <span class="o">*</span><span class="n">t</span> <span class="k">do</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="c1">-- returns new table of squares</span>

<span class="c1">-- The following does the same as `(t) -&gt; [i for i in *t when i % 2 == 0]`</span>
<span class="c1">-- But list comprehension generates better code and is more readable!</span>

<span class="n">filter_odds</span> <span class="o">=</span> <span class="kt">(</span><span class="n">t</span><span class="kt">)</span> <span class="nf">-&gt;</span> 
    <span class="k">return</span> <span class="k">for</span> <span class="n">x</span> <span class="k">in</span> <span class="o">*</span><span class="n">t</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">x</span> <span class="k">else</span> <span class="n">continue</span>
<span class="n">evens</span> <span class="o">=</span> <span class="n">filter_odds</span><span class="kt">(</span><span class="n">my_numbers</span><span class="kt">)</span> <span class="c1">-- {2, 4, 6}</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- 4.2 Switch Statements</span>
<span class="c1">--------------------------------------------------</span>

<span class="c1">-- Switch statements are a shorthand way of writing multiple `if` statements</span>
<span class="c1">-- checking against the same value. The value is only evaluated once.</span>

<span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">Dan</span><span class="s2">&quot;</span>

<span class="k">switch</span> <span class="n">name</span>
    <span class="k">when</span> <span class="s2">&quot;</span><span class="s">Dave</span><span class="s2">&quot;</span>
        <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">You are Dave.</span><span class="s2">&quot;</span>
    <span class="k">when</span> <span class="s2">&quot;</span><span class="s">Dan</span><span class="s2">&quot;</span>
        <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">You are not Dave, but Dan.</span><span class="s2">&quot;</span>
    <span class="k">else</span>
        <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">You are neither Dave nor Dan.</span><span class="s2">&quot;</span>

<span class="c1">-- Switches can also be used as expressions, as well as compare multiple</span>
<span class="c1">-- values. The values can be on the same line as the `when` clause if they</span>
<span class="c1">-- are only one expression.</span>

<span class="n">b</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">next_even</span> <span class="o">=</span> <span class="k">switch</span> <span class="n">b</span>
    <span class="k">when</span> <span class="mi">1</span> <span class="k">then</span> <span class="mi">2</span>
    <span class="k">when</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="k">then</span> <span class="mi">4</span>
    <span class="k">when</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span> <span class="k">then</span> <span class="mi">6</span>
    <span class="k">else</span> <span class="nb">error</span> <span class="s2">&quot;</span><span class="s">I can&#39;t count that high! D:</span><span class="s2">&quot;</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- 5. Object Oriented Programming</span>
<span class="c1">--------------------------------------------------</span>

<span class="c1">-- Classes are created using the `class` keyword followed by an identifier,</span>
<span class="c1">-- typically written using CamelCase. Values specific to a class can use @ as</span>
<span class="c1">-- the identifier instead of `self.value`.</span>

<span class="k">class</span> <span class="nc">Inventory</span>
    <span class="nv">new:</span> <span class="nf">=&gt;</span> <span class="vc">@items</span> <span class="o">=</span> <span class="kt">{}</span>
    <span class="nv">add_item:</span> <span class="kt">(</span><span class="n">name</span><span class="kt">)</span><span class="nf">=&gt;</span> <span class="c1">-- note the use of fat arrow for classes!</span>
        <span class="vc">@items</span><span class="kt">[</span><span class="n">name</span><span class="kt">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">unless</span> <span class="vc">@items</span><span class="kt">[</span><span class="n">name</span><span class="kt">]</span>
        <span class="vc">@items</span><span class="kt">[</span><span class="n">name</span><span class="kt">]</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1">-- The `new` function inside of a class is special because it is called when</span>
<span class="c1">-- an instance of the class is created.</span>

<span class="c1">-- Creating an instance of the class is as simple as calling the class as a</span>
<span class="c1">-- function. Calling functions inside of the class uses \ to separate the</span>
<span class="c1">-- instance from the function it is calling.</span>

<span class="n">inv</span> <span class="o">=</span> <span class="nc">Inventory</span><span class="o">!</span>
<span class="n">inv</span><span class="o">\</span><span class="n">add_item</span> <span class="s2">&quot;</span><span class="s">t-shirt</span><span class="s2">&quot;</span>
<span class="n">inv</span><span class="o">\</span><span class="n">add_item</span> <span class="s2">&quot;</span><span class="s">pants</span><span class="s2">&quot;</span>

<span class="c1">-- Values defined in the class - not the new() function - will be shared across</span>
<span class="c1">-- all instances of the class.</span>

<span class="k">class</span> <span class="nc">Person</span>
    <span class="nv">clothes:</span> <span class="kt">{}</span>
    <span class="nv">give_item:</span> <span class="kt">(</span><span class="n">name</span><span class="kt">)</span><span class="nf">=&gt;</span>
        <span class="nb">table.insert</span> <span class="vc">@clothes</span> <span class="n">name</span>

<span class="n">a</span> <span class="o">=</span> <span class="nc">Person</span><span class="o">!</span>
<span class="n">b</span> <span class="o">=</span> <span class="nc">Person</span><span class="o">!</span>

<span class="n">a</span><span class="o">\</span><span class="n">give_item</span> <span class="s2">&quot;</span><span class="s">pants</span><span class="s2">&quot;</span>
<span class="n">b</span><span class="o">\</span><span class="n">give_item</span> <span class="s2">&quot;</span><span class="s">shirt</span><span class="s2">&quot;</span>

<span class="c1">-- prints out both &quot;pants&quot; and &quot;shirt&quot;</span>

<span class="nb">print</span> <span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="o">*</span><span class="n">a</span><span class="o">.</span><span class="n">clothes</span>

<span class="c1">-- Class instances have a value `.__class` that are equal to the class object</span>
<span class="c1">-- that created the instance.</span>

<span class="nb">assert</span><span class="kt">(</span><span class="n">b</span><span class="o">.</span><span class="n">__class</span> <span class="o">==</span> <span class="nc">Person</span><span class="kt">)</span>

<span class="c1">-- Variables declared in class body the using the `=` operator are locals,</span>
<span class="c1">-- so these &quot;private&quot; variables are only accessible within the current scope.</span>

<span class="k">class</span> <span class="nc">SomeClass</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nv">reveal:</span> <span class="nf">-&gt;</span>
        <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="nb">print</span> <span class="n">x</span>

<span class="n">a</span> <span class="o">=</span> <span class="nc">SomeClass</span><span class="o">!</span>
<span class="n">b</span> <span class="o">=</span> <span class="nc">SomeClass</span><span class="o">!</span>
<span class="nb">print</span> <span class="n">a</span><span class="o">.</span><span class="n">x</span> <span class="c1">-- nil</span>
<span class="n">a</span><span class="o">.</span><span class="n">reveal</span><span class="o">!</span> <span class="c1">-- 1</span>
<span class="n">b</span><span class="o">.</span><span class="n">reveal</span><span class="o">!</span> <span class="c1">-- 2</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- 5.1 Inheritance</span>
<span class="c1">--------------------------------------------------</span>

<span class="c1">-- The `extends` keyword can be used to inherit properties and methods from</span>
<span class="c1">-- another class.</span>

<span class="k">class</span> <span class="nc">Backpack</span> <span class="k">extends</span> <span class="nc">Inventory</span>
    <span class="nv">size:</span> <span class="mi">10</span>
    <span class="nv">add_item:</span> <span class="kt">(</span><span class="n">name</span><span class="kt">)</span><span class="nf">=&gt;</span>
        <span class="nb">error</span> <span class="s2">&quot;</span><span class="s">backpack is full</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="o">#</span><span class="vc">@items</span> <span class="o">&gt;</span> <span class="vc">@size</span>
        <span class="k">super</span> <span class="n">name</span> <span class="c1">-- calls Inventory.add_item with `name`.</span>

<span class="c1">-- Because a `new` method was not added, the `new` method from `Inventory` will</span>
<span class="c1">-- be used instead. If we did want to use a constructor while still using the</span>
<span class="c1">-- constructor from `Inventory`, we could use the magical `super` function</span>
<span class="c1">-- during `new()`.</span>

<span class="c1">-- When a class extends another, it calls the method `__inherited` on the </span>
<span class="c1">-- parent class (if it exists). It is always called with the parent and the</span>
<span class="c1">-- child object.</span>

<span class="k">class</span> <span class="nc">ParentClass</span>
    <span class="vc">@__inherited</span><span class="o">:</span> <span class="kt">(</span><span class="n">child</span><span class="kt">)</span><span class="nf">=&gt;</span>
        <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">#{@__name} was inherited by #{child.__name}</span><span class="s2">&quot;</span>
    <span class="nv">a_method:</span> <span class="kt">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="kt">)</span> <span class="nf">=&gt;</span> <span class="nb">print</span> <span class="n">a</span> <span class="o">..</span> <span class="s1">&#39;</span><span class="s"> </span><span class="s1">&#39;</span> <span class="o">..</span> <span class="n">b</span>

<span class="c1">-- Will print &#39;ParentClass was inherited by MyClass&#39;</span>

<span class="k">class</span> <span class="nc">MyClass</span> <span class="k">extends</span> <span class="nc">ParentClass</span>
    <span class="nv">a_method:</span> <span class="nf">=&gt;</span>
        <span class="k">super</span> <span class="s2">&quot;</span><span class="s">hello world</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">from MyClass!</span><span class="s2">&quot;</span> 
        <span class="nb">assert</span> <span class="k">super</span> <span class="o">==</span> <span class="nc">ParentClass</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- 6. Scope</span>
<span class="c1">--------------------------------------------------</span>

<span class="c1">-- All values are local by default. The `export` keyword can be used to</span>
<span class="c1">-- declare the variable as a global value.</span>

<span class="k">export</span> <span class="n">var_1</span><span class="p">,</span> <span class="n">var_2</span>
<span class="n">var_1</span><span class="p">,</span> <span class="n">var_3</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">hello</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">world</span><span class="s2">&quot;</span> <span class="c1">-- var_3 is local, var_1 is not.</span>

<span class="k">export</span> <span class="n">this_is_global_assignment</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">Hi!</span><span class="s2">&quot;</span>

<span class="c1">-- Classes can also be prefixed with `export` to make them global classes.</span>
<span class="c1">-- Alternatively, all CamelCase variables can be exported automatically using</span>
<span class="c1">-- `export ^`, and all values can be exported using `export *`.</span>

<span class="c1">-- `do` lets you manually create a scope, for when you need local variables.</span>

<span class="k">do</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>
<span class="nb">print</span> <span class="n">x</span> <span class="c1">-- nil</span>

<span class="c1">-- Here we use `do` as an expression to create a closure.</span>

<span class="n">counter</span> <span class="o">=</span> <span class="k">do</span> 
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nf">-&gt;</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">i</span>

<span class="nb">print</span> <span class="n">counter</span><span class="o">!</span>  <span class="c1">-- 1</span>
<span class="nb">print</span> <span class="n">counter</span><span class="o">!</span>  <span class="c1">-- 2</span>

<span class="c1">-- The `local` keyword can be used to define variables</span>
<span class="c1">-- before they are assigned.</span>

<span class="n">local</span> <span class="n">var_4</span>
<span class="k">if</span> <span class="n">something</span>
    <span class="n">var_4</span> <span class="o">=</span> <span class="mi">1</span>
<span class="nb">print</span> <span class="n">var_4</span> <span class="c1">-- works because `var_4` was set in this scope, not the `if` scope.</span>

<span class="c1">-- The `local` keyword can also be used to shadow an existing variable.</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">if</span> <span class="kc">false</span>
    <span class="n">local</span> <span class="n">x</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">12</span>
<span class="nb">print</span> <span class="n">x</span> <span class="c1">-- 10</span>

<span class="c1">-- Use `local *` to forward-declare all variables. </span>
<span class="c1">-- Alternatively, use `local ^` to forward-declare all CamelCase values.</span>

<span class="n">local</span> <span class="o">*</span>

<span class="n">first</span> <span class="o">=</span> <span class="nf">-&gt;</span>
    <span class="n">second</span><span class="o">!</span>

<span class="n">second</span> <span class="o">=</span> <span class="nf">-&gt;</span>
    <span class="nb">print</span> <span class="n">data</span>

<span class="n">data</span> <span class="o">=</span> <span class="kt">{}</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- 6.1 Import</span>
<span class="c1">--------------------------------------------------</span>

<span class="c1">-- Values from a table can be brought to the current scope using the `import`</span>
<span class="c1">-- and `from` keyword. Names in the `import` list can be preceded by `\` if</span>
<span class="c1">-- they are a module function.</span>

<span class="k">import</span> <span class="n">insert</span> <span class="k">from</span> <span class="n">table</span> <span class="c1">-- local insert = table.insert</span>
<span class="k">import</span> <span class="o">\</span><span class="n">add</span> <span class="k">from</span> <span class="nv">state:</span> <span class="mi">100</span><span class="p">,</span> <span class="nv">add:</span> <span class="kt">(</span><span class="n">value</span><span class="kt">)</span><span class="nf">=&gt;</span> <span class="vc">@state</span> <span class="o">+</span> <span class="n">value</span>
<span class="nb">print</span> <span class="n">add</span> <span class="mi">22</span>

<span class="c1">-- Like tables, commas can be excluded from `import` lists to allow for longer</span>
<span class="c1">-- lists of imported items.</span>

<span class="k">import</span>
    <span class="n">asdf</span><span class="p">,</span> <span class="n">gh</span><span class="p">,</span> <span class="n">jkl</span>
    <span class="n">antidisestablishmentarianism</span>
    <span class="k">from</span> <span class="kt">{}</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- 6.2 With</span>
<span class="c1">--------------------------------------------------</span>

<span class="c1">-- The `with` statement can be used to quickly call and assign values in an</span>
<span class="c1">-- instance of a class or object.</span>

<span class="n">file</span> <span class="o">=</span> <span class="k">with</span> <span class="nc">File</span> <span class="s2">&quot;</span><span class="s">lmsi15m.moon</span><span class="s2">&quot;</span> <span class="c1">-- `file` is the value of `set_encoding()`.</span>
    <span class="o">\</span><span class="n">set_encoding</span> <span class="s2">&quot;</span><span class="s">utf8</span><span class="s2">&quot;</span>

<span class="n">create_person</span> <span class="o">=</span> <span class="kt">(</span><span class="n">name</span><span class="p">,</span> <span class="n">relatives</span><span class="kt">)</span><span class="nf">-&gt;</span>
    <span class="k">with</span> <span class="nc">Person</span><span class="o">!</span>
        <span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="o">\</span><span class="n">add_relative</span> <span class="n">relative</span> <span class="k">for</span> <span class="n">relative</span> <span class="k">in</span> <span class="o">*</span><span class="n">relatives</span>
<span class="n">me</span> <span class="o">=</span> <span class="n">create_person</span> <span class="s2">&quot;</span><span class="s">Ryan</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kt">{</span><span class="s2">&quot;</span><span class="s">sister</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">sister</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">brother</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">dad</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">mother</span><span class="s2">&quot;</span><span class="kt">}</span>

<span class="k">with</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">Hello</span><span class="s2">&quot;</span> <span class="c1">-- assignment as expression! :D</span>
    <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">original: #{str}</span><span class="s2">&quot;</span>
    <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">upper: #{\upper!}</span><span class="s2">&quot;</span>

<span class="c1">--------------------------------------------------</span>
<span class="c1">-- 6.3 Destructuring</span>
<span class="c1">--------------------------------------------------</span>

<span class="c1">-- Destructuring can take arrays, tables, and nested tables and convert them</span>
<span class="c1">-- into local variables.</span>

<span class="n">obj2</span> <span class="o">=</span>
    <span class="nv">numbers:</span> <span class="kt">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="kt">}</span>
    <span class="nv">properties:</span>
        <span class="nv">color:</span> <span class="s2">&quot;</span><span class="s">green</span><span class="s2">&quot;</span>
        <span class="nv">height:</span> <span class="mf">13.5</span>

<span class="kt">{</span><span class="nv">numbers:</span> <span class="kt">{</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="kt">}</span><span class="p">,</span> <span class="nv">properties:</span> <span class="kt">{</span><span class="nv">:color</span><span class="kt">}}</span> <span class="o">=</span> <span class="n">obj2</span>

<span class="nb">print</span> <span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">color</span> <span class="c1">-- 1 2 green</span>

<span class="c1">-- `first` and `second` return [1] and [2] because they are as an array, but</span>
<span class="c1">-- `:color` is like `color: color` so it sets itself to the `color` value.</span>

<span class="c1">-- Destructuring can be used in place of `import`.</span>

<span class="kt">{</span><span class="nv">:max</span><span class="p">,</span> <span class="nv">:min</span><span class="p">,</span> <span class="nv">random:</span> <span class="n">rand</span><span class="kt">}</span> <span class="o">=</span> <span class="n">math</span> <span class="c1">-- rename math.random to rand</span>

<span class="c1">-- Destructuring can be done anywhere assignment can be done.</span>

<span class="k">for</span> <span class="kt">{</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="kt">}</span> <span class="k">in</span> <span class="o">*</span><span class="kt">{{</span><span class="s2">&quot;</span><span class="s">hello</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">world</span><span class="s2">&quot;</span><span class="kt">}</span><span class="p">,</span> <span class="kt">{</span><span class="s2">&quot;</span><span class="s">egg</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">head</span><span class="s2">&quot;</span><span class="kt">}}</span>
    <span class="nb">print</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span>
</pre></div>
<h2>Additional Resources</h2>

<ul>
<li><a href="https://moonscript.org/reference/">Language Guide</a></li>
<li><a href="https://moonscript.org/compiler/">Online Compiler</a></li>
</ul>

    <hr>
    <p>Got a suggestion? A correction, perhaps? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Open an Issue</a> on the Github Repo, or make a <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/moonscript.html.markdown">pull request</a> yourself!
    </p>
    <p class="contributed">
    Originally contributed by RyanSquared, and updated by <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/moonscript.html.markdown">2 contributors</a>.
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="https://ryansquared.github.io/">RyanSquared</a>,
        <a href="https://github.com/JobLeonard">Job van der Zwan</a>
    </p>

    <p>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>
    </body>
</html>
