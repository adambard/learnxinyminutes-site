<!DOCTYPE html lang="en-us" xml:lang="en-us" xmlns="http://www.w3.org/1999/xhtml">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
      <!-- Google tag (gtag.js) -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WXC8R75DEN"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-WXC8R75DEN');
      </script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="en-us">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn protocol-buffers in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/protocol-buffer-3/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }

                if (theme === "dark" ) {
                    el.className = "dark";
                } else {
                    el.className = "light";
                }

                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (theme) {
                set_theme(theme);
              }
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.addEventListener("load", function(){
              load_theme();
            });
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Fprotocol-buffer-3%2F&text=Learn+X+in+Y+minutes%2C+where+X%3Dprotocol-buffers">
        Share this page
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">Select theme:</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">light</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">dark</button>
  </div>
  <h1><a href="/">Learn X in Y minutes</a></h1>
  <h2>Where X=protocol-buffers</h2>
    <p class="filelink">
    Get the code:
    <a href="/docs/files/protocol-buffers.proto">protocol-buffers.proto</a>
    </p>
  <div id="doc">
    <h1>Protocol Buffers</h1>

<h2>Why Protocol Buffers</h2>

<p>Protocol buffers are Google&rsquo;s language-neutral, platform-neutral, extensible mechanism for serializing structured data â€“ think XML, but smaller, faster, and simpler.
You define how you want your data to be structured once, then you can use special generated source code to easily write and read your structured data to and from a variety of data streams and using a variety of languages.
Protocol Buffers are Schema Of Messages. They are language agnostic.
They can be converted to binary and converted back to message formats using the code generated by the protoc compiler for various languages.</p>
<div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">* Language Syntax</span>
<span class="cm">*/</span>

<span class="cm">/*</span>
<span class="cm">* Specifying Syntax Of Protocol Buffer Version</span>
<span class="cm">* Specifying Which Protocol Buffer Version To Use</span>
<span class="cm">* It can be usually proto3 or proto2</span>
<span class="cm">*/</span>
<span class="n">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&quot;proto3&quot;</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm">* Declaring Message In Protocol Buffer:</span>
<span class="cm">* As you can see, each field in the message definition has a unique number.</span>
<span class="cm">* These field numbers are used to identify your fields in the message binary format,</span>
<span class="cm">* and should not be changed once your message type is in use.</span>
<span class="cm">* Note that field numbers in the range 1 through 15 take one byte to encode, including the field number and the field&#39;s type (you can find out more about this in Protocol Buffer Encoding).</span>
<span class="cm">* Field numbers in the range 16 through 2047 take two bytes. So you should reserve the numbers 1 through 15 for very frequently occurring message elements.</span>
<span class="cm">* Remember to leave some room for frequently occurring elements that might be added in the future.</span>
<span class="cm">* The smallest field number you can specify is 1, and the largest is 2^29 - 1, or 536,870,911.</span>
<span class="cm">* You also cannot use the numbers 19000 through 19999 (FieldDescriptor::kFirstReservedNumber through FieldDescriptor::kLastReservedNumber),</span>
<span class="cm">* as they are reserved for the Protocol Buffers implementation - the protocol buffer compiler will complain if you use one of these reserved numbers in your .proto.</span>
<span class="cm">* Similarly, you cannot use any previously reserved field numbers.</span>
<span class="cm">*</span>
<span class="cm">*/</span>

<span class="cm">/*</span>
<span class="cm">Syntax For Declaring Message:</span>
<span class="cm">    message ${MessageName} {</span>
<span class="cm">        ${Scalar Value Type} ${FieldName1} = ${Tag Number1};</span>
<span class="cm">                .</span>
<span class="cm">                .</span>
<span class="cm">                .</span>
<span class="cm">        ${Scalar Value Type} ${FieldNameN} = ${Tag NumberN};</span>
<span class="cm">    }</span>

<span class="cm">Default Values Will be applied any case if the message doesn&#39;t contain a existing field defined</span>
<span class="cm">in the message definition</span>
<span class="cm">*/</span>

<span class="n">message</span><span class="w"> </span><span class="n">MessageTypes</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="cm">/*</span>
<span class="cm">    * Scalar Value Types</span>
<span class="cm">    */</span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">stringType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">always</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="w"> </span><span class="n">encoded</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="mi">7</span><span class="o">-</span><span class="nc">bit</span><span class="w"> </span><span class="nf">ASCII</span><span class="w"> </span><span class="nc">text</span><span class="p">.</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&quot;&quot;</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Number</span><span class="w"> </span><span class="n">Types</span><span class="p">,</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">Value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">int32</span><span class="w"> </span><span class="n">int32Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Uses</span><span class="w"> </span><span class="k">Variable</span><span class="w"> </span><span class="n">Length</span><span class="w"> </span><span class="n">Encoding</span><span class="p">.</span><span class="w"> </span><span class="n">Inefficient</span><span class="w"> </span><span class="k">For</span><span class="w"> </span><span class="n">Negative</span><span class="w"> </span><span class="n">Numbers</span><span class="p">,</span><span class="w"> </span><span class="n">Instead</span><span class="w"> </span><span class="k">Use</span><span class="w"> </span><span class="n">sint32</span><span class="p">.</span>
<span class="w">    </span><span class="n">int64</span><span class="w"> </span><span class="n">int64Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Uses</span><span class="w"> </span><span class="k">Variable</span><span class="w"> </span><span class="n">Length</span><span class="w"> </span><span class="n">Encoding</span><span class="p">.</span><span class="w"> </span><span class="n">Inefficient</span><span class="w"> </span><span class="k">For</span><span class="w"> </span><span class="n">Negative</span><span class="w"> </span><span class="n">Numbers</span><span class="p">,</span><span class="w"> </span><span class="n">Instead</span><span class="w"> </span><span class="k">Use</span><span class="w"> </span><span class="n">sint64</span><span class="p">.</span>
<span class="w">    </span><span class="n">uint32</span><span class="w"> </span><span class="n">uInt32Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Uses</span><span class="w"> </span><span class="k">Variable</span><span class="w"> </span><span class="n">Length</span><span class="w"> </span><span class="n">Encoding</span>
<span class="w">    </span><span class="n">uint64</span><span class="w"> </span><span class="n">uInt64Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Uses</span><span class="w"> </span><span class="k">Variable</span><span class="w"> </span><span class="n">Length</span><span class="w"> </span><span class="n">Encoding</span>
<span class="w">    </span><span class="n">sint32</span><span class="w"> </span><span class="n">sInt32Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Uses</span><span class="w"> </span><span class="k">Variable</span><span class="w"> </span><span class="n">Length</span><span class="w"> </span><span class="n">Encoding</span><span class="p">.</span><span class="w"> </span><span class="n">They</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">efficient</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">encoding</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">negative</span><span class="w"> </span><span class="n">numbers</span><span class="p">.</span>
<span class="w">                           </span><span class="o">//</span><span class="w"> </span><span class="k">Use</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">negative</span><span class="w"> </span><span class="n">numbers</span>
<span class="w">    </span><span class="n">sint64</span><span class="w"> </span><span class="n">sInt64Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Uses</span><span class="w"> </span><span class="k">Variable</span><span class="w"> </span><span class="n">Length</span><span class="w"> </span><span class="n">Encoding</span><span class="p">.</span><span class="w"> </span><span class="n">They</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">efficient</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">encoding</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">negative</span><span class="w"> </span><span class="n">numbers</span><span class="p">.</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="k">Use</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">int64</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">negative</span><span class="w"> </span><span class="n">numbers</span><span class="p">.</span>

<span class="w">    </span><span class="n">fixed32</span><span class="w"> </span><span class="n">fixed32Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Always</span><span class="w"> </span><span class="n">four</span><span class="w"> </span><span class="n">bytes</span><span class="p">.</span><span class="w"> </span><span class="n">More</span><span class="w"> </span><span class="n">efficient</span><span class="w"> </span><span class="k">than</span><span class="w"> </span><span class="n">uint32</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">often</span><span class="w"> </span><span class="n">greater</span><span class="w"> </span><span class="k">than</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mf">28.</span>
<span class="w">    </span><span class="n">fixed64</span><span class="w"> </span><span class="n">fixed64Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Always</span><span class="w"> </span><span class="n">eight</span><span class="w"> </span><span class="n">bytes</span><span class="p">.</span><span class="w"> </span><span class="n">More</span><span class="w"> </span><span class="n">efficient</span><span class="w"> </span><span class="k">than</span><span class="w"> </span><span class="n">uint64</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">often</span><span class="w"> </span><span class="n">greater</span><span class="w"> </span><span class="k">than</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mi">56</span>

<span class="w">    </span><span class="n">sfixed32</span><span class="w"> </span><span class="n">sfixed32Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Always</span><span class="w"> </span><span class="n">four</span><span class="w"> </span><span class="n">bytes</span><span class="p">.</span>
<span class="w">    </span><span class="n">sfixed64</span><span class="w"> </span><span class="n">sfixed64Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">11</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Always</span><span class="w"> </span><span class="n">Eight</span><span class="w"> </span><span class="n">bytes</span><span class="p">.</span>

<span class="w">    </span><span class="n">bool</span><span class="w"> </span><span class="n">boolType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">Boolean</span><span class="w"> </span><span class="n">Type</span><span class="p">.</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">Value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span>

<span class="w">    </span><span class="n">bytes</span><span class="w"> </span><span class="n">bytesType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">13</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">May</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="ow">any</span><span class="w"> </span><span class="n">arbitrary</span><span class="w"> </span><span class="k">sequence</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">bytes</span><span class="p">.</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">Value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Empty</span><span class="w"> </span><span class="n">Bytes</span>

<span class="w">    </span><span class="k">double</span><span class="w"> </span><span class="n">doubleType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">14</span><span class="p">;</span>
<span class="w">    </span><span class="nc">float</span><span class="w"> </span><span class="n">floatType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">15</span><span class="p">;</span>

<span class="w">    </span><span class="n">enum</span><span class="w"> </span><span class="n">Week</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">UNDEFINED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Tag</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">always</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">enum</span>
<span class="w">        </span><span class="n">SUNDAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="n">MONDAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">        </span><span class="n">TUESDAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">        </span><span class="n">WEDNESDAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">        </span><span class="n">THURSDAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">        </span><span class="n">FRIDAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="w">        </span><span class="n">SATURDAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="n">Week</span><span class="w"> </span><span class="n">wkDayType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/*</span>
<span class="cm">    * Defining Collection Of Scalar Value Type</span>
<span class="cm">    * Syntax: repeated ${ScalarType} ${name} = TagValue</span>
<span class="cm">    */</span>
<span class="w">    </span><span class="n">repeated</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">listOfString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">17</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">List</span><span class="o">[</span><span class="n">String</span><span class="o">]</span>
<span class="err">}</span>

<span class="cm">/*</span>
<span class="cm">* Defining Defined Message Types In Other Message Definition</span>
<span class="cm">*/</span>
<span class="n">message</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">fname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">sname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="err">}</span>

<span class="n">message</span><span class="w"> </span><span class="n">City</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">Person</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="err">}</span>

<span class="cm">/*</span>
<span class="cm">* Nested Message Definitions</span>
<span class="cm">*/</span>

<span class="n">message</span><span class="w"> </span><span class="n">NestedMessages</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">message</span><span class="w"> </span><span class="n">FirstLevelNestedMessage</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">string</span><span class="w"> </span><span class="n">firstString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="n">message</span><span class="w"> </span><span class="n">SecondLevelNestedMessage</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">string</span><span class="w"> </span><span class="n">secondString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="n">FirstLevelNestedMessage</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">FirstLevelNestedMessage</span><span class="p">.</span><span class="n">SecondLevelNestedMessage</span><span class="w"> </span><span class="n">msg2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="err">}</span>

<span class="cm">/*</span>
<span class="cm">* Importing Message From A File</span>
<span class="cm">*/</span>

<span class="o">//</span><span class="w"> </span><span class="n">one</span><span class="p">.</span><span class="n">proto</span>
<span class="o">//</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">One</span><span class="w"> </span><span class="err">{</span>
<span class="o">//</span><span class="w">     </span><span class="n">string</span><span class="w"> </span><span class="n">oneMsg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="o">//</span><span class="w"> </span><span class="err">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">two</span><span class="p">.</span><span class="n">proto</span>
<span class="o">//</span><span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="ss">&quot;myproject/one.proto&quot;</span>
<span class="o">//</span><span class="w">  </span><span class="n">message</span><span class="w"> </span><span class="n">Two</span><span class="w"> </span><span class="err">{</span>
<span class="o">//</span><span class="w">       </span><span class="n">string</span><span class="w"> </span><span class="n">twoMsg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="o">//</span><span class="w">  </span><span class="err">}</span>


<span class="cm">/*</span>
<span class="cm">* Advanced Topics</span>
<span class="cm">*/</span>

<span class="cm">/*</span>
<span class="cm">* Handling Message Type Changes:</span>
<span class="cm">* Never Change/Use The TagNumber Of A Message Field Which Was Removed</span>
<span class="cm">* We should use reserved in case of message definition update.</span>
<span class="cm">* (https://developers.google.com/protocol-buffers/docs/proto3#updating)</span>
<span class="cm">*/</span>

<span class="cm">/*</span>
<span class="cm">* Reserved Fields</span>
<span class="cm">* It&#39;s used in case if we need to add/remove new fields into message.</span>
<span class="cm">* Using Reserved Backward and Forward Compatibility Of Messages can be achieved</span>
<span class="cm">*/</span>


<span class="n">message</span><span class="w"> </span><span class="n">ReservedMessage</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">reserved</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">Set</span><span class="w"> </span><span class="k">Of</span><span class="w"> </span><span class="n">Tag</span><span class="w"> </span><span class="n">Numbers</span><span class="w"> </span><span class="n">Which</span><span class="w"> </span><span class="n">Can</span><span class="s1">&#39;t be reused.</span>
<span class="s1">    reserved &quot;firstMsg&quot;, &quot;secondMsg&quot;, &quot;thirdMsg&quot;; // Set Of Labels Which Can&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">Be</span><span class="w"> </span><span class="n">reused</span><span class="p">.</span>
<span class="err">}</span>

<span class="cm">/*</span>
<span class="cm">* Any</span>
<span class="cm">* The Any message type lets you use messages as embedded types without having their .proto definition.</span>
<span class="cm">* An Any contains an arbitrary serialized message as bytes,</span>
<span class="cm">* along with a URL that acts as a globally unique identifier for and resolves to that message&#39;s type.</span>
<span class="cm">* For Any to work we need to import it as shown below.</span>
<span class="cm">*/</span>
<span class="cm">/*</span>
<span class="cm">    import &quot;google/protobuf/any.proto&quot;;</span>
<span class="cm">    message AnySampleMessage {</span>
<span class="cm">        repeated google.protobuf.Any.details = 1;</span>
<span class="cm">    }</span>

<span class="cm">*/</span>


<span class="cm">/*</span>
<span class="cm">*  OneOf</span>
<span class="cm">* There are cases, wherein only one field at-most might be present as part of the message.</span>
<span class="cm">* Note: OneOf messages can&#39;t be repeated.</span>
<span class="cm">*/</span>

<span class="n">message</span><span class="w"> </span><span class="n">OneOfMessage</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">oneof</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">string</span><span class="w"> </span><span class="n">fname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="n">string</span><span class="w"> </span><span class="n">sname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span><span class="p">;</span>
<span class="err">}</span>

<span class="cm">/*</span>
<span class="cm">* Maps</span>
<span class="cm">* Map fields cannot be repeated.</span>
<span class="cm">* Ordering Of A Map Is Not Guaranteed.</span>
<span class="cm">*/</span>

<span class="n">message</span><span class="w"> </span><span class="n">MessageWithMaps</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mapOfMessages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="err">}</span>


<span class="cm">/*</span>
<span class="cm">* Packages</span>
<span class="cm">* Used for preventing name clashes between protocol message types</span>
<span class="cm">* Syntax:</span>
<span class="cm">    package ${packageName};</span>

<span class="cm">    To Access the package;</span>
<span class="cm">    ${packageName}.${messageName} = ${tagNumber};</span>
<span class="cm">*/</span>

<span class="cm">/*</span>
<span class="cm">* Services</span>
<span class="cm">* Message Types Defined For Using In RPC system.</span>
<span class="cm">*  When protoc compiler generates for various languages it generates stub methods for the services.</span>
<span class="cm">*/</span>

<span class="n">message</span><span class="w"> </span><span class="n">SearchRequest</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">queryString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="err">}</span>

<span class="n">message</span><span class="w"> </span><span class="n">SearchResponse</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">queryResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="err">}</span>
<span class="n">service</span><span class="w"> </span><span class="n">SearchService</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">rpc</span><span class="w"> </span><span class="k">Search</span><span class="w"> </span><span class="p">(</span><span class="n">SearchRequest</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">SearchResponse</span><span class="p">);</span>
<span class="err">}</span>
</pre></div>
<h2>Generating Classes In Various Languages For Protocol Buffers</h2>
<div class="highlight"><pre><span></span>protoc<span class="w"> </span>--proto_path<span class="o">=</span>IMPORT_PATH<span class="w"> </span>--cpp_out<span class="o">=</span>DST_DIR<span class="w"> </span>--java_out<span class="o">=</span>DST_DIR<span class="w"> </span>--python_out<span class="o">=</span>DST_DIR<span class="w"> </span>--go_out<span class="o">=</span>DST_DIR<span class="w"> </span>--ruby_out<span class="o">=</span>DST_DIR<span class="w"> </span>--objc_out<span class="o">=</span>DST_DIR<span class="w"> </span>--csharp_out<span class="o">=</span>DST_DIR<span class="w"> </span>path/to/file.proto
</pre></div>
<h2>References</h2>

<p><a href="https://developers.google.com/protocol-buffers/">Google Protocol Buffers</a></p>

    <hr>
    <p>Got a suggestion? A correction, perhaps? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Open an Issue</a> on the Github Repo, or make a <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/protocol-buffer-3.html.markdown">pull request</a> yourself!
    </p>
    <p class="contributed">
    Originally contributed by Shankar Shastri, and updated by <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/protocol-buffer-3.html.markdown">0 contributor(s)</a>.
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="https://github.com/shankarshastri">Shankar Shastri</a>
    </p>

    <p>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>
    </body>
</html>
