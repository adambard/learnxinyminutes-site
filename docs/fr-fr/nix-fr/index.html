<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="fr-fr" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="fr-fr" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="fr-fr" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="fr-fr" class="no-js"> <!--<![endif]-->
    <head>
      <!-- Google tag (gtag.js) -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WXC8R75DEN"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-WXC8R75DEN');
      </script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="fr-fr">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn nix in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/fr-fr/nix-fr/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }
                el.className = theme === "dark" ? "dark" : "light";
                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (!theme) {
                theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light"
              }
              set_theme(theme)
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.onload = function(){
              load_theme();
            };

            // Listen for system preference change
            window
              .matchMedia("(prefers-color-scheme: dark)")
              .addEventListener("change", ({matches:isDark}) => {
                set_theme(isDark ? "dark" : "light")
              })
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Ffr-fr%2Fnix-fr%2F&text=Apprendre+X+en+Y+minutes%2C+o%C3%B9+X%3Dnix">
        Partager cette page
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">Choisis un thème:</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">clair</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">sombre</button>
  </div>
  <h1><a href="/">Apprendre X en Y minutes</a></h1>
  <h2>Où X=nix</h2>
    <p class="filelink">
    Récupérer le code:
    <a href="/docs/files/learn.nix">learn.nix</a>
    </p>
  <div id="doc">
    <p>Nix est un langage fonctionnel développé pour
le gestionnaire de paquet <a href="https://nixos.org/nix/">Nix</a> et
<a href="https://nixos.org/">NixOS</a>.</p>

<p>Les expressions Nix peuvent être évaluées avec
<a href="https://nixos.org/nix/manual/#sec-nix-instantiate">nix-instantiate</a>
ou <a href="https://nixos.org/nix/manual/#ssec-relnotes-2.0"><code>nix repl</code></a>.</p>
<div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">builtins</span><span class="p">;</span> <span class="p">[</span>

  <span class="c1">#  Commentaires</span>
  <span class="c1">#=========================================</span>

  <span class="c1"># Ceci est un commentaire en ligne.</span>

  <span class="cm">/* Ceci est un commentaire</span>
<span class="cm">     écrit sur plusieurs lignes. */</span>


  <span class="c1">#  Booléens</span>
  <span class="c1">#=========================================</span>

  <span class="p">(</span><span class="no">true</span> <span class="o">&amp;&amp;</span> <span class="no">false</span><span class="p">)</span>               <span class="c1"># Et</span>
  <span class="c1">#=&gt; false</span>

  <span class="p">(</span><span class="no">true</span> <span class="o">||</span> <span class="no">false</span><span class="p">)</span>               <span class="c1"># Ou</span>
  <span class="c1">#=&gt; true</span>

  <span class="p">(</span><span class="k">if</span> <span class="mi">3</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="k">then</span> <span class="s2">&quot;a&quot;</span> <span class="k">else</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span>  <span class="c1"># Test logique</span>
  <span class="c1">#=&gt; &quot;a&quot;</span>


  <span class="c1">#  Entiers et nombres flottants</span>
  <span class="c1">#=========================================</span>

  <span class="c1"># Il y a deux types de nombres : les entiers et les flottants.</span>

  <span class="mi">1</span> <span class="mi">0</span> <span class="mi">42</span> <span class="p">(</span><span class="mi">-3</span><span class="p">)</span>       <span class="c1"># Quelques exemples d&#39;entiers</span>

  <span class="mf">123.43</span> <span class="mf">.27e13</span>     <span class="c1"># Quelques exemples de nombre flottants</span>

  <span class="c1"># Les opérations conservent le type du nombre</span>

  <span class="p">(</span><span class="mi">4</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">+</span> <span class="mi">12</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># Addition</span>
  <span class="c1">#=&gt; 20</span>
  <span class="p">(</span><span class="mi">4</span> <span class="o">-</span> <span class="mf">2.5</span><span class="p">)</span>
  <span class="c1">#=&gt; 1.5</span>

  <span class="p">(</span><span class="mi">7</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>           <span class="c1"># Division</span>
  <span class="c1">#=&gt; 3</span>
  <span class="p">(</span><span class="mi">7</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
  <span class="c1">#=&gt; 3.5</span>


  <span class="c1">#  Chaînes de caractères</span>
  <span class="c1">#=========================================</span>

  <span class="s2">&quot;Les chaînes de caractères littérales sont écrites entre guillements.&quot;</span>

  <span class="s2">&quot;</span>
<span class="s2">    Les chaînes de caractères littérales</span>
<span class="s2">    peuvent s&#39;étendre sur</span>
<span class="s2">    plusieurs lignes</span>
<span class="s2">  &quot;</span>

  <span class="s s-Multiline">&#39;&#39;</span>
<span class="s s-Multiline">    Ceci est ce qu&#39;on appelle une</span>
<span class="s s-Multiline">    &quot;chaîne de caractères littérale indentée&quot;.</span>
<span class="s s-Multiline">    Les espaces de début de lignes sont intelligemment supprimées.</span>
<span class="s s-Multiline">  &#39;&#39;</span>

  <span class="s s-Multiline">&#39;&#39;</span>
<span class="s s-Multiline">    a</span>
<span class="s s-Multiline">      b</span>
<span class="s s-Multiline">  &#39;&#39;</span>
  <span class="c1">#=&gt; &quot;a\n  b&quot;</span>

  <span class="p">(</span><span class="s2">&quot;ab&quot;</span> <span class="o">+</span> <span class="s2">&quot;cd&quot;</span><span class="p">)</span>   <span class="c1"># Concaténation de chaînes de caractères</span>
  <span class="c1">#=&gt; &quot;abcd&quot;</span>

  <span class="c1"># L&#39;antiquotation vous permet d&#39;intégrer des valeurs</span>
  <span class="c1"># dans des chaînes de caracères.</span>
  <span class="p">(</span><span class="s2">&quot;Votre répertoire personnel est </span><span class="si">${</span>getEnv <span class="s2">&quot;HOME&quot;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="c1">#=&gt; &quot;Votre répertoire personnel est /home/alice&quot;</span>


  <span class="c1">#  Chemins</span>
  <span class="c1">#=========================================</span>

  <span class="c1"># Nix a un type de variable primitif pour les chemins.</span>
  <span class="l">/tmp/tutorials/learn.nix</span>

  <span class="c1"># Un chemin relatif est résolu en un chemin absolu</span>
  <span class="c1"># au moment de l&#39;évaluation.</span>
  <span class="l">tutorials/learn.nix</span>
  <span class="c1">#=&gt; /the-base-path/tutorials/learn.nix</span>

  <span class="c1"># Un chemin doit toujours contenir au moins une barre oblique (slash).</span>
  <span class="c1"># Un chemin relatif d&#39;un fichier dans le répertoire courant</span>
  <span class="c1"># a donc besoin du préfixe `./`</span>
  <span class="l">./learn.nix</span>
  <span class="c1">#=&gt; /the-base-path/learn.nix</span>

  <span class="c1"># L&#39;opérateur `/` doit être entouré d&#39;espaces afin d&#39;être</span>
  <span class="c1"># traité comme une division</span>
  <span class="mi">7</span><span class="l">/2</span>        <span class="c1"># Ceci est un chemin</span>
  <span class="p">(</span><span class="mi">7</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>    <span class="c1"># Ceci est une division entière</span>


  <span class="c1">#  Importations</span>
  <span class="c1">#=========================================</span>

  <span class="c1"># Un fichier nix contient une seule expression principale sans</span>
  <span class="c1"># variable libre.</span>
  <span class="c1"># Une expression importée s&#39;évalue à la valeur du fichier importé.</span>
  <span class="p">(</span><span class="nb">import</span> <span class="l">/tmp/foo.nix</span><span class="p">)</span>

  <span class="c1"># Les importations peuvent également être spécifiées par des chaînes</span>
  <span class="c1"># de caractères.</span>
  <span class="p">(</span><span class="nb">import</span> <span class="s2">&quot;/tmp/foo.nix&quot;</span><span class="p">)</span>

  <span class="c1"># Les chemins doivent être absolus. Cependant comme les chemins</span>
  <span class="c1"># relatifs sont automatiquement résolus, ils peuvent être utilisés</span>
  <span class="c1"># pour l&#39;importation.</span>
  <span class="p">(</span><span class="nb">import</span> <span class="l">./foo.nix</span><span class="p">)</span>

  <span class="c1"># Attention, cela ne se produit pas avec les chaînes de caractères.</span>
  <span class="p">(</span><span class="nb">import</span> <span class="s2">&quot;./foo.nix&quot;</span><span class="p">)</span>
  <span class="c1">#=&gt; error: string ‘foo.nix’ doesn&#39;t represent an absolute path</span>


  <span class="c1">#  Let</span>
  <span class="c1">#=========================================</span>

  <span class="c1"># Les blocs `let` permettent d&#39;affecter des valeurs avec des variables.</span>
  <span class="p">(</span><span class="k">let</span> <span class="ss">x</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span><span class="p">;</span> <span class="k">in</span>
    x <span class="o">+</span> x <span class="o">+</span> x<span class="p">)</span>
  <span class="c1">#=&gt; &quot;aaa&quot;</span>

  <span class="c1"># Les affectations peuvent se référer les unes aux autres, et leur ordre</span>
  <span class="c1"># n&#39;a pas d&#39;importance.</span>
  <span class="p">(</span><span class="k">let</span> <span class="ss">y</span> <span class="o">=</span> x <span class="o">+</span> <span class="s2">&quot;b&quot;</span><span class="p">;</span>
       <span class="ss">x</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span><span class="p">;</span> <span class="k">in</span>
    y <span class="o">+</span> <span class="s2">&quot;c&quot;</span><span class="p">)</span>
  <span class="c1">#=&gt; &quot;abc&quot;</span>


  <span class="c1"># Les affectations d&#39;un bloc fille écrasent les affections du bloc mère.</span>
  <span class="p">(</span><span class="k">let</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="k">in</span>
    <span class="k">let</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="k">in</span>
      a<span class="p">)</span>
  <span class="c1">#=&gt; 2</span>


  <span class="c1">#  Fonctions</span>
  <span class="c1">#=========================================</span>

  <span class="p">(</span>n<span class="p">:</span> n <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>      <span class="c1"># Fonction qui ajoute 1</span>

  <span class="p">((</span>n<span class="p">:</span> n <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># Fonction précédente appliquée à 5</span>
  <span class="c1">#=&gt; 6</span>

  <span class="c1"># Il n&#39;y a pas de syntaxe pour nommer les fonctions,</span>
  <span class="c1"># mais elles peuvent affectée à une variable par un bloc `let`</span>
  <span class="c1"># comme toutes les autres valeurs.</span>
  <span class="p">(</span><span class="k">let</span> <span class="ss">succ</span> <span class="o">=</span> <span class="p">(</span>n<span class="p">:</span> n <span class="o">+</span> <span class="mi">1</span><span class="p">);</span> <span class="k">in</span> succ <span class="mi">5</span><span class="p">)</span>
  <span class="c1">#=&gt; 6</span>

  <span class="c1"># Une fonction a exactement un seul argument.</span>
  <span class="c1"># Des fonctions à plusieurs arguments peuvent être construites</span>
  <span class="c1"># par imbrificication de fonctions.</span>
  <span class="p">((</span>x<span class="p">:</span> y<span class="p">:</span> x <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> y<span class="p">)</span> <span class="s2">&quot;a&quot;</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span>
  <span class="c1">#=&gt; &quot;a-b&quot;</span>

  <span class="c1"># Il est également possible d&#39;avoir des arguments de fonction nommés.</span>
  <span class="c1"># Nous verrons comment après avoir introduit les ensembles.</span>


  <span class="c1">#  Listes</span>
  <span class="c1">#=========================================</span>

  <span class="c1"># Les listes sont indiquées par des crochets.</span>

  <span class="p">(</span>length <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="s2">&quot;x&quot;</span><span class="p">])</span>
  <span class="c1">#=&gt; 4</span>

  <span class="p">([</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span> <span class="o">++</span> <span class="p">[</span><span class="mi">4</span> <span class="mi">5</span><span class="p">])</span>
  <span class="c1">#=&gt; [1 2 3 4 5]</span>

  <span class="p">(</span>concatLists <span class="p">[[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">]</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">4</span><span class="p">]</span> <span class="p">[</span><span class="mi">5</span><span class="p">]])</span>
  <span class="c1">#=&gt; [1 2 3 4 5]</span>

  <span class="p">(</span>head <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">])</span>
  <span class="c1">#=&gt; 1</span>
  <span class="p">(</span>tail <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">])</span>
  <span class="c1">#=&gt; [2 3]</span>

  <span class="p">(</span>elemAt <span class="p">[</span><span class="s2">&quot;a&quot;</span> <span class="s2">&quot;b&quot;</span> <span class="s2">&quot;c&quot;</span> <span class="s2">&quot;d&quot;</span><span class="p">]</span> <span class="mi">2</span><span class="p">)</span>
  <span class="c1">#=&gt; &quot;c&quot;</span>

  <span class="p">(</span>elem <span class="mi">2</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">])</span>
  <span class="c1">#=&gt; true</span>
  <span class="p">(</span>elem <span class="mi">5</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">])</span>
  <span class="c1">#=&gt; false</span>

  <span class="p">(</span>filter <span class="p">(</span>n<span class="p">:</span> n <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">])</span>
  <span class="c1">#=&gt; [ 1 2 ]</span>


  <span class="c1">#  Ensembles</span>
  <span class="c1">#=========================================</span>

  <span class="c1"># Un ensemble, ou &quot;set&quot;, est un dictionnaire non ordonné avec des clés</span>
  <span class="c1"># en chaîne de caractères.</span>
  <span class="p">{</span> <span class="ss">foo</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">];</span> <span class="ss">bar</span> <span class="o">=</span> <span class="s2">&quot;x&quot;</span><span class="p">;</span> <span class="p">}</span>

  <span class="c1"># L&#39;opérateur `.` extrait une valeur d&#39;un ensemble.</span>
  <span class="p">{</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="ss">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span><span class="o">.</span>a
  <span class="c1">#=&gt; 1</span>

  <span class="c1"># L&#39;opérateur `?` teste si la clé est présente dans l&#39;ensemble.</span>
  <span class="p">({</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="ss">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span> <span class="o">?</span> a<span class="p">)</span>
  <span class="c1">#=&gt; true</span>
  <span class="p">({</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="ss">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span> <span class="o">?</span> c<span class="p">)</span>
  <span class="c1">#=&gt; false</span>

  <span class="c1"># L&#39;opérateur `//` fusionne deux ensembles.</span>
  <span class="p">({</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">}</span> <span class="o">//</span> <span class="p">{</span> <span class="ss">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="p">})</span>
  <span class="c1">#=&gt; { a = 1; b = 2; }</span>

  <span class="c1"># Les valeurs de droite écrasent les valeurs de gauche.</span>
  <span class="p">({</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="ss">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span> <span class="o">//</span> <span class="p">{</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="ss">c</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="p">})</span>
  <span class="c1">#=&gt; { a = 3; b = 2; c = 4; }</span>

  <span class="c1"># Le mot clé `rec` indique un ensemble récursif, ou &quot;recursive set&quot;,</span>
  <span class="c1"># dans lequel les attributs peuvent se référer les uns aux autres.</span>
  <span class="p">(</span><span class="k">let</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="k">in</span>     <span class="p">{</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="ss">b</span> <span class="o">=</span> a<span class="p">;</span> <span class="p">}</span><span class="o">.</span>b<span class="p">)</span>
  <span class="c1">#=&gt; 1</span>
  <span class="p">(</span><span class="k">let</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="k">in</span> <span class="k">rec</span> <span class="p">{</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="ss">b</span> <span class="o">=</span> a<span class="p">;</span> <span class="p">}</span><span class="o">.</span>b<span class="p">)</span>
  <span class="c1">#=&gt; 2</span>

  <span class="c1"># Les ensembles imbriqués peuvent être définis par morceaux.</span>
  <span class="p">{</span>
    a<span class="o">.</span><span class="ss">b</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    a<span class="o">.</span>c<span class="o">.</span><span class="ss">d</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    a<span class="o">.</span>c<span class="o">.</span><span class="ss">e</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="p">}</span><span class="o">.</span>a<span class="o">.</span>c
  <span class="c1">#=&gt; { d = 2; e = 3; }</span>

  <span class="c1"># Les ensembles sont immuables, il est donc impossible de rédéfinir</span>
  <span class="c1"># un attribut :</span>
  <span class="p">{</span>
    <span class="ss">a</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">};</span>
    a<span class="o">.</span><span class="ss">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">#=&gt; attribute &#39;a.b&#39; at (string):3:5 already defined at (string):2:11</span>

  <span class="c1"># Cependant un attribut d&#39;un attribut de l&#39;ensemble peut également</span>
  <span class="c1"># être défini par morceaux même si l&#39;attribut père a été directement</span>
  <span class="c1"># défini.</span>
  <span class="p">{</span>
    <span class="ss">a</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">};</span>
    a<span class="o">.</span><span class="ss">c</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">#=&gt; { a = { b = 1; c = 2; }; }</span>


  <span class="c1">#  With</span>
  <span class="c1">#=========================================</span>

  <span class="c1"># Le corps d&#39;un bloc `with` est évalué avec</span>
  <span class="c1"># les mappings d&#39;un ensemble liés à des variables.</span>
  <span class="p">(</span><span class="k">with</span> <span class="p">{</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="ss">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="p">};</span>
    a <span class="o">+</span> b<span class="p">)</span>
  <span class="c1"># =&gt; 3</span>

  <span class="c1"># Les affectations d&#39;un bloc fille écrasent les affections du bloc mère.</span>
  <span class="p">(</span><span class="k">with</span> <span class="p">{</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="ss">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="p">};</span>
    <span class="p">(</span><span class="k">with</span> <span class="p">{</span> <span class="ss">a</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="p">};</span>
      a <span class="o">+</span> b<span class="p">))</span>
  <span class="c1">#=&gt; 7</span>

  <span class="c1"># La première ligne du tutoriel commence par `with builtins;`</span>
  <span class="c1"># car `builtins` est un ensmble qui contient toutes les fonctions</span>
  <span class="c1"># de base (`length`, `head`, `tail`, `filter`, etc.). Cela permet</span>
  <span class="c1"># de ne pas avoir à écrire `builtins.length` au lieu de simplement</span>
  <span class="c1"># `length` par exemple.</span>


  <span class="c1">#  Modèles d&#39;ensemble</span>
  <span class="c1">#=========================================</span>

  <span class="c1"># Les ensembles sont utiles pour passer plusieurs valeurs</span>
  <span class="c1"># à une fonction.</span>
  <span class="p">(</span>args<span class="p">:</span> args<span class="o">.</span>x <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> args<span class="o">.</span>y<span class="p">)</span> <span class="p">{</span> <span class="ss">x</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span><span class="p">;</span> <span class="ss">y</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span><span class="p">;</span> <span class="p">}</span>
  <span class="c1">#=&gt; &quot;a-b&quot;</span>

  <span class="c1"># On peut l&#39;écrire plus clairement en utilisant des modèles d&#39;ensemble,</span>
  <span class="c1"># ou &quot;set patterns&quot;.</span>
  <span class="p">({</span>x<span class="p">,</span> y<span class="p">}:</span> x <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> y<span class="p">)</span> <span class="p">{</span> <span class="ss">x</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span><span class="p">;</span> <span class="ss">y</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span><span class="p">;</span> <span class="p">}</span>
  <span class="c1">#=&gt; &quot;a-b&quot;</span>

  <span class="c1"># Par défaut, le modèle échoue si l&#39;ensemble contient des clés</span>
  <span class="c1"># supplémentaires.</span>
  <span class="p">({</span>x<span class="p">,</span> y<span class="p">}:</span> x <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> y<span class="p">)</span> <span class="p">{</span> <span class="ss">x</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span><span class="p">;</span> <span class="ss">y</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span><span class="p">;</span> <span class="ss">z</span> <span class="o">=</span> <span class="s2">&quot;c&quot;</span><span class="p">;</span> <span class="p">}</span>
  <span class="c1">#=&gt; error: anonymous function called with unexpected argument ‘z’</span>

  <span class="c1"># L&#39;ajout de `, ...` permet d&#39;ignorer les clés supplémentaires.</span>
  <span class="p">({</span>x<span class="p">,</span> y<span class="p">,</span> <span class="o">...</span><span class="p">}:</span> x <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> y<span class="p">)</span> <span class="p">{</span> <span class="ss">x</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span><span class="p">;</span> <span class="ss">y</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span><span class="p">;</span> <span class="ss">z</span> <span class="o">=</span> <span class="s2">&quot;c&quot;</span><span class="p">;</span> <span class="p">}</span>
  <span class="c1">#=&gt; &quot;a-b&quot;</span>


  <span class="c1">#  Erreurs</span>
  <span class="c1">#=========================================</span>

  <span class="c1"># `throw` provoque l&#39;abandon de l&#39;évaluation avec un message d&#39;erreur.</span>
  <span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="nb">throw</span> <span class="s2">&quot;foo&quot;</span><span class="p">))</span>
  <span class="c1">#=&gt; error: foo</span>

  <span class="c1"># `tryEval` permet de capturer les erreurs.</span>
  <span class="p">(</span>tryEval <span class="mi">42</span><span class="p">)</span>
  <span class="c1">#=&gt; { success = true; value = 42; }</span>
  <span class="p">(</span>tryEval <span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="nb">throw</span> <span class="s2">&quot;foo&quot;</span><span class="p">)))</span>
  <span class="c1">#=&gt; { success = false; value = false; }</span>

  <span class="c1"># `abort` est comme `throw`, mais l&#39;erreur est alors fatale :</span>
  <span class="c1"># elle ne peut pas être capturée.</span>
  <span class="p">(</span>tryEval <span class="p">(</span><span class="nb">abort</span> <span class="s2">&quot;foo&quot;</span><span class="p">))</span>
  <span class="c1">#=&gt; error: evaluation aborted with the following error message: ‘foo’</span>

  <span class="c1"># `assert` s&#39;évalue à la valeur donnée si le test est vrai;</span>
  <span class="c1"># sinon il lève une exception capturable.</span>
  <span class="p">(</span><span class="k">assert</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">42</span><span class="p">)</span>
  <span class="c1">#=&gt; 42</span>
  <span class="p">(</span><span class="k">assert</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">42</span><span class="p">)</span>
  <span class="c1">#=&gt; error: assertion failed at (string):1:1</span>
  <span class="p">(</span>tryEval <span class="p">(</span><span class="k">assert</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">42</span><span class="p">))</span>
  <span class="c1">#=&gt; { success = false; value = false; }</span>


  <span class="c1">#  Impureté</span>
  <span class="c1">#=========================================</span>


  <span class="c1"># La répétabilité des constructions étant critique pour le</span>
  <span class="c1"># gestionnaire de paquets Nix, la pureté fonctionnelle est</span>
  <span class="c1"># mise en avant dans le langage Nix. Cependant, il existe des</span>
  <span class="c1"># impuretés.</span>

  <span class="c1"># Vous pouvez vous référer aux variables d&#39;environnement.</span>
  <span class="p">(</span>getEnv <span class="s2">&quot;HOME&quot;</span><span class="p">)</span>
  <span class="c1">#=&gt; &quot;/home/alice&quot;</span>


  <span class="c1"># La fonction `trace` est utilisée pour le débogage.</span>
  <span class="c1"># Elle affiche le premier argument dans `stderr` et</span>
  <span class="c1"># évalue le second argument.</span>
  <span class="p">(</span>trace <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>
  <span class="c1">#=&gt; trace: 1</span>
  <span class="c1">#=&gt; 2</span>

  <span class="c1"># Vous pouvez écrire des fichiers dans le magasin Nix (Nix store).</span>
  <span class="c1"># Bien qu&#39;impur, c&#39;est assez sûr car le nom du fichier est dérivé</span>
  <span class="c1"># du hachage de  son contenu. On peut lire des fichiers depuis n&#39;importe où.</span>
  <span class="c1"># Dans cet exemple, on écrit un fichier dans le magasin, puis on le relit.</span>
  <span class="p">(</span><span class="k">let</span> <span class="ss">filename</span> <span class="o">=</span> toFile <span class="s2">&quot;foo.txt&quot;</span> <span class="s2">&quot;hello!&quot;</span><span class="p">;</span> <span class="k">in</span>
    <span class="p">[</span>filename <span class="p">(</span><span class="nb">builtins</span><span class="o">.</span>readFile filename<span class="p">)])</span>
  <span class="c1">#=&gt; [ &quot;/nix/store/ayh05aay2anx135prqp0cy34h891247x-foo.txt&quot; &quot;hello!&quot; ]</span>

  <span class="c1"># Il est également possible de télécharger des fichiers dans le magasin Nix.</span>
  <span class="p">(</span>fetchurl <span class="s2">&quot;https://example.com/package-1.2.3.tgz&quot;</span><span class="p">)</span>
  <span class="c1">#=&gt; &quot;/nix/store/2drvlh8r57f19s9il42zg89rdr33m2rm-package-1.2.3.tgz&quot;</span>

<span class="p">]</span>
</pre></div>
<h3>Pour en savoir plus (anglais)</h3>

<ul>
<li><a href="https://nixos.org/nix/manual/#ch-expression-language">Nix Manual - Nix expression language</a></li>
<li><a href="https://medium.com/@MrJamesFisher/nix-by-example-a0063a1a4c55">James Fisher - Nix by example - Part 1: The Nix expression language</a></li>
<li><a href="https://ops.functionalalgebra.com/nix-by-example/">Susan Potter - Nix Cookbook - Nix By Example</a></li>
<li><a href="https://web.archive.org/web/20210121042658/https://ebzzry.io/en/nix/#nix">Rommel Martinez - A Gentle Introduction to the Nix Family</a></li>
</ul>

    <hr>
    <p>Vous avez une suggestion ? Peut-être une correction ? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Ouvrez un ticket</a> sur GitHub, ou faites vous-même une <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/fr-fr/nix-fr.html.markdown">pull request</a> !
    </p>
    <p class="contributed">
    Version originale par Chris Martin, mis à jour par <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/fr-fr/nix-fr.html.markdown">2 contributeur(s)</a>.
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="http://chris-martin.org/">Chris Martin</a>,
        <a href="https://ebzzry.io">Rommel Martinez</a>,
        <a href="https://candeira.com/">Javier Candeira</a>
    </p>

    <p>
      Translated by:
        <a href="https://github.com/loicreynier">Loïc Reynier</a>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>
    </body>
</html>
