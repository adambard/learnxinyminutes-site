<!DOCTYPE html>
<html lang="fr">
  <head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WXC8R75DEN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-WXC8R75DEN');
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Language" content="fr">
    <title>Learn Lua in Y Minutes</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto+Slab:wght@100..900&family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/screen.css">
    <link rel="stylesheet" href="/css/light.css">
    <link rel="stylesheet" href="/css/dark.css">

    <link rel="canonical" href="https://learnxinyminutes.com/fr/lua/">
    <script>
      localStorage.removeItem("lxiym_theme");
    </script>
  </head>
  <body>
    <div class="container">
      <div class="share">
        <span class="sharemsg">
          <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Ffr%2Flua%2F&amp;text=Apprendre+X+en+Y+minutes%2C+o%C3%B9+X%3DLua">
            Partager cette page
          </a>
        </span>
        <span class='st_facebook_large' displayText='Facebook'></span>
        <span class='st_twitter_large' displayText='Tweet'></span>
      </div>
      <h1><a href="/">Apprendre X en Y minutes</a></h1>
      <h2>Où X=Lua</h2>
      <p class="filelink">
        Récupérer le code:
        <a href="/fr/files/learnlua.lua">learnlua.lua</a>
      </p>
      <div id="doc">
<div class="highlight"><pre lang="lua"><span class="c1">-- Les commentaires unilignes commencent par un double tiret.</span>

<span class="cm">--[[</span>
<span class="cm">     Les doubles crochets à la suite du double tiret</span>
<span class="cm">     permettent d&#39;insérer des commentaires multilignes.</span>
<span class="cm">--]]</span>

<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 1. Variables et contrôle d&#39;exécution.</span>
<span class="c1">----------------------------------------------------</span>

<span class="nv">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="w">  </span><span class="c1">-- Tous les nombres sont de type double.</span>
<span class="c1">-- Rassurez vous cependant, les doubles stockés sur 64-bits</span>
<span class="c1">-- en réservent 52 pour la valeur exacte des entiers. La</span>
<span class="c1">-- précision n&#39;est donc pas un problème pour tout entier qui</span>
<span class="c1">-- peut être codé sur moins de 52 bits.</span>

<span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;walternate&#39;</span><span class="w">  </span><span class="c1">-- Chaines de caractères immuables comme en Python.</span>
<span class="nv">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;une chaine avec des guillemets doubles&quot;</span>
<span class="nv">u</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[[les double crochets permettent</span>
<span class="s">      d&#39;avoir une chaine de caractères</span>
<span class="s">      sur plusieurs lignes.]]</span>
<span class="nv">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">nil</span><span class="w">  </span><span class="c1">-- Affecte la valeur nulle à t; Lua possède un ramasse-miettes</span>

<span class="c1">-- Le do/end définit un bloc de code</span>
<span class="kr">while</span><span class="w"> </span><span class="nv">num</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="nv">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="c1">-- Pas d&#39;opérateurs de type ++ ou +=.</span>
<span class="kr">end</span>

<span class="c1">-- Les structures en if:</span>
<span class="kr">if</span><span class="w"> </span><span class="nv">num</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="kr">then</span>
<span class="w">  </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;supérieur à 40&#39;</span><span class="p">)</span>
<span class="kr">elseif</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="s1">&#39;walternate&#39;</span><span class="w"> </span><span class="kr">then</span><span class="w">  </span><span class="c1">-- ~= : est différent de.</span>
<span class="w">  </span><span class="c1">-- Le test d&#39;égalité se fait avec == comme en Python.</span>
<span class="w">  </span><span class="nb">io.write</span><span class="p">(</span><span class="s1">&#39;inférieur à 40</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="w">  </span><span class="c1">-- Écrit par defaut sur la sortie stdout.</span>
<span class="kr">else</span>
<span class="w">  </span><span class="c1">-- Les variables sont globales par défaut.</span>
<span class="w">  </span><span class="nv">thisIsGlobal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="c1">-- le style camelCase est courant.</span>

<span class="w">  </span><span class="c1">-- Une variable locale est déclarée avec le mot-clé local:</span>
<span class="w">  </span><span class="kd">local</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">io.read</span><span class="p">()</span><span class="w">  </span><span class="c1">-- Permet de lire la ligne suivante dans stdin.</span>

<span class="w">  </span><span class="c1">-- .. est l&#39;opérateur de concaténation:</span>
<span class="w">  </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;L&#39;hiver approche, &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">line</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">-- Les variables non définies reçoivent par défaut la valeur nil.</span>
<span class="nv">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">anUnknownVariable</span><span class="w">  </span><span class="c1">-- Maintenant, foo = nil.</span>

<span class="nv">aBoolValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>

<span class="c1">-- Seuls nil et false sont des valeurs fausses.</span>
<span class="c1">-- Mais 0 et &#39;&#39; sont des valeurs vraies!</span>
<span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">aBoolValue</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;etait faux&#39;</span><span class="p">)</span><span class="w"> </span><span class="kr">end</span>

<span class="c1">-- L&#39;évaluation du &#39;or&#39; et du &#39;and&#39; est court-circuité.</span>
<span class="c1">-- Comme avec les ternaires du C et du JS: a?b:c</span>
<span class="nv">ans</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aBoolValue</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="s1">&#39;oui&#39;</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;non&#39;</span><span class="w">  </span><span class="c1">--&gt; &#39;non&#39;</span>

<span class="nv">karlSum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="kr">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="kr">do</span><span class="w">  </span><span class="c1">-- Les bornes sont incluses dans l&#39;intervalle.</span>
<span class="w">  </span><span class="nv">karlSum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">karlSum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">i</span>
<span class="kr">end</span>

<span class="c1">-- Utilisez &quot;100, 1, -1&quot; pour la décrémentation:</span>
<span class="nv">fredSum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="kr">for</span><span class="w"> </span><span class="nv">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="kr">do</span><span class="w"> </span><span class="nv">fredSum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">fredSum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">j</span><span class="w"> </span><span class="kr">end</span>

<span class="c1">-- En général, l&#39;intervalle est début, fin[, pas].</span>

<span class="c1">-- Un autre type de boucle:</span>
<span class="kr">repeat</span>
<span class="w">  </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;the way of the future&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="nv">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">num</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span>
<span class="kr">until</span><span class="w"> </span><span class="nv">num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span>


<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 2. Fonctions.</span>
<span class="c1">----------------------------------------------------</span>

<span class="kr">function</span><span class="w"> </span><span class="nf">fib</span><span class="p">(</span><span class="nv">n</span><span class="p">)</span>
<span class="w">  </span><span class="kr">if</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="kr">end</span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="nf">fib</span><span class="p">(</span><span class="nv">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">fib</span><span class="p">(</span><span class="nv">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">-- Lua implémente les fermetures et les fonctions anonymes:</span>
<span class="kr">function</span><span class="w"> </span><span class="nf">adder</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span>
<span class="w">  </span><span class="c1">-- La fonction retournée est créée lorsque adder est appelé</span>
<span class="w">  </span><span class="c1">-- et elle se rappelle de la valeur de x.</span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="p">(</span><span class="nv">y</span><span class="p">)</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">y</span><span class="w"> </span><span class="kr">end</span>
<span class="kr">end</span>
<span class="nv">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">adder</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="nv">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">adder</span><span class="p">(</span><span class="mi">36</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nf">a1</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span><span class="w">  </span><span class="c1">--&gt; 25</span>
<span class="nb">print</span><span class="p">(</span><span class="nf">a2</span><span class="p">(</span><span class="mi">64</span><span class="p">))</span><span class="w">  </span><span class="c1">--&gt; 100</span>

<span class="c1">-- Les valeurs de retour, les appels de fonction, les assignations</span>
<span class="c1">-- supportent tous les listes qui peuvent ne pas correspondre en longueur.</span>
<span class="c1">-- Dans ce cas, les variables à assigner en supplément reçoivent nil</span>
<span class="c1">-- tandis que les valeurs à attribuer en supplément sont ignorées</span>

<span class="nv">x</span><span class="p">,</span><span class="w"> </span><span class="nv">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="c1">-- x = 1 et y = 2</span>
<span class="nv">x</span><span class="p">,</span><span class="w"> </span><span class="nv">y</span><span class="p">,</span><span class="w"> </span><span class="nv">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="c1">-- x = 1, y = 2 et z = nil</span>
<span class="nv">x</span><span class="p">,</span><span class="w"> </span><span class="nv">y</span><span class="p">,</span><span class="w"> </span><span class="nv">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="c1">-- x = 1, y = 2, z = 3, et 4 est ignoré.</span>

<span class="kr">function</span><span class="w"> </span><span class="nf">bar</span><span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="w"> </span><span class="nv">b</span><span class="p">,</span><span class="w"> </span><span class="nv">c</span><span class="p">)</span>
<span class="w">  </span><span class="nb">print</span><span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="w"> </span><span class="nv">b</span><span class="p">,</span><span class="w"> </span><span class="nv">c</span><span class="p">)</span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="mi">42</span>
<span class="kr">end</span>

<span class="nv">x</span><span class="p">,</span><span class="w"> </span><span class="nv">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">bar</span><span class="p">(</span><span class="s1">&#39;zaphod&#39;</span><span class="p">)</span><span class="w">  </span><span class="c1">--&gt; affiche &quot;zaphod nil nil&quot;</span>
<span class="c1">-- x = 4, y = 8, les valeurs 15 à 42 sont ignorées.</span>

<span class="c1">-- Les fonctions sont des valeurs de première classe</span>
<span class="c1">-- et peuvent être locales/globales.</span>
<span class="c1">-- Les déclarations suivantes sont identiques:</span>
<span class="kr">function</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="kr">end</span>
<span class="nv">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="p">(</span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="kr">end</span>

<span class="c1">-- Il en va de même pour les déclarations suivantes:</span>
<span class="kd">local</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="nf">g</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="nb">math.sin</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="kr">end</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="nb">math.sin</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="kr">end</span>
<span class="c1">-- Sauf que pour le dernier cas, même si local g = function(x)</span>
<span class="c1">-- est équivalent à local function g(x), il n&#39;est pas possible</span>
<span class="c1">-- de faire appel à g à l&#39;intérieur du corps de la fonction (récursion)</span>

<span class="c1">-- À moins de déclarer la fonction auparavant:</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">g</span><span class="p">;</span><span class="w"> </span><span class="nv">g</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="p">(</span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="nb">math.sin</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="kr">end</span>

<span class="c1">-- À propos, les fonctions trigonométriques interprètent</span>
<span class="c1">-- leurs arguments en radians.</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">math.cos</span><span class="p">(</span><span class="nb">math.pi</span><span class="p">))</span><span class="w"> </span><span class="c1">-- affiche &quot;-1&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">math.sin</span><span class="p">(</span><span class="nb">math.pi</span><span class="p">))</span><span class="w"> </span><span class="c1">-- affiche &quot;0&quot;</span>

<span class="c1">-- Lorsqu&#39;une fonction est appelée avec un seul argument qui est une chaine,</span>
<span class="c1">-- les parenthèses peuvent être omises:</span>
<span class="nb">print</span><span class="w"> </span><span class="s1">&#39;hello&#39;</span><span class="w">  </span><span class="c1">-- équivalent à print(&#39;hello&#39;).</span>

<span class="c1">-- Lorsqu&#39;une fonction est appelée avec un seul argument qui est une table,</span>
<span class="c1">-- les parenthèses peuvent aussi être omises.</span>
<span class="nb">print</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="c1">-- équivalent à print({}).</span>


<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 3. Tables.</span>
<span class="c1">----------------------------------------------------</span>

<span class="c1">-- Tables = Seule structure de données en Lua;</span>
<span class="c1">--          Ce sont des listes assotiatives.</span>
<span class="c1">-- Elles sont similaires aux tables PHP ou aux objets JS :</span>
<span class="c1">-- des tables-dictionnaires que l&#39;on peut utiliser en tant que listes.</span>

<span class="c1">-- Tables en tant que dictionnaires:</span>

<span class="c1">-- Les clés sont des chaines de caractères par défaut:</span>
<span class="nv">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">key1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;valeur1&#39;</span><span class="p">,</span><span class="w"> </span><span class="nv">key2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">}</span>

<span class="c1">-- Elles peuvent être indexées avec la notation en point, comme en JS:</span>
<span class="nb">print</span><span class="p">(</span><span class="nv">t</span><span class="p">.</span><span class="py">key1</span><span class="p">)</span><span class="w">  </span><span class="c1">-- Affiche &quot;valeur1&quot;.</span>
<span class="nv">t</span><span class="p">.</span><span class="py">newKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w">  </span><span class="c1">-- Ajoute une nouvelle paire clé/valeur.</span>
<span class="nv">t</span><span class="p">.</span><span class="py">key2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">nil</span><span class="w">   </span><span class="c1">-- Supprime la clé &quot;key2&quot; de la table.</span>

<span class="c1">-- Notation littérale pour toute valeur non nulle en tant que clé:</span>
<span class="nv">u</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{[</span><span class="s1">&#39;@!#&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;qbert&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[{}]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1729</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mf">6.28</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;tau&#39;</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="nv">u</span><span class="p">[</span><span class="mf">6.28</span><span class="p">])</span><span class="w">  </span><span class="c1">-- affiche &quot;tau&quot;</span>

<span class="c1">-- La correspondance des clés se fait par valeur pour</span>
<span class="c1">-- les nombres et les chaines, mais par référence pour les tables.</span>
<span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">u</span><span class="p">[</span><span class="s1">&#39;@!#&#39;</span><span class="p">]</span><span class="w">  </span><span class="c1">-- a = &#39;qbert&#39;.</span>
<span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">u</span><span class="p">[{}]</span><span class="w">     </span><span class="c1">-- On pourrait s&#39;attendre à 1729, mais l&#39;on obtient nil:</span>
<span class="c1">-- b = nil car la clé utilisée n&#39;est pas le même objet que celui</span>
<span class="c1">-- utilisé pour stocker la valeur originale 1729.</span>

<span class="c1">-- Si une fonction prend en argument une seule table, l&#39;on peut</span>
<span class="c1">-- omettre les parenthèses:</span>
<span class="kr">function</span><span class="w"> </span><span class="nf">h</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="nb">print</span><span class="p">(</span><span class="nv">x</span><span class="p">.</span><span class="py">key1</span><span class="p">)</span><span class="w"> </span><span class="kr">end</span>
<span class="nv">h</span><span class="p">{</span><span class="nv">key1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Sonmi~451&#39;</span><span class="p">}</span><span class="w">  </span><span class="c1">-- Affiche &#39;Sonmi~451&#39;.</span>

<span class="kr">for</span><span class="w"> </span><span class="nv">key</span><span class="p">,</span><span class="w"> </span><span class="nv">val</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">pairs</span><span class="p">(</span><span class="nv">u</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span><span class="w">  </span><span class="c1">-- Parcours d&#39;une table.</span>
<span class="w">  </span><span class="nb">print</span><span class="p">(</span><span class="nv">key</span><span class="p">,</span><span class="w"> </span><span class="nv">val</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">-- _G est une table spéciale contenant toutes les variables globales,</span>
<span class="c1">-- et donc elle même.</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">_G</span><span class="p">[</span><span class="s1">&#39;_G&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">_G</span><span class="p">)</span><span class="w">  </span><span class="c1">-- Affiche &#39;true&#39;.</span>

<span class="c1">-- Tables en tant que listes:</span>

<span class="c1">-- De manière implicite, les clés sont des nombres entiers:</span>
<span class="nv">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;value1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;value2&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">1.21</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gigawatts&#39;</span><span class="p">}</span>
<span class="kr">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">#</span><span class="nv">v</span><span class="w"> </span><span class="kr">do</span><span class="w">  </span><span class="c1">-- #v retourne la taille de la table v si elle est une liste.</span>
<span class="w">  </span><span class="nb">print</span><span class="p">(</span><span class="nv">v</span><span class="p">[</span><span class="nv">i</span><span class="p">])</span><span class="w">  </span><span class="c1">-- Attention, en Lua, les indices commencent à 1!</span>
<span class="kr">end</span>
<span class="c1">-- Il n&#39;existe pas vraiment de type &#39;liste&#39; en Lua, v est juste</span>
<span class="c1">-- une table avec des clés qui sont des nombres entiers consécutifs</span>
<span class="c1">-- commençant à 1. Lua le traite comme étant une liste.</span>

<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 3.1 Métatables and métaméthodes.</span>
<span class="c1">----------------------------------------------------</span>

<span class="c1">-- Une table peut avoir une métatable qui confère à la table</span>
<span class="c1">-- un patron/prototype de conception (surcharge d&#39;opération). Nous verrons</span>
<span class="c1">-- dans la suite comment les métatables imitent le prototypage du JS.</span>

<span class="nv">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span><span class="w">  </span><span class="c1">-- Représente la fraction a/b.</span>
<span class="nv">f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span>

<span class="c1">-- Ceci créée une erreur:</span>
<span class="c1">-- s = f1 + f2</span>

<span class="nv">metafraction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
<span class="kr">function</span><span class="w"> </span><span class="nc">metafraction</span><span class="p">.</span><span class="nf">__add</span><span class="p">(</span><span class="nv">f1</span><span class="p">,</span><span class="w"> </span><span class="nv">f2</span><span class="p">)</span>
<span class="w">  </span><span class="kd">local</span><span class="w"> </span><span class="nv">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
<span class="w">  </span><span class="nv">sum</span><span class="p">.</span><span class="py">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">f1</span><span class="p">.</span><span class="py">b</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">f2</span><span class="p">.</span><span class="py">b</span>
<span class="w">  </span><span class="nv">sum</span><span class="p">.</span><span class="py">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">f1</span><span class="p">.</span><span class="py">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">f2</span><span class="p">.</span><span class="py">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">f2</span><span class="p">.</span><span class="py">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">f1</span><span class="p">.</span><span class="py">b</span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="nv">sum</span>
<span class="kr">end</span>

<span class="nb">setmetatable</span><span class="p">(</span><span class="nv">f1</span><span class="p">,</span><span class="w"> </span><span class="nv">metafraction</span><span class="p">)</span>
<span class="nb">setmetatable</span><span class="p">(</span><span class="nv">f2</span><span class="p">,</span><span class="w"> </span><span class="nv">metafraction</span><span class="p">)</span>

<span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">f1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">f2</span><span class="w">  </span><span class="c1">-- appèle __add(f1, f2) de la métatable de f1</span>

<span class="c1">-- f1, f2 ne possèdent pas de clé qui pointent vers leur métatable, comme</span>
<span class="c1">-- avec les prototypes en JS. Mais l&#39;on peut utiliser getmetatable(f1).</span>
<span class="c1">-- La métatable est une table normale avec des clés prédéfinies, comme __add.</span>

<span class="c1">-- Mais la ligne suivante génère une erreur puisque s n&#39;a pas de métatable:</span>
<span class="c1">-- t = s + s</span>
<span class="c1">-- En implémentant de l&#39;orienté objet, comme nous le verrons par la suite,</span>
<span class="c1">-- le problème est résolu.</span>

<span class="c1">-- Une clé __index dans une métatable mt surcharge l&#39;indexation dans sa table t</span>
<span class="c1">-- si la clé est absente de cette table t:</span>
<span class="nv">defaultFavs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">animal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;gru&#39;</span><span class="p">,</span><span class="w"> </span><span class="nv">food</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;donuts&#39;</span><span class="p">}</span>
<span class="nv">myFavs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">food</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;pizza&#39;</span><span class="p">}</span>
<span class="nb">setmetatable</span><span class="p">(</span><span class="nv">myFavs</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nv">__index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">defaultFavs</span><span class="p">})</span>
<span class="nv">eatenBy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">myFavs</span><span class="p">.</span><span class="py">animal</span><span class="w">  </span><span class="c1">-- Affiche &quot;gru&quot;! merci à la métatable!</span>

<span class="c1">-- Ainsi donc, un accès direct à une valeur dans une table via une clé</span>
<span class="c1">-- inexistante (ce qui normalement retourne &quot;nil&quot;) conduira à exploiter</span>
<span class="c1">-- le champ __index de la métatable. Cela peut être récursif.</span>

<span class="c1">-- Le champ __index peut aussi être une fonction (tbl, clé)</span>
<span class="c1">-- ce qui permet une gestion plus souple des indexations.</span>

<span class="c1">-- Les clés __index, __add,... sont appelées métaméthodes.</span>
<span class="c1">-- En voici la liste complète:</span>

<span class="c1">-- __add(a, b)                   pour a + b</span>
<span class="c1">-- __sub(a, b)                   pour a - b</span>
<span class="c1">-- __mul(a, b)                   pour a * b</span>
<span class="c1">-- __div(a, b)                   pour a / b</span>
<span class="c1">-- __mod(a, b)                   pour a % b</span>
<span class="c1">-- __pow(a, b)                   pour a ^ b</span>
<span class="c1">-- __unm(a)                      pour -a</span>
<span class="c1">-- __concat(a, b)                pour a .. b</span>
<span class="c1">-- __len(a)                      pour #a</span>
<span class="c1">-- __eq(a, b)                    pour a == b</span>
<span class="c1">-- __lt(a, b)                    pour a &lt; b</span>
<span class="c1">-- __le(a, b)                    pour a &lt;= b</span>
<span class="c1">-- __index(a, b)  &lt;fn ou table&gt;  pour a.b</span>
<span class="c1">-- __newindex(a, b, c)           pour a.b = c</span>
<span class="c1">-- __call(a, ...)                pour a(...)</span>

<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 3.2 Pseudo-orienté objet et héritage.</span>
<span class="c1">----------------------------------------------------</span>

<span class="c1">-- Lua n&#39;implémente pas d&#39;orienté objet par défaut.</span>
<span class="c1">-- Mais il reste possible d&#39;imiter de plusieurs manières</span>
<span class="c1">-- le concept de &quot;classe&quot; grâce aux tables et aux métatables.</span>

<span class="c1">-- L&#39;explication pour l&#39;exemple qui suit vient juste après.</span>

<span class="nv">Dog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w">                                   </span><span class="c1">-- 1.</span>

<span class="kr">function</span><span class="w"> </span><span class="nc">Dog</span><span class="p">:</span><span class="nf">new</span><span class="p">()</span><span class="w">                         </span><span class="c1">-- 2.</span>
<span class="w">  </span><span class="kd">local</span><span class="w"> </span><span class="nv">newObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">sound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;woof&#39;</span><span class="p">}</span><span class="w">          </span><span class="c1">-- 3.</span>
<span class="w">  </span><span class="nv">self</span><span class="p">.</span><span class="py">__index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">self</span><span class="w">                      </span><span class="c1">-- 4.</span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="nb">setmetatable</span><span class="p">(</span><span class="nv">newObj</span><span class="p">,</span><span class="w"> </span><span class="nv">self</span><span class="p">)</span><span class="w">        </span><span class="c1">-- 5.</span>
<span class="kr">end</span>

<span class="kr">function</span><span class="w"> </span><span class="nc">Dog</span><span class="p">:</span><span class="nf">makeSound</span><span class="p">()</span><span class="w">                   </span><span class="c1">-- 6.</span>
<span class="w">  </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Je dis: &#39;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">self</span><span class="p">.</span><span class="py">sound</span><span class="o">..</span><span class="s1">&#39;!&#39;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="nv">mrDog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Dog</span><span class="p">:</span><span class="nf">new</span><span class="p">()</span><span class="w">                          </span><span class="c1">-- 7.</span>
<span class="nv">mrDog</span><span class="p">:</span><span class="nf">makeSound</span><span class="p">()</span><span class="w">  </span><span class="c1">-- &#39;Je dis: woof!       -- 8.</span>

<span class="c1">-- 1. Dog agit comme une classe; c&#39;est une simple table.</span>
<span class="c1">-- 2. L&#39;expression tbl:fn(...) est identique à</span>
<span class="c1">--    tbl.fn(self, ...)</span>
<span class="c1">--    La notation : permet de passer par défaut un premier</span>
<span class="c1">--    argument appelé &quot;self&quot; à la fonction tbl.fn</span>
<span class="c1">--    Voir 7 &amp; 8 ci-après pour comprendre comment self prend</span>
<span class="c1">--    sa valeur.</span>
<span class="c1">-- 3. newObj sera une instance de la classe Dog.</span>
<span class="c1">-- 4. self = la classe instanciée. Souvent, self = Dog, mais</span>
<span class="c1">--    cela peut changer du fait de l&#39;héritage.</span>
<span class="c1">--    newObj reçoit les fonctions de self si l&#39;__index des</span>
<span class="c1">--    métatables de newObj et de self pointent vers self.</span>
<span class="c1">-- 5. Rappel: setmetatable retourne son premier argument.</span>
<span class="c1">-- 6. La notation : fonctionne comme au 2, mais cette fois, self</span>
<span class="c1">--    est une instance au lieu d&#39;être une classe.</span>
<span class="c1">-- 7. Similaire à Dog.new(Dog), donc self = Dog dans new().</span>
<span class="c1">-- 8. Similaire à mrDog.makeSound(mrDog); self = mrDog.</span>

<span class="c1">----------------------------------------------------</span>

<span class="c1">-- Exemple d&#39;héritage:</span>

<span class="nv">LoudDog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Dog</span><span class="p">:</span><span class="nf">new</span><span class="p">()</span><span class="w">                           </span><span class="c1">-- 1.</span>

<span class="kr">function</span><span class="w"> </span><span class="nc">LoudDog</span><span class="p">:</span><span class="nf">makeSound</span><span class="p">()</span>
<span class="w">  </span><span class="kd">local</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">self</span><span class="p">.</span><span class="py">sound</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w">                 </span><span class="c1">-- 2.</span>
<span class="w">  </span><span class="nb">print</span><span class="p">(</span><span class="nv">s</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">s</span><span class="o">..</span><span class="s1">&#39;!&#39;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="nv">seymour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">LoudDog</span><span class="p">:</span><span class="nf">new</span><span class="p">()</span><span class="w">                       </span><span class="c1">-- 3.</span>
<span class="nv">seymour</span><span class="p">:</span><span class="nf">makeSound</span><span class="p">()</span><span class="w">  </span><span class="c1">-- &#39;woof woof woof!&#39;     -- 4.</span>

<span class="c1">-- 1. LoudDog reçoit les méthodes et les variables de Dog.</span>
<span class="c1">-- 2. self possède une clé &#39;sound&#39;, reçue de new(), voir 3.</span>
<span class="c1">-- 3. Similaire à LoudDog.new(LoudDog) et traduit en Dog.new(LoudDog),</span>
<span class="c1">--    puisque LoudDog ne possède pas de clé &#39;new&#39;, mais a une métatable</span>
<span class="c1">--    qui a la clé __index = Dog.</span>
<span class="c1">--    Résulat: la métatable de seymour est LoudDog, et</span>
<span class="c1">--    LoudDog.__index = LoudDog. Donc seymour.key deviendra soit égal à</span>
<span class="c1">--    seymour.key, LoudDog.key, Dog.key, selon le fait qu&#39;il s&#39;agira</span>
<span class="c1">--    de la première table ayant la clé &#39;key&#39; en question, en remontant</span>
<span class="c1">--    dans la hiérarchie.</span>
<span class="c1">-- 4. La clé &#39;makeSound&#39; est trouvée dans LoudDog; cela est similaire</span>
<span class="c1">--    à LoudDog.makeSound(seymour).</span>

<span class="c1">-- Si besoin est, la méthode new() de la sous-classe est</span>
<span class="c1">-- identique à la méthode new() de sa classe mère:</span>
<span class="kr">function</span><span class="w"> </span><span class="nc">LoudDog</span><span class="p">:</span><span class="nf">new</span><span class="p">()</span>
<span class="w">  </span><span class="kd">local</span><span class="w"> </span><span class="nv">newObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
<span class="w">  </span><span class="c1">-- Prépare self à être la superclasse de newObj:</span>
<span class="w">  </span><span class="nv">self</span><span class="p">.</span><span class="py">__index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">self</span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="nb">setmetatable</span><span class="p">(</span><span class="nv">newObj</span><span class="p">,</span><span class="w"> </span><span class="nv">self</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">----------------------------------------------------</span>
<span class="c1">-- 4. Modules.</span>
<span class="c1">----------------------------------------------------</span>


<span class="c1">--[[ Cette section est mise en commentaire afin que le reste du</span>
<span class="c1">--   ce script reste exécutable.</span>
</pre></div>
<div class="highlight"><pre lang="lua"><span class="c1">-- Supposons que le fichier mod.lua contienne ceci:</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>

<span class="kd">local</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="nf">sayMyName</span><span class="p">()</span>
<span class="w">  </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hrunkner&#39;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="kr">function</span><span class="w"> </span><span class="nc">M</span><span class="p">.</span><span class="nf">sayHello</span><span class="p">()</span>
<span class="w">  </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="nf">sayMyName</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">return</span><span class="w"> </span><span class="nv">M</span>

<span class="c1">--  Un autre fichier peut exploiter le contenu défini dans mod.lua&#39;s:</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">mod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s1">&#39;mod&#39;</span><span class="p">)</span><span class="w">  </span><span class="c1">-- Exécute le fichier mod.lua.</span>

<span class="c1">-- require est le moyen par défaut d&#39;inclure des modules.</span>
<span class="c1">-- require agit comme:     (si non trouvé en cache; voir ci-après)</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">mod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kr">function</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nv">contenu</span><span class="w"> </span><span class="nv">de</span><span class="w"> </span><span class="nv">mod</span><span class="p">.</span><span class="py">lua</span><span class="o">&gt;</span>
<span class="kr">end</span><span class="p">)()</span>
<span class="c1">-- Comme si le contenu de mod.lua était enveloppé dans le corps d&#39;une fonction,</span>
<span class="c1">-- si bien que les variables locales contenues dans mod.lua sont</span>
<span class="c1">-- inaccessibles en dehors de ce module.</span>

<span class="c1">-- Le code suivant fonctionne car mod = M (dans mod.lua):</span>
<span class="nv">mod</span><span class="p">.</span><span class="nf">sayHello</span><span class="p">()</span><span class="w">  </span><span class="c1">-- Dis bonjour à Hrunkner.</span>

<span class="c1">-- Le code suivant génère une erreur car sayMyName est local à mod.lua:</span>
<span class="nv">mod</span><span class="p">.</span><span class="nf">sayMyName</span><span class="p">()</span><span class="w">  </span><span class="c1">-- erreur!</span>

<span class="c1">-- Les valeurs retournées par require sont mises en cache, ce qui fait</span>
<span class="c1">-- qu&#39;un module est toujours chargé une seule fois, même s&#39;il est inclus</span>
<span class="c1">-- avec require à plusieurs reprises.</span>

<span class="c1">-- Supposons que mod2.lua contienne le code &quot;print(&#39;Hi!&#39;)&quot;.</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s1">&#39;mod2&#39;</span><span class="p">)</span><span class="w">  </span><span class="c1">-- Affiche &quot;Hi!&quot;</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s1">&#39;mod2&#39;</span><span class="p">)</span><span class="w">  </span><span class="c1">-- N&#39;affiche rien; et a = b.</span>

<span class="c1">-- dofile est identique à require, sauf qu&#39;il ne fait pas de mise en cache:</span>
<span class="nb">dofile</span><span class="p">(</span><span class="s1">&#39;mod2&#39;</span><span class="p">)</span><span class="w">  </span><span class="c1">--&gt; Hi!</span>
<span class="nb">dofile</span><span class="p">(</span><span class="s1">&#39;mod2&#39;</span><span class="p">)</span><span class="w">  </span><span class="c1">--&gt; Hi! (le code de mod2.lua est encore exécuté)</span>

<span class="c1">-- loadfile charge le contenu d&#39;un fichier, sans l&#39;exécuter.</span>
<span class="nv">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">loadfile</span><span class="p">(</span><span class="s1">&#39;mod2&#39;</span><span class="p">)</span><span class="w">  </span><span class="c1">-- L&#39;appel f() exécute le contenu de mod2.lua.</span>

<span class="c1">-- loadstring est similaire à loadfile, mais pour les chaines de caractères.</span>
<span class="nv">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">loadstring</span><span class="p">(</span><span class="s1">&#39;print(343)&#39;</span><span class="p">)</span><span class="w">  </span><span class="c1">-- Retourne une fonction.</span>
<span class="nf">g</span><span class="p">()</span><span class="w">  </span><span class="c1">-- Affiche 343; Rien n&#39;est affiché avant cet appel.</span>

<span class="c1">--]]</span>
</pre></div>
<h2>Références</h2>
<p><em>Les références qui suivent sont en Anglais.</em></p>
<p>Les sujets non abordés dans ce tutoriel sont couverts en intégralité par
les librairies standard:</p>
<ul>
<li>La librairie <a href="http://lua-users.org/wiki/StringLibraryTutorial"><code>string</code></a></li>
<li>La librairie <a href="http://lua-users.org/wiki/TableLibraryTutorial"><code>table</code></a></li>
<li>La librairie <a href="http://lua-users.org/wiki/MathLibraryTutorial"><code>math</code></a></li>
<li>La librairie <a href="http://lua-users.org/wiki/IoLibraryTutorial"><code>io</code></a></li>
<li>La librairie <a href="http://lua-users.org/wiki/OsLibraryTutorial"><code>os</code></a></li>
</ul>
<p>Autres références complémentaires:</p>
<ul>
<li><a href="http://nova-fusion.com/2012/08/27/lua-for-programmers-part-1/">Lua pour programmeurs</a></li>
<li><a href="lua-users.org/files/wiki_insecure/users/thomasl/luarefv51.pdf">Référence condensée de Lua</a></li>
<li><a href="http://www.lua.org/pil/contents.html">Programmer en Lua</a></li>
<li><a href="http://www.lua.org/manual/">Les manuels de référence Lua</a></li>
</ul>
<p>A propos, ce fichier est exécutable. Sauvegardez-le sous le nom <em>learn.lua</em> et
exécutez-le avec la commande &quot;<code>lua learn.lua</code>&quot; !</p>
<p>Ce tutoriel a été originalement écrit pour <a href="tylerneylon.com">tylerneylon.com</a> et est aussi
disponible en tant que <a href="https://gist.github.com/tylerneylon/5853042">gist</a>.
Il a été traduit en français par Roland Yonaba (voir son <a href="http://github.com/Yonaba">GitHub</a>).</p>
<p>Amusez-vous bien avec Lua!</p>

        <hr>
        <p>
          Vous avez une suggestion ? Peut-être une correction ? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Ouvrez un ticket</a> sur GitHub, ou faites vous-même une <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/fr/lua.md">pull request</a> !
        </p>
        <p class="contributed">
          Version originale par Tyler Neylon, mis à jour par <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/fr/lua.md">3 contributeur(s)</a>.
        </p>

        <footer>
          <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width: 0; width: 88px; height: 31px;" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/svg/by-sa.svg" /></a>
          <p>
            &copy; 2025
            <a href="http://tylerneylon.com/">Tyler Neylon</a>
          </p>
        </footer>
      </div>
    </div>
  </body>
</html>