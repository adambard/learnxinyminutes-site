<!DOCTYPE html>
<html lang="en">
  <head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WXC8R75DEN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-WXC8R75DEN');
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Language" content="en">
    <title>Learn Fortran in Y Minutes</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto+Slab:wght@100..900&family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/screen.css">
    <link rel="stylesheet" href="/css/light.css">
    <link rel="stylesheet" href="/css/dark.css">

    <link rel="canonical" href="https://learnxinyminutes.com/fortran/">
    <script>
      localStorage.removeItem("lxiym_theme");
    </script>
  </head>
  <body>
    <div class="container">
      <h1><a href="/">Learn X in Y minutes</a></h1>
      <h2>Where X=Fortran</h2>

      <div class="lang-choice">
        <label for="lang-select">Language:</label>
        <select id="lang-select" name="lang-select">
          <option value="en">English</option>
          <option value="zh-cn" data-url="/zh-cn/fortran/">中文 (简体)</option>
        </select>
      </div>
      <p class="filelink">
        Get the code:
        <a href="/files/learnfortran.f90">learnfortran.f90</a>
      </p>
      <div id="doc">
<p>Fortran is one of the oldest computer languages. It was developed in the 1950s
by IBM for numeric calculations (Fortran is an abbreviation of &quot;Formula
Translation&quot;). Despite its age, it is still used for high-performance computing
such as weather prediction. However, the language has changed considerably over
the years, although mostly maintaining backwards compatibility; well known
versions are FORTRAN 77, Fortran 90, Fortran 95, Fortran 2003, Fortran 2008,
Fortran 2018 and Fortran 2023.</p>
<p>This overview will discuss the features of Fortran 2008 since it is the most
widely implemented of the more recent specifications and the later versions are
largely similar (by comparison FORTRAN 77 is a very different language).</p>
<div class="highlight"><pre lang="fortran"><span class="c">! This is a comment.</span>

<span class="k">program </span><span class="n">example</span><span class="w">         </span><span class="c">! declare a program called example.</span>

<span class="w">    </span><span class="c">! Code can only exist inside programs, functions, subroutines or modules.</span>
<span class="w">    </span><span class="c">! Using indentation is not required but it is recommended.</span>

<span class="w">    </span><span class="c">! Declaring Variables</span>
<span class="w">    </span><span class="c">! ===================</span>

<span class="w">    </span><span class="c">! All declarations must come before statements and expressions.</span>

<span class="w">    </span><span class="k">implicit none</span><span class="w">       </span><span class="c">! prevents dynamic declaration of variables</span>
<span class="w">    </span><span class="c">! Recommended!</span>
<span class="w">    </span><span class="c">! Implicit none must be redeclared in every function/program/module...</span>

<span class="w">    </span><span class="c">! IMPORTANT - Fortran is case insensitive.</span>
<span class="w">    </span><span class="kt">real </span><span class="n">z</span>
<span class="w">    </span><span class="kt">REAL </span><span class="n">Z2</span>

<span class="w">    </span><span class="kt">real</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w">        </span><span class="c">! WARNING: default initial values are compiler dependent!</span>
<span class="w">    </span><span class="kt">real</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2E12</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.01</span>
<span class="w">    </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">m</span>
<span class="w">    </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">PI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.14159265</span><span class="w">            </span><span class="c">! declare a constant.</span>
<span class="w">    </span><span class="kt">logical</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="n">TRUE</span><span class="p">.,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="n">FALSE</span><span class="p">.</span><span class="w">            </span><span class="c">! boolean type.</span>
<span class="w">    </span><span class="kt">complex</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">                         </span><span class="c">! sqrt(-1)</span>
<span class="w">    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">month</span><span class="w">                     </span><span class="c">! string of 3 characters.</span>

<span class="w">    </span><span class="c">! declare an array of 6 reals.</span>
<span class="w">    </span><span class="kt">real</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="k">array</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w">                                    </span>
<span class="w">    </span><span class="c">! another way to declare an array. </span>
<span class="w">    </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">dimension</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">arrayb</span><span class="w">                 </span>
<span class="w">    </span><span class="c">! an array with a custom index -10 to 10 (inclusive)</span>
<span class="w">    </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">arrayc</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">:</span><span class="mi">10</span><span class="p">)</span><span class="w">                     </span>
<span class="w">    </span><span class="c">! A multidimensional array.</span>
<span class="w">    </span><span class="kt">real</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">array2d</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">                         </span>

<span class="w">    </span><span class="c">! The &#39;::&#39; separators are not always necessary but are recommended.</span>

<span class="w">    </span><span class="c">! many other variable attributes also exist:</span>
<span class="w">    </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">pointer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">p</span><span class="w">                            </span><span class="c">! declare a pointer.</span>

<span class="w">    </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">LP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">selected_real_kind</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="kt">real</span><span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="n">LP</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">d</span><span class="w">                            </span><span class="c">! long precision variable.</span>

<span class="w">    </span><span class="c">! WARNING: initialising variables during declaration causes problems</span>
<span class="w">    </span><span class="c">! in functions since this automatically implies the &#39;save&#39; attribute</span>
<span class="w">    </span><span class="c">! whereby values are saved between function calls. In general, separate</span>
<span class="w">    </span><span class="c">! declaration and initialisation code except for constants!</span>

<span class="w">    </span><span class="c">! Strings</span>
<span class="w">    </span><span class="c">! =======</span>

<span class="w">    </span><span class="kt">character</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">a_char</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;i&#39;</span>
<span class="w">    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">a_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;qwerty&quot;</span>
<span class="w">    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">str_b</span>
<span class="w">    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">a_long_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This is a long string.&quot;</span>
<span class="w">    </span><span class="c">!can have automatic counting of length using (len=*) but only for constants.</span>

<span class="w">    </span><span class="n">str_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a_str</span><span class="o">//</span><span class="s2">&quot; keyboard&quot;</span><span class="w">      </span><span class="c">! concatenate strings using // operator.</span>

<span class="w">    </span><span class="c">! Assignment &amp; Arithmetic</span>
<span class="w">    </span><span class="c">! =======================</span>
<span class="w">    </span>
<span class="w">    </span><span class="n">Z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">                           </span><span class="c">! assign to variable z declared above </span>
<span class="w">    </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span>
<span class="w">    </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="mf">1.54</span><span class="o">/</span><span class="p">(</span><span class="mf">2.3</span><span class="o">*</span><span class="mf">3.1</span><span class="p">)</span>
<span class="w">    </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">**</span><span class="mi">3</span><span class="w">                        </span><span class="c">! exponentiation</span>

<span class="w">    </span><span class="c">! Control Flow Statements &amp; Operators</span>
<span class="w">    </span><span class="c">! ===================================</span>

<span class="w">    </span><span class="c">! Single-line if statement</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w">               </span><span class="c">! conditions always need parentheses.</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">                </span><span class="c">! z not equal to a</span>
<span class="w">        </span><span class="c">! Other symbolic comparisons are &lt; &gt; &lt;= &gt;= == /=</span>
<span class="w">        </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span>
<span class="w">    </span><span class="k">else if</span><span class="w"> </span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="p">.</span><span class="n">GT</span><span class="p">.</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">         </span><span class="c">! z greater than a</span>
<span class="w">        </span><span class="c">! Text equivalents to symbol operators are .LT. .GT. .LE. .GE. .EQ. .NE.</span>
<span class="w">        </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span>
<span class="w">    </span><span class="k">else if</span><span class="w"> </span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">            </span><span class="c">! &#39;then&#39; must be on this line.</span>
<span class="w">        </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="w">                       </span><span class="c">! execution block must be on a new line.</span>
<span class="w">    </span><span class="k">else</span>
<span class="k">        </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>
<span class="w">    </span><span class="k">end if</span><span class="w">                          </span><span class="c">! end statement needs the &#39;if&#39;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">.</span><span class="nb">AND</span><span class="p">.</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">.</span><span class="nb">OR</span><span class="p">.</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">z</span><span class="p">))</span><span class="w"> </span><span class="k">then</span><span class="w">    </span><span class="c">! boolean operators.</span>
<span class="w">        </span><span class="n">inner</span><span class="p">:</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(.</span><span class="n">TRUE</span><span class="p">.)</span><span class="w"> </span><span class="k">then</span><span class="w">     </span><span class="c">! can name if-construct.</span>
<span class="w">            </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="k">end if </span><span class="n">inner</span><span class="w">                </span><span class="c">! then must name endif statement.</span>
<span class="w">    </span><span class="k">endif</span><span class="w">                           </span><span class="c">! &#39;endif&#39; is equivalent to &#39;end if&#39;  </span>

<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span>
<span class="w">    </span><span class="k">select case</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">                     </span><span class="c">! cases i == 0 or i == 1</span>
<span class="w">        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">:</span><span class="mi">10</span><span class="p">)</span><span class="w">                     </span><span class="c">! cases i is 2 to 10 inclusive.</span>
<span class="w">        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="mi">11</span><span class="p">:)</span><span class="w">                      </span><span class="c">! all cases where i&gt;=11</span>
<span class="w">        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="k">case </span><span class="n">default</span>
<span class="w">        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span>
<span class="w">    </span><span class="k">end select</span>

<span class="k">    </span><span class="n">month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;jan&#39;</span>
<span class="w">    </span><span class="c">! Condition can be integer, logical or character type.</span>
<span class="w">    </span><span class="c">! Select constructions can also be named.</span>
<span class="w">    </span><span class="n">monthly</span><span class="p">:</span><span class="k">select case</span><span class="p">(</span><span class="n">month</span><span class="p">)</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;jan&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">case </span><span class="n">default</span>
<span class="w">        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>
<span class="w">    </span><span class="k">end select </span><span class="n">monthly</span>

<span class="w">    </span><span class="k">do </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w">             </span><span class="c">! loops from 2 to 10 (inclusive) in steps of 2.</span>
<span class="w">        </span><span class="n">innerloop</span><span class="p">:</span><span class="w"> </span><span class="k">do </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="c">! loops can be named too.</span>
<span class="w">            </span><span class="k">exit</span><span class="w">                </span><span class="c">! quits the loop.</span>
<span class="w">        </span><span class="k">end do </span><span class="n">innerloop</span>
<span class="w">        </span><span class="k">cycle</span><span class="w">                   </span><span class="c">! jump to next loop iteration.</span>
<span class="w">    </span><span class="k">end do</span>

<span class="w">    </span><span class="c">! Goto statement exists but it is heavily discouraged.</span>
<span class="w">    </span><span class="k">goto</span><span class="w"> </span><span class="mi">10</span>
<span class="w">    </span><span class="k">stop </span><span class="mi">1</span><span class="w">                      </span><span class="c">! stops the program, returns condition code 1.</span>
<span class="mi">10</span><span class="w">  </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">201</span><span class="w">                     </span><span class="c">! this line is labeled as line 10</span>

<span class="w">    </span><span class="c">! Arrays</span>
<span class="w">    </span><span class="c">! ======</span>
<span class="w">    </span><span class="k">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="o">/</span><span class="p">)</span>
<span class="w">    </span><span class="k">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">]</span><span class="w">  </span><span class="c">! using Fortran 2003 notation.</span>
<span class="w">    </span><span class="n">arrayb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">3e3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.41</span><span class="p">,</span><span class="w"> </span><span class="mf">4e-5</span><span class="p">]</span>
<span class="w">    </span><span class="n">array2d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">reshape</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span><span class="w"> </span><span class="mf">6.0</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">])</span>

<span class="w">    </span><span class="c">! Fortran array indexing starts from 1.</span>
<span class="w">    </span><span class="c">! (by default but can be defined differently for specific arrays).</span>
<span class="w">    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">array</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">                </span><span class="c">! take first element of array.</span>
<span class="w">    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array2d</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>

<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="k">array</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">)</span><span class="w">         </span><span class="c">! print all elements from 3rd to 5th (inclusive).</span>
<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">array2d</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p">:)</span><span class="w">      </span><span class="c">! print first column of 2d array.</span>

<span class="w">    </span><span class="k">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">array</span><span class="o">*</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="w">         </span><span class="c">! can apply mathematical expressions to arrays.</span>
<span class="w">    </span><span class="k">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">array</span><span class="o">*</span><span class="k">array</span><span class="w">         </span><span class="c">! array operations occur element-wise.</span>
<span class="w">    </span><span class="c">! array = array*array2d     ! these arrays would not be compatible.</span>

<span class="w">    </span><span class="c">! There are many built-in functions that operate on arrays.</span>
<span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">dot_product</span><span class="p">(</span><span class="k">array</span><span class="p">,</span><span class="w"> </span><span class="k">array</span><span class="p">)</span><span class="w">   </span><span class="c">! this is the dot product.</span>
<span class="w">    </span><span class="c">! Use matmul() for matrix maths.</span>
<span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">sum</span><span class="p">(</span><span class="k">array</span><span class="p">)</span>
<span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">maxval</span><span class="p">(</span><span class="k">array</span><span class="p">)</span>
<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="nb">minloc</span><span class="p">(</span><span class="k">array</span><span class="p">)</span>
<span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">size</span><span class="p">(</span><span class="k">array</span><span class="p">)</span>
<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="nb">shape</span><span class="p">(</span><span class="k">array</span><span class="p">)</span>
<span class="w">    </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">count</span><span class="p">(</span><span class="k">array</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>

<span class="w">    </span><span class="c">! Loop over an array (could have used Product() function normally).</span>
<span class="w">    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="k">do </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">(</span><span class="k">array</span><span class="p">)</span>
<span class="w">        </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="o">*</span><span class="k">array</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="w">    </span><span class="k">end do</span>

<span class="w">    </span><span class="c">! Conditionally execute element-wise assignments.</span>
<span class="w">    </span><span class="k">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">]</span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="k">array</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">        </span><span class="k">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">array</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">elsewhere</span><span class="p">(</span><span class="k">array</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">        </span><span class="k">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">elsewhere</span>
<span class="w">        </span><span class="k">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">end where</span>

<span class="w">    </span><span class="c">! Implied-DO loops are a compact way to create arrays.</span>
<span class="w">    </span><span class="k">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)]</span><span class="w">       </span><span class="c">! creates an array of [1,2,3,4,5,6]</span>
<span class="w">    </span><span class="k">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)]</span><span class="w">   </span><span class="c">! creates an array of [1,3,5,7,9,11]</span>
<span class="w">    </span><span class="k">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[(</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)]</span><span class="w">    </span><span class="c">! creates an array of [1,4,9,16,25,36]</span>
<span class="w">    </span><span class="k">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)]</span><span class="w">    </span><span class="c">! creates an array of [4,5,4,5,4,5]</span>

<span class="w">    </span><span class="c">! Input/Output</span>
<span class="w">    </span><span class="c">! ============</span>

<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w">                  </span><span class="c">! print the variable &#39;b&#39; to the command line</span>

<span class="w">    </span><span class="c">! We can format our printed output.</span>
<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="s2">&quot;(I6)&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">320</span><span class="w">           </span><span class="c">! prints &#39;   320&#39;</span>
<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="s2">&quot;(I6.4)&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w">           </span><span class="c">! prints &#39;  0003&#39;</span>
<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="s2">&quot;(F6.3)&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">4.32</span><span class="w">        </span><span class="c">! prints &#39; 4.320&#39;</span>

<span class="w">    </span><span class="c">! The letter indicates the expected type and the number afterwards gives</span>
<span class="w">    </span><span class="c">! the number of characters to use for printing the value.</span>
<span class="w">    </span><span class="c">! Letters can be I (integer), F (real), E (engineering format),</span>
<span class="w">    </span><span class="c">! L (logical), A (characters) ...</span>
<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="s2">&quot;(I3)&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">3200</span><span class="w">          </span><span class="c">! print &#39;***&#39; since the number doesn&#39;t fit.</span>

<span class="w">    </span><span class="c">! we can have multiple format specifications.</span>
<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="s2">&quot;(I5,F6.2,E6.2)&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="mf">3.41</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="mf">3.41</span>
<span class="w">    </span>
<span class="w">    </span><span class="c">! 3 repeats of integers (field width = 5).</span>
<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="s2">&quot;(3I5)&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="w">                       </span>

<span class="w">    </span><span class="c">! repeated grouping of formats.</span>
<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="s2">&quot;(2(I5,F6.2))&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="mf">3.42</span><span class="p">,</span><span class="w"> </span><span class="mi">340</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="mf">5.3</span><span class="w">     </span>

<span class="w">    </span><span class="c">! We can also read input from the terminal.</span>
<span class="w">    </span><span class="k">read</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">v</span>
<span class="w">    </span><span class="k">read</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;(2F6.2)&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w">                        </span><span class="c">! read two numbers</span>

<span class="w">    </span><span class="c">! To write a file.</span>
<span class="w">    </span><span class="k">open</span><span class="w"> </span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="k">file</span><span class="o">=</span><span class="s2">&quot;records.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="c">! The file is referred to by a &#39;unit number&#39;, an integer that you pick in</span>
<span class="w">    </span><span class="c">! the range 9:99. Status can be one of {&#39;old&#39;,&#39;replace&#39;,&#39;new&#39;}.</span>
<span class="w">    </span><span class="k">write</span><span class="w"> </span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;(F10.2,F10.2,F10.2)&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">a</span>
<span class="w">    </span><span class="k">close</span><span class="w"> </span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>

<span class="w">    </span><span class="c">! To read a file.</span>
<span class="w">    </span><span class="k">open</span><span class="w"> </span><span class="p">(</span><span class="n">newunit</span><span class="o">=</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="k">file</span><span class="o">=</span><span class="s2">&quot;records.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="s2">&quot;old&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="c">! The file is referred to by a &#39;new unit number&#39;, </span>
<span class="w">    </span><span class="c">! an integer that the compiler picks for you.</span>

<span class="w">    </span><span class="k">read</span><span class="w"> </span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;(3F10.2)&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span>
<span class="w">    </span><span class="k">close</span><span class="w"> </span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="w">    </span><span class="c">! There are more features available than discussed here and alternative</span>
<span class="w">    </span><span class="c">! variants due to backwards compatibility with older Fortran versions.</span>

<span class="w">    </span><span class="c">! Built-in Functions</span>
<span class="w">    </span><span class="c">! ==================</span>

<span class="w">    </span><span class="c">! Fortran has around 200 functions/subroutines intrinsic to the language.</span>
<span class="w">    </span><span class="c">! Examples -</span>
<span class="w">    </span><span class="k">call </span><span class="nb">cpu_time</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="w">        </span><span class="c">! sets &#39;v&#39; to a time in seconds.</span>
<span class="w">    </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">ior</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w">           </span><span class="c">! bitwise OR of 2 integers.</span>
<span class="w">    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log10</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">            </span><span class="c">! log base 10.</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">floor</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="w">            </span><span class="c">! converts b to integer by rounding down.</span>
<span class="w">    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">aimag</span><span class="p">(</span><span class="n">w</span><span class="p">)</span><span class="w">            </span><span class="c">! imaginary part of a complex number.</span>

<span class="w">    </span><span class="c">! Functions &amp; Subroutines</span>
<span class="w">    </span><span class="c">! =======================</span>

<span class="w">    </span><span class="c">! A subroutine runs some code on some input values and can cause</span>
<span class="w">    </span><span class="c">! side-effects or modify the input values.</span>

<span class="w">    </span><span class="k">call </span><span class="n">routine</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w">   </span><span class="c">! subroutine call.</span>

<span class="w">    </span><span class="c">! A function takes several input parameters and returns a single value.</span>
<span class="w">    </span><span class="c">! However the input parameters may still be modified and side effects</span>
<span class="w">    </span><span class="c">! executed.</span>

<span class="w">    </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w">       </span><span class="c">! function call.</span>

<span class="w">    </span><span class="c">! Function calls can also be evoked within expressions.</span>
<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">func2</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">)</span>

<span class="w">    </span><span class="c">! A pure function is a function that doesn&#39;t modify its input </span>
<span class="w">    </span><span class="c">! parameters or cause any side-effects.</span>
<span class="w">    </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func3</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">)</span>

<span class="k">contains</span><span class="w">                    </span><span class="c">! Start defining the program&#39;s internal procedures:</span>

<span class="w">    </span><span class="c">! Fortran has a couple of slightly different ways to define functions.</span>

<span class="w">    </span><span class="kt">integer </span><span class="k">function </span><span class="n">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w">      </span><span class="c">! a function returning an integer value.</span>
<span class="w">        </span><span class="c">! implicit none                 ! - no longer used in subvariable fields</span>
<span class="w">        </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w">  </span><span class="c">! type of input parameters</span>
<span class="w">        </span><span class="c">! the return variable defaults to the function name.</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="k">            </span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">c</span><span class="w">            </span>
<span class="w">            </span><span class="k">return</span><span class="w">                      </span><span class="c">! returns the current value at &#39;func&#39;</span>
<span class="w">        </span><span class="k">end if</span>
<span class="k">        </span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">c</span>

<span class="w">        </span><span class="c">! Don&#39;t need a return statement at the end of a function.</span>
<span class="w">    </span><span class="k">end function </span><span class="n">func</span>

<span class="w">    </span><span class="k">function </span><span class="n">func2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="w">   </span><span class="c">! return variable declared to be &#39;f&#39;.</span>
<span class="w">        </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w">     </span><span class="c">! can declare and enforce that variables</span>
<span class="w">        </span><span class="c">!are not modified by the function.</span>
<span class="w">        </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">inout</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">c</span>
<span class="w">        </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">f</span><span class="w">                    </span>
<span class="w">        </span><span class="c">! function return type declared inside the function.</span>
<span class="w">        </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">cnt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">               </span><span class="c">! GOTCHA -         </span>
<span class="w">        </span><span class="c">! assigning a value at initalization </span>
<span class="w">        </span><span class="c">! implies that the variable is</span>
<span class="w">        </span><span class="c">! saved between function calls.</span>

<span class="w">        </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">c</span>
<span class="w">        </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w">                           </span><span class="c">! changing value of input variable c.</span>
<span class="w">        </span><span class="n">cnt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cnt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">                   </span><span class="c">! count number of function calls.</span>

<span class="w">    </span><span class="k">end function </span><span class="n">func2</span>

<span class="w">    </span><span class="k">pure function </span><span class="n">func3</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w">        </span><span class="c">! a pure function has no side-effects.</span>
<span class="w">        </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span>
<span class="w">        </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">func3</span>

<span class="w">        </span><span class="n">func3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">*</span><span class="n">b</span><span class="o">*</span><span class="n">c</span>

<span class="w">    </span><span class="k">end function </span><span class="n">func3</span>
<span class="w">    </span>
<span class="w">    </span><span class="c">! a subroutine does not return anything, </span>
<span class="w">    </span><span class="c">! but can change the value of arguments.</span>
<span class="w">    </span><span class="k">subroutine </span><span class="n">routine</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span>
<span class="w">        </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">inout</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">f</span>
<span class="w">        </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">e</span>

<span class="w">        </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="n">d</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3</span><span class="o">*</span><span class="n">e</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">f</span>

<span class="w">    </span><span class="k">end subroutine </span><span class="n">routine</span>

<span class="k">end program </span><span class="n">example</span><span class="w">                     </span>
<span class="c">! End of Program Definition -----------------------</span>

<span class="c">! Functions and Subroutines declared externally to the program listing need</span>
<span class="c">! to be declared to the program using an Interface declaration (even if they</span>
<span class="c">! are in the same source file!) (see below). It is easier to define them within</span>
<span class="c">! the &#39;contains&#39; section of a module or program.</span>

<span class="k">elemental </span><span class="kt">real </span><span class="k">function </span><span class="n">func4</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="c">! An elemental function is a Pure function that takes a scalar input variable</span>
<span class="c">! but can also be used on an array where it will be separately applied to all</span>
<span class="c">! of the elements of an array and return a new array.</span>
<span class="w">    </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">a</span>

<span class="w">    </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1.0</span>

<span class="k">end function </span><span class="n">func4</span>

<span class="c">! Modules</span>
<span class="c">! =======</span>

<span class="c">! A module is a useful way to collect related declarations, functions and</span>
<span class="c">! subroutines together for reusability.</span>

<span class="k">module </span><span class="n">fruit</span>

<span class="w">    </span><span class="kt">real</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">apple</span>
<span class="w">    </span><span class="kt">real</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">pear</span>
<span class="w">    </span><span class="kt">real</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">orange</span>

<span class="k">end module </span><span class="n">fruit</span>

<span class="k">module </span><span class="n">fruity</span>
<span class="w">    </span><span class="c">! Declarations must be in the order: modules, interfaces, variables.</span>
<span class="w">    </span><span class="c">! (can declare modules and interfaces in programs too).</span>

<span class="w">    </span><span class="k">use </span><span class="n">fruit</span><span class="p">,</span><span class="w"> </span><span class="k">only</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="p">,</span><span class="w"> </span><span class="n">pear</span><span class="w">    </span><span class="c">! use apple and pear from fruit module.</span>
<span class="w">    </span><span class="k">implicit none</span><span class="w">                   </span><span class="c">! comes after module imports.</span>

<span class="w">    </span><span class="c">! By default all module data and functions will be public</span>
<span class="w">    </span><span class="k">private</span><span class="w">                         </span><span class="c">! Instead set default to private </span>
<span class="w">    </span><span class="c">! Declare some variables/functions explicitly public.</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">apple</span><span class="p">,</span><span class="w"> </span><span class="n">mycar</span><span class="p">,</span><span class="w"> </span><span class="n">create_mycar</span>
<span class="w">    </span><span class="c">! Declare some variables/functions private to the module (redundant here).</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">func4</span>

<span class="w">    </span><span class="c">! Interfaces</span>
<span class="w">    </span><span class="c">! ==========</span>
<span class="w">    </span><span class="c">! Explicitly declare an external function/procedure within the module</span>
<span class="w">    </span><span class="c">! (better in general to put functions/procedures in the &#39;contains&#39; section).</span>
<span class="w">    </span><span class="k">interface</span>
<span class="k">        elemental </span><span class="kt">real </span><span class="k">function </span><span class="n">func4</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="w">            </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">a</span>
<span class="w">        </span><span class="k">end function </span><span class="n">func4</span>
<span class="w">    </span><span class="k">end interface</span>

<span class="w">    </span><span class="c">! Overloaded functions can be defined using named interfaces.</span>
<span class="w">    </span><span class="k">interface </span><span class="n">myabs</span>
<span class="w">        </span><span class="c">! Can use &#39;module procedure&#39; keyword to include functions already</span>
<span class="w">        </span><span class="c">! defined within the module.</span>
<span class="w">        </span><span class="k">module procedure </span><span class="n">real_abs</span><span class="p">,</span><span class="w"> </span><span class="n">complex_abs</span>
<span class="w">    </span><span class="k">end interface</span>

<span class="w">    </span><span class="c">! Derived Data Types</span>
<span class="w">    </span><span class="c">! ==================</span>
<span class="w">    </span><span class="c">! Can create custom structured data collections.</span>
<span class="w">    </span><span class="k">type </span><span class="n">car</span>
<span class="w">        </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">model</span>
<span class="w">        </span><span class="kt">real</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">weight</span><span class="w">              </span><span class="c">! (kg)</span>
<span class="w">        </span><span class="kt">real</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">dimensions</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w">       </span><span class="c">! i.e. length-width-height (metres).</span>
<span class="w">        </span><span class="kt">character</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">colour</span>
<span class="w">    </span><span class="k">contains</span>
<span class="k">        procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">info</span><span class="w">           </span><span class="c">! bind a procedure to a type.</span>
<span class="w">    </span><span class="k">end type </span><span class="n">car</span>

<span class="w">    </span><span class="k">type</span><span class="p">(</span><span class="n">car</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">mycar</span><span class="w">              </span><span class="c">! declare a variable of your custom type.</span>
<span class="w">    </span><span class="c">! See create_mycar() routine for usage.</span>

<span class="w">    </span><span class="c">! Note: There are no executable statements in modules.</span>

<span class="k">contains</span>

<span class="k">    subroutine </span><span class="n">create_mycar</span><span class="p">(</span><span class="n">mycar</span><span class="p">)</span>
<span class="w">        </span><span class="c">! Demonstrates usage of a derived data type.</span>
<span class="w">        </span><span class="k">type</span><span class="p">(</span><span class="n">car</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">out</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">mycar</span>

<span class="w">        </span><span class="c">! Access type elements using &#39;%&#39; operator.</span>
<span class="w">        </span><span class="n">mycar</span><span class="p">%</span><span class="n">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Ford Prefect&quot;</span>
<span class="w">        </span><span class="n">mycar</span><span class="p">%</span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;r&#39;</span>
<span class="w">        </span><span class="n">mycar</span><span class="p">%</span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1400</span>
<span class="w">        </span><span class="n">mycar</span><span class="p">%</span><span class="n">dimensions</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5.0</span><span class="w">   </span><span class="c">! default indexing starts from 1!</span>
<span class="w">        </span><span class="n">mycar</span><span class="p">%</span><span class="n">dimensions</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.0</span>
<span class="w">        </span><span class="n">mycar</span><span class="p">%</span><span class="n">dimensions</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.5</span>

<span class="w">    </span><span class="k">end subroutine </span><span class="n">create_mycar</span>

<span class="w">    </span><span class="k">subroutine </span><span class="n">info</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
<span class="w">        </span><span class="k">class</span><span class="p">(</span><span class="n">car</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">self</span>
<span class="w">        </span><span class="c">! &#39;class&#39; keyword used to bind a procedure to a type here.</span>

<span class="w">        </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Model     : &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">%</span><span class="n">model</span>
<span class="w">        </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Colour    : &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">%</span><span class="n">colour</span>
<span class="w">        </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Weight    : &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">%</span><span class="n">weight</span>
<span class="w">        </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Dimensions: &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">%</span><span class="n">dimensions</span>

<span class="w">    </span><span class="k">end subroutine </span><span class="n">info</span>

<span class="w">    </span><span class="kt">real </span><span class="k">pure function </span><span class="n">real_abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="w">        </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">x</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="k">            </span><span class="n">real_abs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">x</span>
<span class="w">        </span><span class="k">else</span>
<span class="k">            </span><span class="n">real_abs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span>
<span class="w">        </span><span class="k">end if</span>

<span class="k">    end function </span><span class="n">real_abs</span>

<span class="w">    </span><span class="kt">real </span><span class="k">pure function </span><span class="n">complex_abs</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="w">        </span><span class="kt">complex</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">z</span>
<span class="w">        </span><span class="c">! long lines can be continued using the continuation character &#39;&amp;&#39;</span>

<span class="w">        </span><span class="n">complex_abs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">sqrt</span><span class="p">(</span><span class="kt">real</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">&amp;</span>
<span class="w">                           </span><span class="nb">aimag</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="w">    </span><span class="k">end function </span><span class="n">complex_abs</span>

<span class="k">end module </span><span class="n">fruity</span>

<span class="c">! ISO Standard Fortran 2008 introduced the DO CONCURRENT construct to allow you</span>
<span class="c">! to express loop-level parallelism</span>

<span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">i</span>
<span class="kt">real</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="k">array</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="k">DO</span><span class="w"> </span><span class="k">CONCURRENT</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="n">size</span><span class="p">(</span><span class="k">array</span><span class="p">))</span>
<span class="w">    </span><span class="k">array</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">sqrt</span><span class="p">(</span><span class="kt">real</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">**</span><span class="n">i</span><span class="p">)</span>
<span class="k">END DO</span>


<span class="c">! Only calls to pure functions are allowed inside the loop and we can declare</span>
<span class="c">! multiple indices:</span>

<span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span>
<span class="kt">real</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="k">array</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>

<span class="k">do</span><span class="w"> </span><span class="k">concurrent</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="n">size</span><span class="p">(</span><span class="k">array</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="n">size</span><span class="p">(</span><span class="k">array</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span>
<span class="w">    </span><span class="k">array</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">real</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="k">end do</span>

<span class="c">! loop indices can also declared inside the contruct:</span>

<span class="kt">real</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="k">array</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>

<span class="k">do</span><span class="w"> </span><span class="k">concurrent</span><span class="w"> </span><span class="p">(</span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="n">size</span><span class="p">(</span><span class="k">array</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="n">size</span><span class="p">(</span><span class="k">array</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span>
<span class="w">    </span><span class="k">array</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">real</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="k">end do</span>
</pre></div>
<h3>More Resources</h3>
<p>For more information on Fortran:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Fortran">wikipedia</a></li>
<li><a href="https://fortran-lang.org/">Fortran-lang Organization</a></li>
<li><a href="https://en.wikipedia.org/wiki/Fortran_95_language_features">Fortran_95_language_features</a></li>
<li><a href="http://fortranwiki.org">fortranwiki.org</a></li>
<li><a href="http://www.fortran90.org">www.fortran90.org/</a></li>
<li><a href="http://www.dmoz.org/Computers/Programming/Languages/Fortran/FAQs%2C_Help%2C_and_Tutorials/Fortran_90_and_95/">list of Fortran 95 tutorials</a></li>
<li><a href="https://en.wikibooks.org/wiki/Fortran">Fortran wikibook</a></li>
<li><a href="http://www.fortranplus.co.uk/resources/fortran_resources.pdf">Fortran resources</a></li>
<li><a href="http://www.cs.rpi.edu/~szymansk/OOF90/bugs.html">Mistakes in Fortran 90 Programs That Might Surprise You</a></li>
</ul>

        <hr>
        <p>
          Got a suggestion? A correction, perhaps? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Open an Issue</a> on the GitHub Repo, or make a <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/fortran.md">pull request</a> yourself!
        </p>
        <p class="contributed">
          Originally contributed by Robert Steed, and updated by <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/fortran.md">11 contributors</a>.
        </p>

        <footer>
          <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width: 0; width: 80px; height: 28px; padding-bottom: 5px;" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/svg/by-sa.svg" /></a>
          <p>
            &copy; 2025
            <a href="https://github.com/robochat">Robert Steed</a>
          </p>
        </footer>
      </div>

      <script>
        document.addEventListener('DOMContentLoaded', () => {
          const langSelect = document.getElementById('lang-select');
          langSelect?.addEventListener('change', () => {
            const selectedOption = langSelect.options[langSelect.selectedIndex];
            const url = selectedOption?.getAttribute('data-url');
            if (url) {
              window.location.href = url;
            }
          });
        });
      </script>
    </div>
  </body>
</html>