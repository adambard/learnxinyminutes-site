<!DOCTYPE html lang="zh-cn" xml:lang="zh-cn" xmlns="http://www.w3.org/1999/xhtml">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="zh-cn">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn Fortran in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/zh-cn/fortran-cn/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }

                if (theme === "dark" ) {
                    el.className = "dark";
                } else {
                    el.className = "light";
                }

                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (theme) {
                set_theme(theme);
              }
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.addEventListener("load", function(){
              load_theme();
            });
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Fzh-cn%2Ffortran-cn%2F&text=Y%E5%88%86%E9%92%9F%E9%80%9F%E6%88%90X%2C+%E5%85%B6%E4%B8%AD+X%3DFortran">
        分享此页
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">选择主题：</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">亮</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">暗</button>
  </div>
  <h1><a href="/">Y分钟速成X</a></h1>
  <h2>其中 X=Fortran</h2>
    <p class="filelink">
    源代码下载：
    <a href="/docs/files/learnfortran-cn.f90">learnfortran-cn.f90</a>
    </p>
  <div id="doc">
    <p>Fortran 是最古老的计算机语言之一。它由 IBM 开发于 1950 年用于数值运算（Fortran 为 &ldquo;Formula
Translation&rdquo; 的缩写）。虽然该语言已年代久远，但目前仍用于高性能计算，如天气预报。
该语言仍在持续发展，并且基本保持向下兼容。知名的版本为 Fortran 77, Fortran 90,
Fortran 95, Fortran 2008, Fortran 2015 和 Fortran 2023。</p>

<p>这篇概要将讨论 Fortran 2008 的一些特征。因为它是目前所广泛采用的标准版本，并且与最新版本的内容
也基本相同（而 Fortran 77 则是一个非常不同的版本）。</p>
<div class="highlight"><pre class="highlight fortran"><code><span class="c1">! 这是一个注释</span><span class="w">

</span><span class="k">program</span><span class="w"> </span><span class="n">example</span><span class="w">         </span><span class="c1">! 声明一个名为 example 的程序</span><span class="w">

    </span><span class="c1">! 代码只能存在于程序、函数、子程序或模块中</span><span class="w">
    </span><span class="c1">! 使用缩进不是必需的，但推荐使用</span><span class="w">

    </span><span class="c1">! 声明变量</span><span class="w">
    </span><span class="c1">! =========</span><span class="w">

    </span><span class="c1">! 所有的声明必须在语句和表达式之前</span><span class="w">

    </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">       </span><span class="c1">! 防止动态声明变量（推荐！）</span><span class="w">
    </span><span class="c1">! implicit none 推荐在每个函数/程序/模块中重新声明...</span><span class="w">

    </span><span class="c1">! 注意 - Fortran 中对大小写不敏感</span><span class="w">
    </span><span class="kt">real</span><span class="w"> </span><span class="n">z</span><span class="w">
    </span><span class="kt">REAL</span><span class="w"> </span><span class="n">Z2</span><span class="w">

    </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w">        </span><span class="c1">! 警告：默认的初始值取决于编译器！</span><span class="w">
    </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2E12</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.01</span><span class="w">
    </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="w">
    </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">PI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.1415926535897931</span><span class="w">    </span><span class="c1">! 声明一个常数</span><span class="w">
    </span><span class="kt">logical</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">.TRUE.</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">.FALSE.</span><span class="w">            </span><span class="c1">! 布尔类型</span><span class="w">
    </span><span class="kt">complex</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">                         </span><span class="c1">! 单位虚数</span><span class="w">
    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">month</span><span class="w">                     </span><span class="c1">! 字符串，长度为 3 个字符</span><span class="w">

    </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w">                              </span><span class="c1">! 声明一个包含 6 个实数的数组</span><span class="w">
    </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">dimension</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">arrayb</span><span class="w">                  </span><span class="c1">! 另一种声明数组的方式</span><span class="w">
    </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">arrayc</span><span class="p">(</span><span class="mi">-10</span><span class="p">:</span><span class="mi">10</span><span class="p">)</span><span class="w">                     </span><span class="c1">! 具有自定义索引的数组</span><span class="w">
    </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">array2d</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">                         </span><span class="c1">! 多维数组</span><span class="w">

    </span><span class="c1">! 这些分隔符 '::' 并不总是必需的，但推荐使用</span><span class="w">

    </span><span class="c1">! 还有许多其他的变量属性：</span><span class="w">
    </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">pointer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">p</span><span class="w">                            </span><span class="c1">! 声明一个指针</span><span class="w">

    </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">LP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">selected_real_kind</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
    </span><span class="kt">real</span><span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="n">LP</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">d</span><span class="w">                            </span><span class="c1">! 长精度变量</span><span class="w">

    </span><span class="c1">! 警告：在声明过程中初始化变量会在函数中造成问题，</span><span class="w">
    </span><span class="c1">! 因为这会自动暗示 'save' 属性，</span><span class="w">
    </span><span class="c1">! 在函数调用之间保存变量的值一般情况下，</span><span class="w">
    </span><span class="c1">! 除了常量外，声明和初始化的代码应该分开！</span><span class="w">

    </span><span class="c1">! 字符串</span><span class="w">
    </span><span class="c1">! =======</span><span class="w">

    </span><span class="kt">character</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a_char</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'i'</span><span class="w">
    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"qwerty"</span><span class="w">
    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">str_b</span><span class="w">
    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a_long_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"This is a long string."</span><span class="w">
    </span><span class="c1">! 使用 (len=*) 可以自动计算长度，但只适用于常量</span><span class="w">

    </span><span class="n">str_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a_str</span><span class="p">//</span><span class="s2">" keyboard"</span><span class="w">      </span><span class="c1">! 使用 // 运算符连接字符串</span><span class="w">

    </span><span class="c1">! 赋值和算术</span><span class="w">
    </span><span class="c1">! =============</span><span class="w">

    </span><span class="n">Z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">                           </span><span class="c1">! 对上面声明的变量 z 进行赋值（对大小写不敏感）</span><span class="w">
    </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">11.54</span><span class="p">/(</span><span class="mf">2.3</span><span class="o">*</span><span class="mf">3.1</span><span class="p">)</span><span class="w">
    </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">**</span><span class="mi">3</span><span class="w">                        </span><span class="c1">! 幂运算</span><span class="w">

    </span><span class="c1">! 流程控制语句和操作符</span><span class="w">
    </span><span class="c1">! ===================</span><span class="w">

    </span><span class="c1">! 单行 if 语句</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w">               </span><span class="c1">! 条件始终需要在括号中</span><span class="w">

    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="p">/</span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">                </span><span class="c1">! z 不等于 a</span><span class="w">
        </span><span class="c1">! 其他的比较操作符包括 &lt; &gt; &lt;= &gt;= == /=</span><span class="w">
        </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w">
    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="ow">.GT.</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">         </span><span class="c1">! z 大于 a</span><span class="w">
        </span><span class="c1">! 文本等价于符号操作符中的 .LT. .GT. .LE. .GE. .EQ. .NE.</span><span class="w">
        </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="w">
    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">            </span><span class="c1">! 'then' 必须在本行上</span><span class="w">
        </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="w">                       </span><span class="c1">! 执行块必须在新的一行上</span><span class="w">
    </span><span class="k">else</span><span class="w">
        </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">                          </span><span class="c1">! end 语句后需要 'if'（或可以使用 'endif'）</span><span class="w">

    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="ow">.NOT.</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="ow">.AND.</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">.OR.</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">z</span><span class="p">))</span><span class="w"> </span><span class="k">then</span><span class="w">    </span><span class="c1">! 布尔运算符</span><span class="w">
        </span><span class="n">inner</span><span class="p">:</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="kc">.TRUE.</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">     </span><span class="c1">! 可以对 if 结构命名</span><span class="w">
            </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">inner</span><span class="w">                </span><span class="c1">! then 必须命名对应的 endif 语句</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">

    </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">                     </span><span class="c1">! 当 i == 0 或 i == 1 时</span><span class="w">
        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">:</span><span class="mi">10</span><span class="p">)</span><span class="w">                     </span><span class="c1">! 当 i 在 2 到 10 之间（包括边界）时</span><span class="w">
        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="mi">11</span><span class="p">:)</span><span class="w">                      </span><span class="c1">! 当 i &gt;= 11 时</span><span class="w">
        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="n">default</span><span class="w">
        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">select</span><span class="w">

    </span><span class="n">month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'jan'</span><span class="w">
    </span><span class="c1">! 条件可以是整数、逻辑、或字符类型</span><span class="w">
    </span><span class="c1">! Select 结构也可以命名</span><span class="w">
    </span><span class="n">monthly</span><span class="p">:</span><span class="k">select</span><span class="w"> </span><span class="k">case</span><span class="p">(</span><span class="n">month</span><span class="p">)</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="s2">"jan"</span><span class="p">)</span><span class="w">
        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="n">default</span><span class="w">
        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">monthly</span><span class="w">

    </span><span class="k">do</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w">             </span><span class="c1">! 循环从 2 到 10（包括）以 2 为步长</span><span class="w">
        </span><span class="n">innerloop</span><span class="p">:</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="c1">! 循环也可以命名</span><span class="w">
            </span><span class="k">exit</span><span class="w">                </span><span class="c1">! 退出循环</span><span class="w">
        </span><span class="k">end</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="n">innerloop</span><span class="w">
        </span><span class="k">cycle</span><span class="w">                   </span><span class="c1">! 跳到下一个循环迭代</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">do</span><span class="w">

    </span><span class="c1">! 虽然存在 Goto 语句，但它被强烈不推荐</span><span class="w">
    </span><span class="k">goto</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="k">stop</span><span class="w"> </span><span class="mi">1</span><span class="w">                      </span><span class="c1">! 立即停止代码（并返回指定的条件代码）</span><span class="w">
</span><span class="nl">10</span><span class="w">  </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">201</span><span class="w">                     </span><span class="c1">! 这一行被标记为 10 行</span><span class="w">

    </span><span class="c1">! 数组</span><span class="w">
    </span><span class="c1">! =====</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">/)</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">]</span><span class="w">  </span><span class="c1">! 使用 Fortran 2003 的表示法</span><span class="w">
    </span><span class="n">arrayb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">10.2</span><span class="p">,</span><span class="w"> </span><span class="mf">3e3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.41</span><span class="p">,</span><span class="w"> </span><span class="mf">4e-5</span><span class="p">]</span><span class="w">
    </span><span class="n">array2d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">reshape</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span><span class="w"> </span><span class="mf">6.0</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">])</span><span class="w">

    </span><span class="c1">! Fortran 数组索引从 1 开始</span><span class="w">
    </span><span class="c1">! （默认情况下，但对于特定数组可以定义不同的索引）</span><span class="w">
    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">                </span><span class="c1">! 取数组的第一个元素</span><span class="w">
    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array2d</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">

    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">)</span><span class="w">         </span><span class="c1">! 打印从第三个到第五个元素（包括）</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">array2d</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p">:)</span><span class="w">      </span><span class="c1">! 打印二维数组的第一列</span><span class="w">

    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="o">*</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="w">         </span><span class="c1">! 可以对数组应用数学表达式</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="o">*</span><span class="n">array</span><span class="w">         </span><span class="c1">! 数组操作是逐元素进行的</span><span class="w">
    </span><span class="c1">! array = array*array2d     ! 这两个数组是不兼容的</span><span class="w">

    </span><span class="c1">! 有许多内置函数可用于数组</span><span class="w">
    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">dot_product</span><span class="p">(</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="p">)</span><span class="w">   </span><span class="c1">! 这是点积</span><span class="w">
    </span><span class="c1">! 使用 matmul() 进行矩阵运算</span><span class="w">
    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">sum</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w">
    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">maxval</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="nb">minloc</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w">
    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">size</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="nb">shape</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w">
    </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">count</span><span class="p">(</span><span class="n">array</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w">

    </span><span class="c1">! 循环数组（通常使用 product() 函数）</span><span class="w">
    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="k">do</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nb">size</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w">
        </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="o">*</span><span class="n">array</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">do</span><span class="w">

    </span><span class="c1">! 条件性地执行逐元素赋值</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">]</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">array</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">
        </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="k">elsewhere</span><span class="p">(</span><span class="n">array</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">
        </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="k">elsewhere</span><span class="w">
        </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">where</span><span class="w">

    </span><span class="c1">! 隐含 do 循环是创建数组的紧凑方式</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)]</span><span class="w">       </span><span class="c1">! 创建一个数组 [1,2,3,4,5,6]</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)]</span><span class="w">   </span><span class="c1">! 创建一个数组 [1,3,5,7,9,11]</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[(</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)]</span><span class="w">    </span><span class="c1">! 创建一个数组 [1,4,9,16,25,36]</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)]</span><span class="w">    </span><span class="c1">! 创建一个数组 [4,5,4,5,4,5]</span><span class="w">

    </span><span class="c1">! 输入/输出</span><span class="w">
    </span><span class="c1">! =========</span><span class="w">

    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w">                  </span><span class="c1">! 将变量 'b' 打印到命令行</span><span class="w">

    </span><span class="c1">! 可以对打印的输出进行格式化</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="s2">"(I6)"</span><span class="p">,</span><span class="w"> </span><span class="mi">320</span><span class="w">           </span><span class="c1">! 打印 '   320'</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="s2">"(I6.4)"</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w">           </span><span class="c1">! 打印 '  0003'</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="s2">"(F6.3)"</span><span class="p">,</span><span class="w"> </span><span class="mf">4.32</span><span class="w">        </span><span class="c1">! 打印 ' 4.320'</span><span class="w">

    </span><span class="c1">! 字母表示预期的类型，后面的数字表示用于打印值的字符数</span><span class="w">
    </span><span class="c1">! 字母可以是 I（整数），F（实数），E（工程表示法），</span><span class="w">
    </span><span class="c1">! L（逻辑），A（字符串）...</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="s2">"(I3)"</span><span class="p">,</span><span class="w"> </span><span class="mi">3200</span><span class="w">          </span><span class="c1">! 打印 '***'，因为该数字不适合</span><span class="w">

    </span><span class="c1">! 可以有多个格式规范</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="s2">"(I5,F6.2,E6.2)"</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mf">43.41</span><span class="p">,</span><span class="w"> </span><span class="mf">43.41</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="s2">"(3I5)"</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="w">                       </span><span class="c1">! 整数的三次重复（字段宽度为 5）</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="s2">"(2(I5,F6.2))"</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mf">43.42</span><span class="p">,</span><span class="w"> </span><span class="mi">340</span><span class="p">,</span><span class="w"> </span><span class="mf">65.3</span><span class="w">     </span><span class="c1">! 格式重复组合</span><span class="w">

    </span><span class="c1">! 我们还可以从终端读取输入</span><span class="w">
    </span><span class="k">read</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">v</span><span class="w">
    </span><span class="k">read</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"(2F6.2)"</span><span class="p">)</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w">                        </span><span class="c1">! 读取两个数字</span><span class="w">

    </span><span class="c1">! 写入文件</span><span class="w">
    </span><span class="k">open</span><span class="w"> </span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="o">=</span><span class="s2">"records.txt"</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="s2">"replace"</span><span class="p">)</span><span class="w">
    </span><span class="c1">! 文件通过 'unit number' 引用，这个数字可以在 9:99 范围内选择</span><span class="w">
    </span><span class="c1">! Status 可以是 {'old','replace','new'} 中的一个</span><span class="w">
    </span><span class="k">write</span><span class="w"> </span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="s2">"(F10.2,F10.2,F10.2)"</span><span class="p">)</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w">
    </span><span class="k">close</span><span class="w"> </span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="w">

    </span><span class="c1">! 读取文件</span><span class="w">
    </span><span class="k">open</span><span class="w"> </span><span class="p">(</span><span class="n">newunit</span><span class="o">=</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="o">=</span><span class="s2">"records.txt"</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="s2">"old"</span><span class="p">)</span><span class="w">
    </span><span class="c1">! 文件通过 'new unit number' 引用，编译器为您选择一个整数</span><span class="w">
    </span><span class="k">read</span><span class="w"> </span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">fmt</span><span class="o">=</span><span class="s2">"(3F10.2)"</span><span class="p">)</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w">
    </span><span class="k">close</span><span class="w"> </span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="w">

    </span><span class="c1">! 还有更多功能可用，超出了本文所讨论的范围，</span><span class="w">
    </span><span class="c1">! 还有由于与旧版本的 Fortran 的向后兼容性而存在的替代方案</span><span class="w">

    </span><span class="c1">! 内置函数</span><span class="w">
    </span><span class="c1">! ===========</span><span class="w">

    </span><span class="c1">! Fortran 大约有 200 个语言内部的函数/子程序</span><span class="w">
    </span><span class="c1">! 例如 -</span><span class="w">
    </span><span class="k">call</span><span class="w"> </span><span class="nb">cpu_time</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="w">        </span><span class="c1">! 将 'v' 设置为以秒为单位的时间</span><span class="w">
    </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">ior</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w">           </span><span class="c1">! 两个整数的位 OR 运算</span><span class="w">
    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">log10</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">            </span><span class="c1">! 以 10 为底的对数</span><span class="w">
    </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">floor</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="w">            </span><span class="c1">! 返回小于或等于 x 的最接近的整数</span><span class="w">
    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">aimag</span><span class="p">(</span><span class="n">w</span><span class="p">)</span><span class="w">            </span><span class="c1">! 复数的虚部</span><span class="w">

    </span><span class="c1">! 函数和子程序</span><span class="w">
    </span><span class="c1">! ==============</span><span class="w">

    </span><span class="c1">! 子程序运行一些代码，并可以对输入值产生副作用或修改输入值</span><span class="w">

    </span><span class="k">call</span><span class="w"> </span><span class="n">routine</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w">   </span><span class="c1">! 子程序调用</span><span class="w">

    </span><span class="c1">! 函数采用一系列输入参数，并返回一个单个值</span><span class="w">
    </span><span class="c1">! 不过，输入参数可能仍会被修改，并且会执行副作用</span><span class="w">

    </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w">       </span><span class="c1">! 函数调用</span><span class="w">

    </span><span class="c1">! 函数调用还可以在表达式中使用</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">func2</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w">

    </span><span class="c1">! 一个纯函数是一个不修改其输入参数，</span><span class="w">
    </span><span class="c1">! 也不会引起任何副作用的函数</span><span class="w">
    </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func3</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w">

</span><span class="k">contains</span><span class="w">                    </span><span class="c1">! 包含程序内部定义的子程序的区域</span><span class="w">

    </span><span class="c1">! Fortran 有几种稍微不同的方式来定义函数</span><span class="w">

    </span><span class="kt">integer</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w">      </span><span class="c1">! 函数返回一个整数值</span><span class="w">
        </span><span class="c1">! implicit none                 ! 子变量域可以不再声明 implicit none</span><span class="w">
        </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w">  </span><span class="c1">! 在函数内部定义输入参数的类型</span><span class="w">

        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">
            </span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">c</span><span class="w">            </span><span class="c1">! 返回变量默认为函数名</span><span class="w">
            </span><span class="k">return</span><span class="w">                      </span><span class="c1">! 随时可以从函数返回当前值</span><span class="w">
        </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">
        </span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">c</span><span class="w">

        </span><span class="c1">! 在函数的末尾不需要 return 语句</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func</span><span class="w">

    </span><span class="k">function</span><span class="w"> </span><span class="n">func2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="w">   </span><span class="c1">! 返回变量声明为 'f'</span><span class="w">
        </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w">     </span><span class="c1">! 可以声明和强制约定变量</span><span class="w">
        </span><span class="c1">! 不会被函数修改</span><span class="w">
        </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">inout</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">c</span><span class="w">
        </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">f</span><span class="w">                    </span><span class="c1">! 函数返回类型在函数内部声明</span><span class="w">
        </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">cnt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">              </span><span class="c1">! 注意：初始化暗示变量在函数调用之间保存</span><span class="w">
        </span><span class="c1">!</span><span class="w">

        </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">c</span><span class="w">
        </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w">                           </span><span class="c1">! 修改输入变量的值</span><span class="w">
        </span><span class="n">cnt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cnt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">                   </span><span class="c1">! 计算函数调用的次数</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func2</span><span class="w">

    </span><span class="k">pure</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func3</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w">        </span><span class="c1">! 纯函数不能有副作用</span><span class="w">
        </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w">
        </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">func3</span><span class="w">

        </span><span class="n">func3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">*</span><span class="n">b</span><span class="o">*</span><span class="n">c</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func3</span><span class="w">

    </span><span class="k">subroutine</span><span class="w"> </span><span class="n">routine</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="w">
        </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">inout</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">f</span><span class="w">
        </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="w">

        </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="n">d</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3</span><span class="o">*</span><span class="n">e</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">f</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">subroutine</span><span class="w"> </span><span class="n">routine</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">example</span><span class="w">                     </span><span class="c1">! 程序定义结束--------------------------</span><span class="w">

</span><span class="c1">! 函数和子程序在程序列表之外声明，在程序之间以及模块中声明时，需要使用 interface 声明（即使它们在同一源文件中）（见下面）将它们定义在模块或程序的 'contains' 部分更容易</span><span class="w">

</span><span class="k">elemental</span><span class="w"> </span><span class="kt">real</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func4</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="w">
</span><span class="c1">! elemental 函数是一个纯函数，它采用标量输入变量，</span><span class="w">
</span><span class="c1">! 但也可以在数组上独立应用，并返回一个新的数组</span><span class="w">
    </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a</span><span class="w">

    </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1.0</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func4</span><span class="w">

</span><span class="c1">! 模块</span><span class="w">
</span><span class="c1">! =======</span><span class="w">

</span><span class="c1">! 模块是在可重用性中将相关的声明、函数和子程序结合在一起的有用方式</span><span class="w">

</span><span class="k">module</span><span class="w"> </span><span class="n">fruit</span><span class="w">

    </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">apple</span><span class="w">
    </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">pear</span><span class="w">
    </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">orange</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">module</span><span class="w"> </span><span class="n">fruit</span><span class="w">

</span><span class="k">module</span><span class="w"> </span><span class="n">fruity</span><span class="w">
    </span><span class="c1">! 声明的顺序必须是：模块、接口、变量</span><span class="w">
    </span><span class="c1">!（也可以在程序中声明模块和接口）</span><span class="w">

    </span><span class="k">use</span><span class="w"> </span><span class="n">fruit</span><span class="p">,</span><span class="w"> </span><span class="k">only</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="p">,</span><span class="w"> </span><span class="n">pear</span><span class="w">    </span><span class="c1">! 使用 fruit 模块中的 apple 和 pear</span><span class="w">
    </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">                   </span><span class="c1">! 导入模块之后</span><span class="w">

    </span><span class="k">private</span><span class="w">                         </span><span class="c1">! 将一些内容私有化（默认为公共）</span><span class="w">
    </span><span class="c1">! 显式将一些变量/函数声明为公共</span><span class="w">
    </span><span class="k">public</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">apple</span><span class="p">,</span><span class="w"> </span><span class="n">mycar</span><span class="p">,</span><span class="w"> </span><span class="n">create_mycar</span><span class="w">
    </span><span class="c1">! 将一些变量/函数声明为模块私有（本例中是多余的）</span><span class="w">
    </span><span class="k">private</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">func4</span><span class="w">

    </span><span class="c1">! 接口</span><span class="w">
    </span><span class="c1">! ========</span><span class="w">
    </span><span class="c1">! 在模块内部（最好放在 'contains' 部分）显式声明外部函数/过程</span><span class="w">
    </span><span class="k">interface</span><span class="w">
        </span><span class="k">elemental</span><span class="w"> </span><span class="kt">real</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func4</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="w">
            </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a</span><span class="w">
        </span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func4</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">interface</span><span class="w">

    </span><span class="c1">! 可以使用命名接口定义重载函数</span><span class="w">
    </span><span class="k">interface</span><span class="w"> </span><span class="n">myabs</span><span class="w">
        </span><span class="c1">! 可以使用 'module procedure' 关键字包括模块内已经定义的函数</span><span class="w">
        </span><span class="k">module</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">real_abs</span><span class="p">,</span><span class="w"> </span><span class="n">complex_abs</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">interface</span><span class="w">

    </span><span class="c1">! 派生数据类型</span><span class="w">
    </span><span class="c1">! ==================</span><span class="w">
    </span><span class="c1">! 可以创建自定义的结构化数据集合</span><span class="w">
    </span><span class="k">type</span><span class="w"> </span><span class="n">car</span><span class="w">
        </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">model</span><span class="w">
        </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">weight</span><span class="w">              </span><span class="c1">!（千克）</span><span class="w">
        </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">dimensions</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w">       </span><span class="c1">! 即，长度-宽度-高度（米）</span><span class="w">
        </span><span class="kt">character</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">colour</span><span class="w">
    </span><span class="k">contains</span><span class="w">
        </span><span class="k">procedure</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">info</span><span class="w">           </span><span class="c1">! 将过程绑定到类型</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="n">car</span><span class="w">

    </span><span class="k">type</span><span class="p">(</span><span class="n">car</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">mycar</span><span class="w">              </span><span class="c1">! 声明自定义类型的变量</span><span class="w">
    </span><span class="c1">! 请查看 create_mycar() 程序的用法</span><span class="w">

    </span><span class="c1">! 注意：模块中没有可以执行的语句</span><span class="w">

</span><span class="k">contains</span><span class="w">

    </span><span class="k">subroutine</span><span class="w"> </span><span class="n">create_mycar</span><span class="p">(</span><span class="n">mycar</span><span class="p">)</span><span class="w">
        </span><span class="c1">! 演示派生数据类型的用法</span><span class="w">
        </span><span class="k">type</span><span class="p">(</span><span class="n">car</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">out</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">mycar</span><span class="w">

        </span><span class="c1">! 使用 '%' 运算符访问类型元素</span><span class="w">
        </span><span class="n">mycar</span><span class="o">%</span><span class="n">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Ford Prefect"</span><span class="w">
        </span><span class="n">mycar</span><span class="o">%</span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'r'</span><span class="w">
        </span><span class="n">mycar</span><span class="o">%</span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1400</span><span class="w">
        </span><span class="n">mycar</span><span class="o">%</span><span class="n">dimensions</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5.0</span><span class="w">   </span><span class="c1">! 默认索引从 1 开始！</span><span class="w">
        </span><span class="n">mycar</span><span class="o">%</span><span class="n">dimensions</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.0</span><span class="w">
        </span><span class="n">mycar</span><span class="o">%</span><span class="n">dimensions</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.5</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">subroutine</span><span class="w"> </span><span class="n">create_mycar</span><span class="w">

    </span><span class="k">subroutine</span><span class="w"> </span><span class="n">info</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="w">
        </span><span class="k">class</span><span class="p">(</span><span class="n">car</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">self</span><span class="w">
        </span><span class="c1">! 使用 'class' 关键字将过程绑定到类型</span><span class="w">

        </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"Model     : "</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="o">%</span><span class="n">model</span><span class="w">
        </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"Colour    : "</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="o">%</span><span class="n">colour</span><span class="w">
        </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"Weight    : "</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="o">%</span><span class="n">weight</span><span class="w">
        </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"Dimensions: "</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="o">%</span><span class="n">dimensions</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">subroutine</span><span class="w"> </span><span class="n">info</span><span class="w">

    </span><span class="kt">real</span><span class="w"> </span><span class="k">pure</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">real_abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
        </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">x</span><span class="w">

        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">
            </span><span class="n">real_abs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">x</span><span class="w">
        </span><span class="k">else</span><span class="w">
            </span><span class="n">real_abs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w">
        </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">real_abs</span><span class="w">

    </span><span class="kt">real</span><span class="w"> </span><span class="k">pure</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">complex_abs</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="w">
        </span><span class="kt">complex</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">z</span><span class="w">
        </span><span class="c1">! 长行可以使用继续字符 '&amp;' 进行延续</span><span class="w">

        </span><span class="n">complex_abs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">sqrt</span><span class="p">(</span><span class="kt">real</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">&amp;</span><span class="w">
                           </span><span class="nb">aimag</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">complex_abs</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">module</span><span class="w"> </span><span class="n">fruity</span><span class="w">

</span></code></pre></div>
<h3>更多资源</h3>

<p>了解更多的 Fortran 信息:</p>

<ul>
<li><a href="https://en.wikipedia.org/wiki/Fortran">wikipedia</a></li>
<li><a href="https://fortran-lang.org/">Fortran-lang Organization</a></li>
<li><a href="https://en.wikipedia.org/wiki/Fortran_95_language_features">Fortran<em>95</em>language_features</a></li>
<li><a href="http://fortranwiki.org">fortranwiki.org</a></li>
<li><a href="http://www.fortran90.org">www.fortran90.org/</a></li>
<li><a href="http://www.dmoz.org/Computers/Programming/Languages/Fortran/FAQs%2C_Help%2C_and_Tutorials/Fortran_90_and_95/">list of Fortran 95 tutorials</a></li>
<li><a href="https://en.wikibooks.org/wiki/Fortran">Fortran wikibook</a></li>
<li><a href="http://www.fortranplus.co.uk/resources/fortran_resources.pdf">Fortran resources</a></li>
<li><a href="http://www.cs.rpi.edu/~szymansk/OOF90/bugs.html">Mistakes in Fortran 90 Programs That Might Surprise You</a></li>
</ul>

    <hr>
    <p>有建议？或者发现什么错误？在Github上<a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">开一个issue</a>，或者发起<a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/zh-cn/fortran-cn.html.markdown">pull request</a>！
    </p>
    <p class="contributed">
    原著Robert Steed，并由<a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/zh-cn/fortran-cn.html.markdown">0个好心人</a>修改。
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="https://github.com/robochat">Robert Steed</a>
    </p>

    <p>
      Translated by:
        <a href="https://github.com/Corvusnest">Corvusnest</a>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-3525624-21'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
