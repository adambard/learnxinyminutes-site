<!DOCTYPE html lang="en-us" xml:lang="en-us" xmlns="http://www.w3.org/1999/xhtml">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="en-us">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn moonscript in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/moonscript/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }

                if (theme === "dark" ) {
                    el.className = "dark";
                } else {
                    el.className = "light";
                }

                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (theme) {
                set_theme(theme);
              }
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.addEventListener("load", function(){
              load_theme();
            });
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Fmoonscript%2F&text=Learn+X+in+Y+minutes%2C+where+X%3Dmoonscript">
        Share this page
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">Select theme:</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">light</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">dark</button>
  </div>
  <h1><a href="/">Learn X in Y minutes</a></h1>
  <h2>Where X=moonscript</h2>
    <p class="filelink">
    Get the code:
    <a href="/docs/files/moonscript.moon">moonscript.moon</a>
    </p>
  <div id="doc">
    <p>MoonScript is a dynamic scripting language that compiles into Lua. It gives
you the power of one of the fastest scripting languages combined with a
rich set of features.</p>

<p>See <a href="https://moonscript.org/">the MoonScript website</a> to see official guides on installation for all platforms.</p>
<div class="highlight"><pre class="highlight moonscript"><code><span class="c1">-- Two dashes start a comment. Comments can go until the end of the line.</span><span class="w">
</span><span class="c1">-- MoonScript transpiled to Lua does not keep comments.</span><span class="w">

</span><span class="c1">-- As a note, MoonScript does not use 'do', 'then', or 'end' like Lua would and</span><span class="w">
</span><span class="c1">-- instead uses an indented syntax, much like Python.</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- 1. Assignment</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="n">hello</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"world"</span><span class="w">
</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w">
</span><span class="n">hello</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="w"> </span><span class="c1">-- Overwrites `hello` from above.</span><span class="w">

</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="c1">-- x = x + 10</span><span class="w">

</span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"hello "</span><span class="w">
</span><span class="n">s</span><span class="w"> </span><span class="o">..=</span><span class="w"> </span><span class="s2">"world"</span><span class="w"> </span><span class="c1">-- s = s .. "world"</span><span class="w">

</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="n">b</span><span class="w"> </span><span class="ow">and</span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c1">-- b = b and (true or false)</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- 2. Literals and Operators</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="c1">-- Literals work almost exactly as they would in Lua. Strings can be broken in</span><span class="w">
</span><span class="c1">-- the middle of a line without requiring a \.</span><span class="w">

</span><span class="n">some_string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"exa
mple"</span><span class="w"> </span><span class="c1">-- local some_string = "exa\nmple"</span><span class="w">

</span><span class="c1">-- Strings can also have interpolated values, or values that are evaluated and</span><span class="w">
</span><span class="c1">-- then placed inside of a string.</span><span class="w">

</span><span class="n">some_string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"This is an </span><span class="si">#{</span><span class="n">some_string</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="c1">-- Becomes 'This is an exa\nmple'</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- 2.1. Function Literals</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="c1">-- Functions are written using arrows:</span><span class="w">

</span><span class="n">my_function</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="c1">-- compiles to `function() end`</span><span class="w">
</span><span class="n">my_function</span><span class="p">()</span><span class="w"> </span><span class="c1">-- calls an empty function</span><span class="w">

</span><span class="c1">-- Functions can be called without using parenthesis. Parentheses may still be</span><span class="w">
</span><span class="c1">-- used to have priority over other functions.</span><span class="w">

</span><span class="n">func_a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nb">print</span><span class="w"> </span><span class="s2">"Hello World!"</span><span class="w">
</span><span class="n">func_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="w">
    </span><span class="nb">print</span><span class="w"> </span><span class="s2">"The value: </span><span class="si">#{</span><span class="n">value</span><span class="si">}</span><span class="s2">"</span><span class="w">

</span><span class="c1">-- If a function needs no parameters, it can be called with either `()` or `!`.</span><span class="w">

</span><span class="n">func_a</span><span class="o">!</span><span class="w">
</span><span class="n">func_b</span><span class="p">()</span><span class="w">

</span><span class="c1">-- Functions can use arguments by preceding the arrow with a list of argument</span><span class="w">
</span><span class="c1">-- names bound by parentheses.</span><span class="w">

</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="c1">-- The last expression is returned from the function.</span><span class="w">
</span><span class="nb">print</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w">

</span><span class="c1">-- Lua has an idiom of sending the first argument to a function as the object,</span><span class="w">
</span><span class="c1">-- like a 'self' object. Using a fat arrow (=&gt;) instead of a skinny arrow (-&gt;)</span><span class="w">
</span><span class="c1">-- automatically creates a `self` variable. `@x` is a shorthand for `self.x`.</span><span class="w">

</span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="p">)</span><span class="o">=&gt;</span><span class="w"> </span><span class="vi">@value</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num</span><span class="w">

</span><span class="c1">-- Default arguments can also be used with function literals:</span><span class="w">

</span><span class="n">a_function</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"something"</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span><span class="o">-&gt;</span><span class="w">
    </span><span class="nb">print</span><span class="w"> </span><span class="s2">"Hello, I am </span><span class="si">#{</span><span class="n">name</span><span class="si">}</span><span class="s2">.\nMy height is </span><span class="si">#{</span><span class="n">height</span><span class="si">}</span><span class="s2">."</span><span class="w">

</span><span class="c1">-- Because default arguments are calculated in the body of the function when</span><span class="w">
</span><span class="c1">-- transpiled to Lua, you can reference previous arguments.</span><span class="w">

</span><span class="n">some_args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="o">-&gt;</span><span class="w"> </span><span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- Considerations</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="c1">-- The minus sign plays two roles, a unary negation operator and a binary</span><span class="w">
</span><span class="c1">-- subtraction operator. It is recommended to always use spaces between binary</span><span class="w">
</span><span class="c1">-- operators to avoid the possible collision.</span><span class="w">

</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="c1">--  a = x - 10</span><span class="w">
</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="c1">-- b = x - 10</span><span class="w">
</span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"> </span><span class="c1">-- c = x(-y)</span><span class="w">
</span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">-</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="c1">-- d = x - z</span><span class="w">

</span><span class="c1">-- When there is no space between a variable and string literal, the function</span><span class="w">
</span><span class="c1">-- call takes priority over following expressions:</span><span class="w">

</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func</span><span class="s2">"hello"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="c1">-- func("hello") + 100</span><span class="w">
</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func</span><span class="w"> </span><span class="s2">"hello"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="c1">-- func("hello" + 100)</span><span class="w">

</span><span class="c1">-- Arguments to a function can span across multiple lines as long as the</span><span class="w">
</span><span class="c1">-- arguments are indented. The indentation can be nested as well.</span><span class="w">

</span><span class="n">my_func</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="c1">-- called as my_func(5, 8, another_func(6, 7, 9, 1, 2), 5, 4)</span><span class="w">
    </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="n">another_func</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="c1">-- called as</span><span class="w">
        </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">          </span><span class="c1">-- another_func(6, 7, 9, 1, 2)</span><span class="w">
    </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w">

</span><span class="c1">-- If a function is used at the start of a block, the indentation can be</span><span class="w">
</span><span class="c1">-- different than the level of indentation used in a block:</span><span class="w">

</span><span class="k">if</span><span class="w"> </span><span class="n">func</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="c1">-- called as func(1, 2, 3, "hello", "world")</span><span class="w">
        </span><span class="s2">"hello"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"world"</span><span class="w">
    </span><span class="nb">print</span><span class="w"> </span><span class="s2">"hello"</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- 3. Tables</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="c1">-- Tables are defined by curly braces, like Lua:</span><span class="w">

</span><span class="n">some_values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">}</span><span class="w">

</span><span class="c1">-- Tables can use newlines instead of commas.</span><span class="w">

</span><span class="n">some_other_values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="w">
    </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">-- Assignment is done with `:` instead of `=`:</span><span class="w">

</span><span class="n">profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="ss">name:</span><span class="w"> </span><span class="s2">"Bill"</span><span class="w">
    </span><span class="ss">age:</span><span class="w"> </span><span class="mi">200</span><span class="w">
    </span><span class="ss">"favorite food":</span><span class="w"> </span><span class="s2">"rice"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">-- Curly braces can be left off for `key: value` tables.</span><span class="w">

</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">type:</span><span class="w"> </span><span class="s2">"dog"</span><span class="p">,</span><span class="w"> </span><span class="ss">legs:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="ss">tails:</span><span class="w"> </span><span class="mi">1</span><span class="w">

</span><span class="n">profile</span><span class="w"> </span><span class="o">=</span><span class="w">
    </span><span class="ss">height:</span><span class="w"> </span><span class="s2">"4 feet"</span><span class="p">,</span><span class="w">
    </span><span class="ss">shoe_size:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w">
    </span><span class="ss">favorite_foods:</span><span class="w"> </span><span class="c1">-- nested table</span><span class="w">
        </span><span class="ss">foo:</span><span class="w"> </span><span class="s2">"ice cream"</span><span class="p">,</span><span class="w"> 
        </span><span class="ss">bar:</span><span class="w"> </span><span class="s2">"donuts"</span><span class="w">

</span><span class="n">my_function</span><span class="w"> </span><span class="ss">dance:</span><span class="w"> </span><span class="s2">"Tango"</span><span class="p">,</span><span class="w"> </span><span class="ss">partner:</span><span class="w"> </span><span class="s2">"none"</span><span class="w"> </span><span class="c1">-- :( forever alone</span><span class="w">

</span><span class="c1">-- Tables constructed from variables can use the same name as the variables</span><span class="w">
</span><span class="c1">-- by using `:` as a prefix operator.</span><span class="w">

</span><span class="n">hair</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"golden"</span><span class="w">
</span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="w">
</span><span class="n">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="ss">:hair</span><span class="p">,</span><span class="w"> </span><span class="ss">:height</span><span class="p">}</span><span class="w">

</span><span class="c1">-- Like in Lua, keys can be non-string or non-numeric values by using `[]`.</span><span class="w">

</span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w">
    </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">]:</span><span class="w"> </span><span class="s2">"hello"</span><span class="w">
    </span><span class="ss">"hello world":</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">-- Can use string literals without `[]`.</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- 3.1. Table Comprehensions</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="c1">-- List Comprehensions</span><span class="w">

</span><span class="c1">-- Creates a copy of a list but with all items doubled. Using a star before a</span><span class="w">
</span><span class="c1">-- variable name or table can be used to iterate through the table's values.</span><span class="w">

</span><span class="n">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">}</span><span class="w">
</span><span class="n">doubled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">item</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="n">items</span><span class="p">]</span><span class="w">
</span><span class="c1">-- Uses `when` to determine if a value should be included.</span><span class="w">

</span><span class="n">slice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">item</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="n">items</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w">

</span><span class="c1">-- `for` clauses inside of list comprehensions can be chained.</span><span class="w">

</span><span class="n">x_coords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">}</span><span class="w">
</span><span class="n">y_coords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span><span class="w">

</span><span class="n">points</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">}</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="n">x_coords</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="n">y_coords</span><span class="p">]</span><span class="w">

</span><span class="c1">-- Numeric for loops can also be used in comprehensions:</span><span class="w">

</span><span class="n">evens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span><span class="w">

</span><span class="c1">-- Table Comprehensions are very similar but use `{` and `}` and take two</span><span class="w">
</span><span class="c1">-- values for each iteration.</span><span class="w">

</span><span class="n">thing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">color:</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="ss">name:</span><span class="w"> </span><span class="s2">"thing"</span><span class="p">,</span><span class="w"> </span><span class="ss">width:</span><span class="w"> </span><span class="mi">123</span><span class="w">
</span><span class="n">thing_copy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nb">pairs</span><span class="w"> </span><span class="n">thing</span><span class="p">}</span><span class="w">

</span><span class="c1">-- Tables can be "flattened" from key-value pairs in an array by using `unpack`</span><span class="w">
</span><span class="c1">-- to return both values, using the first as the key and the second as the</span><span class="w">
</span><span class="c1">-- value.</span><span class="w">

</span><span class="n">tuples</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{{</span><span class="s2">"hello"</span><span class="p">,</span><span class="w"> </span><span class="s2">"world"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">}}</span><span class="w">
</span><span class="n">table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">unpack</span><span class="w"> </span><span class="n">tuple</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">tuple</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="n">tuples</span><span class="p">}</span><span class="w">

</span><span class="c1">-- Slicing can be done to iterate over only a certain section of an array. It</span><span class="w">
</span><span class="c1">-- uses the `*` notation for iterating but appends `[start, end, step]`.</span><span class="w">

</span><span class="c1">-- The next example also shows that this syntax can be used in a `for` loop as</span><span class="w">
</span><span class="c1">-- well as any comprehensions.</span><span class="w">

</span><span class="k">for</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span><span class="w">
    </span><span class="nb">print</span><span class="w"> </span><span class="n">unpack</span><span class="w"> </span><span class="n">item</span><span class="w">

</span><span class="c1">-- Any undesired values can be left off. The second comma is not required if</span><span class="w">
</span><span class="c1">-- the step is not included.</span><span class="w">

</span><span class="n">words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">"these"</span><span class="p">,</span><span class="w"> </span><span class="s2">"are"</span><span class="p">,</span><span class="w"> </span><span class="s2">"some"</span><span class="p">,</span><span class="w"> </span><span class="s2">"words"</span><span class="p">}</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="n">word</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="n">words</span><span class="p">[,</span><span class="mi">3</span><span class="p">]</span><span class="w"> 
    </span><span class="nb">print</span><span class="w"> </span><span class="n">word</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- 4. Control Structures</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="n">have_coins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="k">if</span><span class="w"> </span><span class="n">have_coins</span><span class="w">
    </span><span class="nb">print</span><span class="w"> </span><span class="s2">"Got coins"</span><span class="w">
</span><span class="k">else</span><span class="w">
    </span><span class="nb">print</span><span class="w"> </span><span class="s2">"No coins"</span><span class="w">

</span><span class="c1">-- Use `then` for single-line `if`</span><span class="w">
</span><span class="k">if</span><span class="w"> </span><span class="n">have_coins</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s2">"Got coins"</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">"No coins"</span><span class="w">

</span><span class="c1">-- `unless` is the opposite of `if`</span><span class="w">
</span><span class="k">unless</span><span class="w"> </span><span class="nb">os.date</span><span class="p">(</span><span class="s2">"%A"</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Monday"</span><span class="w">
    </span><span class="nb">print</span><span class="w"> </span><span class="s2">"It is not Monday!"</span><span class="w">

</span><span class="c1">-- `if` and `unless` can be used as expressions</span><span class="w">
</span><span class="n">is_tall</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">-&gt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Rob"</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"I am </span><span class="si">#{</span><span class="k">if</span><span class="w"> </span><span class="n">is_tall</span><span class="w"> </span><span class="err">"</span><span class="nc">Rob</span><span class="err">"</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">"</span><span class="n">very</span><span class="w"> </span><span class="n">tall</span><span class="err">"</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="err">"</span><span class="ow">not</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">tall</span><span class="err">"</span><span class="si">}</span><span class="s2">"</span><span class="w">
</span><span class="nb">print</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="c1">-- "I am very tall"</span><span class="w">

</span><span class="c1">-- `if`, `elseif`, and `unless` can evaluate assignment as well as expressions.</span><span class="w">
</span><span class="k">if</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">possibly_nil</span><span class="o">!</span><span class="w"> </span><span class="c1">-- sets `x` to `possibly_nil()` and evaluates `x`</span><span class="w">
    </span><span class="nb">print</span><span class="w"> </span><span class="n">x</span><span class="w">

</span><span class="c1">-- Conditionals can be used after a statement as well as before. This is</span><span class="w">
</span><span class="c1">-- called a "line decorator".</span><span class="w">

</span><span class="n">is_monday</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">os.date</span><span class="p">(</span><span class="s2">"%A"</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Monday"</span><span class="w">
</span><span class="nb">print</span><span class="p">(</span><span class="s2">"It IS Monday!"</span><span class="p">)</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">isMonday</span><span class="w">
</span><span class="nb">print</span><span class="p">(</span><span class="s2">"It is not Monday.."</span><span class="p">)</span><span class="w"> </span><span class="k">unless</span><span class="w"> </span><span class="n">isMonday</span><span class="w">
</span><span class="c1">--print("It IS Monday!" if isMonday) -- Not a statement, does not work</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- 4.1 Loops</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="nb">print</span><span class="w"> </span><span class="n">i</span><span class="w">

</span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nb">print</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="c1">-- Use `do` for single-line loops.</span><span class="w">

</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="k">while</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="k">continue</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="c1">-- Continue statement; skip the rest of the loop.</span><span class="w">
    </span><span class="nb">print</span><span class="w"> </span><span class="n">i</span><span class="w">

</span><span class="c1">-- Loops can be used as a line decorator, just like conditionals</span><span class="w">
</span><span class="nb">print</span><span class="w"> </span><span class="s2">"item: </span><span class="si">#{</span><span class="n">item</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="n">items</span><span class="w">

</span><span class="c1">-- Using loops as an expression generates an array table. The last statement</span><span class="w">
</span><span class="c1">-- in the block is coerced into an expression and added to the table.</span><span class="w">
</span><span class="n">my_numbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="c1">-- {1, 2, 3, 4, 5, 6}</span><span class="w">

</span><span class="c1">-- use `continue` to filter out values</span><span class="w">
</span><span class="n">odds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="n">my_numbers</span><span class="w">
    </span><span class="k">continue</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="c1">-- acts opposite to `when` in comprehensions!</span><span class="w">
    </span><span class="n">i</span><span class="w"> </span><span class="c1">-- Only added to return table if odd</span><span class="w">

</span><span class="c1">-- A `for` loop returns `nil` when it is the last statement of a function</span><span class="w">
</span><span class="c1">-- Use an explicit `return` to generate a table.</span><span class="w">
</span><span class="n">print_squared</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="n">t</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="w"> </span><span class="c1">-- returns `nil`</span><span class="w">
</span><span class="n">squared</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="n">t</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="w"> </span><span class="c1">-- returns new table of squares</span><span class="w">

</span><span class="c1">-- The following does the same as `(t) -&gt; [i for i in *t when i % 2 == 0]`</span><span class="w">
</span><span class="c1">-- But list comprehension generates better code and is more readable!</span><span class="w">

</span><span class="n">filter_odds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> 
    </span><span class="k">return</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="n">t</span><span class="w">
        </span><span class="k">if</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">continue</span><span class="w">
</span><span class="n">evens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filter_odds</span><span class="p">(</span><span class="n">my_numbers</span><span class="p">)</span><span class="w"> </span><span class="c1">-- {2, 4, 6}</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- 4.2 Switch Statements</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="c1">-- Switch statements are a shorthand way of writing multiple `if` statements</span><span class="w">
</span><span class="c1">-- checking against the same value. The value is only evaluated once.</span><span class="w">

</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Dan"</span><span class="w">

</span><span class="k">switch</span><span class="w"> </span><span class="n">name</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="s2">"Dave"</span><span class="w">
        </span><span class="nb">print</span><span class="w"> </span><span class="s2">"You are Dave."</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="s2">"Dan"</span><span class="w">
        </span><span class="nb">print</span><span class="w"> </span><span class="s2">"You are not Dave, but Dan."</span><span class="w">
    </span><span class="k">else</span><span class="w">
        </span><span class="nb">print</span><span class="w"> </span><span class="s2">"You are neither Dave nor Dan."</span><span class="w">

</span><span class="c1">-- Switches can also be used as expressions, as well as compare multiple</span><span class="w">
</span><span class="c1">-- values. The values can be on the same line as the `when` clause if they</span><span class="w">
</span><span class="c1">-- are only one expression.</span><span class="w">

</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w">
</span><span class="n">next_even</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">switch</span><span class="w"> </span><span class="n">b</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="mi">4</span><span class="w">
    </span><span class="k">when</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="mi">6</span><span class="w">
    </span><span class="k">else</span><span class="w"> </span><span class="nb">error</span><span class="w"> </span><span class="s2">"I can't count that high! D:"</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- 5. Object Oriented Programming</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="c1">-- Classes are created using the `class` keyword followed by an identifier,</span><span class="w">
</span><span class="c1">-- typically written using CamelCase. Values specific to a class can use @ as</span><span class="w">
</span><span class="c1">-- the identifier instead of `self.value`.</span><span class="w">

</span><span class="k">class</span><span class="w"> </span><span class="nc">Inventory</span><span class="w">
    </span><span class="ss">new:</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="vi">@items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="ss">add_item:</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">=&gt;</span><span class="w"> </span><span class="c1">-- note the use of fat arrow for classes!</span><span class="w">
        </span><span class="vi">@items</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">unless</span><span class="w"> </span><span class="vi">@items</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="w">
        </span><span class="vi">@items</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="w">

</span><span class="c1">-- The `new` function inside of a class is special because it is called when</span><span class="w">
</span><span class="c1">-- an instance of the class is created.</span><span class="w">

</span><span class="c1">-- Creating an instance of the class is as simple as calling the class as a</span><span class="w">
</span><span class="c1">-- function. Calling functions inside of the class uses \ to separate the</span><span class="w">
</span><span class="c1">-- instance from the function it is calling.</span><span class="w">

</span><span class="n">inv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Inventory</span><span class="o">!</span><span class="w">
</span><span class="n">inv</span><span class="o">\</span><span class="n">add_item</span><span class="w"> </span><span class="s2">"t-shirt"</span><span class="w">
</span><span class="n">inv</span><span class="o">\</span><span class="n">add_item</span><span class="w"> </span><span class="s2">"pants"</span><span class="w">

</span><span class="c1">-- Values defined in the class - not the new() function - will be shared across</span><span class="w">
</span><span class="c1">-- all instances of the class.</span><span class="w">

</span><span class="k">class</span><span class="w"> </span><span class="nc">Person</span><span class="w">
    </span><span class="ss">clothes:</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="ss">give_item:</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">=&gt;</span><span class="w">
        </span><span class="nb">table.insert</span><span class="w"> </span><span class="vi">@clothes</span><span class="w"> </span><span class="n">name</span><span class="w">

</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Person</span><span class="o">!</span><span class="w">
</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Person</span><span class="o">!</span><span class="w">

</span><span class="n">a</span><span class="o">\</span><span class="n">give_item</span><span class="w"> </span><span class="s2">"pants"</span><span class="w">
</span><span class="n">b</span><span class="o">\</span><span class="n">give_item</span><span class="w"> </span><span class="s2">"shirt"</span><span class="w">

</span><span class="c1">-- prints out both "pants" and "shirt"</span><span class="w">

</span><span class="nb">print</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">.</span><span class="n">clothes</span><span class="w">

</span><span class="c1">-- Class instances have a value `.__class` that are equal to the class object</span><span class="w">
</span><span class="c1">-- that created the instance.</span><span class="w">

</span><span class="nb">assert</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">__class</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nc">Person</span><span class="p">)</span><span class="w">

</span><span class="c1">-- Variables declared in class body the using the `=` operator are locals,</span><span class="w">
</span><span class="c1">-- so these "private" variables are only accessible within the current scope.</span><span class="w">

</span><span class="k">class</span><span class="w"> </span><span class="nc">SomeClass</span><span class="w">
    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="ss">reveal:</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
        </span><span class="n">x</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="nb">print</span><span class="w"> </span><span class="n">x</span><span class="w">

</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">SomeClass</span><span class="o">!</span><span class="w">
</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">SomeClass</span><span class="o">!</span><span class="w">
</span><span class="nb">print</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="c1">-- nil</span><span class="w">
</span><span class="n">a</span><span class="p">.</span><span class="n">reveal</span><span class="o">!</span><span class="w"> </span><span class="c1">-- 1</span><span class="w">
</span><span class="n">b</span><span class="p">.</span><span class="n">reveal</span><span class="o">!</span><span class="w"> </span><span class="c1">-- 2</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- 5.1 Inheritance</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="c1">-- The `extends` keyword can be used to inherit properties and methods from</span><span class="w">
</span><span class="c1">-- another class.</span><span class="w">

</span><span class="k">class</span><span class="w"> </span><span class="nc">Backpack</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nc">Inventory</span><span class="w">
    </span><span class="ss">size:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="ss">add_item:</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">=&gt;</span><span class="w">
        </span><span class="nb">error</span><span class="w"> </span><span class="s2">"backpack is full"</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">#</span><span class="vi">@items</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vi">@size</span><span class="w">
        </span><span class="k">super</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="c1">-- calls Inventory.add_item with `name`.</span><span class="w">

</span><span class="c1">-- Because a `new` method was not added, the `new` method from `Inventory` will</span><span class="w">
</span><span class="c1">-- be used instead. If we did want to use a constructor while still using the</span><span class="w">
</span><span class="c1">-- constructor from `Inventory`, we could use the magical `super` function</span><span class="w">
</span><span class="c1">-- during `new()`.</span><span class="w">

</span><span class="c1">-- When a class extends another, it calls the method `__inherited` on the </span><span class="w">
</span><span class="c1">-- parent class (if it exists). It is always called with the parent and the</span><span class="w">
</span><span class="c1">-- child object.</span><span class="w">

</span><span class="k">class</span><span class="w"> </span><span class="nc">ParentClass</span><span class="w">
    </span><span class="vi">@__inherited</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">child</span><span class="p">)</span><span class="o">=&gt;</span><span class="w">
        </span><span class="nb">print</span><span class="w"> </span><span class="s2">"</span><span class="si">#{</span><span class="vi">@__name</span><span class="si">}</span><span class="s2"> was inherited by </span><span class="si">#{</span><span class="n">child</span><span class="p">.</span><span class="n">__name</span><span class="si">}</span><span class="s2">"</span><span class="w">
    </span><span class="ss">a_method:</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">print</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s1">' '</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="n">b</span><span class="w">

</span><span class="c1">-- Will print 'ParentClass was inherited by MyClass'</span><span class="w">

</span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nc">ParentClass</span><span class="w">
    </span><span class="ss">a_method:</span><span class="w"> </span><span class="o">=&gt;</span><span class="w">
        </span><span class="k">super</span><span class="w"> </span><span class="s2">"hello world"</span><span class="p">,</span><span class="w"> </span><span class="s2">"from MyClass!"</span><span class="w"> 
        </span><span class="nb">assert</span><span class="w"> </span><span class="k">super</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nc">ParentClass</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- 6. Scope</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="c1">-- All values are local by default. The `export` keyword can be used to</span><span class="w">
</span><span class="c1">-- declare the variable as a global value.</span><span class="w">

</span><span class="kd">export</span><span class="w"> </span><span class="n">var_1</span><span class="p">,</span><span class="w"> </span><span class="n">var_2</span><span class="w">
</span><span class="n">var_1</span><span class="p">,</span><span class="w"> </span><span class="n">var_3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span><span class="w"> </span><span class="s2">"world"</span><span class="w"> </span><span class="c1">-- var_3 is local, var_1 is not.</span><span class="w">

</span><span class="kd">export</span><span class="w"> </span><span class="n">this_is_global_assignment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Hi!"</span><span class="w">

</span><span class="c1">-- Classes can also be prefixed with `export` to make them global classes.</span><span class="w">
</span><span class="c1">-- Alternatively, all CamelCase variables can be exported automatically using</span><span class="w">
</span><span class="c1">-- `export ^`, and all values can be exported using `export *`.</span><span class="w">

</span><span class="c1">-- `do` lets you manually create a scope, for when you need local variables.</span><span class="w">

</span><span class="k">do</span><span class="w">
    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="w">
</span><span class="nb">print</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="c1">-- nil</span><span class="w">

</span><span class="c1">-- Here we use `do` as an expression to create a closure.</span><span class="w">

</span><span class="n">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">do</span><span class="w"> 
    </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="o">-&gt;</span><span class="w">
        </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="w">

</span><span class="nb">print</span><span class="w"> </span><span class="n">counter</span><span class="o">!</span><span class="w">  </span><span class="c1">-- 1</span><span class="w">
</span><span class="nb">print</span><span class="w"> </span><span class="n">counter</span><span class="o">!</span><span class="w">  </span><span class="c1">-- 2</span><span class="w">

</span><span class="c1">-- The `local` keyword can be used to define variables</span><span class="w">
</span><span class="c1">-- before they are assigned.</span><span class="w">

</span><span class="kd">local</span><span class="w"> </span><span class="n">var_4</span><span class="w">
</span><span class="k">if</span><span class="w"> </span><span class="n">something</span><span class="w">
    </span><span class="n">var_4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="nb">print</span><span class="w"> </span><span class="n">var_4</span><span class="w"> </span><span class="c1">-- works because `var_4` was set in this scope, not the `if` scope.</span><span class="w">

</span><span class="c1">-- The `local` keyword can also be used to shadow an existing variable.</span><span class="w">

</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="k">if</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="kd">local</span><span class="w"> </span><span class="n">x</span><span class="w">
    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="w">
</span><span class="nb">print</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="c1">-- 10</span><span class="w">

</span><span class="c1">-- Use `local *` to forward-declare all variables. </span><span class="w">
</span><span class="c1">-- Alternatively, use `local ^` to forward-declare all CamelCase values.</span><span class="w">

</span><span class="kd">local</span><span class="w"> </span><span class="o">*</span><span class="w">

</span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="n">second</span><span class="o">!</span><span class="w">

</span><span class="n">second</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="nb">print</span><span class="w"> </span><span class="n">data</span><span class="w">

</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- 6.1 Import</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="c1">-- Values from a table can be brought to the current scope using the `import`</span><span class="w">
</span><span class="c1">-- and `from` keyword. Names in the `import` list can be preceded by `\` if</span><span class="w">
</span><span class="c1">-- they are a module function.</span><span class="w">

</span><span class="k">import</span><span class="w"> </span><span class="n">insert</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="c1">-- local insert = table.insert</span><span class="w">
</span><span class="k">import</span><span class="w"> </span><span class="o">\</span><span class="n">add</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="ss">state:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="ss">add:</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">=&gt;</span><span class="w"> </span><span class="vi">@state</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">value</span><span class="w">
</span><span class="nb">print</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="mi">22</span><span class="w">

</span><span class="c1">-- Like tables, commas can be excluded from `import` lists to allow for longer</span><span class="w">
</span><span class="c1">-- lists of imported items.</span><span class="w">

</span><span class="k">import</span><span class="w">
    </span><span class="n">asdf</span><span class="p">,</span><span class="w"> </span><span class="n">gh</span><span class="p">,</span><span class="w"> </span><span class="n">jkl</span><span class="w">
    </span><span class="n">antidisestablishmentarianism</span><span class="w">
    </span><span class="n">from</span><span class="w"> </span><span class="p">{}</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- 6.2 With</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="c1">-- The `with` statement can be used to quickly call and assign values in an</span><span class="w">
</span><span class="c1">-- instance of a class or object.</span><span class="w">

</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nc">File</span><span class="w"> </span><span class="s2">"lmsi15m.moon"</span><span class="w"> </span><span class="c1">-- `file` is the value of `set_encoding()`.</span><span class="w">
    </span><span class="o">\</span><span class="n">set_encoding</span><span class="w"> </span><span class="s2">"utf8"</span><span class="w">

</span><span class="n">create_person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">relatives</span><span class="p">)</span><span class="o">-&gt;</span><span class="w">
    </span><span class="k">with</span><span class="w"> </span><span class="nc">Person</span><span class="o">!</span><span class="w">
        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="w">
        </span><span class="o">\</span><span class="n">add_relative</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="n">relatives</span><span class="w">
</span><span class="n">me</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">create_person</span><span class="w"> </span><span class="s2">"Ryan"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="s2">"sister"</span><span class="p">,</span><span class="w"> </span><span class="s2">"sister"</span><span class="p">,</span><span class="w"> </span><span class="s2">"brother"</span><span class="p">,</span><span class="w"> </span><span class="s2">"dad"</span><span class="p">,</span><span class="w"> </span><span class="s2">"mother"</span><span class="p">}</span><span class="w">

</span><span class="k">with</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Hello"</span><span class="w"> </span><span class="c1">-- assignment as expression! :D</span><span class="w">
    </span><span class="nb">print</span><span class="w"> </span><span class="s2">"original: </span><span class="si">#{</span><span class="n">str</span><span class="si">}</span><span class="s2">"</span><span class="w">
    </span><span class="nb">print</span><span class="w"> </span><span class="s2">"upper: </span><span class="si">#{</span><span class="o">\</span><span class="n">upper</span><span class="o">!</span><span class="si">}</span><span class="s2">"</span><span class="w">

</span><span class="c1">--------------------------------------------------</span><span class="w">
</span><span class="c1">-- 6.3 Destructuring</span><span class="w">
</span><span class="c1">--------------------------------------------------</span><span class="w">

</span><span class="c1">-- Destructuring can take arrays, tables, and nested tables and convert them</span><span class="w">
</span><span class="c1">-- into local variables.</span><span class="w">

</span><span class="n">obj2</span><span class="w"> </span><span class="o">=</span><span class="w">
    </span><span class="ss">numbers:</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">}</span><span class="w">
    </span><span class="ss">properties:</span><span class="w">
        </span><span class="ss">color:</span><span class="w"> </span><span class="s2">"green"</span><span class="w">
        </span><span class="ss">height:</span><span class="w"> </span><span class="mi">13</span><span class="p">.</span><span class="mi">5</span><span class="w">

</span><span class="p">{</span><span class="ss">numbers:</span><span class="w"> </span><span class="p">{</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">second</span><span class="p">},</span><span class="w"> </span><span class="ss">properties:</span><span class="w"> </span><span class="p">{</span><span class="ss">:color</span><span class="p">}}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj2</span><span class="w">

</span><span class="nb">print</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">second</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="c1">-- 1 2 green</span><span class="w">

</span><span class="c1">-- `first` and `second` return [1] and [2] because they are as an array, but</span><span class="w">
</span><span class="c1">-- `:color` is like `color: color` so it sets itself to the `color` value.</span><span class="w">

</span><span class="c1">-- Destructuring can be used in place of `import`.</span><span class="w">

</span><span class="p">{</span><span class="ss">:max</span><span class="p">,</span><span class="w"> </span><span class="ss">:min</span><span class="p">,</span><span class="w"> </span><span class="ss">random:</span><span class="w"> </span><span class="n">rand</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">math</span><span class="w"> </span><span class="c1">-- rename math.random to rand</span><span class="w">

</span><span class="c1">-- Destructuring can be done anywhere assignment can be done.</span><span class="w">

</span><span class="k">for</span><span class="w"> </span><span class="p">{</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">}</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">*</span><span class="p">{{</span><span class="s2">"hello"</span><span class="p">,</span><span class="w"> </span><span class="s2">"world"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"egg"</span><span class="p">,</span><span class="w"> </span><span class="s2">"head"</span><span class="p">}}</span><span class="w">
    </span><span class="nb">print</span><span class="w"> </span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="w">
</span></code></pre></div>
<h2>Additional Resources</h2>

<ul>
<li><a href="https://moonscript.org/reference/">Language Guide</a></li>
<li><a href="https://moonscript.org/compiler/">Online Compiler</a></li>
</ul>

    <hr>
    <p>Got a suggestion? A correction, perhaps? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Open an Issue</a> on the Github Repo, or make a <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/moonscript.html.markdown">pull request</a> yourself!
    </p>
    <p class="contributed">
    Originally contributed by RyanSquared, and updated by <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/moonscript.html.markdown">1 contributor(s)</a>.
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="https://ryansquared.github.io/">RyanSquared</a>,
        <a href="https://github.com/JobLeonard">Job van der Zwan</a>
    </p>

    <p>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-3525624-21'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
