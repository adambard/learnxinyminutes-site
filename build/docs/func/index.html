<!DOCTYPE html lang="en-us" xml:lang="en-us" xmlns="http://www.w3.org/1999/xhtml">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="en-us">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn FunC in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/func/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }

                if (theme === "dark" ) {
                    el.className = "dark";
                } else {
                    el.className = "light";
                }

                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (theme) {
                set_theme(theme);
              }
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.addEventListener("load", function(){
              load_theme();
            });
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Ffunc%2F&text=Learn+X+in+Y+minutes%2C+where+X%3DFunC">
        Share this page
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">Select theme:</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">light</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">dark</button>
  </div>
  <h1><a href="/">Learn X in Y minutes</a></h1>
  <h2>Where X=FunC</h2>
    <p class="filelink">
    Get the code:
    <a href="/docs/files/learnFunC.fc">learnFunC.fc</a>
    </p>
  <div id="doc">
    <p>The FunC language is used to program smart contracts on the <a href="https://ton.org">The Open Network</a> blockchain. Contract logic is executed in TVM, the stack-based TON Virtual Machine.</p>

<p>FunC is a statically typed, which is similar to C.</p>

<h1>Basic syntax, the first Smart Contract — Data Types, Storage, Functions</h1>
<div class="highlight"><pre class="highlight c"><code><span class="p">;;</span> <span class="n">Single</span> <span class="n">line</span> <span class="n">comment</span>

    <span class="p">{</span><span class="o">-</span> <span class="n">This</span> <span class="n">is</span> <span class="n">a</span> <span class="n">multi</span><span class="o">-</span><span class="n">line</span> <span class="n">comment</span>
        <span class="p">{</span><span class="o">-</span> <span class="n">this</span> <span class="n">is</span> <span class="n">a</span> <span class="n">comment</span> <span class="n">in</span> <span class="n">the</span> <span class="n">comment</span> <span class="o">-</span><span class="p">}</span>
    <span class="o">-</span><span class="p">}</span>

    <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">sum</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span> 
    <span class="p">;;</span> <span class="n">This</span> <span class="n">is</span> <span class="n">a</span> <span class="n">function</span> <span class="n">that</span> <span class="n">gets</span> <span class="n">two</span> <span class="n">integer</span> <span class="n">parameters</span> 
    <span class="p">;;</span> <span class="n">and</span> <span class="k">return</span> <span class="n">integer</span> <span class="n">result</span>
      <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>  
    <span class="p">;;</span> <span class="n">All</span> <span class="n">integers</span> <span class="n">are</span> <span class="kt">signed</span> <span class="n">and</span> <span class="n">are</span> <span class="mi">257</span> <span class="n">bit</span> <span class="kt">long</span><span class="p">.</span> <span class="n">Overflow</span> <span class="n">throws</span> <span class="n">exception</span>
    <span class="p">;;</span> <span class="n">expressions</span> <span class="n">must</span> <span class="n">end</span> <span class="n">with</span> <span class="n">a</span> <span class="n">semicolon</span>
    <span class="p">}</span>

    <span class="p">()</span> <span class="n">f</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">cell</span> <span class="n">c</span><span class="p">,</span> <span class="n">slice</span> <span class="n">s</span><span class="p">,</span> <span class="n">builder</span> <span class="n">b</span><span class="p">,</span> <span class="n">cont</span> <span class="n">c</span><span class="p">,</span> <span class="n">tuple</span> <span class="n">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">;;</span> <span class="n">FunC</span> <span class="n">has</span> <span class="mi">7</span> <span class="n">atomic</span> <span class="n">types</span><span class="o">:</span> 
      <span class="p">;;</span> <span class="kt">int</span> <span class="o">-</span> <span class="mi">257</span> <span class="n">bit</span> <span class="kt">signed</span> <span class="n">integers</span><span class="p">,</span>
      <span class="p">;;</span> <span class="n">cell</span> <span class="o">-</span> <span class="n">basic</span> <span class="k">for</span> <span class="n">TON</span> <span class="n">opaque</span> <span class="n">data</span> <span class="n">structure</span><span class="p">,</span>
      <span class="p">;;</span> <span class="n">which</span> <span class="n">contains</span> <span class="n">up</span> <span class="n">to</span> <span class="mi">1</span><span class="p">,</span><span class="mo">023</span> <span class="n">bits</span> <span class="n">and</span> <span class="n">up</span> <span class="n">to</span> <span class="mi">4</span> <span class="n">references</span> <span class="n">to</span> <span class="n">other</span> <span class="n">cells</span><span class="p">,</span>
      <span class="p">;;</span> <span class="n">slice</span> <span class="n">and</span> <span class="n">builder</span> <span class="o">-</span> <span class="n">special</span> <span class="n">objects</span> <span class="n">to</span> <span class="n">read</span> <span class="n">from</span> <span class="n">and</span> <span class="n">write</span> <span class="n">to</span> <span class="n">cells</span><span class="p">,</span>
      <span class="p">;;</span> <span class="n">continuation</span> <span class="o">-</span> <span class="n">another</span> <span class="n">flavor</span> <span class="n">of</span> <span class="n">cell</span> <span class="n">that</span> <span class="n">contains</span> 
      <span class="p">;;</span> <span class="n">ready</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">execute</span> <span class="n">TVM</span> <span class="n">byte</span><span class="o">-</span><span class="n">code</span><span class="p">.</span>
      <span class="p">;;</span> <span class="n">tuple</span> <span class="n">is</span> <span class="n">an</span> <span class="n">ordered</span> <span class="n">collection</span> <span class="n">of</span> <span class="n">up</span> <span class="n">to</span> <span class="mi">255</span> <span class="n">components</span><span class="p">,</span>
      <span class="p">;;</span> <span class="n">having</span> <span class="n">arbitrary</span> <span class="n">value</span> <span class="n">types</span><span class="p">,</span> <span class="n">possibly</span> <span class="n">distinct</span><span class="p">.</span>
      <span class="p">;;</span> <span class="n">Finally</span> <span class="n">tensor</span> <span class="n">type</span> <span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span> <span class="p">...)</span> <span class="n">is</span> <span class="n">an</span> <span class="n">ordered</span> <span class="n">collection</span> <span class="n">ready</span> <span class="k">for</span>
      <span class="p">;;</span> <span class="n">mass</span> <span class="n">assigning</span> <span class="n">like</span><span class="o">:</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">)</span> <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
      <span class="p">;;</span> <span class="n">Special</span> <span class="k">case</span> <span class="n">of</span> <span class="n">tensor</span> <span class="n">type</span> <span class="n">is</span> <span class="n">the</span> <span class="n">unit</span> <span class="n">type</span> <span class="p">().</span>
      <span class="p">;;</span> <span class="n">It</span> <span class="n">represents</span> <span class="n">that</span> <span class="n">a</span> <span class="n">function</span> <span class="n">doesn</span><span class="err">’</span><span class="n">t</span> <span class="k">return</span> <span class="n">any</span> <span class="n">value</span><span class="p">,</span>
      <span class="p">;;</span> <span class="n">or</span> <span class="n">has</span> <span class="n">no</span> <span class="n">arguments</span><span class="p">.</span>
    <span class="err">}</span>

    <span class="p">;;</span> <span class="n">During</span> <span class="n">execution</span><span class="p">,</span> <span class="n">the</span> <span class="n">contract</span> <span class="n">has</span> <span class="n">read</span> <span class="n">access</span> <span class="n">to</span> <span class="n">local</span> <span class="n">context</span><span class="p">:</span>
    <span class="p">;;</span> <span class="n">its</span> <span class="n">storage</span><span class="p">,</span> <span class="n">balance</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">network</span> <span class="n">config</span><span class="p">,</span> <span class="n">etc</span><span class="p">.</span>
    <span class="p">;;</span> <span class="n">Contract</span> <span class="n">may</span> <span class="n">change</span> <span class="n">its</span> <span class="n">storage</span> <span class="n">and</span> <span class="n">code</span><span class="p">,</span>
    <span class="p">;;</span> <span class="n">and</span> <span class="n">also</span> <span class="n">may</span> <span class="n">send</span> <span class="n">messages</span> <span class="n">to</span> <span class="n">other</span> <span class="n">contracts</span>

    <span class="p">;;</span> <span class="n">Let</span><span class="err">’</span><span class="n">s</span> <span class="n">write</span> <span class="n">a</span> <span class="n">counter</span> <span class="n">smart</span> <span class="n">contract</span> <span class="n">that</span> <span class="n">gets</span> <span class="n">a</span> <span class="n">number</span>
    <span class="p">;;</span> <span class="n">from</span> <span class="n">an</span> <span class="n">incoming</span> <span class="n">message</span><span class="p">,</span>
    <span class="p">;;</span> <span class="n">adds</span> <span class="n">to</span> <span class="n">already</span> <span class="n">stored</span> <span class="n">numbers</span> <span class="n">and</span> <span class="n">stores</span> <span class="n">result</span> <span class="n">in</span> <span class="err">“</span><span class="n">storage</span><span class="err">”</span>

    <span class="p">;;</span> <span class="n">For</span> <span class="n">handling</span> <span class="n">special</span> <span class="n">events</span><span class="p">,</span> <span class="n">smart</span> <span class="n">contracts</span> <span class="n">have</span> <span class="n">reserved</span> <span class="n">methods</span><span class="o">:</span>
    <span class="p">;;</span> <span class="n">recv_internal</span><span class="p">()</span> <span class="n">handles</span> <span class="n">internal</span> <span class="n">messages</span> <span class="n">from</span> <span class="n">other</span> <span class="n">smart</span> <span class="n">contracts</span>
    <span class="p">;;</span> <span class="n">recv_external</span><span class="p">()</span> <span class="n">handles</span> <span class="n">external</span> <span class="n">messages</span> <span class="n">from</span> <span class="n">the</span> <span class="n">outside</span> <span class="n">world</span> <span class="err">—</span>
    <span class="p">;;</span> <span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.,</span> <span class="n">from</span> <span class="n">a</span> <span class="n">user</span><span class="p">.</span>

    <span class="p">()</span> <span class="n">recv_internal</span><span class="p">(</span><span class="n">slice</span> <span class="n">in_msg_body</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">;;</span> <span class="n">Cells</span> <span class="n">play</span> <span class="n">the</span> <span class="n">role</span> <span class="n">of</span> <span class="n">memory</span> <span class="n">in</span> <span class="n">the</span> <span class="n">stack</span><span class="o">-</span><span class="n">based</span> <span class="n">TVM</span><span class="p">.</span>
      <span class="p">;;</span> <span class="n">A</span> <span class="n">cell</span> <span class="n">can</span> <span class="n">be</span> <span class="n">transformed</span> <span class="n">into</span> <span class="n">a</span> <span class="n">slice</span><span class="p">,</span>
      <span class="p">;;</span> <span class="n">and</span> <span class="n">then</span> <span class="n">the</span> <span class="n">data</span> <span class="n">bits</span> <span class="n">and</span> <span class="n">references</span> <span class="n">to</span>
      <span class="p">;;</span> <span class="n">other</span> <span class="n">cells</span> <span class="n">from</span> <span class="n">the</span> <span class="n">cell</span> <span class="n">can</span> <span class="n">be</span> <span class="n">obtained</span>
      <span class="p">;;</span> <span class="n">by</span> <span class="n">loading</span> <span class="n">them</span> <span class="n">from</span> <span class="n">the</span> <span class="n">slice</span><span class="p">.</span>
      <span class="p">;;</span> <span class="n">Data</span> <span class="n">bits</span> <span class="n">and</span> <span class="n">references</span> <span class="n">to</span> <span class="n">other</span> <span class="n">cells</span> <span class="n">can</span> <span class="n">be</span> <span class="n">stored</span>
      <span class="p">;;</span> <span class="n">into</span> <span class="n">a</span> <span class="n">builder</span><span class="p">,</span> <span class="n">and</span> <span class="n">then</span> <span class="n">the</span> <span class="n">builder</span> <span class="n">can</span> <span class="n">be</span> <span class="n">finalized</span> <span class="n">into</span> <span class="n">a</span> <span class="n">new</span> <span class="n">cell</span><span class="p">.</span>
      <span class="p">;;</span> <span class="n">recv_internal</span> <span class="n">gets</span> <span class="n">the</span> <span class="n">slice</span>
      <span class="p">;;</span> <span class="n">with</span> <span class="n">incoming</span> <span class="n">message</span> <span class="n">data</span> <span class="n">as</span> <span class="n">an</span> <span class="n">argument</span><span class="p">.</span>

      <span class="p">;;</span> <span class="n">As</span> <span class="n">everything</span> <span class="k">else</span> <span class="n">on</span> <span class="n">TON</span><span class="p">,</span> <span class="n">permanent</span> <span class="n">storage</span> <span class="n">data</span> <span class="n">is</span> <span class="n">stored</span> <span class="n">as</span> <span class="n">a</span> <span class="n">cell</span><span class="p">.</span>
      <span class="p">;;</span> <span class="n">It</span> <span class="n">can</span> <span class="n">be</span> <span class="n">retrieved</span> <span class="n">via</span> <span class="n">the</span> <span class="n">get_data</span><span class="p">()</span> <span class="n">method</span>
      <span class="p">;;</span> <span class="n">begin_parse</span> <span class="o">-</span> <span class="n">converts</span> <span class="n">a</span> <span class="n">cell</span> <span class="n">with</span> <span class="n">data</span> <span class="n">into</span> <span class="n">a</span> <span class="n">readable</span> <span class="n">slice</span>

      <span class="n">slice</span> <span class="n">ds</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">().</span><span class="n">begin_parse</span><span class="p">();</span> 
      <span class="p">;;</span> <span class="err">`</span><span class="p">.</span><span class="err">`</span> <span class="n">is</span> <span class="n">a</span> <span class="n">syntax</span> <span class="n">sugar</span><span class="o">:</span> <span class="n">a</span><span class="p">.</span><span class="n">b</span><span class="p">()</span> <span class="n">is</span> <span class="n">equivalent</span> <span class="n">to</span> <span class="n">b</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

      <span class="p">;;</span> <span class="n">load_uint</span> <span class="n">is</span> <span class="n">a</span> <span class="n">function</span> <span class="n">from</span> <span class="n">the</span> <span class="n">FunC</span> <span class="n">standard</span> <span class="n">library</span><span class="p">;</span>
      <span class="p">;;</span> <span class="n">it</span> <span class="n">loads</span> <span class="n">an</span> <span class="kt">unsigned</span> <span class="n">n</span><span class="o">-</span><span class="n">bit</span> <span class="n">integer</span> <span class="n">from</span> <span class="n">a</span> <span class="n">slice</span>
      <span class="kt">int</span> <span class="n">total</span> <span class="o">=</span> <span class="n">ds</span><span class="o">~</span><span class="n">load_uint</span><span class="p">(</span><span class="mi">64</span><span class="p">);</span> <span class="p">;;</span> <span class="err">`</span><span class="o">~</span><span class="err">`</span> <span class="n">is</span> <span class="n">a</span> <span class="s">"modifying"</span> <span class="n">method</span><span class="o">:</span>
      <span class="p">;;</span> <span class="n">essentially</span><span class="p">,</span> <span class="n">it</span> <span class="n">is</span> <span class="n">a</span> <span class="n">syntax</span> <span class="n">sugar</span><span class="o">:</span> <span class="err">`</span><span class="n">r</span> <span class="o">=</span> <span class="n">a</span><span class="o">~</span><span class="n">b</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="err">`</span> 
      <span class="p">;;</span> <span class="n">is</span> <span class="n">equivalent</span> <span class="n">to</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">r</span><span class="p">)</span> <span class="o">=</span> <span class="n">b</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>

      <span class="p">;;</span> <span class="n">Now</span> <span class="n">let</span><span class="err">’</span><span class="n">s</span> <span class="n">read</span> <span class="n">the</span> <span class="n">incoming</span> <span class="n">value</span> <span class="n">from</span> <span class="n">the</span> <span class="n">message</span> <span class="n">body</span> <span class="n">slice</span>
      <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">in_msg_body</span><span class="o">~</span><span class="n">load_uint</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>

      <span class="n">total</span> <span class="o">+=</span> <span class="n">n</span><span class="p">;</span>
      <span class="p">;;</span> <span class="n">integers</span> <span class="n">support</span> <span class="n">usual</span> <span class="o">+-</span><span class="err">*/</span> <span class="n">operations</span> <span class="n">as</span> <span class="n">well</span> <span class="n">as</span> <span class="p">(</span><span class="o">+-</span><span class="err">*/</span><span class="p">)</span><span class="o">=</span> <span class="n">syntax</span> <span class="n">sugar</span>

      <span class="p">;;</span> <span class="n">In</span> <span class="n">order</span> <span class="n">to</span> <span class="n">keep</span> <span class="n">a</span> <span class="n">store</span> <span class="n">integer</span> <span class="n">value</span><span class="p">,</span> <span class="n">we</span> <span class="n">need</span> <span class="n">to</span> <span class="k">do</span> <span class="n">four</span> <span class="n">things</span><span class="o">:</span>
      <span class="p">;;</span> <span class="n">create</span> <span class="n">a</span> <span class="n">Builder</span> <span class="k">for</span> <span class="n">the</span> <span class="n">future</span> <span class="n">cell</span> <span class="o">-</span> <span class="n">begin_cell</span><span class="p">()</span>
      <span class="p">;;</span> <span class="n">write</span> <span class="n">a</span> <span class="n">value</span> <span class="n">to</span> <span class="n">total</span> <span class="o">-</span> <span class="n">store_uint</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">bit_size</span><span class="p">)</span>
      <span class="p">;;</span> <span class="n">create</span> <span class="n">a</span> <span class="n">Cell</span> <span class="n">from</span> <span class="n">the</span> <span class="n">Builder</span> <span class="o">-</span> <span class="n">end_cell</span><span class="p">()</span>
      <span class="p">;;</span> <span class="n">write</span> <span class="n">the</span> <span class="n">resulting</span> <span class="n">cell</span> <span class="n">into</span> <span class="n">permanent</span> <span class="n">storage</span> <span class="o">-</span> <span class="n">set_data</span><span class="p">()</span>

      <span class="n">set_data</span><span class="p">(</span><span class="n">begin_cell</span><span class="p">().</span><span class="n">store_uint</span><span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="mi">64</span><span class="p">).</span><span class="n">end_cell</span><span class="p">());</span>
    <span class="p">}</span>



    <span class="p">;;</span> <span class="n">The</span> <span class="n">FunC</span> <span class="n">program</span> <span class="n">is</span> <span class="n">essentially</span> <span class="n">a</span> <span class="n">list</span> <span class="n">of</span>
    <span class="n">function</span> <span class="n">declarations</span><span class="o">/</span><span class="n">definitions</span> <span class="n">and</span> <span class="n">global</span> <span class="n">variable</span> <span class="n">declarations</span><span class="p">.</span>

    <span class="p">;;</span> <span class="n">Any</span> <span class="n">function</span> <span class="n">in</span> <span class="n">FunC</span> <span class="n">matches</span> <span class="n">the</span> <span class="n">following</span> <span class="n">pattern</span><span class="o">:</span>
    <span class="p">;;</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">forall</span> <span class="n">declarator</span><span class="o">&gt;</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">return_type</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">function_name</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">comma_separated_function_args</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">specifiers</span><span class="o">&gt;</span>


    <span class="p">;;</span> <span class="n">Specifiers</span><span class="o">:</span>
    <span class="p">;;</span> <span class="n">The</span> <span class="n">impure</span> <span class="n">specifier</span> <span class="n">indicates</span> <span class="n">that</span>
    <span class="p">;;</span> <span class="n">function</span> <span class="n">calls</span> <span class="n">should</span> <span class="n">not</span> <span class="n">be</span> <span class="n">optimized</span>
    <span class="p">;;</span> <span class="p">(</span><span class="n">whether</span> <span class="n">its</span> <span class="n">result</span> <span class="n">is</span> <span class="n">used</span> <span class="n">or</span> <span class="n">not</span><span class="p">)</span>
    <span class="p">;;</span> <span class="n">it</span> <span class="n">is</span> <span class="n">important</span> <span class="k">for</span> <span class="n">methods</span> <span class="n">that</span> <span class="n">change</span> <span class="n">the</span> <span class="n">smart</span> <span class="n">contract</span> <span class="n">data</span>
    <span class="p">;;</span> <span class="n">or</span> <span class="n">send</span> <span class="n">messages</span>

    <span class="p">;;</span> <span class="n">The</span> <span class="n">method_id</span> <span class="n">specifier</span> <span class="n">allows</span> <span class="n">you</span> <span class="n">to</span> <span class="n">call</span> <span class="n">a</span> <span class="n">GET</span> <span class="n">function</span> <span class="n">by</span> <span class="n">name</span>

    <span class="p">;;</span> <span class="n">For</span> <span class="n">instance</span><span class="p">,</span> <span class="n">we</span> <span class="n">can</span> <span class="n">create</span> <span class="n">a</span> <span class="n">get</span> <span class="n">method</span> <span class="k">for</span> <span class="n">the</span> <span class="n">contract</span> <span class="n">above</span>
    <span class="p">;;</span> <span class="n">to</span> <span class="n">allow</span> <span class="n">outside</span> <span class="n">viewers</span> <span class="n">to</span> <span class="n">read</span> <span class="n">counter</span>

    <span class="kt">int</span> <span class="n">get_total</span><span class="p">()</span> <span class="n">method_id</span> <span class="p">{</span>
      <span class="n">slice</span> <span class="n">ds</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">().</span><span class="n">begin_parse</span><span class="p">();</span>
      <span class="kt">int</span> <span class="n">total</span> <span class="o">=</span> <span class="n">ds</span><span class="o">~</span><span class="n">load_uint</span><span class="p">(</span><span class="mi">64</span><span class="p">);</span>

      <span class="p">;;</span> <span class="n">Note</span> <span class="n">that</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">and</span> <span class="kt">int</span> <span class="n">is</span> <span class="n">the</span> <span class="n">same</span><span class="p">,</span>
      <span class="p">;;</span> <span class="n">thus</span> <span class="n">brackets</span> <span class="n">in</span> <span class="n">the</span> <span class="n">function</span> <span class="n">declaration</span>
      <span class="p">;;</span> <span class="n">and</span> <span class="n">in</span> <span class="n">the</span> <span class="k">return</span> <span class="n">statement</span> <span class="n">are</span> <span class="n">omitted</span><span class="p">.</span>
      <span class="k">return</span> <span class="n">total</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">;;</span> <span class="n">Now</span> <span class="n">any</span> <span class="n">observer</span> <span class="n">can</span> <span class="n">read</span> <span class="n">get_total</span> <span class="n">value</span> <span class="n">via</span> <span class="n">lite</span><span class="o">-</span><span class="n">client</span> <span class="n">or</span> <span class="n">explorer</span>
</code></pre></div>
<h1>Messages</h1>

<p>The actor model is a model of concurrent computation and is at the heart of TON smart contracts. Each smart contract can process one message at a time, change its own state, or send one or several messages. Processing of the message occurs in one transaction, that is, it cannot be interrupted. Messages to one contract are processed consequently one by one. As a result, the execution of each transaction is local and can be parallelized at the blockchain level, which allows for on-demand throughput horizontal scaling and hosting an unlimited number of users and transactions.</p>
<div class="highlight"><pre class="highlight c"><code><span class="p">;;</span> <span class="n">For</span> <span class="n">normal</span> <span class="n">internal</span> <span class="n">message</span><span class="o">-</span><span class="n">triggered</span> <span class="n">transactions</span><span class="p">,</span>
<span class="p">;;</span> <span class="n">before</span> <span class="n">passing</span> <span class="n">control</span> <span class="n">to</span> <span class="n">recv_internal</span> <span class="n">TVM</span> <span class="n">puts</span> <span class="n">the</span> <span class="n">following</span>
<span class="p">;;</span> <span class="n">elements</span> <span class="n">on</span> <span class="n">stack</span><span class="p">.</span>
<span class="p">;;;;</span> <span class="n">Smart</span> <span class="n">contract</span> <span class="nf">balance</span> <span class="p">(</span><span class="n">in</span> <span class="n">nanoTons</span><span class="p">)</span>
<span class="p">;;;;</span> <span class="n">Incoming</span> <span class="n">message</span> <span class="nf">balance</span> <span class="p">(</span><span class="n">in</span> <span class="n">nanoTons</span><span class="p">)</span>
<span class="p">;;;;</span> <span class="n">Cell</span> <span class="n">with</span> <span class="n">an</span> <span class="n">incoming</span> <span class="n">message</span>
<span class="p">;;;;</span> <span class="n">Incoming</span> <span class="n">message</span> <span class="n">body</span><span class="p">,</span> <span class="n">slice</span> <span class="n">type</span>
<span class="p">;;</span> <span class="n">In</span> <span class="n">turn</span><span class="p">,</span> <span class="n">recv_internal</span> <span class="n">may</span> <span class="n">use</span> <span class="n">only</span>
<span class="p">;;</span> <span class="n">the</span> <span class="n">required</span> <span class="n">number</span> <span class="n">of</span> <span class="nf">fields</span> <span class="p">(</span><span class="n">like</span> <span class="mi">1</span> <span class="n">in</span> <span class="n">the</span> <span class="n">example</span> <span class="n">above</span> <span class="n">or</span> <span class="mi">4</span> <span class="n">below</span><span class="p">)</span>

<span class="p">;;</span> <span class="n">Let</span><span class="err">’</span><span class="n">s</span> <span class="n">dive</span> <span class="n">into</span> <span class="n">message</span> <span class="nf">sending</span>

<span class="p">()</span> <span class="n">recv_internal</span> <span class="p">(</span>
    <span class="kt">int</span> <span class="n">balance</span><span class="p">,</span> <span class="kt">int</span> <span class="n">msg_value</span><span class="p">,</span> <span class="n">cell</span> <span class="n">in_msg_full</span><span class="p">,</span> <span class="n">slice</span> <span class="n">in_msg_body</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">;;</span> 
    <span class="p">;;</span> <span class="n">Every</span> <span class="n">message</span> <span class="n">has</span> <span class="n">a</span> <span class="n">strict</span> <span class="n">layout</span><span class="p">,</span> <span class="n">thus</span> <span class="n">by</span> <span class="n">parsing</span> <span class="n">it</span><span class="p">,</span>
    <span class="p">;;</span> <span class="n">we</span> <span class="n">can</span> <span class="n">get</span> <span class="n">the</span> <span class="n">sender</span><span class="err">’</span><span class="n">s</span> <span class="n">address</span>
    <span class="p">;;</span> <span class="n">first</span><span class="p">,</span> <span class="n">we</span> <span class="n">need</span> <span class="n">to</span> <span class="n">read</span> <span class="n">some</span> <span class="n">tech</span> <span class="n">flags</span> <span class="n">and</span>
    <span class="p">;;</span> <span class="n">then</span> <span class="n">take</span> <span class="n">the</span> <span class="n">address</span> <span class="n">using</span> <span class="n">load_msg_addr</span>
    <span class="p">;;</span> <span class="n">function</span> <span class="n">from</span> <span class="n">FunC</span> <span class="n">standard</span> <span class="n">library</span> <span class="o">-</span> <span class="p">()</span>
    <span class="n">var</span> <span class="n">cs</span> <span class="o">=</span> <span class="n">in_msg_full</span><span class="p">.</span><span class="n">begin_parse</span><span class="p">();</span>
    <span class="n">var</span> <span class="n">flags</span> <span class="o">=</span> <span class="n">cs</span><span class="o">~</span><span class="n">load_uint</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
    <span class="n">slice</span> <span class="n">sender_address</span> <span class="o">=</span> <span class="n">cs</span><span class="o">~</span><span class="n">load_msg_addr</span><span class="p">();</span>

    <span class="p">;;</span> <span class="k">if</span> <span class="n">we</span> <span class="n">want</span> <span class="n">to</span> <span class="n">send</span> <span class="n">a</span> <span class="n">message</span><span class="p">,</span> <span class="n">we</span> <span class="n">first</span> <span class="n">need</span> <span class="n">to</span> <span class="n">construct</span> <span class="n">it</span>
    <span class="p">;;</span> <span class="n">message</span> <span class="n">serialization</span> <span class="n">in</span> <span class="n">most</span> <span class="n">cases</span> <span class="n">may</span> <span class="n">be</span> <span class="n">reduced</span> <span class="n">to</span>
    <span class="n">var</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">begin_cell</span><span class="p">()</span>
    <span class="p">.</span><span class="n">store_uint</span><span class="p">(</span><span class="mh">0x18</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="p">;;</span> <span class="n">tech</span> <span class="n">flags</span>
    <span class="p">.</span><span class="n">store_slice</span><span class="p">(</span><span class="n">addr</span><span class="p">)</span>   <span class="p">;;</span> <span class="n">destination</span> <span class="n">address</span>
    <span class="p">.</span><span class="n">store_coins</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span> <span class="p">;;</span> <span class="n">attached</span> <span class="n">value</span>
    <span class="p">.</span><span class="n">store_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">107</span><span class="p">)</span> <span class="p">;;</span> <span class="n">more</span> <span class="n">tech</span> <span class="n">flags</span> <span class="o">:</span><span class="p">)</span>
    <span class="p">.</span><span class="n">store_slice</span><span class="p">(</span><span class="n">in_msg_body</span><span class="p">)</span> <span class="p">;;</span> <span class="n">just</span> <span class="n">put</span> <span class="n">some</span> <span class="n">payload</span> <span class="n">here</span>
    <span class="p">.</span><span class="n">end_cell</span><span class="p">();</span>

    <span class="p">;;</span> <span class="n">to</span> <span class="n">send</span> <span class="n">messages</span><span class="p">,</span> <span class="n">use</span> <span class="n">send_raw_message</span> <span class="n">from</span> <span class="n">the</span> <span class="n">standard</span> <span class="n">library</span><span class="p">.</span>
    <span class="p">;;</span> <span class="n">it</span> <span class="n">accepts</span> <span class="n">two</span> <span class="n">arguments</span> <span class="n">message</span> <span class="n">and</span> <span class="n">mode</span>
    <span class="n">send_raw_message</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="mi">64</span><span class="p">);</span>

    <span class="p">;;</span> <span class="n">mode</span> <span class="n">parameter</span> <span class="n">specifies</span> <span class="n">how</span> <span class="n">to</span> <span class="n">process</span> <span class="n">the</span> <span class="n">funds</span> <span class="n">passed</span> <span class="n">into</span>
    <span class="p">;;</span> <span class="n">the</span> <span class="n">smart</span> <span class="n">contract</span> <span class="n">with</span> <span class="n">the</span> <span class="n">message</span> <span class="n">and</span> <span class="n">the</span> <span class="n">smart</span> <span class="n">contract</span> <span class="n">funds</span>
    <span class="p">;;</span> <span class="mi">64</span> <span class="n">means</span> <span class="n">send</span> <span class="n">everything</span> <span class="n">from</span> <span class="n">the</span> <span class="n">incoming</span> <span class="n">message</span> <span class="err">—</span> 
    <span class="p">;;</span> <span class="n">what</span><span class="err">’</span><span class="n">s</span> <span class="n">left</span> <span class="n">after</span> <span class="n">the</span> <span class="n">commission</span> <span class="n">is</span> <span class="n">deducted</span>

    <span class="p">;;</span> <span class="n">Exceptions</span> <span class="n">can</span> <span class="n">be</span> <span class="n">thrown</span> <span class="n">by</span> <span class="n">conditional</span> <span class="n">primitives</span> <span class="n">throw_if</span> <span class="n">and</span>
    <span class="p">;;</span> <span class="n">throw_unless</span> <span class="n">and</span> <span class="n">by</span> <span class="n">unconditional</span> <span class="n">throw</span>
    <span class="p">;;</span> <span class="n">by</span> <span class="k">default</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">automatically</span> <span class="n">cause</span> <span class="n">a</span> <span class="n">bounce</span> <span class="n">message</span> <span class="n">with</span> <span class="mi">64</span> <span class="n">mode</span>

    <span class="n">var</span> <span class="n">some</span>  <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
    <span class="n">throw_if</span><span class="p">(</span><span class="mi">102</span><span class="p">,</span> <span class="n">some</span> <span class="o">==</span> <span class="mi">10</span><span class="p">);</span>
    <span class="p">;;</span> <span class="n">Throw</span> <span class="n">exception</span> <span class="n">with</span> <span class="n">code</span> <span class="mi">102</span> <span class="n">conditionally</span>
    <span class="n">throw_unless</span><span class="p">(</span><span class="mi">103</span><span class="p">,</span> <span class="n">some</span> <span class="o">!=</span> <span class="mi">10</span><span class="p">);</span>
    <span class="p">;;</span> <span class="n">Throw</span> <span class="n">exception</span> <span class="n">with</span> <span class="n">code</span> <span class="mi">103</span> <span class="n">conditionally</span>
    <span class="n">throw</span><span class="p">(</span><span class="mi">101</span><span class="p">);</span>    <span class="p">;;</span> <span class="n">Throw</span> <span class="n">exception</span> <span class="n">with</span> <span class="n">code</span> <span class="mi">101</span> <span class="n">unconditionally</span>
<span class="p">}</span>
</code></pre></div>
<h1>Flow control: Conditional Statements and Loops; Dictionaries</h1>
<div class="highlight"><pre class="highlight c"><code><span class="p">;;</span> <span class="n">FunC</span><span class="p">,</span> <span class="n">of</span> <span class="n">course</span><span class="p">,</span> <span class="n">supports</span> <span class="k">if</span> <span class="n">statements</span>

<span class="p">;;;;</span> <span class="n">usual</span> <span class="k">if</span><span class="o">-</span><span class="k">else</span>
<span class="nf">if</span> <span class="p">(</span><span class="n">flag</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">;;</span><span class="n">do_something</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
    <span class="p">;;</span><span class="n">do_alternative</span><span class="p">();</span>
<span class="p">}</span>

<span class="p">;;</span> <span class="n">If</span> <span class="n">statements</span> <span class="n">are</span> <span class="n">often</span> <span class="n">used</span> <span class="n">as</span> <span class="n">an</span> <span class="n">operation</span> <span class="n">identifier</span>
<span class="p">;;</span> <span class="k">for</span> <span class="n">a</span> <span class="n">smart</span> <span class="n">contract</span><span class="p">,</span> <span class="k">for</span> <span class="n">example</span><span class="o">:</span>

<span class="p">()</span> <span class="n">recv_internal</span> <span class="p">(</span>
    <span class="kt">int</span> <span class="n">balance</span><span class="p">,</span> <span class="kt">int</span> <span class="n">msg_value</span><span class="p">,</span> <span class="n">cell</span> <span class="n">in_msg_full</span><span class="p">,</span> <span class="n">slice</span> <span class="n">in_msg_body</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">op</span> <span class="o">=</span> <span class="n">in_msg_body</span><span class="o">~</span><span class="n">load_int</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">op</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">;;</span> <span class="n">smth</span> <span class="n">here</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">op</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">;;</span> <span class="n">smth</span> <span class="n">here</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="p">;;</span> <span class="n">smth</span> <span class="n">here</span>
    <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="p">;;</span> <span class="n">Loops</span>
<span class="p">;;</span> <span class="n">FunC</span> <span class="n">supports</span> <span class="n">repeat</span><span class="p">,</span> <span class="k">while</span> <span class="n">and</span> <span class="k">do</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span> <span class="n">until</span> <span class="n">loops</span><span class="p">.</span>
<span class="p">;;</span> <span class="k">for</span> <span class="n">loop</span> <span class="n">is</span> <span class="n">not</span> <span class="n">supported</span><span class="p">.</span>

<span class="p">;;</span> <span class="n">repeat</span>
<span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">repeat</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">x</span> <span class="o">*=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">;;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1024</span>

<span class="p">;;</span> <span class="k">while</span>
<span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="k">while</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">;;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">256</span>

<span class="p">;;</span> <span class="n">until</span> <span class="n">loops</span>
<span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span> <span class="n">until</span> <span class="p">(</span><span class="n">x</span> <span class="o">%</span> <span class="mi">17</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">;;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">51</span>

<span class="p">;;</span> <span class="n">In</span> <span class="n">practice</span><span class="p">,</span> <span class="n">loops</span> <span class="n">in</span> <span class="n">TON</span> <span class="n">smart</span> <span class="n">contracts</span> <span class="n">are</span> <span class="n">often</span> <span class="n">used</span> <span class="n">to</span> <span class="n">work</span> <span class="n">with</span>
<span class="p">;;</span>  <span class="n">dictionaries</span><span class="p">,</span> <span class="n">or</span> <span class="n">as</span> <span class="n">they</span> <span class="n">are</span> <span class="n">also</span> <span class="n">called</span> <span class="n">in</span> <span class="n">TON</span> <span class="n">hashmaps</span>

<span class="p">;;</span> <span class="n">A</span> <span class="n">hashmap</span> <span class="n">is</span> <span class="n">a</span> <span class="n">data</span> <span class="n">structure</span> <span class="n">represented</span> <span class="n">by</span> <span class="n">a</span> <span class="n">tree</span><span class="p">.</span>
<span class="p">;;</span> <span class="n">Hashmap</span> <span class="n">maps</span> <span class="n">keys</span> <span class="n">to</span> <span class="n">values</span> <span class="err">​​</span><span class="n">of</span> <span class="n">arbitrary</span> <span class="n">type</span> <span class="n">so</span> <span class="n">that</span>
<span class="p">;;</span> <span class="n">quick</span> <span class="n">lookup</span> <span class="n">and</span> <span class="n">modification</span> <span class="n">are</span> <span class="n">possible</span><span class="p">.</span> 

<span class="p">;;</span> <span class="n">udict_get_next</span><span class="o">?</span> <span class="n">from</span> <span class="n">FunC</span> <span class="n">standard</span> <span class="n">library</span> <span class="n">in</span> <span class="n">combination</span> <span class="n">with</span>
<span class="p">;;</span> <span class="n">the</span> <span class="n">loop</span> <span class="n">will</span> <span class="n">help</span><span class="p">,</span> <span class="n">go</span> <span class="n">through</span> <span class="n">the</span> <span class="n">dictionary</span>

<span class="kt">int</span> <span class="n">key</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">slice</span> <span class="n">cs</span><span class="p">,</span> <span class="kt">int</span> <span class="n">f</span><span class="p">)</span> <span class="o">=</span> <span class="n">dic</span><span class="p">.</span><span class="n">udict_get_next</span><span class="o">?</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="n">key</span><span class="p">);</span>

<span class="p">}</span> <span class="n">until</span> <span class="p">(</span><span class="o">~</span> <span class="n">f</span><span class="p">);</span>

<span class="p">;;</span> <span class="n">udict_get_next</span><span class="o">?</span> <span class="o">-</span> <span class="n">Calculates</span> <span class="n">the</span> <span class="n">minimum</span> <span class="n">key</span> <span class="n">k</span> <span class="n">in</span> <span class="n">the</span> <span class="n">dictionary</span> <span class="n">dict</span>
<span class="p">;;</span> <span class="n">that</span> <span class="n">is</span> <span class="n">greater</span> <span class="n">than</span> <span class="n">some</span> <span class="n">given</span> <span class="n">value</span> <span class="n">and</span> <span class="n">returns</span> <span class="n">k</span><span class="p">,</span>
<span class="p">;;</span> <span class="n">the</span> <span class="n">associated</span> <span class="n">value</span><span class="p">,</span> <span class="n">and</span> <span class="n">a</span> <span class="n">flag</span> <span class="n">indicating</span> <span class="n">success</span><span class="p">.</span>
<span class="p">;;</span> <span class="n">If</span> <span class="n">the</span> <span class="n">dictionary</span> <span class="n">is</span> <span class="n">empty</span><span class="p">,</span> <span class="n">returns</span> <span class="p">(</span><span class="n">null</span><span class="p">,</span> <span class="n">null</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span>
</code></pre></div>
<h1>Functions</h1>
<div class="highlight"><pre class="highlight c"><code><span class="p">;;</span> <span class="n">Most</span> <span class="n">useful</span> <span class="n">functions</span> <span class="n">are</span> <span class="n">slice</span> <span class="n">reader</span> <span class="n">and</span> <span class="n">builder</span> <span class="n">writer</span> <span class="n">primitives</span><span class="p">,</span>
<span class="p">;;</span> <span class="n">storage</span> <span class="n">handlers</span> <span class="n">and</span> <span class="n">sending</span> <span class="n">messages</span>

<span class="p">;;</span> <span class="n">slice</span> <span class="n">begin_parse</span><span class="p">(</span><span class="n">cell</span> <span class="n">c</span><span class="p">)</span> <span class="o">-</span> <span class="n">Converts</span> <span class="n">a</span> <span class="n">cell</span> <span class="n">into</span> <span class="n">a</span> <span class="n">slice</span>
<span class="p">;;</span> <span class="p">(</span><span class="n">slice</span><span class="p">,</span> <span class="kt">int</span><span class="p">)</span> <span class="n">load_int</span><span class="p">(</span><span class="n">slice</span> <span class="n">s</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span> <span class="o">-</span> 
<span class="p">;;</span> <span class="n">Loads</span> <span class="n">a</span> <span class="kt">signed</span> <span class="n">len</span><span class="o">-</span><span class="n">bit</span> <span class="n">integer</span> <span class="n">from</span> <span class="n">a</span> <span class="n">slice</span><span class="p">.</span>
<span class="p">;;</span> <span class="p">(</span><span class="n">slice</span><span class="p">,</span> <span class="kt">int</span><span class="p">)</span> <span class="n">load_uint</span><span class="p">(</span><span class="n">slice</span> <span class="n">s</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span> <span class="o">-</span> 
<span class="p">;;</span> <span class="n">Loads</span> <span class="n">a</span> <span class="kt">unsigned</span> <span class="n">len</span><span class="o">-</span><span class="n">bit</span> <span class="n">integer</span> <span class="n">from</span> <span class="n">a</span> <span class="n">slice</span><span class="p">.</span>
<span class="p">;;</span> <span class="p">(</span><span class="n">slice</span><span class="p">,</span> <span class="n">slice</span><span class="p">)</span> <span class="n">load_bits</span><span class="p">(</span><span class="n">slice</span> <span class="n">s</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span> <span class="o">-</span> 
<span class="p">;;</span> <span class="n">Loads</span> <span class="n">the</span> <span class="n">first</span> <span class="mi">0</span> <span class="err">≤</span> <span class="n">len</span> <span class="err">≤</span> <span class="mi">1023</span> <span class="n">bits</span> <span class="n">from</span> <span class="n">slice</span> <span class="n">into</span> <span class="n">a</span> <span class="n">separate</span> <span class="n">slice</span><span class="p">.</span>
<span class="p">;;</span> <span class="p">(</span><span class="n">slice</span><span class="p">,</span> <span class="n">cell</span><span class="p">)</span> <span class="n">load_ref</span><span class="p">(</span><span class="n">slice</span> <span class="n">s</span><span class="p">)</span> <span class="o">-</span> <span class="n">Loads</span> <span class="n">the</span> <span class="n">reference</span> <span class="n">cell</span> <span class="n">from</span> <span class="n">the</span> <span class="n">slice</span><span class="p">.</span>

<span class="p">;;</span> <span class="n">builder</span> <span class="n">begin_cell</span><span class="p">()</span> <span class="o">-</span> <span class="n">Creates</span> <span class="n">a</span> <span class="n">new</span> <span class="n">empty</span> <span class="n">builder</span><span class="p">.</span>
<span class="p">;;</span> <span class="n">cell</span> <span class="n">end_cell</span><span class="p">(</span><span class="n">builder</span> <span class="n">b</span><span class="p">)</span> <span class="o">-</span> <span class="n">Converts</span> <span class="n">a</span> <span class="n">builder</span> <span class="n">into</span> <span class="n">an</span> <span class="n">ordinary</span> <span class="n">cell</span><span class="p">.</span>
<span class="p">;;</span> <span class="n">builder</span> <span class="n">store_int</span><span class="p">(</span><span class="n">builder</span> <span class="n">b</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span> <span class="o">-</span>
<span class="p">;;</span> <span class="n">Stores</span> <span class="n">a</span> <span class="kt">signed</span> <span class="n">len</span><span class="o">-</span><span class="n">bit</span> <span class="n">integer</span> <span class="n">x</span> <span class="n">into</span> <span class="n">b</span> <span class="k">for</span> <span class="mi">0</span> <span class="err">≤</span> <span class="n">len</span> <span class="err">≤</span> <span class="mi">257</span><span class="p">.</span>
<span class="p">;;</span> <span class="n">builder</span> <span class="n">store_uint</span><span class="p">(</span><span class="n">builder</span> <span class="n">b</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span> <span class="o">-</span>
<span class="p">;;</span> <span class="n">Stores</span> <span class="n">an</span> <span class="kt">unsigned</span> <span class="n">len</span><span class="o">-</span><span class="n">bit</span> <span class="n">integer</span> <span class="n">x</span> <span class="n">into</span> <span class="n">b</span> <span class="k">for</span> <span class="mi">0</span> <span class="err">≤</span> <span class="n">len</span> <span class="err">≤</span> <span class="mi">256</span><span class="p">.</span>
<span class="p">;;</span> <span class="n">builder</span> <span class="n">store_slice</span><span class="p">(</span><span class="n">builder</span> <span class="n">b</span><span class="p">,</span> <span class="n">slice</span> <span class="n">s</span><span class="p">)</span> <span class="o">-</span> <span class="n">Stores</span> <span class="n">slice</span> <span class="n">s</span> <span class="n">into</span> <span class="n">builder</span> <span class="n">b</span><span class="p">.</span>
<span class="p">;;</span> <span class="n">builder</span> <span class="n">store_ref</span><span class="p">(</span><span class="n">builder</span> <span class="n">b</span><span class="p">,</span> <span class="n">cell</span> <span class="n">c</span><span class="p">)</span> <span class="o">-</span>
<span class="p">;;</span> <span class="n">Stores</span> <span class="n">a</span> <span class="n">reference</span> <span class="n">to</span> <span class="n">cell</span> <span class="n">c</span> <span class="n">into</span> <span class="n">builder</span> <span class="n">b</span><span class="p">.</span>

<span class="p">;;</span> <span class="n">cell</span> <span class="n">get_data</span><span class="p">()</span> <span class="o">-</span> <span class="n">Returns</span> <span class="n">the</span> <span class="n">persistent</span> <span class="n">contract</span> <span class="n">storage</span> <span class="n">cell</span><span class="p">.</span> 
<span class="p">;;</span> <span class="p">()</span> <span class="n">set_data</span><span class="p">(</span><span class="n">cell</span> <span class="n">c</span><span class="p">)</span> <span class="o">-</span> <span class="n">Sets</span> <span class="n">cell</span> <span class="n">c</span> <span class="n">as</span> <span class="n">persistent</span> <span class="n">contract</span> <span class="n">data</span><span class="p">.</span>

<span class="p">;;</span> <span class="p">()</span> <span class="n">send_raw_message</span><span class="p">(</span><span class="n">cell</span> <span class="n">msg</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">)</span> <span class="o">-</span>
<span class="p">;;</span> <span class="n">put</span> <span class="n">message</span> <span class="n">msg</span> <span class="n">into</span> <span class="n">sending</span> <span class="n">queue</span> <span class="n">with</span> <span class="n">mode</span><span class="p">.</span>
<span class="p">;;</span> <span class="n">Note</span><span class="p">,</span> <span class="n">that</span> <span class="n">message</span> <span class="n">will</span> <span class="n">be</span> <span class="n">sent</span> <span class="n">after</span> <span class="n">a</span> <span class="n">successful</span> <span class="n">execution</span>
<span class="p">;;</span> <span class="n">of</span> <span class="n">the</span> <span class="n">whole</span> <span class="n">transaction</span>

<span class="p">;;</span> <span class="n">Detailed</span> <span class="n">descriptions</span> <span class="n">of</span> <span class="n">all</span> <span class="n">standard</span> <span class="n">functions</span> <span class="n">can</span> <span class="n">be</span> <span class="n">found</span>
<span class="p">;;</span> <span class="n">in</span> <span class="n">docs</span> <span class="n">https</span><span class="o">:</span><span class="c1">//ton.org/docs/#/func/stdlib</span>
<span class="p">;;</span> 
</code></pre></div>
<h2>Additional resources</h2>

<ul>
<li><a href="https://github.com/romanovichim/TonFunClessons_Eng">FunC Lessons</a></li>
<li><a href="https://www.tonspace.co">TON Development Onboarding</a></li>
<li><a href="https://ton.org/docs/#/">TON Documentation</a></li>
<li><a href="https://ton.org/docs/#/func/overview">FunC Documentation</a></li>
<li><a href="https://github.com/ton-blockchain/ton/tree/master/crypto/smartcont">TON Smart Contracts examples</a></li>
<li><a href="https://society.ton.org">Community portal</a></li>
<li><a href="https://ton.org">Blockchain portal</a></li>
<li><a href="https://stackoverflow.com/questions/tagged/ton">Stackoverflow</a></li>
</ul>

<h2>Social</h2>

<ul>
<li><a href="https://t.me/tondev_eng">Developer community</a></li>
<li><a href="https://t.me/ton_learn">TON Learn</a></li>
<li><a href="https://github.com/romanovichim/TonFunClessons_Eng">FunC Lessons Channel</a></li>
<li><a href="https://t.me/func_guide">FunC onboarding</a></li>
<li><a href="https://t.me/tondevnews">Tondev News</a></li>
</ul>

<h2>Useful blogposts</h2>

<ul>
<li><a href="https://society.ton.org/setting-up-a-ton-development-environment">Setting up a TON Development Environment</a></li>
<li><a href="https://society.ton.org/ton-hello-world-step-by-step-guide-for-writing-your-first-smart-contract-in-func">Hello World on TON</a></li>
</ul>

<h2>Future To Dos</h2>

<ul>
<li>Add smart contracts examples</li>
<li>Add more posts</li>
</ul>

<p>This file is mostly copied from <a href="https://github.com/romanovichim/TonFunClessons_Eng/blob/main/13lesson/15min.md">TonFunClessons 15 minutes intro</a>.</p>

<p>P.S. If by any chance you&rsquo;re familiar with <a href="https://learnxinyminutes.com/docs/forth/">Forth</a>, you can also take a look at <a href="https://ton-blockchain.github.io/docs/fiftbase.pdf">Fift</a>.</p>

    <hr>
    <p>Got a suggestion? A correction, perhaps? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Open an Issue</a> on the Github Repo, or make a <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/func.html.markdown">pull request</a> yourself!
    </p>
    <p class="contributed">
    Originally contributed by Ivan Romanovich, and updated by <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/func.html.markdown">1 contributor(s)</a>.
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="https://t.me/ton_learn">Ivan Romanovich</a>,
        <a href="https://fslabs.io">Kirill Malev</a>
    </p>

    <p>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-3525624-21'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
