<!DOCTYPE html lang="en-us" xml:lang="en-us" xmlns="http://www.w3.org/1999/xhtml">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="en-us">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn erlang in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/erlang/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }

                if (theme === "dark" ) {
                    el.className = "dark";
                } else {
                    el.className = "light";
                }

                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (theme) {
                set_theme(theme);
              }
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.addEventListener("load", function(){
              load_theme();
            });
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Ferlang%2F&text=Learn+X+in+Y+minutes%2C+where+X%3Derlang">
        Share this page
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">Select theme:</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">light</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">dark</button>
  </div>
  <h1><a href="/">Learn X in Y minutes</a></h1>
  <h2>Where X=erlang</h2>
    <p class="filelink">
    Get the code:
    <a href="/docs/files/learnerlang.erl">learnerlang.erl</a>
    </p>
  <div id="doc">
    <div class="highlight"><pre class="highlight erlang"><code><span class="c">% Percent sign starts a one-line comment.
</span>
<span class="c">%% Two percent characters shall be used to comment functions.
</span>
<span class="c">%%% Three percent characters shall be used to comment modules.
</span>
<span class="c">% We use three types of punctuation in Erlang.
% Commas (`,`) separate arguments in function calls, data constructors, and
% patterns.
% Periods (`.`) (followed by whitespace) separate entire functions and
% expressions in the shell.
% Semicolons (`;`) separate clauses. We find clauses in several contexts:
% function definitions and in `case`, `if`, `try..catch`, and `receive`
% expressions.
</span>
<span class="c">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 1. Variables and pattern matching.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
</span>
<span class="c">% In Erlang new variables are bound with an `=` statement.
</span><span class="nv">Num</span> <span class="o">=</span> <span class="mi">42</span><span class="p">.</span>  <span class="c">% All variable names must start with an uppercase letter.
</span>
<span class="c">% Erlang has single-assignment variables; if you try to assign a different
% value to the variable `Num`, you’ll get an error.
</span><span class="nv">Num</span> <span class="o">=</span> <span class="mi">43</span><span class="p">.</span> <span class="c">% ** exception error: no match of right hand side value 43
</span>
<span class="c">% In most languages, `=` denotes an assignment statement. In Erlang, however,
% `=` denotes a pattern-matching operation. When an empty variable is used on the
% left hand side of the `=` operator to is bound (assigned), but when a bound
% variable is used on the left hand side the following behaviour is observed.
% `Lhs = Rhs` really means this: evaluate the right side (`Rhs`), and then
% match the result against the pattern on the left side (`Lhs`).
</span><span class="nv">Num</span> <span class="o">=</span> <span class="mi">7</span> <span class="o">*</span> <span class="mi">6</span><span class="p">.</span>

<span class="c">% Floating-point number.
</span><span class="nv">Pi</span> <span class="o">=</span> <span class="mi">3</span><span class="p">.</span><span class="mi">14159</span><span class="p">.</span>

<span class="c">% Atoms are used to represent different non-numerical constant values. Atoms
% start with lowercase letters, followed by a sequence of alphanumeric
% characters or the underscore (`_`) or at (`@`) sign.
</span><span class="nv">Hello</span> <span class="o">=</span> <span class="n">hello</span><span class="p">.</span>
<span class="nv">OtherNode</span> <span class="o">=</span> <span class="n">example</span><span class="p">@</span><span class="nb">node</span><span class="p">.</span>

<span class="c">% Atoms with non alphanumeric values can be written by enclosing the atoms
% with apostrophes.
</span><span class="nv">AtomWithSpace</span> <span class="o">=</span> <span class="n">'some atom with space'</span><span class="p">.</span>

<span class="c">% Tuples are similar to structs in C.
</span><span class="nv">Point</span> <span class="o">=</span> <span class="p">{</span><span class="n">point</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">45</span><span class="p">}.</span>

<span class="c">% If we want to extract some values from a tuple, we use the pattern-matching
% operator `=`.
</span><span class="p">{</span><span class="n">point</span><span class="p">,</span> <span class="nv">X</span><span class="p">,</span> <span class="nv">Y</span><span class="p">}</span> <span class="o">=</span> <span class="nv">Point</span><span class="p">.</span>  <span class="c">% X = 10, Y = 45
</span>
<span class="c">% We can use `_` as a placeholder for variables that we’re not interested in.
% The symbol `_` is called an anonymous variable. Unlike regular variables,
% several occurrences of `_` in the same pattern don’t have to bind to the
% same value.
</span><span class="nv">Person</span> <span class="o">=</span> <span class="p">{</span><span class="n">person</span><span class="p">,</span> <span class="p">{</span><span class="n">name</span><span class="p">,</span> <span class="p">{</span><span class="n">first</span><span class="p">,</span> <span class="n">joe</span><span class="p">},</span> <span class="p">{</span><span class="n">last</span><span class="p">,</span> <span class="n">armstrong</span><span class="p">}},</span> <span class="p">{</span><span class="n">footsize</span><span class="p">,</span> <span class="mi">42</span><span class="p">}}.</span>
<span class="p">{_,</span> <span class="p">{_,</span> <span class="p">{_,</span> <span class="nv">Who</span><span class="p">},</span> <span class="p">_},</span> <span class="p">_}</span> <span class="o">=</span> <span class="nv">Person</span><span class="p">.</span>  <span class="c">% Who = joe
</span>
<span class="c">% We create a list by enclosing the list elements in square brackets and
% separating them with commas.
% The individual elements of a list can be of any type.
% The first element of a list is the head of the list. If you imagine removing
% the head from the list, what’s left is called the tail of the list.
</span><span class="nv">ThingsToBuy</span> <span class="o">=</span> <span class="p">[{</span><span class="n">apples</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span><span class="n">pears</span><span class="p">,</span> <span class="mi">6</span><span class="p">},</span> <span class="p">{</span><span class="n">milk</span><span class="p">,</span> <span class="mi">3</span><span class="p">}].</span>

<span class="c">% If `T` is a list, then `[H|T]` is also a list, with head `H` and tail `T`.
% The vertical bar (`|`) separates the head of a list from its tail.
% `[]` is the empty list.
% We can extract elements from a list with a pattern-matching operation. If we
% have a nonempty list `L`, then the expression `[X|Y] = L`, where `X` and `Y`
% are unbound variables, will extract the head of the list into `X` and the tail
% of the list into `Y`.
</span><span class="p">[</span><span class="nv">FirstThing</span><span class="p">|</span><span class="nv">OtherThingsToBuy</span><span class="p">]</span> <span class="o">=</span> <span class="nv">ThingsToBuy</span><span class="p">.</span>
<span class="c">% FirstThing = {apples, 10}
% OtherThingsToBuy = [{pears, 6}, {milk, 3}]
</span>
<span class="c">% There are no strings in Erlang. Strings are really just lists of integers.
% Strings are enclosed in double quotation marks (`"`).
</span><span class="nv">Name</span> <span class="o">=</span> <span class="s">"Hello"</span><span class="p">.</span>
<span class="p">[</span><span class="mi">72</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">111</span><span class="p">]</span> <span class="o">=</span> <span class="s">"Hello"</span><span class="p">.</span>


<span class="c">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 2. Sequential programming.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
</span>
<span class="c">% Modules are the basic unit of code in Erlang. All the functions we write are
% stored in modules. Modules are stored in files with `.erl` extensions.
% Modules must be compiled before the code can be run. A compiled module has the
% extension `.beam`.
</span><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">geometry</span><span class="p">).</span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">area</span><span class="o">/</span><span class="mi">1</span><span class="p">]).</span> <span class="c">% the list of functions exported from the module.
</span>
<span class="c">% The function `area` consists of two clauses. The clauses are separated by a
% semicolon, and the final clause is terminated by dot-whitespace.
% Each clause has a head and a body; the head consists of a function name
% followed by a pattern (in parentheses), and the body consists of a sequence of
% expressions, which are evaluated if the pattern in the head is successfully
% matched against the calling arguments. The patterns are matched in the order
% they appear in the function definition.
</span><span class="nf">area</span><span class="p">({</span><span class="n">rectangle</span><span class="p">,</span> <span class="nv">Width</span><span class="p">,</span> <span class="nv">Ht</span><span class="p">})</span> <span class="o">-&gt;</span> <span class="nv">Width</span> <span class="o">*</span> <span class="nv">Ht</span><span class="p">;</span>
<span class="nf">area</span><span class="p">({</span><span class="n">circle</span><span class="p">,</span> <span class="nv">R</span><span class="p">})</span>            <span class="o">-&gt;</span> <span class="mi">3</span><span class="p">.</span><span class="mi">14159</span> <span class="o">*</span> <span class="nv">R</span> <span class="o">*</span> <span class="nv">R</span><span class="p">.</span>

<span class="c">% Compile the code in the file geometry.erl.
</span><span class="nf">c</span><span class="p">(</span><span class="n">geometry</span><span class="p">).</span>  <span class="c">% {ok,geometry}
</span>
<span class="c">% We need to include the module name together with the function name in order to
% identify exactly which function we want to call.
</span><span class="nn">geometry</span><span class="p">:</span><span class="nf">area</span><span class="p">({</span><span class="n">rectangle</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">}).</span>  <span class="c">% 50
</span><span class="nn">geometry</span><span class="p">:</span><span class="nf">area</span><span class="p">({</span><span class="n">circle</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">4</span><span class="p">}).</span>  <span class="c">% 6.15752
</span>
<span class="c">% In Erlang, two functions with the same name and different arity (number of
% arguments) in the same module represent entirely different functions.
</span><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">lib_misc</span><span class="p">).</span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">sum</span><span class="o">/</span><span class="mi">1</span><span class="p">]).</span> <span class="c">% export function `sum` of arity 1
</span>                  <span class="c">% accepting one argument: list of integers.
</span><span class="nf">sum</span><span class="p">(</span><span class="nv">L</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nf">sum</span><span class="p">(</span><span class="nv">L</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span>
<span class="nf">sum</span><span class="p">([],</span> <span class="nv">N</span><span class="p">)</span>    <span class="o">-&gt;</span> <span class="nv">N</span><span class="p">;</span>
<span class="nf">sum</span><span class="p">([</span><span class="nv">H</span><span class="p">|</span><span class="nv">T</span><span class="p">],</span> <span class="nv">N</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nf">sum</span><span class="p">(</span><span class="nv">T</span><span class="p">,</span> <span class="nv">H</span><span class="o">+</span><span class="nv">N</span><span class="p">).</span>

<span class="c">% Funs are "anonymous" functions. They are called this way because they have
% no name. However, they can be assigned to variables.
</span><span class="nv">Double</span> <span class="o">=</span> <span class="k">fun</span><span class="p">(</span><span class="nv">X</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="nv">X</span> <span class="k">end</span><span class="p">.</span> <span class="c">% `Double` points to an anonymous function
</span>                              <span class="c">% with handle: #Fun&lt;erl_eval.6.17052888&gt;
</span><span class="nv">Double</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span>  <span class="c">% 4
</span>
<span class="c">% Functions accept funs as their arguments and can return funs.
</span><span class="nv">Mult</span> <span class="o">=</span> <span class="k">fun</span><span class="p">(</span><span class="nv">Times</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span> <span class="k">fun</span><span class="p">(</span><span class="nv">X</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nv">X</span> <span class="o">*</span> <span class="nv">Times</span> <span class="k">end</span> <span class="p">)</span> <span class="k">end</span><span class="p">.</span>
<span class="nv">Triple</span> <span class="o">=</span> <span class="nv">Mult</span><span class="p">(</span><span class="mi">3</span><span class="p">).</span>
<span class="nv">Triple</span><span class="p">(</span><span class="mi">5</span><span class="p">).</span>  <span class="c">% 15
</span>
<span class="c">% List comprehensions are expressions that create lists without having to use
% funs, maps, or filters.
% The notation `[F(X) || X &lt;- L]` means "the list of `F(X)` where `X` is taken
% from the list `L`."
</span><span class="nv">L</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span>
<span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="nv">X</span> <span class="p">||</span> <span class="nv">X</span> <span class="o">&lt;-</span> <span class="nv">L</span><span class="p">].</span>  <span class="c">% [2,4,6,8,10]
% A list comprehension can have generators and filters, which select subset of
% the generated values.
</span><span class="nv">EvenNumbers</span> <span class="o">=</span> <span class="p">[</span><span class="nv">N</span> <span class="p">||</span> <span class="nv">N</span> <span class="o">&lt;-</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="nv">N</span> <span class="ow">rem</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">].</span> <span class="c">% [2, 4]
</span>
<span class="c">% Guards are constructs that we can use to increase the power of pattern
% matching. Using guards, we can perform simple tests and comparisons on the
% variables in a pattern.
% You can use guards in the heads of function definitions where they are
% introduced by the `when` keyword, or you can use them at any place in the
% language where an expression is allowed.
</span><span class="nf">max</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nv">Y</span><span class="p">)</span> <span class="k">when</span> <span class="nv">X</span> <span class="o">&gt;</span> <span class="nv">Y</span> <span class="o">-&gt;</span> <span class="nv">X</span><span class="p">;</span>
<span class="nf">max</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nv">Y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nv">Y</span><span class="p">.</span>

<span class="c">% A guard is a series of guard expressions, separated by commas (`,`).
% The guard `GuardExpr1, GuardExpr2, ..., GuardExprN` is true if all the guard
% expressions `GuardExpr1`, `GuardExpr2`, ..., `GuardExprN` evaluate to `true`.
</span><span class="nf">is_cat</span><span class="p">(</span><span class="nv">A</span><span class="p">)</span> <span class="k">when</span> <span class="nb">is_atom</span><span class="p">(</span><span class="nv">A</span><span class="p">),</span> <span class="nv">A</span> <span class="o">=:=</span> <span class="n">cat</span> <span class="o">-&gt;</span> <span class="n">true</span><span class="p">;</span>
<span class="nf">is_cat</span><span class="p">(</span><span class="nv">A</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">false</span><span class="p">.</span>
<span class="nf">is_dog</span><span class="p">(</span><span class="nv">A</span><span class="p">)</span> <span class="k">when</span> <span class="nb">is_atom</span><span class="p">(</span><span class="nv">A</span><span class="p">),</span> <span class="nv">A</span> <span class="o">=:=</span> <span class="n">dog</span> <span class="o">-&gt;</span> <span class="n">true</span><span class="p">;</span>
<span class="nf">is_dog</span><span class="p">(</span><span class="nv">A</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">false</span><span class="p">.</span>

<span class="c">% We won't dwell on the `=:=` operator here; just be aware that it is used to
% check whether two Erlang expressions have the same value *and* the same type.
% Contrast this behaviour to that of the `==` operator:
</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">=:=</span> <span class="mi">3</span><span class="p">.</span>   <span class="c">% true
</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">=:=</span> <span class="mi">3</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span> <span class="c">% false
</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">==</span>  <span class="mi">3</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span> <span class="c">% true
</span>
<span class="c">% A guard sequence is either a single guard or a series of guards, separated
% by semicolons (`;`). The guard sequence `G1; G2; ...; Gn` is true if at
% least one of the guards `G1`, `G2`, ..., `Gn` evaluates to `true`.
</span><span class="nf">is_pet</span><span class="p">(</span><span class="nv">A</span><span class="p">)</span> <span class="k">when</span> <span class="nb">is_atom</span><span class="p">(</span><span class="nv">A</span><span class="p">),</span> <span class="p">(</span><span class="nv">A</span> <span class="o">=:=</span> <span class="n">dog</span><span class="p">);(</span><span class="nv">A</span> <span class="o">=:=</span> <span class="n">cat</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">true</span><span class="p">;</span>
<span class="nf">is_pet</span><span class="p">(</span><span class="nv">A</span><span class="p">)</span>                                             <span class="o">-&gt;</span> <span class="n">false</span><span class="p">.</span>

<span class="c">% Warning: not all valid Erlang expressions can be used as guard expressions;
% in particular, our `is_cat` and `is_dog` functions cannot be used within the
% guard sequence in `is_pet`'s definition. For a description of the
% expressions allowed in guard sequences, refer to the specific section
% in the Erlang reference manual:
% http://erlang.org/doc/reference_manual/expressions.html#guards
</span>

<span class="c">% Records provide a method for associating a name with a particular element in a
% tuple.
% Record definitions can be included in Erlang source code files or put in files
% with the extension `.hrl`, which are then included by Erlang source code
% files.
</span><span class="p">-</span><span class="ni">record</span><span class="p">(</span><span class="nl">todo</span><span class="p">,</span> <span class="p">{</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">reminder</span><span class="p">,</span>  <span class="c">% Default value
</span>  <span class="n">who</span> <span class="o">=</span> <span class="n">joe</span><span class="p">,</span>
  <span class="n">text</span>
<span class="p">}).</span>

<span class="c">% We have to read the record definitions into the shell before we can define a
% record. We use the shell function `rr` (short for read records) to do this.
</span><span class="nf">rr</span><span class="p">(</span><span class="s">"records.hrl"</span><span class="p">).</span>  <span class="c">% [todo]
</span>
<span class="c">% Creating and updating records:
</span><span class="nv">X</span> <span class="o">=</span> <span class="nl">#todo</span><span class="p">{}.</span>
<span class="c">% #todo{status = reminder, who = joe, text = undefined}
</span><span class="nv">X1</span> <span class="o">=</span> <span class="nl">#todo</span><span class="p">{</span><span class="n">status</span> <span class="o">=</span> <span class="n">urgent</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s">"Fix errata in book"</span><span class="p">}.</span>
<span class="c">% #todo{status = urgent, who = joe, text = "Fix errata in book"}
</span><span class="nv">X2</span> <span class="o">=</span> <span class="nv">X1</span><span class="nl">#todo</span><span class="p">{</span><span class="n">status</span> <span class="o">=</span> <span class="n">done</span><span class="p">}.</span>
<span class="c">% #todo{status = done, who = joe, text = "Fix errata in book"}
</span>
<span class="c">% `case` expressions.
% `filter` returns a list of all elements `X` in a list `L` for which `P(X)` is
% true.
</span><span class="nf">filter</span><span class="p">(</span><span class="nv">P</span><span class="p">,</span> <span class="p">[</span><span class="nv">H</span><span class="p">|</span><span class="nv">T</span><span class="p">])</span> <span class="o">-&gt;</span>
  <span class="k">case</span> <span class="nv">P</span><span class="p">(</span><span class="nv">H</span><span class="p">)</span> <span class="k">of</span>
    <span class="n">true</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="nv">H</span><span class="p">|</span><span class="nf">filter</span><span class="p">(</span><span class="nv">P</span><span class="p">,</span> <span class="nv">T</span><span class="p">)];</span>
    <span class="n">false</span> <span class="o">-&gt;</span> <span class="nf">filter</span><span class="p">(</span><span class="nv">P</span><span class="p">,</span> <span class="nv">T</span><span class="p">)</span>
  <span class="k">end</span><span class="p">;</span>
<span class="nf">filter</span><span class="p">(</span><span class="nv">P</span><span class="p">,</span> <span class="p">[])</span> <span class="o">-&gt;</span> <span class="p">[].</span>
<span class="nf">filter</span><span class="p">(</span><span class="k">fun</span><span class="p">(</span><span class="nv">X</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nv">X</span> <span class="ow">rem</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">end</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]).</span> <span class="c">% [2, 4]
</span>
<span class="c">% `if` expressions.
</span><span class="nf">max</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span> <span class="nv">Y</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="k">if</span>
    <span class="nv">X</span> <span class="o">&gt;</span> <span class="nv">Y</span> <span class="o">-&gt;</span> <span class="nv">X</span><span class="p">;</span>
    <span class="nv">X</span> <span class="o">&lt;</span> <span class="nv">Y</span> <span class="o">-&gt;</span> <span class="nv">Y</span><span class="p">;</span>
    <span class="n">true</span> <span class="o">-&gt;</span> <span class="n">nil</span>
  <span class="k">end</span><span class="p">.</span>

<span class="c">% Warning: at least one of the guards in the `if` expression must evaluate to
% `true`; otherwise, an exception will be raised.
</span>

<span class="c">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 3. Exceptions.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
</span>
<span class="c">% Exceptions are raised by the system when internal errors are encountered or
% explicitly in code by calling `throw(Exception)`, `exit(Exception)`, or
% `erlang:error(Exception)`.
</span><span class="nf">generate_exception</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="p">;</span>
<span class="nf">generate_exception</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nf">throw</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="nf">generate_exception</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">exit</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="nf">generate_exception</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="n">'EXIT'</span><span class="p">,</span> <span class="n">a</span><span class="p">};</span>
<span class="nf">generate_exception</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nn">erlang</span><span class="p">:</span><span class="nf">error</span><span class="p">(</span><span class="n">a</span><span class="p">).</span>

<span class="c">% Erlang has two methods of catching an exception. One is to enclose the call to
% the function that raises the exception within a `try...catch` expression.
</span><span class="nf">catcher</span><span class="p">(</span><span class="nv">N</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="k">try</span> <span class="nf">generate_exception</span><span class="p">(</span><span class="nv">N</span><span class="p">)</span> <span class="k">of</span>
    <span class="nv">Val</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="nv">N</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="nv">Val</span><span class="p">}</span>
  <span class="k">catch</span>
    <span class="nn">throw</span><span class="p">:</span><span class="nv">X</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="nv">N</span><span class="p">,</span> <span class="n">caught</span><span class="p">,</span> <span class="n">thrown</span><span class="p">,</span> <span class="nv">X</span><span class="p">};</span>
    <span class="nb">exit</span><span class="p">:</span><span class="nv">X</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="nv">N</span><span class="p">,</span> <span class="n">caught</span><span class="p">,</span> <span class="n">exited</span><span class="p">,</span> <span class="nv">X</span><span class="p">};</span>
    <span class="nn">error</span><span class="p">:</span><span class="nv">X</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="nv">N</span><span class="p">,</span> <span class="n">caught</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="nv">X</span><span class="p">}</span>
  <span class="k">end</span><span class="p">.</span>

<span class="c">% The other is to enclose the call in a `catch` expression. When you catch an
% exception, it is converted into a tuple that describes the error.
</span><span class="nf">catcher</span><span class="p">(</span><span class="nv">N</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">catch</span> <span class="nf">generate_exception</span><span class="p">(</span><span class="nv">N</span><span class="p">).</span>


<span class="c">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 4. Concurrency
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
</span>
<span class="c">% Erlang relies on the actor model for concurrency. All we need to write
% concurrent programs in Erlang are three primitives: spawning processes,
% sending messages and receiving messages.
</span>
<span class="c">% To start a new process, we use the `spawn` function, which takes a function
% as argument.
</span>
<span class="nv">F</span> <span class="o">=</span> <span class="k">fun</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span> <span class="k">end</span><span class="p">.</span> <span class="c">% #Fun&lt;erl_eval.20.67289768&gt;
</span><span class="nb">spawn</span><span class="p">(</span><span class="nv">F</span><span class="p">).</span> <span class="c">% &lt;0.44.0&gt;
</span>
<span class="c">% `spawn` returns a pid (process identifier); you can use this pid to send
% messages to the process. To do message passing, we use the `!` operator.
% For all of this to be useful, we need to be able to receive messages. This is
% achieved with the `receive` mechanism:
</span>
<span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">calculateGeometry</span><span class="p">).</span>
<span class="p">-</span><span class="ni">compile</span><span class="p">(</span><span class="n">export_all</span><span class="p">).</span>
<span class="nf">calculateArea</span><span class="p">()</span> <span class="o">-&gt;</span>
    <span class="k">receive</span>
      <span class="p">{</span><span class="n">rectangle</span><span class="p">,</span> <span class="nv">W</span><span class="p">,</span> <span class="nv">H</span><span class="p">}</span> <span class="o">-&gt;</span>
        <span class="nv">W</span> <span class="o">*</span> <span class="nv">H</span><span class="p">;</span>
      <span class="p">{</span><span class="n">circle</span><span class="p">,</span> <span class="nv">R</span><span class="p">}</span> <span class="o">-&gt;</span>
        <span class="mi">3</span><span class="p">.</span><span class="mi">14</span> <span class="o">*</span> <span class="nv">R</span> <span class="o">*</span> <span class="nv">R</span><span class="p">;</span>
      <span class="p">_</span> <span class="o">-&gt;</span>
        <span class="nn">io</span><span class="p">:</span><span class="nf">format</span><span class="p">(</span><span class="s">"We can only calculate area of rectangles or circles."</span><span class="p">)</span>
    <span class="k">end</span><span class="p">.</span>

<span class="c">% Compile the module and create a process that evaluates `calculateArea` in the
% shell.
</span><span class="nf">c</span><span class="p">(</span><span class="n">calculateGeometry</span><span class="p">).</span>
<span class="nv">CalculateArea</span> <span class="o">=</span> <span class="nb">spawn</span><span class="p">(</span><span class="n">calculateGeometry</span><span class="p">,</span> <span class="n">calculateArea</span><span class="p">,</span> <span class="p">[]).</span>
<span class="nv">CalculateArea</span> <span class="o">!</span> <span class="p">{</span><span class="n">circle</span><span class="p">,</span> <span class="mi">2</span><span class="p">}.</span> <span class="c">% 12.56000000000000049738
</span>
<span class="c">% The shell is also a process; you can use `self` to get the current pid.
</span><span class="nf">self</span><span class="p">().</span> <span class="c">% &lt;0.41.0&gt;
</span>
<span class="c">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 5. Testing with EUnit
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
</span>
<span class="c">% Unit tests can be written using EUnits's test generators and assert macros
</span><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">fib</span><span class="p">).</span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">fib</span><span class="o">/</span><span class="mi">1</span><span class="p">]).</span>
<span class="p">-</span><span class="ni">include_lib</span><span class="p">(</span><span class="s">"eunit/include/eunit.hrl"</span><span class="p">).</span>

<span class="nf">fib</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="p">;</span>
<span class="nf">fib</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="p">;</span>
<span class="nf">fib</span><span class="p">(</span><span class="nv">N</span><span class="p">)</span> <span class="k">when</span> <span class="nv">N</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">-&gt;</span> <span class="nf">fib</span><span class="p">(</span><span class="nv">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nf">fib</span><span class="p">(</span><span class="nv">N</span><span class="o">-</span><span class="mi">2</span><span class="p">).</span>

<span class="nf">fib_test_</span><span class="p">()</span> <span class="o">-&gt;</span>
    <span class="p">[</span><span class="o">?</span><span class="p">_</span><span class="nf">assert</span><span class="p">(</span><span class="nf">fib</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">=:=</span> <span class="mi">1</span><span class="p">),</span>
     <span class="o">?</span><span class="p">_</span><span class="nf">assert</span><span class="p">(</span><span class="nf">fib</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=:=</span> <span class="mi">1</span><span class="p">),</span>
     <span class="o">?</span><span class="p">_</span><span class="nf">assert</span><span class="p">(</span><span class="nf">fib</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">=:=</span> <span class="mi">2</span><span class="p">),</span>
     <span class="o">?</span><span class="p">_</span><span class="nf">assert</span><span class="p">(</span><span class="nf">fib</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">=:=</span> <span class="mi">3</span><span class="p">),</span>
     <span class="o">?</span><span class="p">_</span><span class="nf">assert</span><span class="p">(</span><span class="nf">fib</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">=:=</span> <span class="mi">5</span><span class="p">),</span>
     <span class="o">?</span><span class="p">_</span><span class="nf">assert</span><span class="p">(</span><span class="nf">fib</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">=:=</span> <span class="mi">8</span><span class="p">),</span>
     <span class="o">?</span><span class="p">_</span><span class="nf">assertException</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">function_clause</span><span class="p">,</span> <span class="nf">fib</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)),</span>
     <span class="o">?</span><span class="p">_</span><span class="nf">assert</span><span class="p">(</span><span class="nf">fib</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span> <span class="o">=:=</span> <span class="mi">2178309</span><span class="p">)</span>
    <span class="p">].</span>

<span class="c">% EUnit will automatically export to a test() function to allow running the tests
% in the erlang shell
</span><span class="nn">fib</span><span class="p">:</span><span class="nf">test</span><span class="p">()</span>

<span class="c">% The popular erlang build tool Rebar is also compatible with EUnit
% ```
% rebar eunit
% ```
</span>
</code></pre></div>
<h2>References</h2>

<ul>
<li><a href="http://learnyousomeerlang.com/">&ldquo;Learn You Some Erlang for great good!&rdquo;</a></li>
<li><a href="http://pragprog.com/book/jaerlang/programming-erlang">&ldquo;Programming Erlang: Software for a Concurrent World&rdquo; by Joe Armstrong</a></li>
<li><a href="http://www.erlang.org/doc/">Erlang/OTP Reference Documentation</a></li>
<li><a href="http://www.erlang.se/doc/programming_rules.shtml">Erlang - Programming Rules and Conventions</a></li>
</ul>

    <hr>
    <p>Got a suggestion? A correction, perhaps? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Open an Issue</a> on the Github Repo, or make a <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/erlang.html.markdown">pull request</a> yourself!
    </p>
    <p class="contributed">
    Originally contributed by Giovanni Cappellotto, and updated by <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/erlang.html.markdown">0 contributor(s)</a>.
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="http://giovanni.curlybrackets.it/">Giovanni Cappellotto</a>
    </p>

    <p>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-3525624-21'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
