<!DOCTYPE html lang="en-us" xml:lang="en-us" xmlns="http://www.w3.org/1999/xhtml">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="en-us">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn Fortran in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/fortran/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }

                if (theme === "dark" ) {
                    el.className = "dark";
                } else {
                    el.className = "light";
                }

                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (theme) {
                set_theme(theme);
              }
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.addEventListener("load", function(){
              load_theme();
            });
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Ffortran%2F&text=Learn+X+in+Y+minutes%2C+where+X%3DFortran">
        Share this page
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">Select theme:</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">light</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">dark</button>
  </div>
  <h1><a href="/">Learn X in Y minutes</a></h1>
  <h2>Where X=Fortran</h2>
    <p class="filelink">
    Get the code:
    <a href="/docs/files/learnfortran.f90">learnfortran.f90</a>
    </p>
  <div id="doc">
    <p>Fortran is one of the oldest computer languages. It was developed in the 1950s
by IBM for numeric calculations (Fortran is an abbreviation of &ldquo;Formula
Translation&rdquo;). Despite its age, it is still used for high-performance computing
such as weather prediction. However, the language has changed considerably over
the years, although mostly maintaining backwards compatibility; well known
versions are FORTRAN 77, Fortran 90, Fortran 95, Fortran 2003, Fortran 2008,
Fortran 2018 and Fortran 2023.</p>

<p>This overview will discuss the features of Fortran 2008 since it is the most
widely implemented of the more recent specifications and the later versions are
largely similar (by comparison FORTRAN 77 is a very different language).</p>
<div class="highlight"><pre class="highlight fortran"><code><span class="w">
</span><span class="c1">! This is a comment.</span><span class="w">

</span><span class="k">program</span><span class="w"> </span><span class="n">example</span><span class="w">         </span><span class="c1">! declare a program called example.</span><span class="w">

    </span><span class="c1">! Code can only exist inside programs, functions, subroutines or modules.</span><span class="w">
    </span><span class="c1">! Using indentation is not required but it is recommended.</span><span class="w">

    </span><span class="c1">! Declaring Variables</span><span class="w">
    </span><span class="c1">! ===================</span><span class="w">

    </span><span class="c1">! All declarations must come before statements and expressions.</span><span class="w">

    </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">       </span><span class="c1">! prevents dynamic declaration of variables (recommended!)</span><span class="w">
    </span><span class="c1">! Implicit none must be redeclared in every function/program/module...</span><span class="w">

    </span><span class="c1">! IMPORTANT - Fortran is case insensitive.</span><span class="w">
    </span><span class="kt">real</span><span class="w"> </span><span class="n">z</span><span class="w">
    </span><span class="kt">REAL</span><span class="w"> </span><span class="n">Z2</span><span class="w">

    </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w">        </span><span class="c1">! WARNING: default initial values are compiler dependent!</span><span class="w">
    </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2E12</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.01</span><span class="w">
    </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="w">
    </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">PI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.1415926535897931</span><span class="w">    </span><span class="c1">! declare a constant.</span><span class="w">
    </span><span class="kt">logical</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">.TRUE.</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">.FALSE.</span><span class="w">            </span><span class="c1">! boolean type.</span><span class="w">
    </span><span class="kt">complex</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">                         </span><span class="c1">! sqrt(-1)</span><span class="w">
    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">month</span><span class="w">                     </span><span class="c1">! string of 3 characters.</span><span class="w">

    </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w">                              </span><span class="c1">! declare an array of 6 reals.</span><span class="w">
    </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">dimension</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">arrayb</span><span class="w">                  </span><span class="c1">! another way to declare an array.</span><span class="w">
    </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">arrayc</span><span class="p">(</span><span class="mi">-10</span><span class="p">:</span><span class="mi">10</span><span class="p">)</span><span class="w">                     </span><span class="c1">! an array with a custom index.</span><span class="w">
    </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">array2d</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">                         </span><span class="c1">! multidimensional array.</span><span class="w">

    </span><span class="c1">! The '::' separators are not always necessary but are recommended.</span><span class="w">

    </span><span class="c1">! many other variable attributes also exist:</span><span class="w">
    </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">pointer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">p</span><span class="w">                            </span><span class="c1">! declare a pointer.</span><span class="w">

    </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">LP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">selected_real_kind</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
    </span><span class="kt">real</span><span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="n">LP</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">d</span><span class="w">                            </span><span class="c1">! long precision variable.</span><span class="w">

    </span><span class="c1">! WARNING: initialising variables during declaration causes problems</span><span class="w">
    </span><span class="c1">! in functions since this automatically implies the 'save' attribute</span><span class="w">
    </span><span class="c1">! whereby values are saved between function calls. In general, separate</span><span class="w">
    </span><span class="c1">! declaration and initialisation code except for constants!</span><span class="w">

    </span><span class="c1">! Strings</span><span class="w">
    </span><span class="c1">! =======</span><span class="w">

    </span><span class="kt">character</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a_char</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'i'</span><span class="w">
    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"qwerty"</span><span class="w">
    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">str_b</span><span class="w">
    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a_long_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"This is a long string."</span><span class="w">
    </span><span class="c1">!can have automatic counting of length using (len=*) but only for constants.</span><span class="w">

    </span><span class="n">str_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a_str</span><span class="p">//</span><span class="s2">" keyboard"</span><span class="w">      </span><span class="c1">! concatenate strings using // operator.</span><span class="w">

    </span><span class="c1">! Assignment &amp; Arithmetic</span><span class="w">
    </span><span class="c1">! =======================</span><span class="w">

    </span><span class="n">Z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">                           </span><span class="c1">! assign to variable z declared above (case insensitive).</span><span class="w">
    </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">11.54</span><span class="p">/(</span><span class="mf">2.3</span><span class="o">*</span><span class="mf">3.1</span><span class="p">)</span><span class="w">
    </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">**</span><span class="mi">3</span><span class="w">                        </span><span class="c1">! exponentiation</span><span class="w">

    </span><span class="c1">! Control Flow Statements &amp; Operators</span><span class="w">
    </span><span class="c1">! ===================================</span><span class="w">

    </span><span class="c1">! Single-line if statement</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w">               </span><span class="c1">! condition always need surrounding parentheses.</span><span class="w">

    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="p">/</span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">                </span><span class="c1">! z not equal to a</span><span class="w">
        </span><span class="c1">! Other symbolic comparisons are &lt; &gt; &lt;= &gt;= == /=</span><span class="w">
        </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w">
    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="ow">.GT.</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">         </span><span class="c1">! z greater than a</span><span class="w">
        </span><span class="c1">! Text equivalents to symbol operators are .LT. .GT. .LE. .GE. .EQ. .NE.</span><span class="w">
        </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="w">
    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">            </span><span class="c1">! 'then' must be on this line.</span><span class="w">
        </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="w">                       </span><span class="c1">! execution block must be on a new line.</span><span class="w">
    </span><span class="k">else</span><span class="w">
        </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">                          </span><span class="c1">! end statement needs the 'if' (or can use 'endif').</span><span class="w">

    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="ow">.NOT.</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="ow">.AND.</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">.OR.</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">z</span><span class="p">))</span><span class="w"> </span><span class="k">then</span><span class="w">    </span><span class="c1">! boolean operators.</span><span class="w">
        </span><span class="n">inner</span><span class="p">:</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="kc">.TRUE.</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">     </span><span class="c1">! can name if-construct.</span><span class="w">
            </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">inner</span><span class="w">                </span><span class="c1">! then must name endif statement.</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">

    </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="w">
    </span><span class="k">select</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">                     </span><span class="c1">! cases i == 0 or i == 1</span><span class="w">
        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">:</span><span class="mi">10</span><span class="p">)</span><span class="w">                     </span><span class="c1">! cases i is 2 to 10 inclusive.</span><span class="w">
        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="mi">11</span><span class="p">:)</span><span class="w">                      </span><span class="c1">! all cases where i&gt;=11</span><span class="w">
        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="n">default</span><span class="w">
        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">select</span><span class="w">

    </span><span class="n">month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'jan'</span><span class="w">
    </span><span class="c1">! Condition can be integer, logical or character type.</span><span class="w">
    </span><span class="c1">! Select constructions can also be named.</span><span class="w">
    </span><span class="n">monthly</span><span class="p">:</span><span class="k">select</span><span class="w"> </span><span class="k">case</span><span class="p">(</span><span class="n">month</span><span class="p">)</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="s2">"jan"</span><span class="p">)</span><span class="w">
        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="n">default</span><span class="w">
        </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">monthly</span><span class="w">

    </span><span class="k">do</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w">             </span><span class="c1">! loops from 2 to 10 (inclusive) in increments of 2.</span><span class="w">
        </span><span class="n">innerloop</span><span class="p">:</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="c1">! loops can be named too.</span><span class="w">
            </span><span class="k">exit</span><span class="w">                </span><span class="c1">! quits the loop.</span><span class="w">
        </span><span class="k">end</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="n">innerloop</span><span class="w">
        </span><span class="k">cycle</span><span class="w">                   </span><span class="c1">! jump to next loop iteration.</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">do</span><span class="w">

    </span><span class="c1">! Goto statement exists but it is heavily discouraged though.</span><span class="w">
    </span><span class="k">goto</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="k">stop</span><span class="w"> </span><span class="mi">1</span><span class="w">                      </span><span class="c1">! stops code immediately (returning specified condition code).</span><span class="w">
</span><span class="nl">10</span><span class="w">  </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">201</span><span class="w">                     </span><span class="c1">! this line is labeled as line 10</span><span class="w">

    </span><span class="c1">! Arrays</span><span class="w">
    </span><span class="c1">! ======</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">/)</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">]</span><span class="w">  </span><span class="c1">! using Fortran 2003 notation.</span><span class="w">
    </span><span class="n">arrayb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">10.2</span><span class="p">,</span><span class="w"> </span><span class="mf">3e3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.41</span><span class="p">,</span><span class="w"> </span><span class="mf">4e-5</span><span class="p">]</span><span class="w">
    </span><span class="n">array2d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">reshape</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span><span class="w"> </span><span class="mf">6.0</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">])</span><span class="w">

    </span><span class="c1">! Fortran array indexing starts from 1.</span><span class="w">
    </span><span class="c1">! (by default but can be defined differently for specific arrays).</span><span class="w">
    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">                </span><span class="c1">! take first element of array.</span><span class="w">
    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array2d</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">

    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">)</span><span class="w">         </span><span class="c1">! print all elements from 3rd to 5th (inclusive).</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">array2d</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p">:)</span><span class="w">      </span><span class="c1">! print first column of 2d array.</span><span class="w">

    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="o">*</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="w">         </span><span class="c1">! can apply mathematical expressions to arrays.</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="o">*</span><span class="n">array</span><span class="w">         </span><span class="c1">! array operations occur element-wise.</span><span class="w">
    </span><span class="c1">! array = array*array2d     ! these arrays would not be compatible.</span><span class="w">

    </span><span class="c1">! There are many built-in functions that operate on arrays.</span><span class="w">
    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">dot_product</span><span class="p">(</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="p">)</span><span class="w">   </span><span class="c1">! this is the dot product.</span><span class="w">
    </span><span class="c1">! Use matmul() for matrix maths.</span><span class="w">
    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">sum</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w">
    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">maxval</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="nb">minloc</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w">
    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">size</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="nb">shape</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w">
    </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">count</span><span class="p">(</span><span class="n">array</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w">

    </span><span class="c1">! Loop over an array (could have used Product() function normally).</span><span class="w">
    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="k">do</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nb">size</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w">
        </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="o">*</span><span class="n">array</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">do</span><span class="w">

    </span><span class="c1">! Conditionally execute element-wise assignments.</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">]</span><span class="w">
    </span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">array</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">
        </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="k">elsewhere</span><span class="p">(</span><span class="n">array</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">
        </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="k">elsewhere</span><span class="w">
        </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">where</span><span class="w">

    </span><span class="c1">! Implied-DO loops are a compact way to create arrays.</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)]</span><span class="w">       </span><span class="c1">! creates an array of [1,2,3,4,5,6]</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)]</span><span class="w">   </span><span class="c1">! creates an array of [1,3,5,7,9,11]</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[(</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)]</span><span class="w">    </span><span class="c1">! creates an array of [1,4,9,16,25,36]</span><span class="w">
    </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)]</span><span class="w">    </span><span class="c1">! creates an array of [4,5,4,5,4,5]</span><span class="w">

    </span><span class="c1">! Input/Output</span><span class="w">
    </span><span class="c1">! ============</span><span class="w">

    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w">                  </span><span class="c1">! print the variable 'b' to the command line</span><span class="w">

    </span><span class="c1">! We can format our printed output.</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="s2">"(I6)"</span><span class="p">,</span><span class="w"> </span><span class="mi">320</span><span class="w">           </span><span class="c1">! prints '   320'</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="s2">"(I6.4)"</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w">           </span><span class="c1">! prints '  0003'</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="s2">"(F6.3)"</span><span class="p">,</span><span class="w"> </span><span class="mf">4.32</span><span class="w">        </span><span class="c1">! prints ' 4.320'</span><span class="w">

    </span><span class="c1">! The letter indicates the expected type and the number afterwards gives</span><span class="w">
    </span><span class="c1">! the number of characters to use for printing the value.</span><span class="w">
    </span><span class="c1">! Letters can be I (integer), F (real), E (engineering format),</span><span class="w">
    </span><span class="c1">! L (logical), A (characters) ...</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="s2">"(I3)"</span><span class="p">,</span><span class="w"> </span><span class="mi">3200</span><span class="w">          </span><span class="c1">! print '***' since the number doesn't fit.</span><span class="w">

    </span><span class="c1">! we can have multiple format specifications.</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="s2">"(I5,F6.2,E6.2)"</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mf">43.41</span><span class="p">,</span><span class="w"> </span><span class="mf">43.41</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="s2">"(3I5)"</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="w">                       </span><span class="c1">! 3 repeats of integers (field width = 5).</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="s2">"(2(I5,F6.2))"</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mf">43.42</span><span class="p">,</span><span class="w"> </span><span class="mi">340</span><span class="p">,</span><span class="w"> </span><span class="mf">65.3</span><span class="w">     </span><span class="c1">! repeated grouping of formats.</span><span class="w">

    </span><span class="c1">! We can also read input from the terminal.</span><span class="w">
    </span><span class="k">read</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">v</span><span class="w">
    </span><span class="k">read</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"(2F6.2)"</span><span class="p">)</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w">                        </span><span class="c1">! read two numbers</span><span class="w">

    </span><span class="c1">! To write a file.</span><span class="w">
    </span><span class="k">open</span><span class="w"> </span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="o">=</span><span class="s2">"records.txt"</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="s2">"replace"</span><span class="p">)</span><span class="w">
    </span><span class="c1">! The file is referred to by a 'unit number', an integer that you pick in</span><span class="w">
    </span><span class="c1">! the range 9:99. Status can be one of {'old','replace','new'}.</span><span class="w">
    </span><span class="k">write</span><span class="w"> </span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="s2">"(F10.2,F10.2,F10.2)"</span><span class="p">)</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w">
    </span><span class="k">close</span><span class="w"> </span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="w">

    </span><span class="c1">! To read a file.</span><span class="w">
    </span><span class="k">open</span><span class="w"> </span><span class="p">(</span><span class="n">newunit</span><span class="o">=</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="o">=</span><span class="s2">"records.txt"</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="s2">"old"</span><span class="p">)</span><span class="w">
    </span><span class="c1">! The file is referred to by a 'new unit number', an integer that the compiler</span><span class="w">
    </span><span class="c1">! picks for you.</span><span class="w">
    </span><span class="k">read</span><span class="w"> </span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">fmt</span><span class="o">=</span><span class="s2">"(3F10.2)"</span><span class="p">)</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w">
    </span><span class="k">close</span><span class="w"> </span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="w">

    </span><span class="c1">! There are more features available than discussed here and alternative</span><span class="w">
    </span><span class="c1">! variants due to backwards compatibility with older Fortran versions.</span><span class="w">

    </span><span class="c1">! Built-in Functions</span><span class="w">
    </span><span class="c1">! ==================</span><span class="w">

    </span><span class="c1">! Fortran has around 200 functions/subroutines intrinsic to the language.</span><span class="w">
    </span><span class="c1">! Examples -</span><span class="w">
    </span><span class="k">call</span><span class="w"> </span><span class="nb">cpu_time</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="w">        </span><span class="c1">! sets 'v' to a time in seconds.</span><span class="w">
    </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">ior</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w">           </span><span class="c1">! bitwise OR of 2 integers.</span><span class="w">
    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">log10</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">            </span><span class="c1">! log base 10.</span><span class="w">
    </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">floor</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="w">            </span><span class="c1">! returns the closest integer less than or equal to x.</span><span class="w">
    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">aimag</span><span class="p">(</span><span class="n">w</span><span class="p">)</span><span class="w">            </span><span class="c1">! imaginary part of a complex number.</span><span class="w">

    </span><span class="c1">! Functions &amp; Subroutines</span><span class="w">
    </span><span class="c1">! =======================</span><span class="w">

    </span><span class="c1">! A subroutine runs some code on some input values and can cause</span><span class="w">
    </span><span class="c1">! side-effects or modify the input values.</span><span class="w">

    </span><span class="k">call</span><span class="w"> </span><span class="n">routine</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w">   </span><span class="c1">! subroutine call.</span><span class="w">

    </span><span class="c1">! A function takes a list of input parameters and returns a single value.</span><span class="w">
    </span><span class="c1">! However the input parameters may still be modified and side effects</span><span class="w">
    </span><span class="c1">! executed.</span><span class="w">

    </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w">       </span><span class="c1">! function call.</span><span class="w">

    </span><span class="c1">! Function calls can also be evoked within expressions.</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">func2</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w">

    </span><span class="c1">! A pure function is a function that doesn't modify its input parameters</span><span class="w">
    </span><span class="c1">! or cause any side-effects.</span><span class="w">
    </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func3</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w">

</span><span class="k">contains</span><span class="w">                    </span><span class="c1">! Zone for defining sub-programs internal to the program.</span><span class="w">

    </span><span class="c1">! Fortran has a couple of slightly different ways to define functions.</span><span class="w">

    </span><span class="kt">integer</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w">      </span><span class="c1">! a function returning an integer value.</span><span class="w">
        </span><span class="c1">! implicit none                 ! subvariable fields can no longer declare implicit none</span><span class="w">
        </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w">  </span><span class="c1">! type of input parameters defined inside the function.</span><span class="w">

        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">
            </span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">c</span><span class="w">            </span><span class="c1">! the return variable defaults to the function name.</span><span class="w">
            </span><span class="k">return</span><span class="w">                      </span><span class="c1">! can return the current value from the function at any time.</span><span class="w">
        </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">
        </span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">c</span><span class="w">

        </span><span class="c1">! Don't need a return statement at the end of a function.</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func</span><span class="w">

    </span><span class="k">function</span><span class="w"> </span><span class="n">func2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="w">   </span><span class="c1">! return variable declared to be 'f'.</span><span class="w">
        </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w">     </span><span class="c1">! can declare and enforce that variables</span><span class="w">
        </span><span class="c1">!are not modified by the function.</span><span class="w">
        </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">inout</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">c</span><span class="w">
        </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">f</span><span class="w">                    </span><span class="c1">! function return type declared inside the function.</span><span class="w">
        </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">cnt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">              </span><span class="c1">! GOTCHA - initialisation implies variable is</span><span class="w">
        </span><span class="c1">!saved between function calls.</span><span class="w">

        </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">c</span><span class="w">
        </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w">                           </span><span class="c1">! altering the value of an input variable.</span><span class="w">
        </span><span class="n">cnt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cnt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">                   </span><span class="c1">! count number of function calls.</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func2</span><span class="w">

    </span><span class="k">pure</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func3</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w">        </span><span class="c1">! a pure function can have no side-effects.</span><span class="w">
        </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w">
        </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">func3</span><span class="w">

        </span><span class="n">func3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">*</span><span class="n">b</span><span class="o">*</span><span class="n">c</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func3</span><span class="w">

    </span><span class="k">subroutine</span><span class="w"> </span><span class="n">routine</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="w">
        </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">inout</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">f</span><span class="w">
        </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="w">

        </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="n">d</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3</span><span class="o">*</span><span class="n">e</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">f</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">subroutine</span><span class="w"> </span><span class="n">routine</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">example</span><span class="w">                     </span><span class="c1">! End of Program Definition -----------------------</span><span class="w">

</span><span class="c1">! Functions and Subroutines declared externally to the program listing need</span><span class="w">
</span><span class="c1">! to be declared to the program using an Interface declaration (even if they</span><span class="w">
</span><span class="c1">! are in the same source file!) (see below). It is easier to define them within</span><span class="w">
</span><span class="c1">! the 'contains' section of a module or program.</span><span class="w">

</span><span class="k">elemental</span><span class="w"> </span><span class="kt">real</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func4</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="w">
</span><span class="c1">! An elemental function is a Pure function that takes a scalar input variable</span><span class="w">
</span><span class="c1">! but can also be used on an array where it will be separately applied to all</span><span class="w">
</span><span class="c1">! of the elements of an array and return a new array.</span><span class="w">
    </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a</span><span class="w">

    </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1.0</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func4</span><span class="w">

</span><span class="c1">! Modules</span><span class="w">
</span><span class="c1">! =======</span><span class="w">

</span><span class="c1">! A module is a useful way to collect related declarations, functions and</span><span class="w">
</span><span class="c1">! subroutines together for reusability.</span><span class="w">

</span><span class="k">module</span><span class="w"> </span><span class="n">fruit</span><span class="w">

    </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">apple</span><span class="w">
    </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">pear</span><span class="w">
    </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">orange</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">module</span><span class="w"> </span><span class="n">fruit</span><span class="w">

</span><span class="k">module</span><span class="w"> </span><span class="n">fruity</span><span class="w">
    </span><span class="c1">! Declarations must be in the order: modules, interfaces, variables.</span><span class="w">
    </span><span class="c1">! (can declare modules and interfaces in programs too).</span><span class="w">

    </span><span class="k">use</span><span class="w"> </span><span class="n">fruit</span><span class="p">,</span><span class="w"> </span><span class="k">only</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="p">,</span><span class="w"> </span><span class="n">pear</span><span class="w">    </span><span class="c1">! use apple and pear from fruit module.</span><span class="w">
    </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">                   </span><span class="c1">! comes after module imports.</span><span class="w">

    </span><span class="k">private</span><span class="w">                         </span><span class="c1">! make things private to the module (default is public).</span><span class="w">
    </span><span class="c1">! Declare some variables/functions explicitly public.</span><span class="w">
    </span><span class="k">public</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">apple</span><span class="p">,</span><span class="w"> </span><span class="n">mycar</span><span class="p">,</span><span class="w"> </span><span class="n">create_mycar</span><span class="w">
    </span><span class="c1">! Declare some variables/functions private to the module (redundant here).</span><span class="w">
    </span><span class="k">private</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">func4</span><span class="w">

    </span><span class="c1">! Interfaces</span><span class="w">
    </span><span class="c1">! ==========</span><span class="w">
    </span><span class="c1">! Explicitly declare an external function/procedure within the module</span><span class="w">
    </span><span class="c1">! (better in general to put functions/procedures in the 'contains' section).</span><span class="w">
    </span><span class="k">interface</span><span class="w">
        </span><span class="k">elemental</span><span class="w"> </span><span class="kt">real</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func4</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="w">
            </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">a</span><span class="w">
        </span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">func4</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">interface</span><span class="w">

    </span><span class="c1">! Overloaded functions can be defined using named interfaces.</span><span class="w">
    </span><span class="k">interface</span><span class="w"> </span><span class="n">myabs</span><span class="w">
        </span><span class="c1">! Can use 'module procedure' keyword to include functions already</span><span class="w">
        </span><span class="c1">! defined within the module.</span><span class="w">
        </span><span class="k">module</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">real_abs</span><span class="p">,</span><span class="w"> </span><span class="n">complex_abs</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">interface</span><span class="w">

    </span><span class="c1">! Derived Data Types</span><span class="w">
    </span><span class="c1">! ==================</span><span class="w">
    </span><span class="c1">! Can create custom structured data collections.</span><span class="w">
    </span><span class="k">type</span><span class="w"> </span><span class="n">car</span><span class="w">
        </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">model</span><span class="w">
        </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">weight</span><span class="w">              </span><span class="c1">! (kg)</span><span class="w">
        </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">dimensions</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w">       </span><span class="c1">! i.e. length-width-height (metres).</span><span class="w">
        </span><span class="kt">character</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">colour</span><span class="w">
    </span><span class="k">contains</span><span class="w">
        </span><span class="k">procedure</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">info</span><span class="w">           </span><span class="c1">! bind a procedure to a type.</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="n">car</span><span class="w">

    </span><span class="k">type</span><span class="p">(</span><span class="n">car</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">mycar</span><span class="w">              </span><span class="c1">! declare a variable of your custom type.</span><span class="w">
    </span><span class="c1">! See create_mycar() routine for usage.</span><span class="w">

    </span><span class="c1">! Note: There are no executable statements in modules.</span><span class="w">

</span><span class="k">contains</span><span class="w">

    </span><span class="k">subroutine</span><span class="w"> </span><span class="n">create_mycar</span><span class="p">(</span><span class="n">mycar</span><span class="p">)</span><span class="w">
        </span><span class="c1">! Demonstrates usage of a derived data type.</span><span class="w">
        </span><span class="k">type</span><span class="p">(</span><span class="n">car</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">out</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">mycar</span><span class="w">

        </span><span class="c1">! Access type elements using '%' operator.</span><span class="w">
        </span><span class="n">mycar</span><span class="o">%</span><span class="n">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Ford Prefect"</span><span class="w">
        </span><span class="n">mycar</span><span class="o">%</span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'r'</span><span class="w">
        </span><span class="n">mycar</span><span class="o">%</span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1400</span><span class="w">
        </span><span class="n">mycar</span><span class="o">%</span><span class="n">dimensions</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5.0</span><span class="w">   </span><span class="c1">! default indexing starts from 1!</span><span class="w">
        </span><span class="n">mycar</span><span class="o">%</span><span class="n">dimensions</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.0</span><span class="w">
        </span><span class="n">mycar</span><span class="o">%</span><span class="n">dimensions</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.5</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">subroutine</span><span class="w"> </span><span class="n">create_mycar</span><span class="w">

    </span><span class="k">subroutine</span><span class="w"> </span><span class="n">info</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="w">
        </span><span class="k">class</span><span class="p">(</span><span class="n">car</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">self</span><span class="w">
        </span><span class="c1">! 'class' keyword used to bind a procedure to a type here.</span><span class="w">

        </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"Model     : "</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="o">%</span><span class="n">model</span><span class="w">
        </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"Colour    : "</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="o">%</span><span class="n">colour</span><span class="w">
        </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"Weight    : "</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="o">%</span><span class="n">weight</span><span class="w">
        </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"Dimensions: "</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="o">%</span><span class="n">dimensions</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">subroutine</span><span class="w"> </span><span class="n">info</span><span class="w">

    </span><span class="kt">real</span><span class="w"> </span><span class="k">pure</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">real_abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
        </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">x</span><span class="w">

        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">
            </span><span class="n">real_abs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">x</span><span class="w">
        </span><span class="k">else</span><span class="w">
            </span><span class="n">real_abs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w">
        </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">real_abs</span><span class="w">

    </span><span class="kt">real</span><span class="w"> </span><span class="k">pure</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">complex_abs</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="w">
        </span><span class="kt">complex</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">z</span><span class="w">
        </span><span class="c1">! long lines can be continued using the continuation character '&amp;'</span><span class="w">

        </span><span class="n">complex_abs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">sqrt</span><span class="p">(</span><span class="kt">real</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">&amp;</span><span class="w">
                           </span><span class="nb">aimag</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">complex_abs</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">module</span><span class="w"> </span><span class="n">fruity</span><span class="w">

</span></code></pre></div>
<h3>More Resources</h3>

<p>For more information on Fortran:</p>

<ul>
<li><a href="https://en.wikipedia.org/wiki/Fortran">wikipedia</a></li>
<li><a href="https://fortran-lang.org/">Fortran-lang Organization</a></li>
<li><a href="https://en.wikipedia.org/wiki/Fortran_95_language_features">Fortran<em>95</em>language_features</a></li>
<li><a href="http://fortranwiki.org">fortranwiki.org</a></li>
<li><a href="http://www.fortran90.org">www.fortran90.org/</a></li>
<li><a href="http://www.dmoz.org/Computers/Programming/Languages/Fortran/FAQs%2C_Help%2C_and_Tutorials/Fortran_90_and_95/">list of Fortran 95 tutorials</a></li>
<li><a href="https://en.wikibooks.org/wiki/Fortran">Fortran wikibook</a></li>
<li><a href="http://www.fortranplus.co.uk/resources/fortran_resources.pdf">Fortran resources</a></li>
<li><a href="http://www.cs.rpi.edu/~szymansk/OOF90/bugs.html">Mistakes in Fortran 90 Programs That Might Surprise You</a></li>
</ul>

    <hr>
    <p>Got a suggestion? A correction, perhaps? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Open an Issue</a> on the Github Repo, or make a <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/fortran.html.markdown">pull request</a> yourself!
    </p>
    <p class="contributed">
    Originally contributed by Robert Steed, and updated by <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/fortran.html.markdown">0 contributor(s)</a>.
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="https://github.com/robochat">Robert Steed</a>
    </p>

    <p>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-3525624-21'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
