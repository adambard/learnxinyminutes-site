<!DOCTYPE html lang="ms-my" xml:lang="ms-my" xmlns="http://www.w3.org/1999/xhtml">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="ms-my">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn Common Lisp in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/ms-my/common-lisp-my/">
        <script>
            var THEME_KEY = "lxiym_theme";
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];
                if (!el) {
                  return;
                }

                if (theme === "dark" ) {
                    el.className = "dark";
                } else {
                    el.className = "light";
                }

                localStorage.setItem(THEME_KEY, theme);
            }

            function load_theme() {
              var theme = localStorage.getItem(THEME_KEY);
              if (theme) {
                set_theme(theme);
              }
            }

            // Attempt immediate application of html style
            load_theme();

            // Backup: do it onload. Will flash, but better than nothing.
            window.addEventListener("load", function(){
              load_theme();
            });
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2Fms-my%2Fcommon-lisp-my%2F&text=Learn+X+in+Y+minutes%2C+where+X%3DCommon+Lisp">
        Share this page
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">Select theme:</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">light</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">dark</button>
  </div>
  <h1><a href="/">Learn X in Y minutes</a></h1>
  <h2>Where X=Common Lisp</h2>
    <p class="filelink">
    Get the code:
    <a href="/docs/files/commonlisp-ms.lisp">commonlisp-ms.lisp</a>
    </p>
  <div id="doc">
    <p>Common Lisp ialah programming language yang general-purpose (boleh digunakan untuk semua benda) dan multi-paradigm (konsep yang pelbagai) sesuai untuk pelbagai kegunaan di dalam
industri aplikasi. Common Lisp biasa digelar sebagai programmable programming language (programming language yang boleh di-program-kan).</p>

<p>Sumber bacaan yang klasik ialah <a href="http://www.gigamonkeys.com/book/">Practical Common Lisp</a>. Sumber bacaan yang lain dan
yang terbaru ialah <a href="http://landoflisp.com/">Land of Lisp</a>. Buku baru mengenai best practices (amalan terbaik),
<a href="http://weitz.de/cl-recipes/">Common Lisp Recipes</a>, baru sahaja diterbitkan.</p>
<div class="highlight"><pre class="highlight common_lisp"><code>
<span class="c1">;;;-----------------------------------------------------------------------------</span>
<span class="c1">;;; 0. Syntax</span>
<span class="c1">;;;-----------------------------------------------------------------------------</span>

<span class="c1">;;; General form (Bentuk umum)</span>

<span class="c1">;;; Ada dua asas dalam syntax CL: ATOM dan S-EXPRESSION.</span>
<span class="c1">;;; Kebiasaannya, gabungan S-expression dipanggil sebagai `forms`.</span>

<span class="mi">10</span>            <span class="c1">; atom; bermaksud seperti yang ditulis iaitu nombor 10</span>
<span class="ss">:thing</span>        <span class="c1">; juga atom; bermaksud simbol :thing</span>
<span class="no">t</span>             <span class="c1">; juga atom, bermaksud true (ya/betul/benar)</span>
<span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>   <span class="c1">; s-expression</span>
<span class="o">'</span><span class="p">(</span><span class="mi">4</span> <span class="ss">:foo</span> <span class="no">t</span><span class="p">)</span>   <span class="c1">; juga s-expression</span>


<span class="c1">;;; Comment (Komen)</span>

<span class="c1">;;; Comment satu baris bermula dengan semicolon; gunakan empat untuk comment</span>
<span class="c1">;;; mengenai file, tiga untuk seksyen penghuraian, dua untuk yang dalam definition,</span>
<span class="c1">;;; dan satu untuk satu baris. Sebagai contoh,</span>

<span class="c1">;;;; life.lisp</span>

<span class="c1">;;; Foo bar baz, disebabkan quu quux. Sangat optimum untuk krakaboom dan umph.</span>
<span class="c1">;;; Diperlukan oleh function LINULUKO. Ini merepek sahaja kebaboom.</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">meaning</span> <span class="p">(</span><span class="nv">life</span><span class="p">)</span>
  <span class="s">"Memulangkan hasil pengiraan makna KEHIDUPAN"</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">meh</span> <span class="s">"abc"</span><span class="p">))</span>
    <span class="c1">;; Jalankan krakaboom</span>
    <span class="p">(</span><span class="nb">loop</span> <span class="ss">:for</span> <span class="nv">x</span> <span class="ss">:across</span> <span class="nv">meh</span>
       <span class="ss">:collect</span> <span class="nv">x</span><span class="p">)))</span>                    <span class="c1">; Simpan hasil ke x, kemudian pulangkan</span>

<span class="c1">;;; Komen berbentuk blok, sebaliknya, membenarkan komen untuk bentuk bebas. Komen</span>
<span class="c1">;;; tersebut berada di antara #| dan |#</span>

<span class="cm">#| Ini adalah komen berbentuk blok di mana
   tulisan boleh ditulis dalam beberapa baris dan
    #|
       juga boleh dalam bentuk nested (berlapis-lapis)!
    |#
|#</span>


<span class="c1">;;; Environment (benda-benda yang diperlukan untuk program menggunakan Common Lisp)</span>

<span class="c1">;;; Common Lisp ada banyak jenis; kebanyakannya mengikut standard. SBCL</span>
<span class="c1">;;; ialah titik permulaan yang baik. Quicklisp boleh digunakan untuk install </span>
<span class="c1">;;; library third party.</span>

<span class="c1">;;; CL kebiasaannya digunakan dengan text editor dan Real Eval Print</span>
<span class="c1">;;; Loop (REPL) yang dilancarkan dengan serentak. REPL membolehkan kita menjelajah</span>
<span class="c1">;;; program secara interaktif semasa program tersebut sedang berjalan secara "live".</span>


<span class="c1">;;;-----------------------------------------------------------------------------</span>
<span class="c1">;;; 1. Datatype primitif dan operator</span>
<span class="c1">;;;-----------------------------------------------------------------------------</span>

<span class="c1">;;; Simbol</span>

<span class="ss">'foo</span> <span class="c1">; =&gt; FOO  Perhatikan simbol menjadi huruf besar secara automatik.</span>

<span class="c1">;;; INTERN menjadikan string sebagai simbol secara manual.</span>

<span class="p">(</span><span class="nb">intern</span> <span class="s">"AAAA"</span><span class="p">)</span>        <span class="c1">; =&gt; AAAA</span>
<span class="p">(</span><span class="nb">intern</span> <span class="s">"aaa"</span><span class="p">)</span>         <span class="c1">; =&gt; |aaa|</span>

<span class="c1">;;; Nombor</span>

<span class="mi">9999999999999999999999</span> <span class="c1">; integer</span>
<span class="m">#b111</span>                  <span class="c1">; binary =&gt; 7</span>
<span class="mo">#o111</span>                  <span class="c1">; octal =&gt; 73</span>
<span class="m">#x111</span>                  <span class="c1">; hexadecimal =&gt; 273</span>
<span class="mf">3.14159s0</span>              <span class="c1">; single</span>
<span class="mf">3.14159d0</span>              <span class="c1">; double</span>
<span class="mi">1/2</span>                    <span class="c1">; ratio</span>
<span class="m">#C</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>                <span class="c1">; complex number</span>

<span class="c1">;;; Function ditulis sebagai (f x y z ...) di mana f ialah function dan</span>
<span class="c1">;;; x, y, z, ... adalah argument.</span>

<span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>                <span class="c1">; =&gt; 3</span>

<span class="c1">;;; Jika anda ingin membuat data sebagai data bukannya function, gunakan QUOTE</span>
<span class="c1">;;; untuk mengelakkan data tersebut daripada dikira oleh program</span>

<span class="p">(</span><span class="k">quote</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>        <span class="c1">; =&gt; (+ 1 2)</span>
<span class="p">(</span><span class="k">quote</span> <span class="nv">a</span><span class="p">)</span>              <span class="c1">; =&gt; A</span>

<span class="c1">;;; Singkatan untuk QUOTE ialah ' (tanda petikan)</span>

<span class="o">'</span><span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>               <span class="c1">; =&gt; (+ 1 2)</span>
<span class="ss">'a</span>                     <span class="c1">; =&gt; A</span>

<span class="c1">;;; Operasi arithmetic asas</span>

<span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="mi">1</span><span class="p">)</span>                <span class="c1">; =&gt; 2</span>
<span class="p">(</span><span class="nb">-</span> <span class="mi">8</span> <span class="mi">1</span><span class="p">)</span>                <span class="c1">; =&gt; 7</span>
<span class="p">(</span><span class="nb">*</span> <span class="mi">10</span> <span class="mi">2</span><span class="p">)</span>               <span class="c1">; =&gt; 20</span>
<span class="p">(</span><span class="nb">expt</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>             <span class="c1">; =&gt; 8</span>
<span class="p">(</span><span class="nb">mod</span> <span class="mi">5</span> <span class="mi">2</span><span class="p">)</span>              <span class="c1">; =&gt; 1</span>
<span class="p">(</span><span class="nb">/</span> <span class="mi">35</span> <span class="mi">5</span><span class="p">)</span>               <span class="c1">; =&gt; 7</span>
<span class="p">(</span><span class="nb">/</span> <span class="mi">1</span> <span class="mi">3</span><span class="p">)</span>                <span class="c1">; =&gt; 1/3</span>
<span class="p">(</span><span class="nb">+</span> <span class="m">#C</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="m">#C</span><span class="p">(</span><span class="mi">6</span> <span class="mi">-4</span><span class="p">))</span>   <span class="c1">; =&gt; #C(7 -2)</span>

<span class="c1">;;; Boolean</span>

<span class="no">t</span>                      <span class="c1">; true; semua nilai yang bukan NIL ialah true</span>
<span class="no">nil</span>                    <span class="c1">; false; termasuklah list yang kosong: ()</span>
<span class="p">(</span><span class="nb">not</span> <span class="no">nil</span><span class="p">)</span>              <span class="c1">; =&gt; T</span>
<span class="p">(</span><span class="nb">and</span> <span class="mi">0</span> <span class="no">t</span><span class="p">)</span>              <span class="c1">; =&gt; T</span>
<span class="p">(</span><span class="nb">or</span> <span class="mi">0</span> <span class="no">nil</span><span class="p">)</span>             <span class="c1">; =&gt; 0</span>

<span class="c1">;;; Character</span>

<span class="sc">#\A</span>                    <span class="c1">; =&gt; #\A</span>
<span class="sc">#\λ</span>                    <span class="c1">; =&gt; #\GREEK_SMALL_LETTER_LAMDA</span>
<span class="sc">#\u03BB</span>                <span class="c1">; =&gt; #\GREEK_SMALL_LETTER_LAMDA</span>

<span class="c1">;;; String ialah array character yang tidak berubah panjang</span>

<span class="s">"Hello, world!"</span>
<span class="s">"Benjamin \"Bugsy\" Siegel"</span>   <span class="c1">; backslash ialah escape character</span>

<span class="c1">;;; String boleh digabungkan</span>

<span class="p">(</span><span class="nb">concatenate</span> <span class="ss">'string</span> <span class="s">"Hello, "</span> <span class="s">"world!"</span><span class="p">)</span> <span class="c1">; =&gt; "Hello, world!"</span>

<span class="c1">;;; String boleh diperlakukan seperti urutan character</span>

<span class="p">(</span><span class="nb">elt</span> <span class="s">"Apple"</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">; =&gt; #\A</span>

<span class="c1">;;; FORMAT digunakan untuk output mengikut format, daripada penggubahan string</span>
<span class="c1">;;; yang simple sehinggalah loop dan conditional. Argument pertama untuk FORMAT</span>
<span class="c1">;;; menentukan ke mana string akan pergi. Jika NIL, FORMAT</span>
<span class="c1">;;; akan pulangkan string sebagai data string; jika T, FORMAT akan output</span>
<span class="c1">;;; ke standard output, biasanya di screen, kemudian pulangkan NIL.</span>

<span class="p">(</span><span class="nb">format</span> <span class="no">nil</span> <span class="s">"~A, ~A!"</span> <span class="s">"Hello"</span> <span class="s">"world"</span><span class="p">)</span>   <span class="c1">; =&gt; "Hello, world!"</span>
<span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">"~A, ~A!"</span> <span class="s">"Hello"</span> <span class="s">"world"</span><span class="p">)</span>     <span class="c1">; =&gt; NIL</span>


<span class="c1">;;;-----------------------------------------------------------------------------</span>
<span class="c1">;;; 2. Variable</span>
<span class="c1">;;;-----------------------------------------------------------------------------</span>

<span class="c1">;;; Anda boleh membuat variable global (dynamically scoped) menggunakan DEFVAR dan</span>
<span class="c1">;;; DEFPARAMETER. Nama variable boleh guna mana-mana character kecuali: ()",'`;#|\</span>

<span class="c1">;;; Beza antara DEFVAR dengan DEFPARAMETER ialah DEFVAR tidak akan ubah nilai</span>
<span class="c1">;;; variable jika dijalankan semula. Manakala DEFPARAMETER, akan mengubah nilai</span>
<span class="c1">;;; jika dijalankan semula.</span>

<span class="c1">;;; Kebiasaannya, variable global diletakkan earmuff (asterisk) pada nama.</span>

<span class="p">(</span><span class="nb">defparameter</span> <span class="vg">*some-var*</span> <span class="mi">5</span><span class="p">)</span>
<span class="vg">*some-var*</span> <span class="c1">; =&gt; 5</span>

<span class="c1">;;; Anda juga boleh menggunakan character unicode.</span>
<span class="p">(</span><span class="nb">defparameter</span> <span class="nv">*A</span><span class="err">Λ</span><span class="nv">B*</span> <span class="no">nil</span><span class="p">)</span>

<span class="c1">;;; Variable yang tidak wujud boleh diakses tetapi akan menyebabkan undefined</span>
<span class="c1">;;; behavior. Jangan buat.</span>

<span class="c1">;;; Anda boleh membuat local binding menggunakan LET. Dalam snippet berikut, `me`</span>
<span class="c1">;;; terikat dengan "dance with you" hanya dalam (let ...). LET mesti akan pulangkan</span>
<span class="c1">;;; nilai `form` yang paling terakhir.</span>

<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">me</span> <span class="s">"dance with you"</span><span class="p">))</span> <span class="nv">me</span><span class="p">)</span> <span class="c1">; =&gt; "dance with you"</span>


<span class="c1">;;;-----------------------------------------------------------------------------;</span>
<span class="c1">;;; 3. Struct dan collection</span>
<span class="c1">;;;-----------------------------------------------------------------------------;</span>


<span class="c1">;;; Struct</span>

<span class="p">(</span><span class="nb">defstruct</span> <span class="nv">dog</span> <span class="nv">name</span> <span class="nv">breed</span> <span class="nv">age</span><span class="p">)</span>
<span class="p">(</span><span class="nb">defparameter</span> <span class="vg">*rover*</span>
    <span class="p">(</span><span class="nv">make-dog</span> <span class="ss">:name</span> <span class="s">"rover"</span>
              <span class="ss">:breed</span> <span class="s">"collie"</span>
              <span class="ss">:age</span> <span class="mi">5</span><span class="p">))</span>
<span class="vg">*rover*</span>            <span class="c1">; =&gt; #S(DOG :NAME "rover" :BREED "collie" :AGE 5)</span>
<span class="p">(</span><span class="nv">dog-p</span> <span class="vg">*rover*</span><span class="p">)</span>    <span class="c1">; =&gt; T</span>
<span class="p">(</span><span class="nv">dog-name</span> <span class="vg">*rover*</span><span class="p">)</span> <span class="c1">; =&gt; "rover"</span>

<span class="c1">;;; DOG-P, MAKE-DOG, dan DOG-NAME semuanya dibuat oleh DEFSTRUCT secara automatik</span>


<span class="c1">;;; Pair</span>

<span class="c1">;;; CONS membuat pair. CAR dan CDR pulangkan head (kepala) dan tail (ekor) CONS-pair.</span>

<span class="p">(</span><span class="nb">cons</span> <span class="ss">'SUBJECT</span> <span class="ss">'VERB</span><span class="p">)</span>         <span class="c1">; =&gt; '(SUBJECT . VERB)</span>
<span class="p">(</span><span class="nb">car</span> <span class="p">(</span><span class="nb">cons</span> <span class="ss">'SUBJECT</span> <span class="ss">'VERB</span><span class="p">))</span>   <span class="c1">; =&gt; SUBJECT</span>
<span class="p">(</span><span class="nb">cdr</span> <span class="p">(</span><span class="nb">cons</span> <span class="ss">'SUBJECT</span> <span class="ss">'VERB</span><span class="p">))</span>   <span class="c1">; =&gt; VERB</span>


<span class="c1">;;; List</span>

<span class="c1">;;; List ialah data structure linked-list, dihasilkan daripada pair CONS dan</span>
<span class="c1">;;; berakhir dengan NIL (atau '()) menandakan akhirnya list tersebut</span>

<span class="p">(</span><span class="nb">cons</span> <span class="mi">1</span> <span class="p">(</span><span class="nb">cons</span> <span class="mi">2</span> <span class="p">(</span><span class="nb">cons</span> <span class="mi">3</span> <span class="no">nil</span><span class="p">)))</span>     <span class="c1">; =&gt; '(1 2 3)</span>

<span class="c1">;;; LIST ialah constructor untuk memudahkan penghasilan list</span>

<span class="p">(</span><span class="nb">list</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>                       <span class="c1">; =&gt; '(1 2 3)</span>

<span class="c1">;;; Apabila argument pertama untuk CONS ialah atom dan argument kedua ialah</span>
<span class="c1">;;; list, CONS akan pulangkan CONS-pair baru dengan argument pertama sebagai</span>
<span class="c1">;;; item pertama dan argument kedua sebagai CONS-pair yang lain</span>

<span class="p">(</span><span class="nb">cons</span> <span class="mi">4</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>                  <span class="c1">; =&gt; '(4 1 2 3)</span>

<span class="c1">;;; Gunakan APPEND untuk menggabungkan list</span>

<span class="p">(</span><span class="nb">append</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="mi">3</span> <span class="mi">4</span><span class="p">))</span>             <span class="c1">; =&gt; '(1 2 3 4)</span>

<span class="c1">;;; Atau CONCATENATE</span>

<span class="p">(</span><span class="nb">concatenate</span> <span class="ss">'list</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="mi">3</span> <span class="mi">4</span><span class="p">))</span>  <span class="c1">; =&gt; '(1 2 3 4)</span>

<span class="c1">;;; List ialah type utama, jadi ada pelbagai function untuk mengendalikan</span>
<span class="c1">;;; list, contohnya:</span>

<span class="p">(</span><span class="nb">mapcar</span> <span class="nf">#'</span><span class="nb">1+</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>             <span class="c1">; =&gt; '(2 3 4)</span>
<span class="p">(</span><span class="nb">mapcar</span> <span class="nf">#'</span><span class="nb">+</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="mi">10</span> <span class="mi">20</span> <span class="mi">30</span><span class="p">))</span>  <span class="c1">; =&gt; '(11 22 33)</span>
<span class="p">(</span><span class="nb">remove-if-not</span> <span class="nf">#'</span><span class="nb">evenp</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span> <span class="c1">; =&gt; '(2 4)</span>
<span class="p">(</span><span class="nb">every</span> <span class="nf">#'</span><span class="nb">evenp</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span>         <span class="c1">; =&gt; NIL</span>
<span class="p">(</span><span class="nb">some</span> <span class="nf">#'</span><span class="nb">oddp</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span>           <span class="c1">; =&gt; T</span>
<span class="p">(</span><span class="nb">butlast</span> <span class="o">'</span><span class="p">(</span><span class="nv">subject</span> <span class="nv">verb</span> <span class="nv">object</span><span class="p">))</span>   <span class="c1">; =&gt; (SUBJECT VERB)</span>


<span class="c1">;;; Vector</span>

<span class="c1">;;; Vector ialah array yang tidak berubah panjang</span>

<span class="o">#(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">; =&gt; #(1 2 3)</span>

<span class="c1">;;; Gunakan CONCATENATE untuk menggabungkan vector</span>

<span class="p">(</span><span class="nb">concatenate</span> <span class="ss">'vector</span> <span class="o">#(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="o">#(</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">))</span> <span class="c1">; =&gt; #(1 2 3 4 5 6)</span>


<span class="c1">;;; Array</span>

<span class="c1">;;; Vector dan string adalah sejenis array.</span>

<span class="c1">;;; 2D array</span>

<span class="p">(</span><span class="nb">make-array</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">))</span>         <span class="c1">; =&gt; #2A((0 0) (0 0))</span>
<span class="p">(</span><span class="nb">make-array</span> <span class="o">'</span><span class="p">(</span><span class="mi">2</span> <span class="mi">2</span><span class="p">))</span>             <span class="c1">; =&gt; #2A((0 0) (0 0))</span>
<span class="p">(</span><span class="nb">make-array</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">))</span>       <span class="c1">; =&gt; #3A(((0 0) (0 0)) ((0 0) (0 0)))</span>

<span class="c1">;;; Perhatian: nilai awal MAKE-ARRAY adalah bergantung kepada jenis Common Lisp.</span>
<span class="c1">;;; Untuk meletakkan nilai awal secara manual:</span>

<span class="p">(</span><span class="nb">make-array</span> <span class="o">'</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="ss">:initial-element</span> <span class="ss">'unset</span><span class="p">)</span>  <span class="c1">; =&gt; #(UNSET UNSET)</span>

<span class="c1">;;; Untuk mengakses element di kedudukan 1, 1, 1:</span>

<span class="p">(</span><span class="nb">aref</span> <span class="p">(</span><span class="nb">make-array</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">))</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span><span class="p">)</span>     <span class="c1">;  =&gt; 0</span>


<span class="c1">;;; Adjustable vector (vector yang boleh berubah)</span>

<span class="c1">;;; Adjustable vector mempunyai rupa yang sama dengan</span>
<span class="c1">;;; vector yang tidak berubah panjang.</span>

<span class="p">(</span><span class="nb">defparameter</span> <span class="vg">*adjvec*</span> <span class="p">(</span><span class="nb">make-array</span> <span class="o">'</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="ss">:initial-contents</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
                                   <span class="ss">:adjustable</span> <span class="no">t</span> <span class="ss">:fill-pointer</span> <span class="no">t</span><span class="p">))</span>
<span class="vg">*adjvec*</span> <span class="c1">; =&gt; #(1 2 3)</span>

<span class="c1">;;; Tambah element baru</span>

<span class="p">(</span><span class="nb">vector-push-extend</span> <span class="mi">4</span> <span class="vg">*adjvec*</span><span class="p">)</span>   <span class="c1">; =&gt; 3</span>
<span class="vg">*adjvec*</span>                          <span class="c1">; =&gt; #(1 2 3 4)</span>


<span class="c1">;;; Set hanyalah list:</span>

<span class="p">(</span><span class="nb">set-difference</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span><span class="p">))</span>   <span class="c1">; =&gt; (3 2 1)</span>
<span class="p">(</span><span class="nb">intersection</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span><span class="p">))</span>     <span class="c1">; =&gt; 4</span>
<span class="p">(</span><span class="nb">union</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="o">'</span><span class="p">(</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span><span class="p">))</span>            <span class="c1">; =&gt; (3 2 1 4 5 6 7)</span>
<span class="p">(</span><span class="nb">adjoin</span> <span class="mi">4</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span>                    <span class="c1">; =&gt; (1 2 3 4)</span>

<span class="c1">;;; Tetapi, anda perlukan data structure yang lebih baik untuk digunakan dengan</span>
<span class="c1">;;; data set yang sangat banyak</span>

<span class="c1">;;; Kamus dibuat menggunakan hash table.</span>

<span class="c1">;;; Bina hash table</span>

<span class="p">(</span><span class="nb">defparameter</span> <span class="vg">*m*</span> <span class="p">(</span><span class="nb">make-hash-table</span><span class="p">))</span>

<span class="c1">;;; Tetapkan nilai</span>

<span class="p">(</span><span class="nb">setf</span> <span class="p">(</span><span class="nb">gethash</span> <span class="ss">'a</span> <span class="vg">*m*</span><span class="p">)</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1">;;; Baca nilai</span>

<span class="p">(</span><span class="nb">gethash</span> <span class="ss">'a</span> <span class="vg">*m*</span><span class="p">)</span> <span class="c1">; =&gt; 1, T</span>

<span class="c1">;;; CL boleh memulangkan beberapa nilai (multiple value).</span>

<span class="p">(</span><span class="nb">values</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">; =&gt; 1, 2</span>

<span class="c1">;;; dan boleh digunakan dengan MULTIPLE-VALUE-BIND untuk bind setiap nilai</span>

<span class="p">(</span><span class="nb">multiple-value-bind</span> <span class="p">(</span><span class="nv">x</span> <span class="nv">y</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">values</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">list</span> <span class="nv">y</span> <span class="nv">x</span><span class="p">))</span>

<span class="c1">; =&gt; '(2 1)</span>

<span class="c1">;;; GETHASH antara contoh function yang memulangkan multiple value. Value</span>
<span class="c1">;;; pertama ialah nilai untuk key dalam hash table; jika key tidak</span>
<span class="c1">;;; jumpa GETHASH akan pulangkan NIL.</span>

<span class="c1">;;; Value kedua menentukan sama ada key tersebut betul-betul wujud dalam hash</span>
<span class="c1">;;; table. Jika key tidak jumpa dalam table value tersebut ialah NIL. Cara ini</span>
<span class="c1">;;; membolehkan kita untuk periksa sama ada value untuk key ialah NIL.</span>

<span class="c1">;;; Dapatkan value yang tidak wujud akan pulangkan nil</span>

<span class="p">(</span><span class="nb">gethash</span> <span class="ss">'d</span> <span class="vg">*m*</span><span class="p">)</span> <span class="c1">;=&gt; NIL, NIL</span>

<span class="c1">;;; Anda boleh menentukan value default untuk key yang tidak wujud</span>

<span class="p">(</span><span class="nb">gethash</span> <span class="ss">'d</span> <span class="vg">*m*</span> <span class="ss">:not-found</span><span class="p">)</span> <span class="c1">; =&gt; :NOT-FOUND</span>

<span class="c1">;;; Jom lihat penggunaan multiple return value di dalam code.</span>

<span class="p">(</span><span class="nb">multiple-value-bind</span> <span class="p">(</span><span class="nv">a</span> <span class="nv">b</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">gethash</span> <span class="ss">'d</span> <span class="vg">*m*</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">))</span>
<span class="c1">; =&gt; (NIL NIL)</span>

<span class="p">(</span><span class="nb">multiple-value-bind</span> <span class="p">(</span><span class="nv">a</span> <span class="nv">b</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">gethash</span> <span class="ss">'a</span> <span class="vg">*m*</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">))</span>
<span class="c1">; =&gt; (1 T)</span>


<span class="c1">;;;-----------------------------------------------------------------------------</span>
<span class="c1">;;; 3. Function</span>
<span class="c1">;;;-----------------------------------------------------------------------------</span>

<span class="c1">;;; Gunakan LAMBDA untuk membuat anonymous function. Function sentiasa memulangkan</span>
<span class="c1">;;; value untuk expression terakhir.</span>

<span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="s">"Hello World"</span><span class="p">)</span> <span class="c1">; =&gt; #&lt;FUNCTION (LAMBDA ()) {1004E7818B}&gt;</span>

<span class="c1">;;; Gunakan FUNCALL untuk memanggil anonymous function</span>

<span class="p">(</span><span class="nb">funcall</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="s">"Hello World"</span><span class="p">))</span>   <span class="c1">; =&gt; "Hello World"</span>
<span class="p">(</span><span class="nb">funcall</span> <span class="nf">#'</span><span class="nb">+</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>                   <span class="c1">; =&gt; 6</span>

<span class="c1">;;; Panggilan kepada FUNCALL juga boleh terjadi apabila lambda tersebut ialah CAR</span>
<span class="c1">;;; (yang pertama) untuk list (yang tidak mempunyai tanda petikan)</span>

<span class="p">((</span><span class="k">lambda</span> <span class="p">()</span> <span class="s">"Hello World"</span><span class="p">))</span>           <span class="c1">; =&gt; "Hello World"</span>
<span class="p">((</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">val</span><span class="p">)</span> <span class="nv">val</span><span class="p">)</span> <span class="s">"Hello World"</span><span class="p">)</span>    <span class="c1">; =&gt; "Hello World"</span>

<span class="c1">;;; FUNCALL digunakan apabila argument sudah diketahui. Jika tidak, gunakan APPLY</span>

<span class="p">(</span><span class="nb">apply</span> <span class="nf">#'</span><span class="nb">+</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>   <span class="c1">; =&gt; 6</span>
<span class="p">(</span><span class="nb">apply</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="s">"Hello World"</span><span class="p">)</span> <span class="no">nil</span><span class="p">)</span> <span class="c1">; =&gt; "Hello World"</span>

<span class="c1">;;; Untuk menamakan sebuah function, guna DEFUN</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">hello-world</span> <span class="p">()</span> <span class="s">"Hello World"</span><span class="p">)</span>
<span class="p">(</span><span class="nv">hello-world</span><span class="p">)</span> <span class="c1">; =&gt; "Hello World"</span>

<span class="c1">;;; Simbol () di atas bermaksud list kepada argument</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">hello</span> <span class="p">(</span><span class="nv">name</span><span class="p">)</span> <span class="p">(</span><span class="nb">format</span> <span class="no">nil</span> <span class="s">"Hello, ~A"</span> <span class="nv">name</span><span class="p">))</span>
<span class="p">(</span><span class="nv">hello</span> <span class="s">"Steve"</span><span class="p">)</span> <span class="c1">; =&gt; "Hello, Steve"</span>

<span class="c1">;;; Function boleh ada argument optional (tidak wajib); argument tersebut bernilai</span>
<span class="c1">;;; NIL secara default</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">hello</span> <span class="p">(</span><span class="nv">name</span> <span class="k">&amp;optional</span> <span class="nv">from</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="nv">from</span>
      <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">"Hello, ~A, from ~A"</span> <span class="nv">name</span> <span class="nv">from</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">"Hello, ~A"</span> <span class="nv">name</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">hello</span> <span class="s">"Jim"</span> <span class="s">"Alpacas"</span><span class="p">)</span>       <span class="c1">; =&gt; Hello, Jim, from Alpacas</span>

<span class="c1">;;; Nilai default boleh ditetapkan untuk argument tersebut</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">hello</span> <span class="p">(</span><span class="nv">name</span> <span class="k">&amp;optional</span> <span class="p">(</span><span class="nv">from</span> <span class="s">"The world"</span><span class="p">))</span>
   <span class="p">(</span><span class="nb">format</span> <span class="no">nil</span> <span class="s">"Hello, ~A, from ~A"</span> <span class="nv">name</span> <span class="nv">from</span><span class="p">))</span>

<span class="p">(</span><span class="nv">hello</span> <span class="s">"Steve"</span><span class="p">)</span>               <span class="c1">; =&gt; Hello, Steve, from The world</span>
<span class="p">(</span><span class="nv">hello</span> <span class="s">"Steve"</span> <span class="s">"the alpacas"</span><span class="p">)</span> <span class="c1">; =&gt; Hello, Steve, from the alpacas</span>

<span class="c1">;;; Function juga mempunyai keyword argument untuk membolehkan argument diletakkan</span>
<span class="c1">;;; tidak mengikut kedudukan</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">generalized-greeter</span> <span class="p">(</span><span class="nv">name</span> <span class="k">&amp;key</span> <span class="p">(</span><span class="nv">from</span> <span class="s">"the world"</span><span class="p">)</span> <span class="p">(</span><span class="nv">honorific</span> <span class="s">"Mx"</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">"Hello, ~A ~A, from ~A"</span> <span class="nv">honorific</span> <span class="nv">name</span> <span class="nv">from</span><span class="p">))</span>

<span class="p">(</span><span class="nv">generalized-greeter</span> <span class="s">"Jim"</span><span class="p">)</span>
<span class="c1">; =&gt; Hello, Mx Jim, from the world</span>

<span class="p">(</span><span class="nv">generalized-greeter</span> <span class="s">"Jim"</span> <span class="ss">:from</span> <span class="s">"the alpacas you met last summer"</span> <span class="ss">:honorific</span> <span class="s">"Mr"</span><span class="p">)</span>
<span class="c1">; =&gt; Hello, Mr Jim, from the alpacas you met last summer</span>


<span class="c1">;;;-----------------------------------------------------------------------------</span>
<span class="c1">;;; 4. Kesamaan</span>
<span class="c1">;;;-----------------------------------------------------------------------------</span>

<span class="c1">;;; CL mempunyai sistem kesaksamaan yang canggih. Antaranya adalah seperti berikut.</span>

<span class="c1">;;; Untuk nombor, guna `='</span>
<span class="p">(</span><span class="nb">=</span> <span class="mi">3</span> <span class="mf">3.0</span><span class="p">)</span>               <span class="c1">; =&gt; T</span>
<span class="p">(</span><span class="nb">=</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">)</span>                 <span class="c1">; =&gt; NIL</span>

<span class="c1">;;; Untuk identiti object (lebih kurang) guna EQL</span>
<span class="p">(</span><span class="nb">eql</span> <span class="mi">3</span> <span class="mi">3</span><span class="p">)</span>               <span class="c1">; =&gt; T</span>
<span class="p">(</span><span class="nb">eql</span> <span class="mi">3</span> <span class="mf">3.0</span><span class="p">)</span>             <span class="c1">; =&gt; NIL</span>
<span class="p">(</span><span class="nb">eql</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">3</span><span class="p">))</span> <span class="c1">; =&gt; NIL</span>

<span class="c1">;;; untuk list, string, dan bit-vector, guna EQUAL</span>
<span class="p">(</span><span class="nb">equal</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'a</span> <span class="ss">'b</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'a</span> <span class="ss">'b</span><span class="p">))</span> <span class="c1">; =&gt; T</span>
<span class="p">(</span><span class="nb">equal</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'a</span> <span class="ss">'b</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'b</span> <span class="ss">'a</span><span class="p">))</span> <span class="c1">; =&gt; NIL</span>


<span class="c1">;;;-----------------------------------------------------------------------------</span>
<span class="c1">;;; 5. Control Flow</span>
<span class="c1">;;;-----------------------------------------------------------------------------</span>

<span class="c1">;;; Conditional (syarat)</span>

<span class="p">(</span><span class="k">if</span> <span class="no">t</span>                <span class="c1">; test expression</span>
    <span class="s">"this is true"</span>   <span class="c1">; then expression</span>
    <span class="s">"this is false"</span><span class="p">)</span> <span class="c1">; else expression</span>
<span class="c1">; =&gt; "this is true"</span>

<span class="c1">;;; Dalam conditional, semua value yang bukan NIL ialah true</span>

<span class="p">(</span><span class="nb">member</span> <span class="ss">'Groucho</span> <span class="o">'</span><span class="p">(</span><span class="nv">Harpo</span> <span class="nv">Groucho</span> <span class="nv">Zeppo</span><span class="p">))</span> <span class="c1">; =&gt; '(GROUCHO ZEPPO)</span>
<span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">member</span> <span class="ss">'Groucho</span> <span class="o">'</span><span class="p">(</span><span class="nv">Harpo</span> <span class="nv">Groucho</span> <span class="nv">Zeppo</span><span class="p">))</span>
    <span class="ss">'yep</span>
    <span class="ss">'nope</span><span class="p">)</span>
<span class="c1">; =&gt; 'YEP</span>

<span class="c1">;;; Guna COND untuk meletakkan beberapa test</span>
<span class="p">(</span><span class="nb">cond</span> <span class="p">((</span><span class="nb">&gt;</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nb">error</span> <span class="s">"wrong!"</span><span class="p">))</span>
      <span class="p">((</span><span class="nb">&lt;</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nb">error</span> <span class="s">"wrong again!"</span><span class="p">))</span>
      <span class="p">(</span><span class="no">t</span> <span class="ss">'ok</span><span class="p">))</span> <span class="c1">; =&gt; 'OK</span>

<span class="c1">;;; TYPECASE adalah seperti switch tetapi untuk data type value tersebut</span>
<span class="p">(</span><span class="nb">typecase</span> <span class="mi">1</span>
  <span class="p">(</span><span class="nb">string</span> <span class="ss">:string</span><span class="p">)</span>
  <span class="p">(</span><span class="nc">integer</span> <span class="ss">:int</span><span class="p">))</span>
<span class="c1">; =&gt; :int</span>


<span class="c1">;;; Loop</span>

<span class="c1">;;; Recursion</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">fact</span> <span class="p">(</span><span class="nv">n</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">n</span> <span class="mi">2</span><span class="p">)</span>
      <span class="mi">1</span>
    <span class="p">(</span><span class="nb">*</span> <span class="nv">n</span> <span class="p">(</span><span class="nv">fact</span><span class="p">(</span><span class="nb">-</span> <span class="nv">n</span> <span class="mi">1</span><span class="p">)))))</span>

<span class="p">(</span><span class="nv">fact</span> <span class="mi">5</span><span class="p">)</span> <span class="c1">; =&gt; 120</span>

<span class="c1">;;; Iteration</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">fact</span> <span class="p">(</span><span class="nv">n</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">loop</span> <span class="ss">:for</span> <span class="nv">result</span> <span class="nb">=</span> <span class="mi">1</span> <span class="ss">:then</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">result</span> <span class="nv">i</span><span class="p">)</span>
     <span class="ss">:for</span> <span class="nv">i</span> <span class="ss">:from</span> <span class="mi">2</span> <span class="ss">:to</span> <span class="nv">n</span>
     <span class="ss">:finally</span> <span class="p">(</span><span class="nb">return</span> <span class="nv">result</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">fact</span> <span class="mi">5</span><span class="p">)</span> <span class="c1">; =&gt; 120</span>

<span class="p">(</span><span class="nb">loop</span> <span class="ss">:for</span> <span class="nv">x</span> <span class="ss">:across</span> <span class="s">"abc"</span> <span class="ss">:collect</span> <span class="nv">x</span><span class="p">)</span>
<span class="c1">; =&gt; (#\a #\b #\c #\d)</span>

<span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nv">i</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">"~A"</span> <span class="nv">i</span><span class="p">))</span>
<span class="c1">; =&gt; 1234</span>


<span class="c1">;;;-----------------------------------------------------------------------------</span>
<span class="c1">;;; 6. Mutation</span>
<span class="c1">;;;-----------------------------------------------------------------------------</span>

<span class="c1">;;; Guna SETF untuk meletakkan nilai baru untuk variable yang sedia ada. Ini sama</span>
<span class="c1">;;; seperti contoh hash table di atas.</span>

<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">variable</span> <span class="mi">10</span><span class="p">))</span>
    <span class="p">(</span><span class="nb">setf</span> <span class="nv">variable</span> <span class="mi">2</span><span class="p">))</span>
<span class="c1">; =&gt; 2</span>

<span class="c1">;;; Sebaik-baiknya kurangkan penggunaan destructive function dan elakkan</span>
<span class="c1">;;; mutation jika boleh.</span>


<span class="c1">;;;-----------------------------------------------------------------------------</span>
<span class="c1">;;; 7. Class dan object</span>
<span class="c1">;;;-----------------------------------------------------------------------------</span>

<span class="c1">;;; Takde dah class untuk haiwan. Jom buat Human-Powered Mechanical</span>
<span class="c1">;;; Conveyances (Kenderaan Mekanikal Berkuasa Manusia).</span>

<span class="p">(</span><span class="nb">defclass</span> <span class="nv">human-powered-conveyance</span> <span class="p">()</span>
  <span class="p">((</span><span class="nv">velocity</span>
    <span class="ss">:accessor</span> <span class="nv">velocity</span>
    <span class="ss">:initarg</span> <span class="ss">:velocity</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">average-efficiency</span>
    <span class="ss">:accessor</span> <span class="nv">average-efficiency</span>
   <span class="ss">:initarg</span> <span class="ss">:average-efficiency</span><span class="p">))</span>
  <span class="p">(</span><span class="ss">:documentation</span> <span class="s">"A human powered conveyance"</span><span class="p">))</span>

<span class="c1">;;; Argument untuk DEFCLASS, mengikut susunan ialah:</span>
<span class="c1">;;; 1. nama class</span>
<span class="c1">;;; 2. list untuk superclass</span>
<span class="c1">;;; 3. list untuk slot</span>
<span class="c1">;;; 4. specifier optional (tidak wajib)</span>

<span class="c1">;;; Apabile list untuk superclass tidak ditetapkan, list yang kosong bermaksud</span>
<span class="c1">;;; class standard-object. Ini *boleh* ditukar, kalau anda tahu apa yang anda buat.</span>
<span class="c1">;;; Baca Art of the Metaobject Protocol untuk maklumat lebih lanjut.</span>

<span class="p">(</span><span class="nb">defclass</span> <span class="nv">bicycle</span> <span class="p">(</span><span class="nv">human-powered-conveyance</span><span class="p">)</span>
  <span class="p">((</span><span class="nv">wheel-size</span>
    <span class="ss">:accessor</span> <span class="nv">wheel-size</span>
    <span class="ss">:initarg</span> <span class="ss">:wheel-size</span>
    <span class="ss">:documentation</span> <span class="s">"Diameter of the wheel."</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">height</span>
    <span class="ss">:accessor</span> <span class="nv">height</span>
    <span class="ss">:initarg</span> <span class="ss">:height</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">defclass</span> <span class="nv">recumbent</span> <span class="p">(</span><span class="nv">bicycle</span><span class="p">)</span>
  <span class="p">((</span><span class="nv">chain-type</span>
    <span class="ss">:accessor</span> <span class="nv">chain-type</span>
    <span class="ss">:initarg</span> <span class="ss">:chain-type</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">defclass</span> <span class="nv">unicycle</span> <span class="p">(</span><span class="nv">human-powered-conveyance</span><span class="p">)</span> <span class="no">nil</span><span class="p">)</span>

<span class="p">(</span><span class="nb">defclass</span> <span class="nv">canoe</span> <span class="p">(</span><span class="nv">human-powered-conveyance</span><span class="p">)</span>
  <span class="p">((</span><span class="nv">number-of-rowers</span>
    <span class="ss">:accessor</span> <span class="nv">number-of-rowers</span>
    <span class="ss">:initarg</span> <span class="ss">:number-of-rowers</span><span class="p">)))</span>

<span class="c1">;;; Panggilan DESCRIBE kepada class HUMAN-POWERED-CONVEYANCE di REPL akan memberi:</span>

<span class="p">(</span><span class="nb">describe</span> <span class="ss">'human-powered-conveyance</span><span class="p">)</span>

<span class="c1">; COMMON-LISP-USER::HUMAN-POWERED-CONVEYANCE</span>
<span class="c1">;  [symbol]</span>
<span class="c1">;</span>
<span class="c1">; HUMAN-POWERED-CONVEYANCE names the standard-class #&lt;STANDARD-CLASS</span>
<span class="c1">;                                                    HUMAN-POWERED-CONVEYANCE&gt;:</span>
<span class="c1">;  Documentation:</span>
<span class="c1">;    A human powered conveyance</span>
<span class="c1">;  Direct superclasses: STANDARD-OBJECT</span>
<span class="c1">;  Direct subclasses: UNICYCLE, BICYCLE, CANOE</span>
<span class="c1">;  Not yet finalized.</span>
<span class="c1">;  Direct slots:</span>
<span class="c1">;    VELOCITY</span>
<span class="c1">;      Readers: VELOCITY</span>
<span class="c1">;      Writers: (SETF VELOCITY)</span>
<span class="c1">;    AVERAGE-EFFICIENCY</span>
<span class="c1">;      Readers: AVERAGE-EFFICIENCY</span>
<span class="c1">;      Writers: (SETF AVERAGE-EFFICIENCY)</span>

<span class="c1">;;; Perhatikan apa yang berlaku. CL memang direka sebagai sistem interaktif.</span>

<span class="c1">;;; Untuk membuat method, jom kira berapa panjang lilitan untuk</span>
<span class="c1">;;; roda basikal menggunakan formula: C = d * pi</span>

<span class="p">(</span><span class="nb">defmethod</span> <span class="nv">circumference</span> <span class="p">((</span><span class="nv">object</span> <span class="nv">bicycle</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">*</span> <span class="nv">pi</span> <span class="p">(</span><span class="nv">wheel-size</span> <span class="nv">object</span><span class="p">)))</span>

<span class="c1">;;; Nilai PI memang sudah ada dalam CL</span>

<span class="c1">;;; Katakanlah kita ingin ambil tahu efficiency value (nilai keberkesanan)</span>
<span class="c1">;;; rower (pendayung) di dalam canoe (perahu) adalah berbentuk logarithmic. Ini</span>
<span class="c1">;;; boleh ditetapkan di dalam constructor/initializer.</span>

<span class="c1">;;; Untuk initialize instance selepas CL sudah siap construct:</span>

<span class="p">(</span><span class="nb">defmethod</span> <span class="nb">initialize-instance</span> <span class="ss">:after</span> <span class="p">((</span><span class="nv">object</span> <span class="nv">canoe</span><span class="p">)</span> <span class="k">&amp;rest</span> <span class="nv">args</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setf</span> <span class="p">(</span><span class="nv">average-efficiency</span> <span class="nv">object</span><span class="p">)</span>  <span class="p">(</span><span class="nb">log</span> <span class="p">(</span><span class="nb">1+</span> <span class="p">(</span><span class="nv">number-of-rowers</span> <span class="nv">object</span><span class="p">)))))</span>

<span class="c1">;;; Kemudian untuk construct sesebuah instance dan periksa purata efficiency...</span>

<span class="p">(</span><span class="nv">average-efficiency</span> <span class="p">(</span><span class="nb">make-instance</span> <span class="ss">'canoe</span> <span class="ss">:number-of-rowers</span> <span class="mi">15</span><span class="p">))</span>
<span class="c1">; =&gt; 2.7725887</span>


<span class="c1">;;;-----------------------------------------------------------------------------</span>
<span class="c1">;;; 8. Macro</span>
<span class="c1">;;;-----------------------------------------------------------------------------</span>

<span class="c1">;;; Macro membolehkan anda untuk menambah syntax language. CL tidak ada</span>
<span class="c1">;;; WHILE loop, tetapi, kita boleh mencipta syntax ter. Jika kita buat menggunakan</span>
<span class="c1">;;; naluri, kita akan dapat:</span>

<span class="p">(</span><span class="nb">defmacro</span> <span class="nv">while</span> <span class="p">(</span><span class="kt">condition</span> <span class="k">&amp;body</span> <span class="nv">body</span><span class="p">)</span>
    <span class="s">"While `condition` is true, `body` is executed.
`condition` is tested prior to each execution of `body`"</span>
    <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">block-name</span> <span class="p">(</span><span class="nb">gensym</span><span class="p">))</span> <span class="p">(</span><span class="nv">done</span> <span class="p">(</span><span class="nb">gensym</span><span class="p">)))</span>
        <span class="o">`</span><span class="p">(</span><span class="k">tagbody</span>
           <span class="o">,</span><span class="nv">block-name</span>
           <span class="p">(</span><span class="nb">unless</span> <span class="o">,</span><span class="kt">condition</span>
               <span class="p">(</span><span class="k">go</span> <span class="o">,</span><span class="nv">done</span><span class="p">))</span>
           <span class="p">(</span><span class="k">progn</span>
           <span class="o">,@</span><span class="nv">body</span><span class="p">)</span>
           <span class="p">(</span><span class="k">go</span> <span class="o">,</span><span class="nv">block-name</span><span class="p">)</span>
           <span class="o">,</span><span class="nv">done</span><span class="p">)))</span>

<span class="c1">;;; Jom lihat versi yang lebih high-level:</span>

<span class="p">(</span><span class="nb">defmacro</span> <span class="nv">while</span> <span class="p">(</span><span class="kt">condition</span> <span class="k">&amp;body</span> <span class="nv">body</span><span class="p">)</span>
    <span class="s">"While `condition` is true, `body` is executed.
`condition` is tested prior to each execution of `body`"</span>
  <span class="o">`</span><span class="p">(</span><span class="nb">loop</span> <span class="nv">while</span> <span class="o">,</span><span class="kt">condition</span>
         <span class="nb">do</span>
         <span class="p">(</span><span class="k">progn</span>
            <span class="o">,@</span><span class="nv">body</span><span class="p">)))</span>

<span class="c1">;;; Namun, dengan compiler yang modern, cara ini tidak diperlukan; form LOOP</span>
<span class="c1">;;; compile sama sahaja dan juga mudah dibaca.</span>

<span class="c1">;;; Perhatikan ``` digunakan, sama juga `,` dan `@`. ``` ialah operator jenis quote</span>
<span class="c1">;;; yang dipanggil quasiquote; operator tersebut membolehkan penggunaan `,` .</span>
<span class="c1">;;; `,` membolehkan variable "di-unquote-kan". @ mengembangkan list.</span>

<span class="c1">;;; GENSYM membuat simbol unik yang pasti tidak wujud di tempat-tempat yang</span>
<span class="c1">;;; lain. Ini kerana macro dikembangkan semasa compile dan</span>
<span class="c1">;;; nama variable di dalam macro boleh bertembung dengan nama variable yang</span>
<span class="c1">;;; digunakan dalam code yang biasa.</span>

<span class="c1">;;; Baca Practical Common Lisp dan On Lisp untuk maklumat lebih lanjut mengenai macro.</span>
</code></pre></div>
<h2>Bacaan lanjut</h2>

<ul>
<li><a href="http://www.gigamonkeys.com/book/">Practical Common Lisp</a></li>
<li><a href="https://www.cs.cmu.edu/~dst/LispBook/book.pdf">Common Lisp: A Gentle Introduction to Symbolic Computation</a></li>
</ul>

<h2>Maklumat tambahan</h2>

<ul>
<li><a href="http://www.cliki.net/">CLiki</a></li>
<li><a href="https://common-lisp.net/">common-lisp.net</a></li>
<li><a href="https://github.com/CodyReichert/awesome-cl">Awesome Common Lisp</a></li>
<li><a href="http://lisp-lang.org/">Lisp Lang</a></li>
</ul>

<h2>Kredit</h2>

<p>Terima kasih banyak diucapkan kepada ahli Scheme yang membuat permulaan yang sangat
bagus dan mudah untuk diguna pakai untuk Common Lisp.</p>

<ul>
<li><a href="https://github.com/pkhuong">Paul Khuong</a> untuk review yang bagus.</li>
</ul>

    <hr>
    <p>Got a suggestion? A correction, perhaps? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Open an Issue</a> on the Github Repo, or make a <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/ms-my/common-lisp-my.html.markdown">pull request</a> yourself!
    </p>
    <p class="contributed">
    Originally contributed by Paul Nathan, and updated by <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/ms-my/common-lisp-my.html.markdown">1 contributor(s)</a>.
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2024
        <a href="https://github.com/pnathan">Paul Nathan</a>,
        <a href="https://ebzzry.io">Rommel Martinez</a>
    </p>

    <p>
      Translated by:
        <a href="https://github.com/burhanloey">Burhanuddin Baharuddin</a>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-3525624-21'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
